!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(e.s=36)}([function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,i=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,r),t}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function a(){var t;try{t=e.storage.debug}catch(n){}return t}function c(){try{return window.localStorage}catch(t){}}e=t.exports=n(37),e.log=i,e.formatArgs=o,e.save=s,e.load=a,e.useColors=r,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e){function n(){u=!1,s.length?c=s.concat(c):l=-1,c.length&&r()}function r(){if(!u){var t=setTimeout(n);u=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,u=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function i(){}var s,a=t.exports={},c=[],u=!1,l=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||u||setTimeout(r,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=i,a.addListener=i,a.once=i,a.off=i,a.removeListener=i,a.removeAllListeners=i,a.emit=i,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){"use strict";function r(){i.call(this)}var o=n(0),i=n(19);o(r,i),r.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}},r.prototype.once=function(t,e){function n(){r.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}var r=this,o=!1;this.on(t,n)},r.prototype.emit=function(){var t=arguments[0],e=this._listeners[t];if(e){for(var n=arguments.length,r=new Array(n-1),o=1;n>o;o++)r[o-1]=arguments[o];for(var i=0;i<e.length;i++)e[i].apply(this,r)}},r.prototype.on=r.prototype.addListener=i.prototype.addEventListener,r.prototype.removeListener=i.prototype.removeEventListener,t.exports.EventEmitter=r},function(t,e,n){(function(e){"use strict";var r=n(18),o=function(){};"production"!==e.env.NODE_ENV&&(o=n(1)("sockjs-client:utils:url")),t.exports={getOrigin:function(t){if(!t)return null;var e=new r(t);if("file:"===e.protocol)return null;var n=e.port;return n||(n="https:"===e.protocol?"443":"80"),e.protocol+"//"+e.hostname+":"+n},isOriginEqual:function(t,e){var n=this.getOrigin(t)===this.getOrigin(e);return o("same",t,e,n),n},isSchemeEqual:function(t,e){return t.split(":")[0]===e.split(":")[0]},addPath:function(t,e){var n=t.split("?");return n[0]+e+(n[1]?"?"+n[1]:"")},addQuery:function(t,e){return t+(-1===t.indexOf("?")?"?"+e:"&"+e)}}}).call(e,n(2))},function(t,e,n){(function(t,r){var o;(function(){function i(t,e){function n(t){if(n[t]!==v)return n[t];var i;if("bug-string-char-index"==t)i="a"!="a"[0];else if("json"==t)i=n("json-stringify")&&n("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var u=e.stringify,l="function"==typeof u&&g;if(l){(s=function(){return 1}).toJSON=s;try{l="0"===u(0)&&"0"===u(new r)&&'""'==u(new o)&&u(b)===v&&u(v)===v&&u()===v&&"1"===u(s)&&"[1]"==u([s])&&"[null]"==u([v])&&"null"==u(null)&&"[null,null,null]"==u([v,b,null])&&u({a:[s,!0,!1,null,"\x00\b\n\f\r	"]})==a&&"1"===u(null,s)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new c(-1))}catch(f){l=!1}}i=l}if("json-parse"==t){var h=e.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){s=h(a);var d=5==s.a.length&&1===s.a[0];if(d){try{d=!h('"	"')}catch(f){}if(d)try{d=1!==h("01")}catch(f){}if(d)try{d=1!==h("1.")}catch(f){}}}}catch(f){d=!1}i=d}}return n[t]=!!i}t||(t=u.Object()),e||(e=u.Object());var r=t.Number||u.Number,o=t.String||u.String,s=t.Object||u.Object,c=t.Date||u.Date,l=t.SyntaxError||u.SyntaxError,f=t.TypeError||u.TypeError,h=t.Math||u.Math,d=t.JSON||u.JSON;"object"==typeof d&&d&&(e.stringify=d.stringify,e.parse=d.parse);var p,m,v,y=s.prototype,b=y.toString,g=new c(-0xc782b5b800cec);try{g=-109252==g.getUTCFullYear()&&0===g.getUTCMonth()&&1===g.getUTCDate()&&10==g.getUTCHours()&&37==g.getUTCMinutes()&&6==g.getUTCSeconds()&&708==g.getUTCMilliseconds()}catch(w){}if(!n("json")){var _="[object Function]",E="[object Date]",x="[object Number]",S="[object String]",O="[object Array]",T="[object Boolean]",N=n("bug-string-char-index");if(!g)var C=h.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(t,e){return k[e]+365*(t-1970)+C((t-1969+(e=+(e>1)))/4)-C((t-1901+e)/100)+C((t-1601+e)/400)};if((p=y.hasOwnProperty)||(p=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=b?p=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,p=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,p.call(this,t)}),m=function(t,e){var n,r,o,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(o in r)p.call(r,o)&&i++;return n=r=null,i?m=2==i?function(t,e){var n,r={},o=b.call(t)==_;for(n in t)o&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(t,n)||e(n)}:function(t,e){var n,r,o=b.call(t)==_;for(n in t)o&&"prototype"==n||!p.call(t,n)||(r="constructor"===n)||e(n);(r||p.call(t,n="constructor"))&&e(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(t,e){var n,o,i=b.call(t)==_,s=!i&&"function"!=typeof t.constructor&&a[typeof t.hasOwnProperty]&&t.hasOwnProperty||p;for(n in t)i&&"prototype"==n||!s.call(t,n)||e(n);for(o=r.length;n=r[--o];s.call(t,n)&&e(n));}),m(t,e)},!n("json-stringify")){var A={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},I="000000",L=function(t,e){return(I+(e||0)).slice(-t)},R="\\u00",P=function(t){for(var e='"',n=0,r=t.length,o=!N||r>10,i=o&&(N?t.split(""):t);r>n;n++){var s=t.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=A[s];break;default:if(32>s){e+=R+L(2,s.toString(16));break}e+=o?i[n]:t.charAt(n)}}return e+'"'},D=function(t,e,n,r,o,i,s){var a,c,u,l,h,d,y,g,w,_,N,k,A,I,R,U;try{a=e[t]}catch(M){}if("object"==typeof a&&a)if(c=b.call(a),c!=E||p.call(a,"toJSON"))"function"==typeof a.toJSON&&(c!=x&&c!=S&&c!=O||p.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&1/0>a){if(j){for(h=C(a/864e5),u=C(h/365.2425)+1970-1;j(u+1,0)<=h;u++);for(l=C((h-j(u,0))/30.42);j(u,l+1)<=h;l++);h=1+h-j(u,l),d=(a%864e5+864e5)%864e5,y=C(d/36e5)%24,g=C(d/6e4)%60,w=C(d/1e3)%60,_=d%1e3}else u=a.getUTCFullYear(),l=a.getUTCMonth(),h=a.getUTCDate(),y=a.getUTCHours(),g=a.getUTCMinutes(),w=a.getUTCSeconds(),_=a.getUTCMilliseconds();a=(0>=u||u>=1e4?(0>u?"-":"+")+L(6,0>u?-u:u):L(4,u))+"-"+L(2,l+1)+"-"+L(2,h)+"T"+L(2,y)+":"+L(2,g)+":"+L(2,w)+"."+L(3,_)+"Z"}else a=null;if(n&&(a=n.call(e,t,a)),null===a)return"null";if(c=b.call(a),c==T)return""+a;if(c==x)return a>-1/0&&1/0>a?""+a:"null";if(c==S)return P(""+a);if("object"==typeof a){for(I=s.length;I--;)if(s[I]===a)throw f();if(s.push(a),N=[],R=i,i+=o,c==O){for(A=0,I=a.length;I>A;A++)k=D(A,a,n,r,o,i,s),N.push(k===v?"null":k);U=N.length?o?"[\n"+i+N.join(",\n"+i)+"\n"+R+"]":"["+N.join(",")+"]":"[]"}else m(r||a,function(t){var e=D(t,a,n,r,o,i,s);e!==v&&N.push(P(t)+":"+(o?" ":"")+e)}),U=N.length?o?"{\n"+i+N.join(",\n"+i)+"\n"+R+"}":"{"+N.join(",")+"}":"{}";return s.pop(),U}};e.stringify=function(t,e,n){var r,o,i,s;if(a[typeof e]&&e)if((s=b.call(e))==_)o=e;else if(s==O){i={};for(var c,u=0,l=e.length;l>u;c=e[u++],s=b.call(c),(s==S||s==x)&&(i[c]=1));}if(n)if((s=b.call(n))==x){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else s==S&&(r=n.length<=10?n:n.slice(0,10));return D("",(c={},c[""]=t,c),o,i,r,"",[])}}if(!n("json-parse")){var U,M,B=o.fromCharCode,V={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},W=function(){throw U=M=null,l()},F=function(){for(var t,e,n,r,o,i=M,s=i.length;s>U;)switch(o=i.charCodeAt(U)){case 9:case 10:case 13:case 32:U++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=N?i.charAt(U):i[U],U++,t;case 34:for(t="@",U++;s>U;)if(o=i.charCodeAt(U),32>o)W();else if(92==o)switch(o=i.charCodeAt(++U)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=V[o],U++;break;case 117:for(e=++U,n=U+4;n>U;U++)o=i.charCodeAt(U),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||W();t+=B("0x"+i.slice(e,U));break;default:W()}else{if(34==o)break;for(o=i.charCodeAt(U),e=U;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++U);t+=i.slice(e,U)}if(34==i.charCodeAt(U))return U++,t;W();default:if(e=U,45==o&&(r=!0,o=i.charCodeAt(++U)),o>=48&&57>=o){for(48==o&&(o=i.charCodeAt(U+1),o>=48&&57>=o)&&W(),r=!1;s>U&&(o=i.charCodeAt(U),o>=48&&57>=o);U++);if(46==i.charCodeAt(U)){for(n=++U;s>n&&(o=i.charCodeAt(n),o>=48&&57>=o);n++);n==U&&W(),U=n}if(o=i.charCodeAt(U),101==o||69==o){for(o=i.charCodeAt(++U),43!=o&&45!=o||U++,n=U;s>n&&(o=i.charCodeAt(n),o>=48&&57>=o);n++);n==U&&W(),U=n}return+i.slice(e,U)}if(r&&W(),"true"==i.slice(U,U+4))return U+=4,!0;if("false"==i.slice(U,U+5))return U+=5,!1;if("null"==i.slice(U,U+4))return U+=4,null;W()}return"$"},q=function(t){var e,n;if("$"==t&&W(),"string"==typeof t){if("@"==(N?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=F(),"]"!=t;n||(n=!0))n&&(","==t?(t=F(),"]"==t&&W()):W()),","==t&&W(),e.push(q(t));return e}if("{"==t){for(e={};t=F(),"}"!=t;n||(n=!0))n&&(","==t?(t=F(),"}"==t&&W()):W()),","!=t&&"string"==typeof t&&"@"==(N?t.charAt(0):t[0])&&":"==F()||W(),e[t.slice(1)]=q(F());return e}W()}return t},J=function(t,e,n){var r=G(t,e,n);r===v?delete t[e]:t[e]=r},G=function(t,e,n){var r,o=t[e];if("object"==typeof o&&o)if(b.call(o)==O)for(r=o.length;r--;)J(o,r,n);else m(o,function(t){J(o,t,n)});return n.call(t,e,o)};e.parse=function(t,e){var n,r;return U=0,M=""+t,n=q(F()),"$"!=F()&&W(),U=M=null,e&&b.call(e)==_?G((r={},r[""]=n,r),"",e):n}}}return e.runInContext=i,e}var s=n(67),a={"function":!0,object:!0},c=a[typeof e]&&e&&!e.nodeType&&e,u=a[typeof window]&&window||this,l=c&&a[typeof t]&&t&&!t.nodeType&&"object"==typeof r&&r;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(u=l),c&&!s)i(u,c);else{var f=u.JSON,h=u.JSON3,d=!1,p=i(u,u.JSON3={noConflict:function(){return d||(d=!0,u.JSON=f,u.JSON3=h,f=h=null),p}});u.JSON={parse:p.parse,stringify:p.stringify}}s&&(o=function(){return p}.call(e,n,e,t),!(void 0!==o&&(t.exports=o)))}).call(this)}).call(e,n(68)(t),function(){return this}())},function(t,e,n){(function(e){"use strict";var r=n(8),o={},i=!1,s=e.chrome&&e.chrome.app&&e.chrome.app.runtime;t.exports={attachEvent:function(t,n){"undefined"!=typeof e.addEventListener?e.addEventListener(t,n,!1):e.document&&e.attachEvent&&(e.document.attachEvent("on"+t,n),e.attachEvent("on"+t,n))},detachEvent:function(t,n){"undefined"!=typeof e.addEventListener?e.removeEventListener(t,n,!1):e.document&&e.detachEvent&&(e.document.detachEvent("on"+t,n),e.detachEvent("on"+t,n))},unloadAdd:function(t){if(s)return null;var e=r.string(8);return o[e]=t,i&&setTimeout(this.triggerUnloadCallbacks,0),e},unloadDel:function(t){t in o&&delete o[t]},triggerUnloadCallbacks:function(){for(var t in o)o[t](),delete o[t]}};var a=function(){i||(i=!0,t.exports.triggerUnloadCallbacks())};s||t.exports.attachEvent("unload",a)}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";function r(t){return function(e,n,r){c("create ajax sender",e,n);var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var i=s.addPath(e,"/xhr_send"),a=new t("POST",i,n,o);return a.once("finish",function(t){return c("finish",t),a=null,200!==t&&204!==t?r(new Error("http status "+t)):void r()}),function(){c("abort"),a.close(),a=null;var t=new Error("Aborted");t.code=1e3,r(t)}}}function o(t,e,n,o){a.call(this,t,e,r(o),n,o)}var i=n(0),s=n(4),a=n(28),c=function(){};"production"!==e.env.NODE_ENV&&(c=n(1)("sockjs-client:ajax-based")),i(o,a),t.exports=o}).call(e,n(2))},function(t,e,n){"use strict";var r=n(62),o="abcdefghijklmnopqrstuvwxyz012345";t.exports={string:function(t){for(var e=o.length,n=r.randomBytes(t),i=[],s=0;t>s;s++)i.push(o.substr(n[s]%e,1));return i.join("")},number:function(t){return Math.floor(Math.random()*t)},numberString:function(t){var e=(""+(t-1)).length,n=new Array(e+1).join("0");return(n+this.number(t)).slice(-e)}}},function(t,e,n){"use strict";function r(t,e,n){i.call(this,t,e,n,{noCredentials:!0})}var o=n(0),i=n(23);o(r,i),r.enabled=i.enabled,t.exports=r},function(t,e){(function(e){"use strict";t.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(t){return!1}}}}).call(e,function(){return this}())},function(t,e,n){(function(e,r){"use strict";var o=n(6),i=n(5),s=n(10),a=function(){};"production"!==e.env.NODE_ENV&&(a=n(1)("sockjs-client:utils:iframe")),t.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){t.exports.WPrefix in r||(r[t.exports.WPrefix]={})},postMessage:function(e,n){r.parent!==r?r.parent.postMessage(i.stringify({windowId:t.exports.currentWindowId,type:e,data:n||""}),"*"):a("Cannot postMessage, no parent window.",e,n)},createIframe:function(t,e){var n,i,s=r.document.createElement("iframe"),c=function(){a("unattach"),clearTimeout(n);try{s.onload=null}catch(t){}s.onerror=null},u=function(){a("cleanup"),s&&(c(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),o.unloadDel(i))},l=function(t){a("onerror",t),s&&(u(),e(t))},f=function(t,e){a("post",t,e);try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(t,e)},0)}catch(n){}};return s.src=t,s.style.display="none",s.style.position="absolute",s.onerror=function(){l("onerror")},s.onload=function(){a("onload"),clearTimeout(n),n=setTimeout(function(){l("onload timeout")},2e3)},r.document.body.appendChild(s),n=setTimeout(function(){l("timeout")},15e3),i=o.unloadAdd(u),{post:f,cleanup:u,loaded:c}},createHtmlfile:function(e,n){var i,s,c,u=["Active"].concat("Object").join("X"),l=new r[u]("htmlfile"),f=function(){clearTimeout(i),c.onerror=null},h=function(){l&&(f(),o.unloadDel(s),c.parentNode.removeChild(c),c=l=null,CollectGarbage())},d=function(t){a("onerror",t),l&&(h(),n(t))},p=function(t,e){try{setTimeout(function(){c&&c.contentWindow&&c.contentWindow.postMessage(t,e)},0)}catch(n){}};l.open(),l.write('<html><script>document.domain="'+r.document.domain+'";</script></html>'),l.close(),l.parentWindow[t.exports.WPrefix]=r[t.exports.WPrefix];var m=l.createElement("div");return l.body.appendChild(m),c=l.createElement("iframe"),m.appendChild(c),c.src=e,c.onerror=function(){d("onerror")},i=setTimeout(function(){d("timeout")},15e3),s=o.unloadAdd(h),{post:p,cleanup:h,loaded:f}}},t.exports.iframeEnabled=!1,r.document&&(t.exports.iframeEnabled=("function"==typeof r.postMessage||"object"==typeof r.postMessage)&&!s.isKonqueror())}).call(e,n(2),function(){return this}())},function(t,e,n){(function(e){"use strict";function r(t,e){s(t),i.call(this);var n=this;this.bufferPosition=0,this.xo=new e("POST",t,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(t,e){s("finish",t,e),n._chunkHandler(t,e),n.xo=null;var r=200===t?"network":"permanent";s("close",r),n.emit("close",null,r),n._cleanup()})}var o=n(0),i=n(3).EventEmitter,s=function(){};"production"!==e.env.NODE_ENV&&(s=n(1)("sockjs-client:receiver:xhr")),o(r,i),r.prototype._chunkHandler=function(t,e){if(s("_chunkHandler",t),200===t&&e)for(var n=-1;;this.bufferPosition+=n+1){var r=e.slice(this.bufferPosition);if(n=r.indexOf("\n"),-1===n)break;var o=r.slice(0,n);o&&(s("message",o),this.emit("message",o))}},r.prototype._cleanup=function(){s("_cleanup"),this.removeAllListeners()},r.prototype.abort=function(){s("abort"),this.xo&&(this.xo.close(),s("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=r}).call(e,n(2))},function(t,e,n){"use strict";function r(t,e,n,r){i.call(this,t,e,n,r)}var o=n(0),i=n(23);o(r,i),r.enabled=i.enabled&&i.supportsCORS,t.exports=r},function(t,e){"use strict";function n(t){this.type=t}n.prototype.initEvent=function(t,e,n){return this.type=t,this.bubbles=e,this.cancelable=n,this.timeStamp=+new Date,this},n.prototype.stopPropagation=function(){},n.prototype.preventDefault=function(){},n.CAPTURING_PHASE=1,n.AT_TARGET=2,n.BUBBLING_PHASE=3,t.exports=n},function(t,e,n){(function(e){"use strict";var r=n(0),o=n(27),i=n(17);t.exports=function(t){function n(e,n){o.call(this,t.transportName,e,n)}return r(n,o),n.enabled=function(n,r){if(!e.document)return!1;var s=i.extend({},r);return s.sameOrigin=!0,t.enabled(s)&&o.enabled()},n.transportName="iframe-"+t.transportName,n.needBody=!0,n.roundTrips=o.roundTrips+t.roundTrips-1,n.facadeTransport=t,n}}).call(e,function(){return this}())},function(t,e,n){(function(e,r){"use strict";function o(t,e,n){l(t,e);var r=this;i.call(this),setTimeout(function(){r._start(t,e,n)},0)}var i=n(3).EventEmitter,s=n(0),a=n(6),c=n(10),u=n(4),l=function(){};"production"!==e.env.NODE_ENV&&(l=n(1)("sockjs-client:sender:xdr")),s(o,i),o.prototype._start=function(t,e,n){l("_start");var o=this,i=new r.XDomainRequest;e=u.addQuery(e,"t="+ +new Date),i.onerror=function(){l("onerror"),o._error()},i.ontimeout=function(){l("ontimeout"),o._error()},i.onprogress=function(){l("progress",i.responseText),o.emit("chunk",200,i.responseText)},i.onload=function(){l("load"),o.emit("finish",200,i.responseText),o._cleanup(!1)},this.xdr=i,this.unloadRef=a.unloadAdd(function(){o._cleanup(!0)});try{this.xdr.open(t,e),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch(s){this._error()}},o.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},o.prototype._cleanup=function(t){if(l("cleanup",t),this.xdr){if(this.removeAllListeners(),a.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,t)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},o.prototype.close=function(){l("close"),this._cleanup(!0)},o.enabled=!(!r.XDomainRequest||!c.hasDomain()),t.exports=o}).call(e,n(2),function(){return this}())},function(t,e){"use strict";t.exports={isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){if(!this.isObject(t))return t;for(var e,n,r=1,o=arguments.length;o>r;r++){e=arguments[r];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}}},function(t,e,n){"use strict";function r(t){var e=u.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]?e[3]:""}}function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);var u,f,h,d,p=c.test(t),m=typeof e,v=this,y=0;"object"!==m&&"string"!==m&&(n=e,e=null),n&&"function"!=typeof n&&(n=a.parse),e=s(e);var b=r(t);for(v.protocol=b.protocol||e.protocol||"",v.slashes=b.slashes||e.slashes,t=b.rest;y<l.length;y++)f=l[y],u=f[0],d=f[1],u!==u?v[d]=t:"string"==typeof u?~(h=t.indexOf(u))&&("number"==typeof f[2]?(v[d]=t.slice(0,h),t=t.slice(h+f[2])):(v[d]=t.slice(h),t=t.slice(0,h))):(h=u.exec(t))&&(v[d]=h[1],t=t.slice(0,t.length-h[0].length)),v[d]=v[d]||(f[3]||"port"===d&&p?e[d]||"":""),f[4]&&(v[d]=v[d].toLowerCase());n&&(v.query=n(v.query)),i(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(f=v.auth.split(":"),v.username=f[0]||"",v.password=f[1]||""),v.href=v.toString()}var i=n(40),s=n(66),a=n(39),c=/^\/(?!\/)/,u=/^([a-z0-9.+-]+:)?(\/\/)?(.*)$/i,l=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];o.prototype.set=function(t,e,n){var r=this;return"query"===t?("string"==typeof e&&e.length&&(e=(n||a.parse)(e)),r[t]=e):"port"===t?(r[t]=e,i(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="")):"hostname"===t?(r[t]=e,r.port&&(e+=":"+r.port),r.host=e):"host"===t?(r[t]=e,/\:\d+/.test(e)&&(e=e.split(":"),r.hostname=e[0],r.port=e[1])):"protocol"===t?(r.protocol=e,r.slashes=!n):r[t]=e,r.href=r.toString(),r},o.prototype.toString=function(t){t&&"function"==typeof t||(t=a.stringify);var e,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.hostname,n.port&&(o+=":"+n.port),o+=n.pathname,e="object"==typeof n.query?t(n.query):n.query,e&&(o+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(o+=n.hash),o},o.qs=a,o.location=s,t.exports=o},function(t,e){"use strict";function n(){this._listeners={}}n.prototype.addEventListener=function(t,e){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===n.indexOf(e)&&(n=n.concat([e])),this._listeners[t]=n},n.prototype.removeEventListener=function(t,e){var n=this._listeners[t];if(n){var r=n.indexOf(e);return-1!==r?void(n.length>1?this._listeners[t]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[t]):void 0}},n.prototype.dispatchEvent=function(){var t=arguments[0],e=t.type,n=1===arguments.length?[t]:Array.apply(null,arguments);if(this["on"+e]&&this["on"+e].apply(this,n),e in this._listeners)for(var r=this._listeners[e],o=0;o<r.length;o++)r[o].apply(this,n)},t.exports=n},function(t,e,n){(function(e){"use strict";function r(t,e){o.call(this);var n=this,r=+new Date;this.xo=new e("GET",t),this.xo.once("finish",function(t,e){var o,i;if(200===t){if(i=+new Date-r,e)try{o=s.parse(e)}catch(u){c("bad json",e)}a.isObject(o)||(o={})}n.emit("finish",o,i),n.removeAllListeners()})}var o=n(3).EventEmitter,i=n(0),s=n(5),a=n(17),c=function(){};"production"!==e.env.NODE_ENV&&(c=n(1)("sockjs-client:info-ajax")),i(r,o),r.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=r}).call(e,n(2))},function(t,e,n){"use strict";function r(t){var e=this;i.call(this),this.ir=new c(t,a),this.ir.once("finish",function(t,n){e.ir=null,e.emit("message",s.stringify([t,n]))})}var o=n(0),i=n(3).EventEmitter,s=n(5),a=n(9),c=n(20);o(r,i),r.transportName="iframe-info-receiver",r.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=r},function(t,e){(function(e){"use strict";t.exports=e.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(e,function(){return this}())},function(t,e,n){(function(e,r){"use strict";function o(t,e,n,r){l(t,e);var o=this;i.call(this),setTimeout(function(){o._start(t,e,n,r)},0)}var i=n(3).EventEmitter,s=n(0),a=n(6),c=n(4),u=e.XMLHttpRequest,l=function(){};"production"!==r.env.NODE_ENV&&(l=n(1)("sockjs-client:browser:xhr")),s(o,i),o.prototype._start=function(t,e,n,r){var i=this;try{this.xhr=new u}catch(s){}if(!this.xhr)return l("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();e=c.addQuery(e,"t="+ +new Date),this.unloadRef=a.unloadAdd(function(){l("unload cleanup"),i._cleanup(!0)});try{this.xhr.open(t,e,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){l("xhr timeout"),i.emit("finish",0,""),i._cleanup(!1)})}catch(f){return l("exception",f),this.emit("finish",0,""),void this._cleanup(!1)}if(r&&r.noCredentials||!o.supportsCORS||(l("withCredentials"),this.xhr.withCredentials="true"),r&&r.headers)for(var h in r.headers)this.xhr.setRequestHeader(h,r.headers[h]);this.xhr.onreadystatechange=function(){if(i.xhr){var t,e,n=i.xhr;switch(l("readyState",n.readyState),n.readyState){case 3:try{e=n.status,t=n.responseText}catch(r){}l("status",e),1223===e&&(e=204),200===e&&t&&t.length>0&&(l("chunk"),i.emit("chunk",e,t));break;case 4:e=n.status,l("status",e),1223===e&&(e=204),12005!==e&&12029!==e||(e=0),l("finish",e,n.responseText),i.emit("finish",e,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(f){i.emit("finish",0,""),i._cleanup(!1)}},o.prototype._cleanup=function(t){if(l("cleanup"),this.xhr){if(this.removeAllListeners(),a.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),t)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},o.prototype.close=function(){l("close"),this._cleanup(!0)},o.enabled=!!u;var f=["Active"].concat("Object").join("X");!o.enabled&&f in e&&(l("overriding xmlhttprequest"),u=function(){try{return new e[f]("Microsoft.XMLHTTP")}catch(t){return null}},o.enabled=!!new u);var h=!1;try{h="withCredentials"in new u}catch(d){}o.supportsCORS=h,t.exports=o}).call(e,function(){return this}(),n(2))},function(t,e){(function(e){t.exports=e.EventSource}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){if(!r.enabled())throw new Error("Transport created when disabled");i.call(this,t,"/eventsource",s,a)}var o=n(0),i=n(7),s=n(54),a=n(13),c=n(24);o(r,i),r.enabled=function(){return!!c},r.transportName="eventsource",r.roundTrips=2,t.exports=r},function(t,e,n){"use strict";function r(t){if(!i.enabled)throw new Error("Transport created when disabled");a.call(this,t,"/htmlfile",i,s)}var o=n(0),i=n(55),s=n(9),a=n(7);o(r,a),r.enabled=function(t){return i.enabled&&t.sameOrigin},r.transportName="htmlfile",r.roundTrips=2,t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,e,n){if(!r.enabled())throw new Error("Transport created when disabled");s.call(this);var o=this;this.origin=c.getOrigin(n),this.baseUrl=n,this.transUrl=e,this.transport=t,this.windowId=f.string(8);var i=c.addPath(n,"/iframe.html")+"#"+this.windowId;h(t,e,i),this.iframeObj=u.createIframe(i,function(t){h("err callback"),o.emit("close",1006,"Unable to load an iframe ("+t+")"),o.close()}),this.onmessageCallback=this._message.bind(this),l.attachEvent("message",this.onmessageCallback)}var o=n(0),i=n(5),s=n(3).EventEmitter,a=n(31),c=n(4),u=n(11),l=n(6),f=n(8),h=function(){};"production"!==e.env.NODE_ENV&&(h=n(1)("sockjs-client:transport:iframe")),o(r,s),r.prototype.close=function(){if(h("close"),this.removeAllListeners(),this.iframeObj){l.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(t){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},r.prototype._message=function(t){if(h("message",t.data),!c.isOriginEqual(t.origin,this.origin))return void h("not same origin",t.origin,this.origin);var e;try{e=i.parse(t.data)}catch(n){return void h("bad json",t.data)}if(e.windowId!==this.windowId)return void h("mismatched window id",e.windowId,this.windowId);switch(e.type){case"s":this.iframeObj.loaded(),this.postMessage("s",i.stringify([a,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",e.data);break;case"c":var r;try{r=i.parse(e.data)}catch(n){return void h("bad json",e.data)}this.emit("close",r[0],r[1]),this.close()}},r.prototype.postMessage=function(t,e){h("postMessage",t,e),this.iframeObj.post(i.stringify({windowId:this.windowId,type:t,data:e||""}),this.origin)},r.prototype.send=function(t){h("send",t),this.postMessage("m",t)},r.enabled=function(){return u.iframeEnabled},r.transportName="iframe",r.roundTrips=2,t.exports=r}).call(e,n(2))},function(t,e,n){(function(e){"use strict";function r(t,e,n,r,o){var u=i.addPath(t,e);c(u);var l=this;s.call(this,t,n),this.poll=new a(r,u,o),this.poll.on("message",function(t){c("poll message",t),l.emit("message",t)}),this.poll.once("close",function(t,e){c("poll close",t,e),l.poll=null,l.emit("close",t,e),l.close()})}var o=n(0),i=n(4),s=n(52),a=n(53),c=function(){};"production"!==e.env.NODE_ENV&&(c=n(1)("sockjs-client:sender-receiver")),o(r,s),r.prototype.close=function(){c("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null),this.stop()},t.exports=r}).call(e,n(2))},function(t,e,n){"use strict";function r(t){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,t,"/xhr_streaming",s,a)}var o=n(0),i=n(7),s=n(12),a=n(16);o(r,i),r.enabled=function(t){return t.cookie_needed||t.nullOrigin?!1:a.enabled&&t.sameScheme},r.transportName="xdr-streaming",r.roundTrips=2,t.exports=r},function(t,e,n){"use strict";function r(t){if(!c.enabled&&!a.enabled)throw new Error("Transport created when disabled");i.call(this,t,"/xhr",s,a)}var o=n(0),i=n(7),s=n(12),a=n(13),c=n(9);o(r,i),r.enabled=function(t){return t.nullOrigin?!1:c.enabled&&t.sameOrigin?!0:a.enabled},r.transportName="xhr-polling",r.roundTrips=2,t.exports=r},function(t,e){t.exports="1.1.0"},function(t,e){"use strict";function n(t){console.log(t)}function r(t){console.warn(t)}function o(t){console.error(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.debug=n,e.warn=r,e.error=o},function(t,e){"use strict";function n(t,e){""!==e?alert(e):document.getElementById("connect").disabled=t}function r(t,e){""!==e?alert(e):document.getElementById("disconnect").disabled=t}function o(t){document.getElementById("id");console.log("content:"+t)}Object.defineProperty(e,"__esModule",{value:!0}),e.setConnected=n,e.setDisconnected=r,e.setCountryChat=o},function(t,e,n){(function(e){"use strict";var r=n(49);t.exports=n(47)(r),"_sockjs_onload"in e&&setTimeout(e._sockjs_onload,1)}).call(e,function(){return this}())},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=r(o),s=n(3),a={VERSIONS:s.VERSIONS,client:function(t){var e=arguments.length<=1||void 0===arguments[1]?{protocols:s.VERSIONS.supportedProtocols()}:arguments[1],n=new WebSocket(t,e.protocols);return new i["default"](n,e)},over:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(i["default"],[null].concat(e)))}};e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,
r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(2),c=r(a),u=n(3),l=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{binary:!1,heartbeat:{outgoing:1e4,incoming:1e4},debug:!0}:arguments[1];o(this,t),this.ws=e,this.ws.binaryType="arraybuffer",this.binary=n.binary,this.hasDebug=n.debug,this.counter=0,this.connected=!1,this.heartbeat=n.heartbeat||{outgoing:0,incoming:0},this.maxWebSocketFrameSize=16384,this.subscriptions={},this.partialData=""}return s(t,[{key:"debug",value:function(){var t;this.hasDebug&&(t=console).log.apply(t,arguments)}},{key:"connect",value:function(){var t=this,e=this._parseConnect.apply(this,arguments),n=i(e,3),r=n[0],o=n[1],s=n[2];this.connectCallback=o,this.debug("Opening Web Socket..."),this.ws.onmessage=function(e){var n=e.data;if(e.data instanceof ArrayBuffer&&(n=(0,u.typedArrayToUnicodeString)(new Uint8Array(e.data))),t.serverActivity=Date.now(),n===u.BYTES.LF)return void t.debug("<<< PONG");t.debug("<<< "+n);var r=c["default"].unmarshall(t.partialData+n);t.partialData=r.partial,r.frames.forEach(function(e){switch(e.command){case"CONNECTED":t.debug("connected to server "+e.headers.server),t.connected=!0,t.version=e.headers.version,t._setupHeartbeat(e.headers),o&&o(e);break;case"MESSAGE":var n=e.headers.subscription,r=t.subscriptions[n]||t.onreceive;if(r){var i=t.version===u.VERSIONS.V1_2&&e.headers.ack||e.headers["message-id"];e.ack=t.ack.bind(t,i,n),e.nack=t.nack.bind(t,i,n),r(e)}else t.debug("Unhandled received MESSAGE: "+e);break;case"RECEIPT":t.onreceipt&&t.onreceipt(e);break;case"ERROR":s&&s(e);break;default:t.debug("Unhandled frame: "+e)}})},this.ws.onclose=function(e){t.debug("Whoops! Lost connection to "+t.ws.url+":",e),t._cleanUp(),s&&s(e)},this.ws.onopen=function(){t.debug("Web Socket Opened..."),r["accept-version"]=u.VERSIONS.supportedVersions(),r["heart-beat"]=[t.heartbeat.outgoing,t.heartbeat.incoming].join(","),t._transmit("CONNECT",r)}}},{key:"disconnect",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this._transmit("DISCONNECT",e),this.ws.onclose=null,this.ws.close(),this._cleanUp(),t&&t()}},{key:"send",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];n.destination=t,this._transmit("SEND",n,e)}},{key:"begin",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"tx-"+this.counter++:arguments[0];return this._transmit("BEGIN",{transaction:t}),{id:t,commit:this.commit.bind(this,t),abort:this.abort.bind(this,t)}}},{key:"commit",value:function(t){this._transmit("COMMIT",{transaction:t})}},{key:"abort",value:function(t){this._transmit("ABORT",{transaction:t})}},{key:"ack",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=this.version===u.VERSIONS.V1_2?"id":"message-id";n[r]=t,n.subscription=e,this._transmit("ACK",n)}},{key:"nack",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=this.version===u.VERSIONS.V1_2?"id":"message-id";n[r]=t,n.subscription=e,this._transmit("NACK",n)}},{key:"subscribe",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return n.id||(n.id="sub-"+this.counter++),n.destination=t,this.subscriptions[n.id]=e,this._transmit("SUBSCRIBE",n),{id:n.id,unsubscribe:this.unsubscribe.bind(this,n.id)}}},{key:"unsubscribe",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];delete this.subscriptions[t],e.id=t,this._transmit("UNSUBSCRIBE",e)}},{key:"_cleanUp",value:function(){this.connected=!1,clearInterval(this.pinger),clearInterval(this.ponger)}},{key:"_transmit",value:function(t,e,n){var r=c["default"].marshall(t,e,n);this.debug(">>> "+r),this._wsSend(r)}},{key:"_wsSend",value:function(t){for(this.binary&&(t=(0,u.unicodeStringToTypedArray)(t)),this.debug(">>> length "+t.length);;){if(!(t.length>this.maxWebSocketFrameSize))return this.ws.send(t);this.ws.send(t.slice(0,this.maxWebSocketFrameSize)),t=t.slice(this.maxWebSocketFrameSize),this.debug("remaining = "+t.length)}}},{key:"_setupHeartbeat",value:function(t){var e=this;if(this.version===u.VERSIONS.V1_1||this.version===u.VERSIONS.V1_2){var n=(t["heart-beat"]||"0,0").split(",").map(function(t){return parseInt(t,10)}),r=i(n,2),o=r[0],s=r[1];if(0!==this.heartbeat.outgoing&&0!==s){var a=Math.max(this.heartbeat.outgoing,s);this.debug("send PING every "+a+"ms"),this.pinger=setInterval(function(){e._wsSend(u.BYTES.LF),e.debug(">>> PING")},a)}0!==this.heartbeat.incoming&&0!==o&&!function(){var t=Math.max(e.heartbeat.incoming,o);e.debug("check PONG every "+t+"ms"),e.ponger=setInterval(function(){var n=Date.now()-e.serverActivity;n>2*t&&(e.debug("did not receive server activity for the last "+n+"ms"),e.ws.close())},t)}()}}},{key:"_parseConnect",value:function(){for(var t={},e=void 0,n=void 0,r=arguments.length,o=Array(r),i=0;r>i;i++)o[i]=arguments[i];switch(o.length){case 2:t=o[0],e=o[1];break;case 3:o[1]instanceof Function?(t=o[0],e=o[1],n=o[2]):(t.login=o[0],t.passcode=o[1],e=o[2]);break;case 4:t.login=o[0],t.passcode=o[1],e=o[2],n=o[3];break;default:t.login=o[0],t.passcode=o[1],e=o[2],n=o[3],t.host=o[4]}return[t,e,n]}}]),t}();e["default"]=l,t.exports=e["default"]},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),s=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=arguments.length<=2||void 0===arguments[2]?"":arguments[2];r(this,t),this.command=e,this.headers=n,this.body=o}return o(t,[{key:"toString",value:function(){var t=this,e=[this.command],n=this.headers["content-length"]===!1;return n&&delete this.headers["content-length"],Object.keys(this.headers).forEach(function(n){var r=t.headers[n];e.push(n+":"+r)}),this.body&&!n&&e.push("content-length:"+(0,i.sizeOfUTF8)(this.body)),e.push(i.BYTES.LF+this.body),e.join(i.BYTES.LF)}}],[{key:"unmarshallSingle",value:function(e){var n=e.search(new RegExp(i.BYTES.LF+i.BYTES.LF)),r=e.substring(0,n).split(i.BYTES.LF),o=r.shift(),s={},a="",c=n+2,u=!0,l=!1,f=void 0;try{for(var h,d=r.reverse()[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var p=h.value,m=p.indexOf(":");s[(0,i.trim)(p.substring(0,m))]=(0,i.trim)(p.substring(m+1))}}catch(v){l=!0,f=v}finally{try{!u&&d["return"]&&d["return"]()}finally{if(l)throw f}}if(s["content-length"]){var y=parseInt(s["content-length"],10);a=(""+e).substring(c,c+y)}else for(var b=null,g=c;g<e.length&&(b=e.charAt(g),b!==i.BYTES.NULL);g++)a+=b;return new t(o,s,a)}},{key:"unmarshall",value:function(e){var n=e.split(new RegExp(i.BYTES.NULL+i.BYTES.LF+"*")),r=n.slice(0,-1),o=n.slice(-1)[0],s={frames:r.map(function(e){return t.unmarshallSingle(e)}),partial:""};return o===i.BYTES.LF||-1!==o.search(RegExp(i.BYTES.NULL+i.BYTES.LF+"*$"))?s.frames.push(t.unmarshallSingle(o)):s.partial=o,s}},{key:"marshall",value:function(e,n,r){var o=new t(e,n,r);return o.toString()+i.BYTES.NULL}}]),t}();e["default"]=s,t.exports=e["default"]},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t){var e=encodeURIComponent(t),n=e.replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}),r=Array.prototype.map.call(n,function(t){return t.charCodeAt(0)});return new Uint8Array(r)}function o(t){var e=String.fromCharCode.apply(String,n(t)),r=e.replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n});return decodeURIComponent(r)}function i(t){return t?encodeURIComponent(t).match(/%..|./g).length:0}Object.defineProperty(e,"__esModule",{value:!0}),e.unicodeStringToTypedArray=r,e.typedArrayToUnicodeString=o,e.sizeOfUTF8=i;e.VERSIONS={V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.2,1.1,1.0"},supportedProtocols:function(){return["v10.stomp","v11.stomp","v12.stomp"]}},e.BYTES={LF:"\n",NULL:"\x00"},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")}}])})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function i(){var t="https://192.168.11.106/demo",e="/channel/country",n="/chat/country",r=1;this.client=null,this.connect=function(e){var n=new c["default"](t);this.client=l["default"].over(n),this.client.connect({},function(t){h.setConnected(!0,""),p.debug("Connected OK."+t),e&&e(!0)},function(t){var n=JSON.stringify(t);h.setConnected(!1,n),p.error("Connected Error."+n),e&&e(!1)})},this.disconnect=function(){null!==this.client?(this.client.disconnect(),this.subscribes=[],h.setDisconnected(!0,""),p.debug("Disconnected.")):(h.setDisconnected(!1,"Null client."),p.error("Null client."))},this.countryChat=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=t.time,i=(void 0===o?(new Date).toLocaleDateString():o,t.user,t.content),s=void 0===i?"":i;return null!==this.client&&this.client.connected?(void 0===this.client.subscriptions[r]&&(p.debug("Not subscribe country channel yet."),this.client.subscribe(e,function(t){t&&p.debug("subscribe:"+JSON.stringify(t))},{id:r})),void(""!==s&&this.client.send(n,s,{}))):(p.warn("Not connected."),void h.setCountryChat("!!!ERROR!!!Not connected"))}}function s(){var t=document.getElementById("enter");t&&t.addEventListener("keydown",function(t){13===t.keyCode&&(m.countryChat({content:t.target.value}),t.preventDefault())});var e=document.getElementById("connect");e&&e.addEventListener("click",function(t){t.target.disabled||m.connect()});var n=document.getElementById("disconnect");n&&n.addEventListener("click",function(t){t.target.disabled||m.disconnect()})}var a=n(34),c=o(a),u=n(35),l=o(u),f=n(33),h=r(f),d=n(32),p=r(d),m=new i;document.addEventListener("DOMContentLoaded",s)},function(t,e,n){function r(){return e.colors[l++%e.colors.length]}function o(t){function n(){}function o(){var t=o,n=+new Date,i=n-(u||n);t.diff=i,t.prev=u,t.curr=n,u=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var o=e.formatters[r];if("function"==typeof o){var i=s[a];n=o.call(t,i),s.splice(a,1),a--}return n}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var c=o.log||e.log||console.log.bind(console);c.apply(t,s)}n.enabled=!1,o.enabled=!0;var i=e.enabled(t)?o:n;return i.namespace=t,i}function i(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,o=0;r>o;o++)n[o]&&(t=n[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,r;for(n=0,r=e.skips.length;r>n;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;r>n;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=n(38),e.names=[],e.skips=[],e.formatters={};var u,l=0},function(t,e){function n(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(t){return t>=u?Math.round(t/u)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return i(t,u,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,n){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,l=365.25*u;t.exports=function(t,e){return e=e||{},"string"==typeof t?n(t):e["long"]?o(t):r(t)}},function(t,e){"use strict";function n(t){for(var e,n=/([^=?&]+)=([^&]*)/g,r={};e=n.exec(t);r[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return r}function r(t,e){e=e||"";var n=[];"string"!=typeof e&&(e="?");for(var r in t)o.call(t,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return n.length?e+n.join("&"):""}var o=Object.prototype.hasOwnProperty;e.stringify=r,e.parse=n},function(t,e){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,n){"use strict";function r(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var o=n(0),i=n(14);o(r,i),t.exports=r},function(t,e,n){"use strict";function r(t){i.call(this),this.initEvent("message",!1,!1),this.data=t}var o=n(0),i=n(14);o(r,i),t.exports=r},function(t,e,n){"use strict";function r(t){this._transport=t,t.on("message",this._transportMessage.bind(this)),t.on("close",this._transportClose.bind(this))}var o=n(5),i=n(11);r.prototype._transportClose=function(t,e){i.postMessage("c",o.stringify([t,e]))},r.prototype._transportMessage=function(t){i.postMessage("t",t)},r.prototype._send=function(t){this._transport.send(t)},r.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=r},function(t,e,n){(function(e){"use strict";var r=n(4),o=n(6),i=n(5),s=n(43),a=n(21),c=n(11),u=n(22),l=function(){};"production"!==e.env.NODE_ENV&&(l=n(1)("sockjs-client:iframe-bootstrap")),t.exports=function(t,e){var n={};e.forEach(function(t){t.facadeTransport&&(n[t.facadeTransport.transportName]=t.facadeTransport)}),n[a.transportName]=a;var f;t.bootstrap_iframe=function(){var e;c.currentWindowId=u.hash.slice(1);var a=function(o){if(o.source===parent&&("undefined"==typeof f&&(f=o.origin),o.origin===f)){var a;try{a=i.parse(o.data)}catch(h){return void l("bad json",o.data)}if(a.windowId===c.currentWindowId)switch(a.type){case"s":var d;try{d=i.parse(a.data)}catch(h){l("bad json",a.data);break}var p=d[0],m=d[1],v=d[2],y=d[3];if(l(p,m,v,y),p!==t.version)throw new Error('Incompatible SockJS! Main site uses: "'+p+'", the iframe: "'+t.version+'".');if(!r.isOriginEqual(v,u.href)||!r.isOriginEqual(y,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+v+", "+y+")");e=new s(new n[m](v,y));break;case"m":e._send(a.data);break;case"c":e&&e._close(),e=null}}};o.attachEvent("message",a),c.postMessage("s")}}}).call(e,n(2))},function(t,e,n){(function(e,r){"use strict";function o(t,e){var n=this;i.call(this);var o=function(){var r=n.ifr=new u(l.transportName,e,t);r.once("message",function(t){if(t){var e;try{e=a.parse(t)}catch(r){return f("bad json",t),n.emit("finish"),void n.close()}var o=e[0],i=e[1];n.emit("finish",o,i)}n.close()}),r.once("close",function(){n.emit("finish"),n.close()})};r.document.body?o():c.attachEvent("load",o)}var i=n(3).EventEmitter,s=n(0),a=n(5),c=n(6),u=n(27),l=n(21),f=function(){};"production"!==e.env.NODE_ENV&&(f=n(1)("sockjs-client:info-iframe")),s(o,i),o.enabled=function(){return u.enabled()},o.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},t.exports=o}).call(e,n(2),function(){return this}())},function(t,e,n){(function(e){"use strict";function r(t,e){d(t);var n=this;o.call(this),setTimeout(function(){n.doXhr(t,e)},0)}var o=n(3).EventEmitter,i=n(0),s=n(4),a=n(16),c=n(13),u=n(9),l=n(58),f=n(45),h=n(20),d=function(){};"production"!==e.env.NODE_ENV&&(d=n(1)("sockjs-client:info-receiver")),i(r,o),r._getReceiver=function(t,e,n){return n.sameOrigin?new h(e,u):c.enabled?new h(e,c):a.enabled&&n.sameScheme?new h(e,a):f.enabled()?new f(t,e):new h(e,l)},r.prototype.doXhr=function(t,e){var n=this,o=s.addPath(t,"/info");d("doXhr",o),this.xo=r._getReceiver(t,o,e),this.timeoutRef=setTimeout(function(){d("timeout"),n._cleanup(!1),n.emit("finish")},r.timeout),this.xo.once("finish",function(t,e){d("finish",t,e),n._cleanup(!0),n.emit("finish",t,e)})},r.prototype._cleanup=function(t){d("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!t&&this.xo&&this.xo.close(),this.xo=null},r.prototype.close=function(){d("close"),this.removeAllListeners(),this._cleanup(!1)},r.timeout=8e3,t.exports=r}).call(e,n(2))},function(t,e,n){(function(e,r){"use strict";function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");b.call(this),this.readyState=o.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&v.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{};var r=n.sessionId||8;if("function"==typeof r)this._generateSessionId=r;else{if("number"!=typeof r)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return u.string(r)}}this._server=n.server||u.numberString(1e3);var i=new s(t);if(!i.host||!i.protocol)throw new SyntaxError("The URL '"+t+"' is invalid");if(i.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==i.protocol&&"https:"!==i.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+i.protocol+"' is not allowed.");var a="https:"===i.protocol;if("https"===g.protocol&&!a)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");e?Array.isArray(e)||(e=[e]):e=[];var c=e.sort();c.forEach(function(t,e){if(!t)throw new SyntaxError("The protocols entry '"+t+"' is invalid.");if(e<c.length-1&&t===c[e+1])throw new SyntaxError("The protocols entry '"+t+"' is duplicated.")});var l=f.getOrigin(g.href);this._origin=l?l.toLowerCase():null,i.set("pathname",i.pathname.replace(/\/+$/,"")),this.url=i.href,x("using url",this.url),this._urlInfo={nullOrigin:!m.hasDomain(),sameOrigin:f.isOriginEqual(this.url,g.href),sameScheme:f.isSchemeEqual(this.url,g.href)},this._ir=new E(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function i(t){return 1e3===t||t>=3e3&&4999>=t}n(48);var s=n(18),a=n(0),c=n(5),u=n(8),l=n(63),f=n(4),h=n(6),d=n(65),p=n(17),m=n(10),v=n(64),y=n(14),b=n(19),g=n(22),w=n(41),_=n(42),E=n(46),x=function(){};"production"!==e.env.NODE_ENV&&(x=n(1)("sockjs-client:main"));var S;a(o,b),o.prototype.close=function(t,e){if(t&&!i(t))throw new Error("InvalidAccessError: Invalid code");if(e&&e.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==o.CLOSING&&this.readyState!==o.CLOSED){var n=!0;this._close(t||1e3,e||"Normal closure",n)}},o.prototype.send=function(t){if("string"!=typeof t&&(t=""+t),this.readyState===o.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===o.OPEN&&this._transport.send(l.quote(t))},o.version=n(31),o.CONNECTING=0,o.OPEN=1,o.CLOSING=2,o.CLOSED=3,o.prototype._receiveInfo=function(t,e){if(x("_receiveInfo",e),this._ir=null,!t)return void this._close(1002,"Cannot connect to server");this._rto=this.countRTO(e),this._transUrl=t.base_url?t.base_url:this.url,t=p.extend(t,this._urlInfo),x("info",t);var n=S.filterToEnabled(this._transportsWhitelist,t);this._transports=n.main,x(this._transports.length+" enabled transports"),this._connect()},o.prototype._connect=function(){for(var t=this._transports.shift();t;t=this._transports.shift()){if(x("attempt",t.transportName),t.needBody&&(!r.document.body||"undefined"!=typeof r.document.readyState&&"complete"!==r.document.readyState&&"interactive"!==r.document.readyState))return x("waiting for body"),this._transports.unshift(t),void h.attachEvent("load",this._connect.bind(this));var e=this._rto*t.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),e),x("using timeout",e);var n=f.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),o=this._transportOptions[t.transportName];x("transport url",n);var i=new t(n,this._transUrl,o);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=t.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},o.prototype._transportTimeout=function(){x("_transportTimeout"),this.readyState===o.CONNECTING&&this._transportClose(2007,"Transport timed out")},o.prototype._transportMessage=function(t){x("_transportMessage",t);var e,n=this,r=t.slice(0,1),o=t.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new y("heartbeat")),void x("heartbeat",this.transport)}if(o)try{e=c.parse(o)}catch(i){x("bad json",o)}if("undefined"==typeof e)return void x("empty payload",o);switch(r){case"a":Array.isArray(e)&&e.forEach(function(t){x("message",n.transport,t),n.dispatchEvent(new _(t))});break;case"m":x("message",this.transport,e),this.dispatchEvent(new _(e));break;case"c":Array.isArray(e)&&2===e.length&&this._close(e[0],e[1],!0)}},o.prototype._transportClose=function(t,e){return x("_transportClose",this.transport,t,e),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),i(t)||2e3===t||this.readyState!==o.CONNECTING?void this._close(t,e):void this._connect()},o.prototype._open=function(){x("_open",this._transport.transportName,this.readyState),this.readyState===o.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=o.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new y("open")),x("connected",this.transport)):this._close(1006,"Server lost session")},o.prototype._close=function(t,e,n){x("_close",this.transport,t,e,n,this.readyState);var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===o.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=o.CLOSING,setTimeout(function(){this.readyState=o.CLOSED,r&&this.dispatchEvent(new y("error"));var i=new w("close");i.wasClean=n||!1,i.code=t||1e3,i.reason=e,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null,x("disconnected")}.bind(this),0)},o.prototype.countRTO=function(t){return t>100?4*t:300+t},t.exports=function(t){return S=d(t),n(44)(o,t),o}}).call(e,n(2),function(){return this}())},function(t,e){"use strict";function n(t){var e=+t;return e!==e?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function r(t){return t>>>0}function o(){}var i,s=Array.prototype,a=Object.prototype,c=Function.prototype,u=String.prototype,l=s.slice,f=a.toString,h=function(t){return"[object Function]"===a.toString.call(t)},d=function(t){return"[object Array]"===f.call(t)},p=function(t){return"[object String]"===f.call(t)},m=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();i=m?function(t,e,n,r){!r&&e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(t,e,n,r){!r&&e in t||(t[e]=n)};var v=function(t,e,n){for(var r in e)a.hasOwnProperty.call(e,r)&&i(t,r,e[r],n)},y=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)};v(c,{bind:function(t){var e=this;if(!h(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n=l.call(arguments,1),r=function(){if(this instanceof c){var r=e.apply(this,n.concat(l.call(arguments)));return Object(r)===r?r:this}return e.apply(t,n.concat(l.call(arguments)))},i=Math.max(0,e.length-n.length),s=[],a=0;i>a;a++)s.push("$"+a);var c=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this, arguments); }")(r);return e.prototype&&(o.prototype=e.prototype,c.prototype=new o,o.prototype=null),c}}),v(Array,{isArray:d});var b=Object("a"),g="a"!==b[0]||!(0 in b),w=function(t){var e=!0,n=!0;return t&&(t.call("foo",function(t,n,r){"object"!=typeof r&&(e=!1)}),t.call([1],function(){n="string"==typeof this},"x")),!!t&&e&&n};v(s,{forEach:function(t){var e=y(this),n=g&&p(this)?this.split(""):e,r=arguments[1],o=-1,i=n.length>>>0;if(!h(t))throw new TypeError;for(;++o<i;)o in n&&t.call(r,n[o],o,e)}},!w(s.forEach));var _=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);v(s,{indexOf:function(t){var e=g&&p(this)?this.split(""):y(this),r=e.length>>>0;if(!r)return-1;var o=0;for(arguments.length>1&&(o=n(arguments[1])),o=o>=0?o:Math.max(0,r+o);r>o;o++)if(o in e&&e[o]===t)return o;return-1}},_);var E=u.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var t=void 0===/()??/.exec("")[1];u.split=function(e,n){var o=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==f.call(e))return E.call(this,e,n);var i,a,c,u,l=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),d=0;for(e=new RegExp(e.source,h+"g"),o+="",t||(i=new RegExp("^"+e.source+"$(?!\\s)",h)),n=void 0===n?-1>>>0:r(n);(a=e.exec(o))&&(c=a.index+a[0].length,!(c>d&&(l.push(o.slice(d,a.index)),!t&&a.length>1&&a[0].replace(i,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(a[t]=void 0)}),a.length>1&&a.index<o.length&&s.push.apply(l,a.slice(1)),u=a[0].length,d=c,l.length>=n)));)e.lastIndex===a.index&&e.lastIndex++;return d===o.length?!u&&e.test("")||l.push(""):l.push(o.slice(d)),l.length>n?l.slice(0,n):l}}():"0".split(void 0,0).length&&(u.split=function(t,e){return void 0===t&&0===e?[]:E.call(this,t,e)});var x="	\n\x0B\f\r \u2028\u2029\ufeff",S="",O="["+x+"]",T=new RegExp("^"+O+O+"*"),N=new RegExp(O+O+"*$"),C=u.trim&&(x.trim()||!S.trim());v(u,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(T,"").replace(N,"")}},C);var k=u.substr,j="".substr&&"b"!=="0b".substr(-1);v(u,{substr:function(t,e){return k.call(this,0>t&&(t=this.length+t)<0?0:t,e)}},j)},function(t,e,n){"use strict";t.exports=[n(59),n(61),n(29),n(25),n(15)(n(25)),n(26),n(15)(n(26)),n(30),n(60),n(15)(n(30)),n(51)]},function(t,e){(function(e){t.exports=e.WebSocket||e.MozWebSocket}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";function r(t){if(!r.enabled())throw new Error("Transport created when disabled");i.call(this,t,"/jsonp",a,s)}var o=n(0),i=n(28),s=n(56),a=n(57);o(r,i),r.enabled=function(){return!!e.document},r.transportName="jsonp-polling",r.roundTrips=1,r.needBody=!0,t.exports=r}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";function r(t,e){s(t),i.call(this),this.sendBuffer=[],this.sender=e,this.url=t}var o=n(0),i=n(3).EventEmitter,s=function(){};"production"!==e.env.NODE_ENV&&(s=n(1)("sockjs-client:buffered-sender")),o(r,i),r.prototype.send=function(t){s("send",t),this.sendBuffer.push(t),this.sendStop||this.sendSchedule()},r.prototype.sendScheduleWait=function(){s("sendScheduleWait");var t,e=this;this.sendStop=function(){s("sendStop"),e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){s("timeout"),e.sendStop=null,e.sendSchedule()},25)},r.prototype.sendSchedule=function(){s("sendSchedule",this.sendBuffer.length);var t=this;if(this.sendBuffer.length>0){var e="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,e,function(e){t.sendStop=null,e?(s("error",e),t.emit("close",e.code||1006,"Sending error: "+e),t._cleanup()):t.sendScheduleWait()}),this.sendBuffer=[]}},r.prototype._cleanup=function(){s("_cleanup"),this.removeAllListeners()},r.prototype.stop=function(){s("stop"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=r}).call(e,n(2))},function(t,e,n){(function(e){"use strict";function r(t,e,n){s(e),i.call(this),this.Receiver=t,this.receiveUrl=e,this.AjaxObject=n,this._scheduleReceiver()}var o=n(0),i=n(3).EventEmitter,s=function(){};"production"!==e.env.NODE_ENV&&(s=n(1)("sockjs-client:polling")),o(r,i),r.prototype._scheduleReceiver=function(){s("_scheduleReceiver");var t=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on("message",function(e){s("message",e),t.emit("message",e)}),e.once("close",function(n,r){s("close",n,r,t.pollIsClosing),t.poll=e=null,t.pollIsClosing||("network"===r?t._scheduleReceiver():(t.emit("close",n||1006,r),t.removeAllListeners()))})},r.prototype.abort=function(){s("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=r}).call(e,n(2))},function(t,e,n){(function(e){"use strict";function r(t){a(t),i.call(this);var e=this,n=this.es=new s(t);n.onmessage=function(t){a("message",t.data),e.emit("message",decodeURI(t.data))},n.onerror=function(t){a("error",n.readyState,t);var r=2!==n.readyState?"network":"permanent";e._cleanup(),e._close(r)}}var o=n(0),i=n(3).EventEmitter,s=n(24),a=function(){};"production"!==e.env.NODE_ENV&&(a=n(1)("sockjs-client:receiver:eventsource")),o(r,i),r.prototype.abort=function(){a("abort"),this._cleanup(),this._close("user")},r.prototype._cleanup=function(){a("cleanup");var t=this.es;t&&(t.onmessage=t.onerror=null,t.close(),this.es=null)},r.prototype._close=function(t){a("close",t);var e=this;setTimeout(function(){e.emit("close",null,t),e.removeAllListeners()},200)},t.exports=r}).call(e,n(2))},function(t,e,n){(function(e,r){"use strict";function o(t){l(t),c.call(this);var e=this;s.polluteGlobalNamespace(),this.id="a"+u.string(6),t=a.addQuery(t,"c="+decodeURIComponent(s.WPrefix+"."+this.id)),l("using htmlfile",o.htmlfileEnabled);var n=o.htmlfileEnabled?s.createHtmlfile:s.createIframe;r[s.WPrefix][this.id]={start:function(){l("start"),e.iframeObj.loaded()},message:function(t){l("message",t),e.emit("message",t)},stop:function(){l("stop"),e._cleanup(),e._close("network")}},this.iframeObj=n(t,function(){l("callback"),e._cleanup(),e._close("permanent")})}var i=n(0),s=n(11),a=n(4),c=n(3).EventEmitter,u=n(8),l=function(){};"production"!==e.env.NODE_ENV&&(l=n(1)("sockjs-client:receiver:htmlfile")),i(o,c),o.prototype.abort=function(){l("abort"),this._cleanup(),this._close("user")},o.prototype._cleanup=function(){l("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete r[s.WPrefix][this.id]},o.prototype._close=function(t){l("_close",t),this.emit("close",null,t),this.removeAllListeners()},o.htmlfileEnabled=!1;var f=["Active"].concat("Object").join("X");if(f in r)try{o.htmlfileEnabled=!!new r[f]("htmlfile")}catch(h){}o.enabled=o.htmlfileEnabled||s.iframeEnabled,t.exports=o}).call(e,n(2),function(){return this}())},function(t,e,n){(function(e,r){"use strict";function o(t){f(t);var e=this;l.call(this),i.polluteGlobalNamespace(),this.id="a"+s.string(6);var n=c.addQuery(t,"c="+encodeURIComponent(i.WPrefix+"."+this.id));r[i.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout(function(){f("timeout"),e._abort(new Error("JSONP script loaded abnormally (timeout)"))},o.timeout)}var i=n(11),s=n(8),a=n(10),c=n(4),u=n(0),l=n(3).EventEmitter,f=function(){};
"production"!==e.env.NODE_ENV&&(f=n(1)("sockjs-client:receiver:jsonp")),u(o,l),o.prototype.abort=function(){if(f("abort"),r[i.WPrefix][this.id]){var t=new Error("JSONP user aborted read");t.code=1e3,this._abort(t)}},o.timeout=35e3,o.scriptErrorTimeout=1e3,o.prototype._callback=function(t){f("_callback",t),this._cleanup(),this.aborting||(t&&(f("message",t),this.emit("message",t)),this.emit("close",null,"network"),this.removeAllListeners())},o.prototype._abort=function(t){f("_abort",t),this._cleanup(),this.aborting=!0,this.emit("close",t.code,t.message),this.removeAllListeners()},o.prototype._cleanup=function(){if(f("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var t=this.script;t.parentNode.removeChild(t),t.onreadystatechange=t.onerror=t.onload=t.onclick=null,this.script=null}delete r[i.WPrefix][this.id]},o.prototype._scriptError=function(){f("_scriptError");var t=this;this.errorTimer||(this.errorTimer=setTimeout(function(){t.loadedOkay||t._abort(new Error("JSONP script loaded abnormally (onerror)"))},o.scriptErrorTimeout))},o.prototype._createScript=function(t){f("_createScript",t);var e,n=this,o=this.script=r.document.createElement("script");if(o.id="a"+s.string(8),o.src=t,o.type="text/javascript",o.charset="UTF-8",o.onerror=this._scriptError.bind(this),o.onload=function(){f("onload"),n._abort(new Error("JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(f("onreadystatechange",o.readyState),/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){n.loadedOkay=!0;try{o.onclick()}catch(t){}}o&&n._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof o.async&&r.document.attachEvent)if(a.isOpera())e=this.script2=r.document.createElement("script"),e.text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=e.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(i){}o.async=!0}"undefined"!=typeof o.async&&(o.async=!0);var c=r.document.getElementsByTagName("head")[0];c.insertBefore(o,c.firstChild),e&&c.insertBefore(e,c.firstChild)},t.exports=o}).call(e,n(2),function(){return this}())},function(t,e,n){(function(e,r){"use strict";function o(t){c("createIframe",t);try{return r.document.createElement('<iframe name="'+t+'">')}catch(e){var n=r.document.createElement("iframe");return n.name=t,n}}function i(){c("createForm"),u=r.document.createElement("form"),u.style.display="none",u.style.position="absolute",u.method="POST",u.enctype="application/x-www-form-urlencoded",u.acceptCharset="UTF-8",l=r.document.createElement("textarea"),l.name="d",u.appendChild(l),r.document.body.appendChild(u)}var s=n(8),a=n(4),c=function(){};"production"!==e.env.NODE_ENV&&(c=n(1)("sockjs-client:sender:jsonp"));var u,l;t.exports=function(t,e,n){c(t,e),u||i();var r="a"+s.string(8);u.target=r,u.action=a.addQuery(a.addPath(t,"/jsonp_send"),"i="+r);var f=o(r);f.id=r,f.style.display="none",u.appendChild(f);try{l.value=e}catch(h){}u.submit();var d=function(t){c("completed",r,t),f.onerror&&(f.onreadystatechange=f.onerror=f.onload=null,setTimeout(function(){c("cleaning up",r),f.parentNode.removeChild(f),f=null},500),l.value="",n(t))};return f.onerror=function(){c("onerror",r),d()},f.onload=function(){c("onload",r),d()},f.onreadystatechange=function(t){c("onreadystatechange",r,f.readyState,t),"complete"===f.readyState&&d()},function(){c("aborted",r),d(new Error("Aborted"))}}}).call(e,n(2),function(){return this}())},function(t,e,n){"use strict";function r(){var t=this;o.call(this),this.to=setTimeout(function(){t.emit("finish",200,"{}")},r.timeout)}var o=n(3).EventEmitter,i=n(0);i(r,o),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,e,n){if(!r.enabled())throw new Error("Transport created when disabled");a.call(this),u("constructor",t);var s=this,l=i.addPath(t,"/websocket");l="https"===l.slice(0,5)?"wss"+l.slice(5):"ws"+l.slice(4),this.url=l,this.ws=new c(this.url,void 0,n),this.ws.onmessage=function(t){u("message event",t.data),s.emit("message",t.data)},this.unloadRef=o.unloadAdd(function(){u("unload"),s.ws.close()}),this.ws.onclose=function(t){u("close event",t.code,t.reason),s.emit("close",t.code,t.reason),s._cleanup()},this.ws.onerror=function(t){u("error event",t),s.emit("close",1006,"WebSocket connection broken"),s._cleanup()}}var o=n(6),i=n(4),s=n(0),a=n(3).EventEmitter,c=n(50),u=function(){};"production"!==e.env.NODE_ENV&&(u=n(1)("sockjs-client:websocket")),s(r,a),r.prototype.send=function(t){var e="["+t+"]";u("send",e),this.ws.send(e)},r.prototype.close=function(){u("close"),this.ws&&this.ws.close(),this._cleanup()},r.prototype._cleanup=function(){u("_cleanup");var t=this.ws;t&&(t.onmessage=t.onclose=t.onerror=null),o.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},r.enabled=function(){return u("enabled"),!!c},r.transportName="websocket",r.roundTrips=2,t.exports=r}).call(e,n(2))},function(t,e,n){"use strict";function r(t){if(!c.enabled)throw new Error("Transport created when disabled");i.call(this,t,"/xhr",a,c)}var o=n(0),i=n(7),s=n(29),a=n(12),c=n(16);o(r,i),r.enabled=s.enabled,r.transportName="xdr-polling",r.roundTrips=2,t.exports=r},function(t,e,n){(function(e){"use strict";function r(t){if(!c.enabled&&!a.enabled)throw new Error("Transport created when disabled");i.call(this,t,"/xhr_streaming",s,a)}var o=n(0),i=n(7),s=n(12),a=n(13),c=n(9),u=n(10);o(r,i),r.enabled=function(t){return t.nullOrigin?!1:u.isOpera()?!1:a.enabled},r.transportName="xhr-streaming",r.roundTrips=2,r.needBody=!!e.document,t.exports=r}).call(e,function(){return this}())},function(t,e){(function(e){"use strict";e.crypto&&e.crypto.getRandomValues?t.exports.randomBytes=function(t){var n=new Uint8Array(t);return e.crypto.getRandomValues(n),n}:t.exports.randomBytes=function(t){for(var e=new Array(t),n=0;t>n;n++)e[n]=Math.floor(256*Math.random());return e}}).call(e,function(){return this}())},function(t,e,n){"use strict";var r,o=n(5),i=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,s=function(t){var e,n={},r=[];for(e=0;65536>e;e++)r.push(String.fromCharCode(e));return t.lastIndex=0,r.join("").replace(t,function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,n};t.exports={quote:function(t){var e=o.stringify(t);return i.lastIndex=0,i.test(e)?(r||(r=s(i)),e.replace(i,function(t){return r[t]})):e}}},function(t,e){(function(e){"use strict";var n={};["log","debug","warn"].forEach(function(t){var r;try{r=e.console&&e.console[t]&&e.console[t].apply}catch(o){}n[t]=r?function(){return e.console[t].apply(e.console,arguments)}:"log"===t?function(){}:n.log}),t.exports=n}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";var r=function(){};"production"!==e.env.NODE_ENV&&(r=n(1)("sockjs-client:utils:transport")),t.exports=function(t){return{filterToEnabled:function(e,n){var o={main:[],facade:[]};return e?"string"==typeof e&&(e=[e]):e=[],t.forEach(function(t){return t?"websocket"===t.transportName&&n.websocket===!1?void r("disabled from server","websocket"):e.length&&-1===e.indexOf(t.transportName)?void r("not in whitelist",t.transportName):void(t.enabled(n)?(r("enabled",t.transportName),o.main.push(t),t.facadeTransport&&o.facade.push(t.facadeTransport)):r("disabled",t.transportName)):void 0}),o}}}}).call(e,n(2))},function(t,e,n){(function(e){"use strict";var r,o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i={hash:1,query:1};t.exports=function(t){t=t||e.location||{},r=r||n(18);var s,a={},c=typeof t;if("blob:"===t.protocol)a=new r(unescape(t.pathname),{});else if("string"===c){a=new r(t,{});for(s in i)delete a[s]}else if("object"===c){for(s in t)s in i||(a[s]=t[s]);void 0===a.slashes&&(a.slashes=o.test(t.href))}return a}}).call(e,function(){return this}())},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],Object.defineProperty(t,"loaded",{enumerable:!0,configurable:!1,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,configurable:!1,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY2hhdC5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDE5ZDk2OGU1M2I1MWRjZDk4ODhiIiwid2VicGFjazovLy8uL34vaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2RlYnVnL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi9ldmVudC9lbWl0dGVyLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdXRpbHMvdXJsLmpzIiwid2VicGFjazovLy8uL34vanNvbjMvbGliL2pzb24zLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdXRpbHMvZXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvbGliL2FqYXgtYmFzZWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi91dGlscy9yYW5kb20uanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvc2VuZGVyL3hoci1sb2NhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3V0aWxzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi91dGlscy9pZnJhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvcmVjZWl2ZXIveGhyLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L3NlbmRlci94aHItY29ycy5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL2V2ZW50L2V2ZW50LmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2xpYi9pZnJhbWUtd3JhcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9zZW5kZXIveGRyLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdXRpbHMvb2JqZWN0LmpzIiwid2VicGFjazovLy8uL34vdXJsLXBhcnNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvZXZlbnQvZXZlbnR0YXJnZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi9pbmZvLWFqYXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi9pbmZvLWlmcmFtZS1yZWNlaXZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL2xvY2F0aW9uLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2Jyb3dzZXIvYWJzdHJhY3QteGhyLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2Jyb3dzZXIvZXZlbnRzb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvZXZlbnRzb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvaHRtbGZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvaWZyYW1lLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2xpYi9zZW5kZXItcmVjZWl2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQveGRyLXN0cmVhbWluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC94aHItcG9sbGluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3ZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vYnJvd3Nlci9zY3JpcHRzL2xvZy5qcyIsIndlYnBhY2s6Ly8vLi9icm93c2VyL3NjcmlwdHMvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL2VudHJ5LmpzIiwid2VicGFjazovLy8uL34vd2Vic3RvbXAtY2xpZW50L2Rpc3Qvd2Vic3RvbXAuanMiLCJ3ZWJwYWNrOi8vLy4vYnJvd3Nlci9zY3JpcHRzL2NoYXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9kZWJ1Zy9kZWJ1Zy5qcyIsIndlYnBhY2s6Ly8vLi9+L21zL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcXVlcnlzdHJpbmdpZnkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZXF1aXJlcy1wb3J0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvZXZlbnQvY2xvc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi9ldmVudC90cmFucy1tZXNzYWdlLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvZmFjYWRlLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvaWZyYW1lLWJvb3RzdHJhcC5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL2luZm8taWZyYW1lLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvaW5mby1yZWNlaXZlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi9zaGltcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC1saXN0LmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2Jyb3dzZXIvd2Vic29ja2V0LmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2pzb25wLXBvbGxpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvbGliL2J1ZmZlcmVkLXNlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9saWIvcG9sbGluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9yZWNlaXZlci9ldmVudHNvdXJjZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9yZWNlaXZlci9odG1sZmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9yZWNlaXZlci9qc29ucC5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9zZW5kZXIvanNvbnAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvc2VuZGVyL3hoci1mYWtlLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L3dlYnNvY2tldC5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC94ZHItcG9sbGluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC94aHItc3RyZWFtaW5nLmpzIiwid2VicGFjazovLy8uL34vc29ja2pzLWNsaWVudC9saWIvdXRpbHMvYnJvd3Nlci1jcnlwdG8uanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi91dGlscy9lc2NhcGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi91dGlscy9sb2cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zb2NranMtY2xpZW50L2xpYi91dGlscy90cmFuc3BvcnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi91cmwtcGFyc2UvbG9sY2F0aW9uLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9hbWQtb3B0aW9ucy5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwicCIsInMiLCJPYmplY3QiLCJjcmVhdGUiLCJjdG9yIiwic3VwZXJDdG9yIiwic3VwZXJfIiwicHJvdG90eXBlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsIlRlbXBDdG9yIiwidXNlQ29sb3JzIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZSIsIndpbmRvdyIsImNvbnNvbGUiLCJmaXJlYnVnIiwiZXhjZXB0aW9uIiwidGFibGUiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsIm1hdGNoIiwicGFyc2VJbnQiLCJSZWdFeHAiLCIkMSIsImZvcm1hdEFyZ3MiLCJhcmdzIiwiYXJndW1lbnRzIiwidGhpcyIsIm5hbWVzcGFjZSIsImh1bWFuaXplIiwiZGlmZiIsImNvbG9yIiwiY29uY2F0IiwiQXJyYXkiLCJzbGljZSIsImluZGV4IiwibGFzdEMiLCJyZXBsYWNlIiwic3BsaWNlIiwibG9nIiwiRnVuY3Rpb24iLCJhcHBseSIsInNhdmUiLCJuYW1lc3BhY2VzIiwic3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJkZWJ1ZyIsImUiLCJsb2FkIiwiciIsImxvY2Fsc3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsImNocm9tZSIsImxvY2FsIiwiY29sb3JzIiwiZm9ybWF0dGVycyIsImoiLCJ2IiwiSlNPTiIsInN0cmluZ2lmeSIsImVuYWJsZSIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwibGVuZ3RoIiwicXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwibGVuIiwicnVuIiwiY2xlYXJUaW1lb3V0IiwiSXRlbSIsImZ1biIsImFycmF5Iiwibm9vcCIsInByb2Nlc3MiLCJuZXh0VGljayIsInB1c2giLCJ0aXRsZSIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwibmFtZSIsIkVycm9yIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsIkV2ZW50RW1pdHRlciIsIkV2ZW50VGFyZ2V0IiwiaW5oZXJpdHMiLCJ0eXBlIiwiX2xpc3RlbmVycyIsImxpc3RlbmVyIiwiZyIsInNlbGYiLCJmaXJlZCIsImxpc3RlbmVycyIsImFpIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJVUkwiLCJOT0RFX0VOViIsImdldE9yaWdpbiIsInVybCIsInByb3RvY29sIiwicG9ydCIsImhvc3RuYW1lIiwiaXNPcmlnaW5FcXVhbCIsImEiLCJiIiwicmVzIiwiaXNTY2hlbWVFcXVhbCIsInNwbGl0IiwiYWRkUGF0aCIsInBhdGgiLCJxcyIsImFkZFF1ZXJ5IiwicSIsImluZGV4T2YiLCJnbG9iYWwiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsInJ1bkluQ29udGV4dCIsImNvbnRleHQiLCJoYXMiLCJ1bmRlZiIsImlzU3VwcG9ydGVkIiwic2VyaWFsaXplZCIsInN0cmluZ2lmeVN1cHBvcnRlZCIsImlzRXh0ZW5kZWQiLCJ0b0pTT04iLCJOdW1iZXIiLCJTdHJpbmciLCJnZXRDbGFzcyIsIkRhdGUiLCJwYXJzZSIsInBhcnNlU3VwcG9ydGVkIiwicm9vdCIsIlN5bnRheEVycm9yIiwiVHlwZUVycm9yIiwiTWF0aCIsIm5hdGl2ZUpTT04iLCJpc1Byb3BlcnR5IiwiZm9yRWFjaCIsIm9iamVjdFByb3RvIiwidG9TdHJpbmciLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01vbnRoIiwiZ2V0VVRDRGF0ZSIsImdldFVUQ0hvdXJzIiwiZ2V0VVRDTWludXRlcyIsImdldFVUQ1NlY29uZHMiLCJnZXRVVENNaWxsaXNlY29uZHMiLCJmdW5jdGlvbkNsYXNzIiwiZGF0ZUNsYXNzIiwibnVtYmVyQ2xhc3MiLCJzdHJpbmdDbGFzcyIsImFycmF5Q2xhc3MiLCJib29sZWFuQ2xhc3MiLCJjaGFySW5kZXhCdWdneSIsImZsb29yIiwiTW9udGhzIiwiZ2V0RGF5IiwieWVhciIsIm1vbnRoIiwiaGFzT3duUHJvcGVydHkiLCJwcm9wZXJ0eSIsIm1lbWJlcnMiLCJfX3Byb3RvX18iLCJvcmlnaW5hbCIsInJlc3VsdCIsInBhcmVudCIsIm9iamVjdCIsImNhbGxiYWNrIiwiUHJvcGVydGllcyIsInNpemUiLCJ2YWx1ZU9mIiwiaXNGdW5jdGlvbiIsImlzQ29uc3RydWN0b3IiLCJoYXNQcm9wZXJ0eSIsIm9iamVjdFR5cGVzIiwiRXNjYXBlcyIsIjkyIiwiMzQiLCI4IiwiMTIiLCIxMCIsIjEzIiwiOSIsImxlYWRpbmdaZXJvZXMiLCJ0b1BhZGRlZFN0cmluZyIsIndpZHRoIiwidW5pY29kZVByZWZpeCIsInF1b3RlIiwidXNlQ2hhckluZGV4Iiwic3ltYm9scyIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsImNoYXJBdCIsInNlcmlhbGl6ZSIsInByb3BlcnRpZXMiLCJ3aGl0ZXNwYWNlIiwiaW5kZW50YXRpb24iLCJzdGFjayIsImNsYXNzTmFtZSIsImRhdGUiLCJ0aW1lIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsIm1pbGxpc2Vjb25kcyIsInJlc3VsdHMiLCJlbGVtZW50IiwicHJlZml4Iiwiam9pbiIsInBvcCIsInNvdXJjZSIsImZpbHRlciIsIkluZGV4IiwiU291cmNlIiwiZnJvbUNoYXJDb2RlIiwiVW5lc2NhcGVzIiwiNDciLCI5OCIsIjExNiIsIjExMCIsIjEwMiIsIjExNCIsImFib3J0IiwibGV4IiwiYmVnaW4iLCJwb3NpdGlvbiIsImlzU2lnbmVkIiwiZ2V0IiwiaGFzTWVtYmVycyIsInVwZGF0ZSIsIndhbGsiLCJpc0xvYWRlciIsImZ1bmN0aW9uIiwiZnJlZUV4cG9ydHMiLCJub2RlVHlwZSIsImZyZWVHbG9iYWwiLCJwcmV2aW91c0pTT04iLCJpc1Jlc3RvcmVkIiwiSlNPTjMiLCJub0NvbmZsaWN0IiwidW5kZWZpbmVkIiwicmFuZG9tIiwib25VbmxvYWQiLCJhZnRlclVubG9hZCIsImlzQ2hyb21lUGFja2FnZWRBcHAiLCJhcHAiLCJydW50aW1lIiwiYXR0YWNoRXZlbnQiLCJldmVudCIsImRldGFjaEV2ZW50IiwidW5sb2FkQWRkIiwicmVmIiwic3RyaW5nIiwidHJpZ2dlclVubG9hZENhbGxiYWNrcyIsInVubG9hZERlbCIsInVubG9hZFRyaWdnZXJlZCIsImNyZWF0ZUFqYXhTZW5kZXIiLCJBamF4T2JqZWN0IiwicGF5bG9hZCIsIm9wdCIsImhlYWRlcnMiLCJDb250ZW50LXR5cGUiLCJhamF4VXJsIiwidXJsVXRpbHMiLCJ4byIsInN0YXR1cyIsImNsb3NlIiwiZXJyIiwiY29kZSIsIkFqYXhCYXNlZFRyYW5zcG9ydCIsInRyYW5zVXJsIiwidXJsU3VmZml4IiwiUmVjZWl2ZXIiLCJTZW5kZXJSZWNlaXZlciIsImNyeXB0byIsIl9yYW5kb21TdHJpbmdDaGFycyIsIm1heCIsImJ5dGVzIiwicmFuZG9tQnl0ZXMiLCJyZXQiLCJzdWJzdHIiLCJudW1iZXIiLCJudW1iZXJTdHJpbmciLCJ0IiwiWEhSTG9jYWxPYmplY3QiLCJtZXRob2QiLCJYaHJEcml2ZXIiLCJub0NyZWRlbnRpYWxzIiwiZW5hYmxlZCIsImlzT3BlcmEiLCJ0ZXN0IiwiaXNLb25xdWVyb3IiLCJoYXNEb21haW4iLCJkb21haW4iLCJldmVudFV0aWxzIiwiV1ByZWZpeCIsImN1cnJlbnRXaW5kb3dJZCIsInBvbGx1dGVHbG9iYWxOYW1lc3BhY2UiLCJwb3N0TWVzc2FnZSIsImRhdGEiLCJ3aW5kb3dJZCIsImNyZWF0ZUlmcmFtZSIsImlmcmFtZVVybCIsImVycm9yQ2FsbGJhY2siLCJ0cmVmIiwidW5sb2FkUmVmIiwiaWZyYW1lIiwiY3JlYXRlRWxlbWVudCIsInVuYXR0YWNoIiwib25sb2FkIiwieCIsIm9uZXJyb3IiLCJjbGVhbnVwIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwicG9zdCIsIm1zZyIsIm9yaWdpbiIsImNvbnRlbnRXaW5kb3ciLCJzcmMiLCJkaXNwbGF5IiwiYm9keSIsImFwcGVuZENoaWxkIiwibG9hZGVkIiwiY3JlYXRlSHRtbGZpbGUiLCJheG8iLCJkb2MiLCJDb2xsZWN0R2FyYmFnZSIsIm9wZW4iLCJ3cml0ZSIsInBhcmVudFdpbmRvdyIsImlmcmFtZUVuYWJsZWQiLCJYaHJSZWNlaXZlciIsImJ1ZmZlclBvc2l0aW9uIiwiX2NodW5rSGFuZGxlciIsImJpbmQiLCJ0ZXh0IiwicmVhc29uIiwiX2NsZWFudXAiLCJpZHgiLCJidWYiLCJYSFJDb3JzT2JqZWN0Iiwib3B0cyIsInN1cHBvcnRzQ09SUyIsIkV2ZW50IiwiZXZlbnRUeXBlIiwiaW5pdEV2ZW50IiwiY2FuQnViYmxlIiwiY2FuY2VsYWJsZSIsImJ1YmJsZXMiLCJ0aW1lU3RhbXAiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIkNBUFRVUklOR19QSEFTRSIsIkFUX1RBUkdFVCIsIkJVQkJMSU5HX1BIQVNFIiwiSWZyYW1lVHJhbnNwb3J0Iiwib2JqZWN0VXRpbHMiLCJ0cmFuc3BvcnQiLCJJZnJhbWVXcmFwVHJhbnNwb3J0IiwiYmFzZVVybCIsInRyYW5zcG9ydE5hbWUiLCJpbmZvIiwiaWZyYW1lSW5mbyIsImV4dGVuZCIsInNhbWVPcmlnaW4iLCJuZWVkQm9keSIsInJvdW5kVHJpcHMiLCJmYWNhZGVUcmFuc3BvcnQiLCJYRFJPYmplY3QiLCJfc3RhcnQiLCJ4ZHIiLCJYRG9tYWluUmVxdWVzdCIsIl9lcnJvciIsIm9udGltZW91dCIsIm9ucHJvZ3Jlc3MiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwiaXNPYmplY3QiLCJvYmoiLCJwcm9wIiwiZXh0cmFjdFByb3RvY29sIiwiYWRkcmVzcyIsInByb3RvY29scmUiLCJleGVjIiwic2xhc2hlcyIsInJlc3QiLCJsb2NhdGlvbiIsInBhcnNlciIsImluc3RydWN0aW9uIiwia2V5IiwicmVsYXRpdmUiLCJyZWxhdGl2ZXJlIiwibG9sY2F0aW9uIiwiZXh0cmFjdGVkIiwiaW5zdHJ1Y3Rpb25zIiwicXVlcnkiLCJyZXF1aXJlZCIsImhvc3QiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiYXV0aCIsImhyZWYiLCJOYU4iLCJzZXQiLCJwYXJ0IiwiZm4iLCJwYXRobmFtZSIsImhhc2giLCJhcnIiLCJkaXNwYXRjaEV2ZW50IiwiSW5mb0FqYXgiLCJ0MCIsInJ0dCIsIkluZm9SZWNlaXZlcklmcmFtZSIsImlyIiwiQWJzdHJhY3RYSFJPYmplY3QiLCJ1dGlscyIsIlhIUiIsIlhNTEh0dHBSZXF1ZXN0IiwieGhyIiwid2l0aENyZWRlbnRpYWxzIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJjb3JzIiwiaWdub3JlZCIsIkV2ZW50U291cmNlIiwiRXZlbnRTb3VyY2VUcmFuc3BvcnQiLCJFdmVudFNvdXJjZVJlY2VpdmVyIiwiRXZlbnRTb3VyY2VEcml2ZXIiLCJIdG1sRmlsZVRyYW5zcG9ydCIsIkh0bWxmaWxlUmVjZWl2ZXIiLCJpZnJhbWVPYmoiLCJpZnJhbWVVdGlscyIsIm9ubWVzc2FnZUNhbGxiYWNrIiwiX21lc3NhZ2UiLCJpZnJhbWVNZXNzYWdlIiwiY2RhdGEiLCJtZXNzYWdlIiwic2VuZGVyRnVuYyIsInBvbGxVcmwiLCJCdWZmZXJlZFNlbmRlciIsInBvbGwiLCJQb2xsaW5nIiwic3RvcCIsIlhkclN0cmVhbWluZ1RyYW5zcG9ydCIsImNvb2tpZV9uZWVkZWQiLCJudWxsT3JpZ2luIiwic2FtZVNjaGVtZSIsIlhoclBvbGxpbmdUcmFuc3BvcnQiLCJ3YXJuIiwiZXJyb3IiLCJkZWZpbmVQcm9wZXJ0eSIsInNldENvbm5lY3RlZCIsImlzU3VjY2VzcyIsImVyck1zZyIsImFsZXJ0IiwiZ2V0RWxlbWVudEJ5SWQiLCJkaXNhYmxlZCIsInNldERpc2Nvbm5lY3RlZCIsInNldENvdW50cnlDaGF0IiwiY29udGVudCIsInRyYW5zcG9ydExpc3QiLCJfc29ja2pzX29ubG9hZCIsImZhY3RvcnkiLCJpZCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9jbGllbnQiLCJfY2xpZW50MiIsIl91dGlscyIsIndlYnN0b21wIiwiVkVSU0lPTlMiLCJjbGllbnQiLCJvcHRpb25zIiwicHJvdG9jb2xzIiwic3VwcG9ydGVkUHJvdG9jb2xzIiwid3MiLCJXZWJTb2NrZXQiLCJvdmVyIiwiX2xlbiIsIl9rZXkiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX3NsaWNlZFRvQXJyYXkiLCJzbGljZUl0ZXJhdG9yIiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsIl9zIiwiX2kiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiaXNBcnJheSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfZnJhbWUiLCJfZnJhbWUyIiwiQ2xpZW50IiwiYmluYXJ5IiwiaGVhcnRiZWF0Iiwib3V0Z29pbmciLCJpbmNvbWluZyIsImJpbmFyeVR5cGUiLCJoYXNEZWJ1ZyIsImNvdW50ZXIiLCJjb25uZWN0ZWQiLCJtYXhXZWJTb2NrZXRGcmFtZVNpemUiLCJzdWJzY3JpcHRpb25zIiwicGFydGlhbERhdGEiLCJfY29uc29sZSIsIl90aGlzIiwiX3BhcnNlQ29ubmVjdDIiLCJfcGFyc2VDb25uZWN0IiwiX3BhcnNlQ29ubmVjdDMiLCJjb25uZWN0Q2FsbGJhY2siLCJvbm1lc3NhZ2UiLCJldnQiLCJBcnJheUJ1ZmZlciIsInR5cGVkQXJyYXlUb1VuaWNvZGVTdHJpbmciLCJVaW50OEFycmF5Iiwic2VydmVyQWN0aXZpdHkiLCJub3ciLCJCWVRFUyIsIkxGIiwidW5tYXJzaGFsbGVkRGF0YSIsInVubWFyc2hhbGwiLCJwYXJ0aWFsIiwiZnJhbWVzIiwiZnJhbWUiLCJjb21tYW5kIiwic2VydmVyIiwiX3NldHVwSGVhcnRiZWF0Iiwic3Vic2NyaXB0aW9uIiwib25yZWNlaXZlIiwibWVzc2FnZUlEIiwiVjFfMiIsImFjayIsIm5hY2siLCJvbnJlY2VpcHQiLCJvbmNsb3NlIiwiZXYiLCJfY2xlYW5VcCIsIm9ub3BlbiIsInN1cHBvcnRlZFZlcnNpb25zIiwiX3RyYW5zbWl0IiwiZGlzY29ubmVjdENhbGxiYWNrIiwiZGVzdGluYXRpb24iLCJ0cmFuc2FjdGlvbiIsImNvbW1pdCIsImlkQXR0ciIsInVuc3Vic2NyaWJlIiwiY2xlYXJJbnRlcnZhbCIsInBpbmdlciIsInBvbmdlciIsIm91dCIsIm1hcnNoYWxsIiwiX3dzU2VuZCIsInVuaWNvZGVTdHJpbmdUb1R5cGVkQXJyYXkiLCJfdGhpczIiLCJWMV8xIiwiX3NwbGl0JG1hcCIsIm1hcCIsIl9zcGxpdCRtYXAyIiwic2VydmVyT3V0Z29pbmciLCJzZXJ2ZXJJbmNvbWluZyIsInR0bCIsInNldEludGVydmFsIiwiZGVsdGEiLCJsb2dpbiIsInBhc3Njb2RlIiwiRnJhbWUiLCJsaW5lcyIsInNraXBDb250ZW50TGVuZ3RoIiwia2V5cyIsInNpemVPZlVURjgiLCJkaXZpZGVyIiwic2VhcmNoIiwiaGVhZGVyTGluZXMiLCJzdWJzdHJpbmciLCJzaGlmdCIsImJvZHlJbmRleCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJyZXZlcnNlIiwibGluZSIsInRyaW0iLCJjaHIiLCJOVUxMIiwiZGF0YXMiLCJmaXJzdEZyYW1lcyIsImxhc3RGcmFtZSIsImYiLCJ1bm1hcnNoYWxsU2luZ2xlIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyMiIsImZyb20iLCJlc2NzdHIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJiaW5zdHIiLCJwMSIsInVhIiwidG9VcHBlckNhc2UiLCJkZWNvZGVVUklDb21wb25lbnQiLCJWMV8wIiwic3RyIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJuZXdPYmoiLCJDaGF0IiwiU09DS0VUX0RFU1QiLCJDSEFOTkVMX0NPVU5UUlkiLCJTRU5EX0NPVU5UUlkiLCJDT1VOVFJZX0lEIiwiY29ubmVjdCIsInNvY2tldCIsIl9zb2NranNDbGllbnQyIiwiX3dlYnN0b21wQ2xpZW50MiIsInZpZXciLCJkaXNjb25uZWN0Iiwic3Vic2NyaWJlcyIsImNvdW50cnlDaGF0IiwiX3JlZiIsIl9yZWYkdGltZSIsIl9yZWYkY29udGVudCIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInVzZXIiLCJzdWJzY3JpYmUiLCJpbml0IiwiZW50ZXIiLCJrZXlDb2RlIiwiY2hhdCIsIl9zb2NranNDbGllbnQiLCJfd2Vic3RvbXBDbGllbnQiLCJfdmlldyIsIl9sb2ciLCJzZWxlY3RDb2xvciIsInByZXZDb2xvciIsImN1cnIiLCJtcyIsInByZXZUaW1lIiwicHJldiIsImNvZXJjZSIsImZvcm1hdCIsImZvcm1hdHRlciIsInZhbCIsImxvZ0ZuIiwic2tpcHMiLCJuYW1lcyIsImRpc2FibGUiLCJuIiwicGFyc2VGbG9hdCIsInkiLCJkIiwiaCIsInNob3J0Iiwicm91bmQiLCJsb25nIiwicGx1cmFsIiwiY2VpbCIsInF1ZXJ5c3RyaW5nIiwicXVlcnlzdHJpbmdpZnkiLCJwYWlycyIsIkNsb3NlRXZlbnQiLCJ3YXNDbGVhbiIsIlRyYW5zcG9ydE1lc3NhZ2VFdmVudCIsIkZhY2FkZUpTIiwiX3RyYW5zcG9ydCIsIl90cmFuc3BvcnRNZXNzYWdlIiwiX3RyYW5zcG9ydENsb3NlIiwiX3NlbmQiLCJfY2xvc2UiLCJJbmZvSWZyYW1lUmVjZWl2ZXIiLCJsb2MiLCJTb2NrSlMiLCJhdmFpbGFibGVUcmFuc3BvcnRzIiwidHJhbnNwb3J0TWFwIiwiYXQiLCJwYXJlbnRPcmlnaW4iLCJib290c3RyYXBfaWZyYW1lIiwiZmFjYWRlIiwib25NZXNzYWdlIiwiSW5mb0lmcmFtZSIsImdvIiwiaWZyIiwiSW5mb1JlY2VpdmVyIiwidXJsSW5mbyIsImRvWGhyIiwiWERSIiwiWEhSQ29ycyIsIlhIUkxvY2FsIiwiWEhSRmFrZSIsIl9nZXRSZWNlaXZlciIsInRpbWVvdXRSZWYiLCJDT05ORUNUSU5HIiwiZXh0ZW5zaW9ucyIsInByb3RvY29sc193aGl0ZWxpc3QiLCJfdHJhbnNwb3J0c1doaXRlbGlzdCIsInRyYW5zcG9ydHMiLCJfdHJhbnNwb3J0T3B0aW9ucyIsInRyYW5zcG9ydE9wdGlvbnMiLCJzZXNzaW9uSWQiLCJfZ2VuZXJhdGVTZXNzaW9uSWQiLCJfc2VydmVyIiwicGFyc2VkVXJsIiwic2VjdXJlIiwic29ydGVkUHJvdG9jb2xzIiwic29ydCIsInByb3RvIiwibyIsIl9vcmlnaW4iLCJfdXJsSW5mbyIsIl9pciIsIl9yZWNlaXZlSW5mbyIsInVzZXJTZXRDb2RlIiwiZXNjYXBlIiwiQ0xPU0lORyIsIkNMT1NFRCIsIk9QRU4iLCJfcnRvIiwiY291bnRSVE8iLCJfdHJhbnNVcmwiLCJiYXNlX3VybCIsImVuYWJsZWRUcmFuc3BvcnRzIiwiZmlsdGVyVG9FbmFibGVkIiwiX3RyYW5zcG9ydHMiLCJtYWluIiwiX2Nvbm5lY3QiLCJUcmFuc3BvcnQiLCJ1bnNoaWZ0IiwidGltZW91dE1zIiwiX3RyYW5zcG9ydFRpbWVvdXRJZCIsIl90cmFuc3BvcnRUaW1lb3V0IiwidHJhbnNwb3J0VXJsIiwidHJhbnNwb3J0T2JqIiwiX29wZW4iLCJmb3JjZUZhaWwiLCJ0b0ludGVnZXIiLCJudW0iLCJhYnMiLCJUb1VpbnQzMiIsIkVtcHR5IiwiQXJyYXlQcm90b3R5cGUiLCJPYmplY3RQcm90b3R5cGUiLCJGdW5jdGlvblByb3RvdHlwZSIsIlN0cmluZ1Byb3RvdHlwZSIsImFycmF5X3NsaWNlIiwiX3RvU3RyaW5nIiwiaXNTdHJpbmciLCJzdXBwb3J0c0Rlc2NyaXB0b3JzIiwiZm9yY2VBc3NpZ24iLCJ0b09iamVjdCIsInRoYXQiLCJiaW5kZXIiLCJib3VuZCIsImJvdW5kTGVuZ3RoIiwiYm91bmRBcmdzIiwiYm94ZWRTdHJpbmciLCJzcGxpdFN0cmluZyIsInByb3Blcmx5Qm94ZXNDb250ZXh0IiwicHJvcGVybHlCb3hlc05vblN0cmljdCIsInByb3Blcmx5Qm94ZXNTdHJpY3QiLCJfIiwiX18iLCJ0aGlzcCIsImhhc0ZpcmVmb3gySW5kZXhPZkJ1ZyIsInNvdWdodCIsInN0cmluZ19zcGxpdCIsImNvbXBsaWFudEV4ZWNOcGNnIiwic2VwYXJhdG9yIiwibGltaXQiLCJzZXBhcmF0b3IyIiwibGFzdEluZGV4IiwibGFzdExlbmd0aCIsIm91dHB1dCIsImZsYWdzIiwiaWdub3JlQ2FzZSIsIm11bHRpbGluZSIsImV4dGVuZGVkIiwic3RpY2t5IiwibGFzdExhc3RJbmRleCIsInplcm9XaWR0aCIsIndzUmVnZXhDaGFycyIsInRyaW1CZWdpblJlZ2V4cCIsInRyaW1FbmRSZWdleHAiLCJoYXNUcmltV2hpdGVzcGFjZUJ1ZyIsInN0cmluZ19zdWJzdHIiLCJoYXNOZWdhdGl2ZVN1YnN0ckJ1ZyIsInN0YXJ0IiwiTW96V2ViU29ja2V0IiwiSnNvblBUcmFuc3BvcnQiLCJqc29ucFNlbmRlciIsIkpzb25wUmVjZWl2ZXIiLCJzZW5kZXIiLCJzZW5kQnVmZmVyIiwic2VuZFN0b3AiLCJzZW5kU2NoZWR1bGUiLCJzZW5kU2NoZWR1bGVXYWl0IiwicmVjZWl2ZVVybCIsIl9zY2hlZHVsZVJlY2VpdmVyIiwicG9sbElzQ2xvc2luZyIsImVzIiwiZGVjb2RlVVJJIiwiaHRtbGZpbGVFbmFibGVkIiwiY29uc3RydWN0RnVuYyIsInVybFdpdGhJZCIsIl9jYWxsYmFjayIsIl9jcmVhdGVTY3JpcHQiLCJ0aW1lb3V0SWQiLCJfYWJvcnQiLCJzY3JpcHRFcnJvclRpbWVvdXQiLCJhYm9ydGluZyIsInNjcmlwdDIiLCJzY3JpcHQiLCJvbmNsaWNrIiwiX3NjcmlwdEVycm9yIiwiZXJyb3JUaW1lciIsImxvYWRlZE9rYXkiLCJjaGFyc2V0IiwiaHRtbEZvciIsImFzeW5jIiwiaGVhZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImNyZWF0ZUZvcm0iLCJmb3JtIiwiZW5jdHlwZSIsImFjY2VwdENoYXJzZXQiLCJhcmVhIiwiYWN0aW9uIiwic3VibWl0IiwiY29tcGxldGVkIiwidG8iLCJXZWJTb2NrZXRUcmFuc3BvcnQiLCJpZ25vcmUiLCJXZWJzb2NrZXREcml2ZXIiLCJYZHJQb2xsaW5nVHJhbnNwb3J0IiwiWGhyU3RyZWFtaW5nVHJhbnNwb3J0IiwiZ2V0UmFuZG9tVmFsdWVzIiwiZXh0cmFMb29rdXAiLCJleHRyYUVzY2FwYWJsZSIsInVucm9sbExvb2t1cCIsImVzY2FwYWJsZSIsInVucm9sbGVkIiwicXVvdGVkIiwibG9nT2JqZWN0IiwibGV2ZWwiLCJsZXZlbEV4aXN0cyIsInRyYW5zcG9ydHNXaGl0ZWxpc3QiLCJ0cmFucyIsIndlYnNvY2tldCIsImZpbmFsZGVzdGluYXRpb24iLCJ1bmVzY2FwZSIsIl9fd2VicGFja19hbWRfb3B0aW9uc19fIiwid2VicGFja1BvbHlmaWxsIiwiZGVwcmVjYXRlIiwicGF0aHMiLCJjaGlsZHJlbiJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUksRUFBQUosRUFDQUssR0FBQSxFQUNBSCxXQVVBLE9BTkFKLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FB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QUEsTUFDQWdCLFlBQUEsRUFDQUUsY0FBQSxFQUNBK08sSUFBQSxXQUFvQixNQUFBalEsR0FBQUMsS0FFcEJELEVBQUFrNEIsZ0JBQUEsR0FFQWw0QiIsImZpbGUiOiJjaGF0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzNik7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcblx0ICAgICAgY29uc3RydWN0b3I6IHtcblx0ICAgICAgICB2YWx1ZTogY3Rvcixcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfTtcblx0fSBlbHNlIHtcblx0ICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cblx0ICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcblx0ICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcblx0ICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0LyoqXG5cdCAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cblx0ICpcblx0ICogRXhwb3NlIGBkZWJ1ZygpYCBhcyB0aGUgbW9kdWxlLlxuXHQgKi9cblx0XG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHRleHBvcnRzLmxvZyA9IGxvZztcblx0ZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcblx0ZXhwb3J0cy5zYXZlID0gc2F2ZTtcblx0ZXhwb3J0cy5sb2FkID0gbG9hZDtcblx0ZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5cdGV4cG9ydHMuc3RvcmFnZSA9ICd1bmRlZmluZWQnICE9IHR5cGVvZiBjaHJvbWVcblx0ICAgICAgICAgICAgICAgJiYgJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIGNocm9tZS5zdG9yYWdlXG5cdCAgICAgICAgICAgICAgICAgID8gY2hyb21lLnN0b3JhZ2UubG9jYWxcblx0ICAgICAgICAgICAgICAgICAgOiBsb2NhbHN0b3JhZ2UoKTtcblx0XG5cdC8qKlxuXHQgKiBDb2xvcnMuXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5jb2xvcnMgPSBbXG5cdCAgJ2xpZ2h0c2VhZ3JlZW4nLFxuXHQgICdmb3Jlc3RncmVlbicsXG5cdCAgJ2dvbGRlbnJvZCcsXG5cdCAgJ2RvZGdlcmJsdWUnLFxuXHQgICdkYXJrb3JjaGlkJyxcblx0ICAnY3JpbXNvbidcblx0XTtcblx0XG5cdC8qKlxuXHQgKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuXHQgKiBhbmQgdGhlIEZpcmVidWcgZXh0ZW5zaW9uIChhbnkgRmlyZWZveCB2ZXJzaW9uKSBhcmUga25vd25cblx0ICogdG8gc3VwcG9ydCBcIiVjXCIgQ1NTIGN1c3RvbWl6YXRpb25zLlxuXHQgKlxuXHQgKiBUT0RPOiBhZGQgYSBgbG9jYWxTdG9yYWdlYCB2YXJpYWJsZSB0byBleHBsaWNpdGx5IGVuYWJsZS9kaXNhYmxlIGNvbG9yc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHVzZUNvbG9ycygpIHtcblx0ICAvLyBpcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuXHQgIHJldHVybiAoJ1dlYmtpdEFwcGVhcmFuY2UnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSkgfHxcblx0ICAgIC8vIGlzIGZpcmVidWc/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM5ODEyMC8zNzY3NzNcblx0ICAgICh3aW5kb3cuY29uc29sZSAmJiAoY29uc29sZS5maXJlYnVnIHx8IChjb25zb2xlLmV4Y2VwdGlvbiAmJiBjb25zb2xlLnRhYmxlKSkpIHx8XG5cdCAgICAvLyBpcyBmaXJlZm94ID49IHYzMT9cblx0ICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvVG9vbHMvV2ViX0NvbnNvbGUjU3R5bGluZ19tZXNzYWdlc1xuXHQgICAgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS8pICYmIHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApID49IDMxKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1hcCAlaiB0byBgSlNPTi5zdHJpbmdpZnkoKWAsIHNpbmNlIG5vIFdlYiBJbnNwZWN0b3JzIGRvIHRoYXQgYnkgZGVmYXVsdC5cblx0ICovXG5cdFxuXHRleHBvcnRzLmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uKHYpIHtcblx0ICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG5cdH07XG5cdFxuXHRcblx0LyoqXG5cdCAqIENvbG9yaXplIGxvZyBhcmd1bWVudHMgaWYgZW5hYmxlZC5cblx0ICpcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRBcmdzKCkge1xuXHQgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHQgIHZhciB1c2VDb2xvcnMgPSB0aGlzLnVzZUNvbG9ycztcblx0XG5cdCAgYXJnc1swXSA9ICh1c2VDb2xvcnMgPyAnJWMnIDogJycpXG5cdCAgICArIHRoaXMubmFtZXNwYWNlXG5cdCAgICArICh1c2VDb2xvcnMgPyAnICVjJyA6ICcgJylcblx0ICAgICsgYXJnc1swXVxuXHQgICAgKyAodXNlQ29sb3JzID8gJyVjICcgOiAnICcpXG5cdCAgICArICcrJyArIGV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblx0XG5cdCAgaWYgKCF1c2VDb2xvcnMpIHJldHVybiBhcmdzO1xuXHRcblx0ICB2YXIgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdCAgYXJncyA9IFthcmdzWzBdLCBjLCAnY29sb3I6IGluaGVyaXQnXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncywgMSkpO1xuXHRcblx0ICAvLyB0aGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuXHQgIC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cblx0ICAvLyBmaWd1cmUgb3V0IHRoZSBjb3JyZWN0IGluZGV4IHRvIGluc2VydCB0aGUgQ1NTIGludG9cblx0ICB2YXIgaW5kZXggPSAwO1xuXHQgIHZhciBsYXN0QyA9IDA7XG5cdCAgYXJnc1swXS5yZXBsYWNlKC8lW2EteiVdL2csIGZ1bmN0aW9uKG1hdGNoKSB7XG5cdCAgICBpZiAoJyUlJyA9PT0gbWF0Y2gpIHJldHVybjtcblx0ICAgIGluZGV4Kys7XG5cdCAgICBpZiAoJyVjJyA9PT0gbWF0Y2gpIHtcblx0ICAgICAgLy8gd2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG5cdCAgICAgIC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG5cdCAgICAgIGxhc3RDID0gaW5kZXg7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcblx0ICByZXR1cm4gYXJncztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEludm9rZXMgYGNvbnNvbGUubG9nKClgIHdoZW4gYXZhaWxhYmxlLlxuXHQgKiBOby1vcCB3aGVuIGBjb25zb2xlLmxvZ2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuXHQgKlxuXHQgKiBAYXBpIHB1YmxpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxvZygpIHtcblx0ICAvLyB0aGlzIGhhY2tlcnkgaXMgcmVxdWlyZWQgZm9yIElFOC85LCB3aGVyZVxuXHQgIC8vIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uIGRvZXNuJ3QgaGF2ZSAnYXBwbHknXG5cdCAgcmV0dXJuICdvYmplY3QnID09PSB0eXBlb2YgY29uc29sZVxuXHQgICAgJiYgY29uc29sZS5sb2dcblx0ICAgICYmIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGNvbnNvbGUubG9nLCBjb25zb2xlLCBhcmd1bWVudHMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2F2ZSBgbmFtZXNwYWNlc2AuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHQgIHRyeSB7XG5cdCAgICBpZiAobnVsbCA9PSBuYW1lc3BhY2VzKSB7XG5cdCAgICAgIGV4cG9ydHMuc3RvcmFnZS5yZW1vdmVJdGVtKCdkZWJ1ZycpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZXhwb3J0cy5zdG9yYWdlLmRlYnVnID0gbmFtZXNwYWNlcztcblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHt9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBMb2FkIGBuYW1lc3BhY2VzYC5cblx0ICpcblx0ICogQHJldHVybiB7U3RyaW5nfSByZXR1cm5zIHRoZSBwcmV2aW91c2x5IHBlcnNpc3RlZCBkZWJ1ZyBtb2Rlc1xuXHQgKiBAYXBpIHByaXZhdGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsb2FkKCkge1xuXHQgIHZhciByO1xuXHQgIHRyeSB7XG5cdCAgICByID0gZXhwb3J0cy5zdG9yYWdlLmRlYnVnO1xuXHQgIH0gY2F0Y2goZSkge31cblx0ICByZXR1cm4gcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuYWJsZSBuYW1lc3BhY2VzIGxpc3RlZCBpbiBgbG9jYWxTdG9yYWdlLmRlYnVnYCBpbml0aWFsbHkuXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5lbmFibGUobG9hZCgpKTtcblx0XG5cdC8qKlxuXHQgKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuXG5cdCAqXG5cdCAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuXHQgKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZVxuXHQgKiBhbmQgeW91IGF0dGVtcHQgdG8gYWNjZXNzIGl0LlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9XG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpe1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZTtcblx0ICB9IGNhdGNoIChlKSB7fVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXHRcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGRyYWluaW5nID0gZmFsc2U7XG5cdHZhciBjdXJyZW50UXVldWU7XG5cdHZhciBxdWV1ZUluZGV4ID0gLTE7XG5cdFxuXHRmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICB9XG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgZHJhaW5RdWV1ZSgpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIHdoaWxlKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCBFdmVudFRhcmdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpXG5cdCAgO1xuXHRcblx0ZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuXHQgIEV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cdH1cblx0XG5cdGluaGVyaXRzKEV2ZW50RW1pdHRlciwgRXZlbnRUYXJnZXQpO1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIGRlbGV0ZSB0aGlzLl9saXN0ZW5lcnNbdHlwZV07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuXHQgIH1cblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG5cdCAgdmFyIHNlbGYgPSB0aGlzXG5cdCAgICAsIGZpcmVkID0gZmFsc2U7XG5cdFxuXHQgIGZ1bmN0aW9uIGcoKSB7XG5cdCAgICBzZWxmLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXHRcblx0ICAgIGlmICghZmlyZWQpIHtcblx0ICAgICAgZmlyZWQgPSB0cnVlO1xuXHQgICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdGhpcy5vbih0eXBlLCBnKTtcblx0fTtcblx0XG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciB0eXBlID0gYXJndW1lbnRzWzBdO1xuXHQgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbdHlwZV07XG5cdCAgaWYgKCFsaXN0ZW5lcnMpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgLy8gZXF1aXZhbGVudCBvZiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXHQgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICB2YXIgYXJncyA9IG5ldyBBcnJheShsIC0gMSk7XG5cdCAgZm9yICh2YXIgYWkgPSAxOyBhaSA8IGw7IGFpKyspIHtcblx0ICAgIGFyZ3NbYWkgLSAxXSA9IGFyZ3VtZW50c1thaV07XG5cdCAgfVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBFdmVudFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjtcblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBVUkwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgZGVidWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCdzb2NranMtY2xpZW50OnV0aWxzOnVybCcpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBnZXRPcmlnaW46IGZ1bmN0aW9uKHVybCkge1xuXHQgICAgaWYgKCF1cmwpIHtcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHAgPSBuZXcgVVJMKHVybCk7XG5cdCAgICBpZiAocC5wcm90b2NvbCA9PT0gJ2ZpbGU6Jykge1xuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcG9ydCA9IHAucG9ydDtcblx0ICAgIGlmICghcG9ydCkge1xuXHQgICAgICBwb3J0ID0gKHAucHJvdG9jb2wgPT09ICdodHRwczonKSA/ICc0NDMnIDogJzgwJztcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcC5wcm90b2NvbCArICcvLycgKyBwLmhvc3RuYW1lICsgJzonICsgcG9ydDtcblx0ICB9XG5cdFxuXHQsIGlzT3JpZ2luRXF1YWw6IGZ1bmN0aW9uKGEsIGIpIHtcblx0ICAgIHZhciByZXMgPSB0aGlzLmdldE9yaWdpbihhKSA9PT0gdGhpcy5nZXRPcmlnaW4oYik7XG5cdCAgICBkZWJ1Zygnc2FtZScsIGEsIGIsIHJlcyk7XG5cdCAgICByZXR1cm4gcmVzO1xuXHQgIH1cblx0XG5cdCwgaXNTY2hlbWVFcXVhbDogZnVuY3Rpb24oYSwgYikge1xuXHQgICAgcmV0dXJuIChhLnNwbGl0KCc6JylbMF0gPT09IGIuc3BsaXQoJzonKVswXSk7XG5cdCAgfVxuXHRcblx0LCBhZGRQYXRoOiBmdW5jdGlvbiAodXJsLCBwYXRoKSB7XG5cdCAgICB2YXIgcXMgPSB1cmwuc3BsaXQoJz8nKTtcblx0ICAgIHJldHVybiBxc1swXSArIHBhdGggKyAocXNbMV0gPyAnPycgKyBxc1sxXSA6ICcnKTtcblx0ICB9XG5cdFxuXHQsIGFkZFF1ZXJ5OiBmdW5jdGlvbiAodXJsLCBxKSB7XG5cdCAgICByZXR1cm4gdXJsICsgKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gKCc/JyArIHEpIDogKCcmJyArIHEpKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygyKSkpXG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlLCBnbG9iYWwpIHt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohIEpTT04gdjMuMy4yIHwgaHR0cDovL2Jlc3RpZWpzLmdpdGh1Yi5pby9qc29uMyB8IENvcHlyaWdodCAyMDEyLTIwMTQsIEtpdCBDYW1icmlkZ2UgfCBodHRwOi8va2l0Lm1pdC1saWNlbnNlLm9yZyAqL1xuXHQ7KGZ1bmN0aW9uICgpIHtcblx0ICAvLyBEZXRlY3QgdGhlIGBkZWZpbmVgIGZ1bmN0aW9uIGV4cG9zZWQgYnkgYXN5bmNocm9ub3VzIG1vZHVsZSBsb2FkZXJzLiBUaGVcblx0ICAvLyBzdHJpY3QgYGRlZmluZWAgY2hlY2sgaXMgbmVjZXNzYXJ5IGZvciBjb21wYXRpYmlsaXR5IHdpdGggYHIuanNgLlxuXHQgIHZhciBpc0xvYWRlciA9IFwiZnVuY3Rpb25cIiA9PT0gXCJmdW5jdGlvblwiICYmIF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXHRcblx0ICAvLyBBIHNldCBvZiB0eXBlcyB1c2VkIHRvIGRpc3Rpbmd1aXNoIG9iamVjdHMgZnJvbSBwcmltaXRpdmVzLlxuXHQgIHZhciBvYmplY3RUeXBlcyA9IHtcblx0ICAgIFwiZnVuY3Rpb25cIjogdHJ1ZSxcblx0ICAgIFwib2JqZWN0XCI6IHRydWVcblx0ICB9O1xuXHRcblx0ICAvLyBEZXRlY3QgdGhlIGBleHBvcnRzYCBvYmplY3QgZXhwb3NlZCBieSBDb21tb25KUyBpbXBsZW1lbnRhdGlvbnMuXG5cdCAgdmFyIGZyZWVFeHBvcnRzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGV4cG9ydHNdICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblx0XG5cdCAgLy8gVXNlIHRoZSBgZ2xvYmFsYCBvYmplY3QgZXhwb3NlZCBieSBOb2RlIChpbmNsdWRpbmcgQnJvd3NlcmlmeSB2aWFcblx0ICAvLyBgaW5zZXJ0LW1vZHVsZS1nbG9iYWxzYCksIE5hcndoYWwsIGFuZCBSaW5nbyBhcyB0aGUgZGVmYXVsdCBjb250ZXh0LFxuXHQgIC8vIGFuZCB0aGUgYHdpbmRvd2Agb2JqZWN0IGluIGJyb3dzZXJzLiBSaGlubyBleHBvcnRzIGEgYGdsb2JhbGAgZnVuY3Rpb25cblx0ICAvLyBpbnN0ZWFkLlxuXHQgIHZhciByb290ID0gb2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93IHx8IHRoaXMsXG5cdCAgICAgIGZyZWVHbG9iYWwgPSBmcmVlRXhwb3J0cyAmJiBvYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlXSAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiB0eXBlb2YgZ2xvYmFsID09IFwib2JqZWN0XCIgJiYgZ2xvYmFsO1xuXHRcblx0ICBpZiAoZnJlZUdsb2JhbCAmJiAoZnJlZUdsb2JhbFtcImdsb2JhbFwiXSA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsW1wid2luZG93XCJdID09PSBmcmVlR2xvYmFsIHx8IGZyZWVHbG9iYWxbXCJzZWxmXCJdID09PSBmcmVlR2xvYmFsKSkge1xuXHQgICAgcm9vdCA9IGZyZWVHbG9iYWw7XG5cdCAgfVxuXHRcblx0ICAvLyBQdWJsaWM6IEluaXRpYWxpemVzIEpTT04gMyB1c2luZyB0aGUgZ2l2ZW4gYGNvbnRleHRgIG9iamVjdCwgYXR0YWNoaW5nIHRoZVxuXHQgIC8vIGBzdHJpbmdpZnlgIGFuZCBgcGFyc2VgIGZ1bmN0aW9ucyB0byB0aGUgc3BlY2lmaWVkIGBleHBvcnRzYCBvYmplY3QuXG5cdCAgZnVuY3Rpb24gcnVuSW5Db250ZXh0KGNvbnRleHQsIGV4cG9ydHMpIHtcblx0ICAgIGNvbnRleHQgfHwgKGNvbnRleHQgPSByb290W1wiT2JqZWN0XCJdKCkpO1xuXHQgICAgZXhwb3J0cyB8fCAoZXhwb3J0cyA9IHJvb3RbXCJPYmplY3RcIl0oKSk7XG5cdFxuXHQgICAgLy8gTmF0aXZlIGNvbnN0cnVjdG9yIGFsaWFzZXMuXG5cdCAgICB2YXIgTnVtYmVyID0gY29udGV4dFtcIk51bWJlclwiXSB8fCByb290W1wiTnVtYmVyXCJdLFxuXHQgICAgICAgIFN0cmluZyA9IGNvbnRleHRbXCJTdHJpbmdcIl0gfHwgcm9vdFtcIlN0cmluZ1wiXSxcblx0ICAgICAgICBPYmplY3QgPSBjb250ZXh0W1wiT2JqZWN0XCJdIHx8IHJvb3RbXCJPYmplY3RcIl0sXG5cdCAgICAgICAgRGF0ZSA9IGNvbnRleHRbXCJEYXRlXCJdIHx8IHJvb3RbXCJEYXRlXCJdLFxuXHQgICAgICAgIFN5bnRheEVycm9yID0gY29udGV4dFtcIlN5bnRheEVycm9yXCJdIHx8IHJvb3RbXCJTeW50YXhFcnJvclwiXSxcblx0ICAgICAgICBUeXBlRXJyb3IgPSBjb250ZXh0W1wiVHlwZUVycm9yXCJdIHx8IHJvb3RbXCJUeXBlRXJyb3JcIl0sXG5cdCAgICAgICAgTWF0aCA9IGNvbnRleHRbXCJNYXRoXCJdIHx8IHJvb3RbXCJNYXRoXCJdLFxuXHQgICAgICAgIG5hdGl2ZUpTT04gPSBjb250ZXh0W1wiSlNPTlwiXSB8fCByb290W1wiSlNPTlwiXTtcblx0XG5cdCAgICAvLyBEZWxlZ2F0ZSB0byB0aGUgbmF0aXZlIGBzdHJpbmdpZnlgIGFuZCBgcGFyc2VgIGltcGxlbWVudGF0aW9ucy5cblx0ICAgIGlmICh0eXBlb2YgbmF0aXZlSlNPTiA9PSBcIm9iamVjdFwiICYmIG5hdGl2ZUpTT04pIHtcblx0ICAgICAgZXhwb3J0cy5zdHJpbmdpZnkgPSBuYXRpdmVKU09OLnN0cmluZ2lmeTtcblx0ICAgICAgZXhwb3J0cy5wYXJzZSA9IG5hdGl2ZUpTT04ucGFyc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQ29udmVuaWVuY2UgYWxpYXNlcy5cblx0ICAgIHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGUsXG5cdCAgICAgICAgZ2V0Q2xhc3MgPSBvYmplY3RQcm90by50b1N0cmluZyxcblx0ICAgICAgICBpc1Byb3BlcnR5LCBmb3JFYWNoLCB1bmRlZjtcblx0XG5cdCAgICAvLyBUZXN0IHRoZSBgRGF0ZSNnZXRVVEMqYCBtZXRob2RzLiBCYXNlZCBvbiB3b3JrIGJ5IEBZYWZmbGUuXG5cdCAgICB2YXIgaXNFeHRlbmRlZCA9IG5ldyBEYXRlKC0zNTA5ODI3MzM0NTczMjkyKTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIC8vIFRoZSBgZ2V0VVRDRnVsbFllYXJgLCBgTW9udGhgLCBhbmQgYERhdGVgIG1ldGhvZHMgcmV0dXJuIG5vbnNlbnNpY2FsXG5cdCAgICAgIC8vIHJlc3VsdHMgZm9yIGNlcnRhaW4gZGF0ZXMgaW4gT3BlcmEgPj0gMTAuNTMuXG5cdCAgICAgIGlzRXh0ZW5kZWQgPSBpc0V4dGVuZGVkLmdldFVUQ0Z1bGxZZWFyKCkgPT0gLTEwOTI1MiAmJiBpc0V4dGVuZGVkLmdldFVUQ01vbnRoKCkgPT09IDAgJiYgaXNFeHRlbmRlZC5nZXRVVENEYXRlKCkgPT09IDEgJiZcblx0ICAgICAgICAvLyBTYWZhcmkgPCAyLjAuMiBzdG9yZXMgdGhlIGludGVybmFsIG1pbGxpc2Vjb25kIHRpbWUgdmFsdWUgY29ycmVjdGx5LFxuXHQgICAgICAgIC8vIGJ1dCBjbGlwcyB0aGUgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBkYXRlIG1ldGhvZHMgdG8gdGhlIHJhbmdlIG9mXG5cdCAgICAgICAgLy8gc2lnbmVkIDMyLWJpdCBpbnRlZ2VycyAoWy0yICoqIDMxLCAyICoqIDMxIC0gMV0pLlxuXHQgICAgICAgIGlzRXh0ZW5kZWQuZ2V0VVRDSG91cnMoKSA9PSAxMCAmJiBpc0V4dGVuZGVkLmdldFVUQ01pbnV0ZXMoKSA9PSAzNyAmJiBpc0V4dGVuZGVkLmdldFVUQ1NlY29uZHMoKSA9PSA2ICYmIGlzRXh0ZW5kZWQuZ2V0VVRDTWlsbGlzZWNvbmRzKCkgPT0gNzA4O1xuXHQgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuXHRcblx0ICAgIC8vIEludGVybmFsOiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIG5hdGl2ZSBgSlNPTi5zdHJpbmdpZnlgIGFuZCBgcGFyc2VgXG5cdCAgICAvLyBpbXBsZW1lbnRhdGlvbnMgYXJlIHNwZWMtY29tcGxpYW50LiBCYXNlZCBvbiB3b3JrIGJ5IEtlbiBTbnlkZXIuXG5cdCAgICBmdW5jdGlvbiBoYXMobmFtZSkge1xuXHQgICAgICBpZiAoaGFzW25hbWVdICE9PSB1bmRlZikge1xuXHQgICAgICAgIC8vIFJldHVybiBjYWNoZWQgZmVhdHVyZSB0ZXN0IHJlc3VsdC5cblx0ICAgICAgICByZXR1cm4gaGFzW25hbWVdO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBpc1N1cHBvcnRlZDtcblx0ICAgICAgaWYgKG5hbWUgPT0gXCJidWctc3RyaW5nLWNoYXItaW5kZXhcIikge1xuXHQgICAgICAgIC8vIElFIDw9IDcgZG9lc24ndCBzdXBwb3J0IGFjY2Vzc2luZyBzdHJpbmcgY2hhcmFjdGVycyB1c2luZyBzcXVhcmVcblx0ICAgICAgICAvLyBicmFja2V0IG5vdGF0aW9uLiBJRSA4IG9ubHkgc3VwcG9ydHMgdGhpcyBmb3IgcHJpbWl0aXZlcy5cblx0ICAgICAgICBpc1N1cHBvcnRlZCA9IFwiYVwiWzBdICE9IFwiYVwiO1xuXHQgICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gXCJqc29uXCIpIHtcblx0ICAgICAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciBib3RoIGBKU09OLnN0cmluZ2lmeWAgYW5kIGBKU09OLnBhcnNlYCBhcmVcblx0ICAgICAgICAvLyBzdXBwb3J0ZWQuXG5cdCAgICAgICAgaXNTdXBwb3J0ZWQgPSBoYXMoXCJqc29uLXN0cmluZ2lmeVwiKSAmJiBoYXMoXCJqc29uLXBhcnNlXCIpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhciB2YWx1ZSwgc2VyaWFsaXplZCA9ICd7XCJhXCI6WzEsdHJ1ZSxmYWxzZSxudWxsLFwiXFxcXHUwMDAwXFxcXGJcXFxcblxcXFxmXFxcXHJcXFxcdFwiXX0nO1xuXHQgICAgICAgIC8vIFRlc3QgYEpTT04uc3RyaW5naWZ5YC5cblx0ICAgICAgICBpZiAobmFtZSA9PSBcImpzb24tc3RyaW5naWZ5XCIpIHtcblx0ICAgICAgICAgIHZhciBzdHJpbmdpZnkgPSBleHBvcnRzLnN0cmluZ2lmeSwgc3RyaW5naWZ5U3VwcG9ydGVkID0gdHlwZW9mIHN0cmluZ2lmeSA9PSBcImZ1bmN0aW9uXCIgJiYgaXNFeHRlbmRlZDtcblx0ICAgICAgICAgIGlmIChzdHJpbmdpZnlTdXBwb3J0ZWQpIHtcblx0ICAgICAgICAgICAgLy8gQSB0ZXN0IGZ1bmN0aW9uIG9iamVjdCB3aXRoIGEgY3VzdG9tIGB0b0pTT05gIG1ldGhvZC5cblx0ICAgICAgICAgICAgKHZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgIHJldHVybiAxO1xuXHQgICAgICAgICAgICB9KS50b0pTT04gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICBzdHJpbmdpZnlTdXBwb3J0ZWQgPVxuXHQgICAgICAgICAgICAgICAgLy8gRmlyZWZveCAzLjFiMSBhbmQgYjIgc2VyaWFsaXplIHN0cmluZywgbnVtYmVyLCBhbmQgYm9vbGVhblxuXHQgICAgICAgICAgICAgICAgLy8gcHJpbWl0aXZlcyBhcyBvYmplY3QgbGl0ZXJhbHMuXG5cdCAgICAgICAgICAgICAgICBzdHJpbmdpZnkoMCkgPT09IFwiMFwiICYmXG5cdCAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgYjIsIGFuZCBKU09OIDIgc2VyaWFsaXplIHdyYXBwZWQgcHJpbWl0aXZlcyBhcyBvYmplY3Rcblx0ICAgICAgICAgICAgICAgIC8vIGxpdGVyYWxzLlxuXHQgICAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBOdW1iZXIoKSkgPT09IFwiMFwiICYmXG5cdCAgICAgICAgICAgICAgICBzdHJpbmdpZnkobmV3IFN0cmluZygpKSA9PSAnXCJcIicgJiZcblx0ICAgICAgICAgICAgICAgIC8vIEZGIDMuMWIxLCAyIHRocm93IGFuIGVycm9yIGlmIHRoZSB2YWx1ZSBpcyBgbnVsbGAsIGB1bmRlZmluZWRgLCBvclxuXHQgICAgICAgICAgICAgICAgLy8gZG9lcyBub3QgZGVmaW5lIGEgY2Fub25pY2FsIEpTT04gcmVwcmVzZW50YXRpb24gKHRoaXMgYXBwbGllcyB0b1xuXHQgICAgICAgICAgICAgICAgLy8gb2JqZWN0cyB3aXRoIGB0b0pTT05gIHByb3BlcnRpZXMgYXMgd2VsbCwgKnVubGVzcyogdGhleSBhcmUgbmVzdGVkXG5cdCAgICAgICAgICAgICAgICAvLyB3aXRoaW4gYW4gb2JqZWN0IG9yIGFycmF5KS5cblx0ICAgICAgICAgICAgICAgIHN0cmluZ2lmeShnZXRDbGFzcykgPT09IHVuZGVmICYmXG5cdCAgICAgICAgICAgICAgICAvLyBJRSA4IHNlcmlhbGl6ZXMgYHVuZGVmaW5lZGAgYXMgYFwidW5kZWZpbmVkXCJgLiBTYWZhcmkgPD0gNS4xLjcgYW5kXG5cdCAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMyBwYXNzIHRoaXMgdGVzdC5cblx0ICAgICAgICAgICAgICAgIHN0cmluZ2lmeSh1bmRlZikgPT09IHVuZGVmICYmXG5cdCAgICAgICAgICAgICAgICAvLyBTYWZhcmkgPD0gNS4xLjcgYW5kIEZGIDMuMWIzIHRocm93IGBFcnJvcmBzIGFuZCBgVHlwZUVycm9yYHMsXG5cdCAgICAgICAgICAgICAgICAvLyByZXNwZWN0aXZlbHksIGlmIHRoZSB2YWx1ZSBpcyBvbWl0dGVkIGVudGlyZWx5LlxuXHQgICAgICAgICAgICAgICAgc3RyaW5naWZ5KCkgPT09IHVuZGVmICYmXG5cdCAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgMiB0aHJvdyBhbiBlcnJvciBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgbm90IGEgbnVtYmVyLFxuXHQgICAgICAgICAgICAgICAgLy8gc3RyaW5nLCBhcnJheSwgb2JqZWN0LCBCb29sZWFuLCBvciBgbnVsbGAgbGl0ZXJhbC4gVGhpcyBhcHBsaWVzIHRvXG5cdCAgICAgICAgICAgICAgICAvLyBvYmplY3RzIHdpdGggY3VzdG9tIGB0b0pTT05gIG1ldGhvZHMgYXMgd2VsbCwgdW5sZXNzIHRoZXkgYXJlIG5lc3RlZFxuXHQgICAgICAgICAgICAgICAgLy8gaW5zaWRlIG9iamVjdCBvciBhcnJheSBsaXRlcmFscy4gWVVJIDMuMC4wYjEgaWdub3JlcyBjdXN0b20gYHRvSlNPTmBcblx0ICAgICAgICAgICAgICAgIC8vIG1ldGhvZHMgZW50aXJlbHkuXG5cdCAgICAgICAgICAgICAgICBzdHJpbmdpZnkodmFsdWUpID09PSBcIjFcIiAmJlxuXHQgICAgICAgICAgICAgICAgc3RyaW5naWZ5KFt2YWx1ZV0pID09IFwiWzFdXCIgJiZcblx0ICAgICAgICAgICAgICAgIC8vIFByb3RvdHlwZSA8PSAxLjYuMSBzZXJpYWxpemVzIGBbdW5kZWZpbmVkXWAgYXMgYFwiW11cImAgaW5zdGVhZCBvZlxuXHQgICAgICAgICAgICAgICAgLy8gYFwiW251bGxdXCJgLlxuXHQgICAgICAgICAgICAgICAgc3RyaW5naWZ5KFt1bmRlZl0pID09IFwiW251bGxdXCIgJiZcblx0ICAgICAgICAgICAgICAgIC8vIFlVSSAzLjAuMGIxIGZhaWxzIHRvIHNlcmlhbGl6ZSBgbnVsbGAgbGl0ZXJhbHMuXG5cdCAgICAgICAgICAgICAgICBzdHJpbmdpZnkobnVsbCkgPT0gXCJudWxsXCIgJiZcblx0ICAgICAgICAgICAgICAgIC8vIEZGIDMuMWIxLCAyIGhhbHRzIHNlcmlhbGl6YXRpb24gaWYgYW4gYXJyYXkgY29udGFpbnMgYSBmdW5jdGlvbjpcblx0ICAgICAgICAgICAgICAgIC8vIGBbMSwgdHJ1ZSwgZ2V0Q2xhc3MsIDFdYCBzZXJpYWxpemVzIGFzIFwiWzEsdHJ1ZSxdLFwiLiBGRiAzLjFiM1xuXHQgICAgICAgICAgICAgICAgLy8gZWxpZGVzIG5vbi1KU09OIHZhbHVlcyBmcm9tIG9iamVjdHMgYW5kIGFycmF5cywgdW5sZXNzIHRoZXlcblx0ICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjdXN0b20gYHRvSlNPTmAgbWV0aG9kcy5cblx0ICAgICAgICAgICAgICAgIHN0cmluZ2lmeShbdW5kZWYsIGdldENsYXNzLCBudWxsXSkgPT0gXCJbbnVsbCxudWxsLG51bGxdXCIgJiZcblx0ICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBzZXJpYWxpemF0aW9uIHRlc3QuIEZGIDMuMWIxIHVzZXMgVW5pY29kZSBlc2NhcGUgc2VxdWVuY2VzXG5cdCAgICAgICAgICAgICAgICAvLyB3aGVyZSBjaGFyYWN0ZXIgZXNjYXBlIGNvZGVzIGFyZSBleHBlY3RlZCAoZS5nLiwgYFxcYmAgPT4gYFxcdTAwMDhgKS5cblx0ICAgICAgICAgICAgICAgIHN0cmluZ2lmeSh7IFwiYVwiOiBbdmFsdWUsIHRydWUsIGZhbHNlLCBudWxsLCBcIlxceDAwXFxiXFxuXFxmXFxyXFx0XCJdIH0pID09IHNlcmlhbGl6ZWQgJiZcblx0ICAgICAgICAgICAgICAgIC8vIEZGIDMuMWIxIGFuZCBiMiBpZ25vcmUgdGhlIGBmaWx0ZXJgIGFuZCBgd2lkdGhgIGFyZ3VtZW50cy5cblx0ICAgICAgICAgICAgICAgIHN0cmluZ2lmeShudWxsLCB2YWx1ZSkgPT09IFwiMVwiICYmXG5cdCAgICAgICAgICAgICAgICBzdHJpbmdpZnkoWzEsIDJdLCBudWxsLCAxKSA9PSBcIltcXG4gMSxcXG4gMlxcbl1cIiAmJlxuXHQgICAgICAgICAgICAgICAgLy8gSlNPTiAyLCBQcm90b3R5cGUgPD0gMS43LCBhbmQgb2xkZXIgV2ViS2l0IGJ1aWxkcyBpbmNvcnJlY3RseVxuXHQgICAgICAgICAgICAgICAgLy8gc2VyaWFsaXplIGV4dGVuZGVkIHllYXJzLlxuXHQgICAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBEYXRlKC04LjY0ZTE1KSkgPT0gJ1wiLTI3MTgyMS0wNC0yMFQwMDowMDowMC4wMDBaXCInICYmXG5cdCAgICAgICAgICAgICAgICAvLyBUaGUgbWlsbGlzZWNvbmRzIGFyZSBvcHRpb25hbCBpbiBFUyA1LCBidXQgcmVxdWlyZWQgaW4gNS4xLlxuXHQgICAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBEYXRlKDguNjRlMTUpKSA9PSAnXCIrMjc1NzYwLTA5LTEzVDAwOjAwOjAwLjAwMFpcIicgJiZcblx0ICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggPD0gMTEuMCBpbmNvcnJlY3RseSBzZXJpYWxpemVzIHllYXJzIHByaW9yIHRvIDAgYXMgbmVnYXRpdmVcblx0ICAgICAgICAgICAgICAgIC8vIGZvdXItZGlnaXQgeWVhcnMgaW5zdGVhZCBvZiBzaXgtZGlnaXQgeWVhcnMuIENyZWRpdHM6IEBZYWZmbGUuXG5cdCAgICAgICAgICAgICAgICBzdHJpbmdpZnkobmV3IERhdGUoLTYyMTk4NzU1MmU1KSkgPT0gJ1wiLTAwMDAwMS0wMS0wMVQwMDowMDowMC4wMDBaXCInICYmXG5cdCAgICAgICAgICAgICAgICAvLyBTYWZhcmkgPD0gNS4xLjUgYW5kIE9wZXJhID49IDEwLjUzIGluY29ycmVjdGx5IHNlcmlhbGl6ZSBtaWxsaXNlY29uZFxuXHQgICAgICAgICAgICAgICAgLy8gdmFsdWVzIGxlc3MgdGhhbiAxMDAwLiBDcmVkaXRzOiBAWWFmZmxlLlxuXHQgICAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBEYXRlKC0xKSkgPT0gJ1wiMTk2OS0xMi0zMVQyMzo1OTo1OS45OTlaXCInO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcblx0ICAgICAgICAgICAgICBzdHJpbmdpZnlTdXBwb3J0ZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaXNTdXBwb3J0ZWQgPSBzdHJpbmdpZnlTdXBwb3J0ZWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIFRlc3QgYEpTT04ucGFyc2VgLlxuXHQgICAgICAgIGlmIChuYW1lID09IFwianNvbi1wYXJzZVwiKSB7XG5cdCAgICAgICAgICB2YXIgcGFyc2UgPSBleHBvcnRzLnBhcnNlO1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBwYXJzZSA9PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgYjIgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYSBiYXJlIGxpdGVyYWwgaXMgcHJvdmlkZWQuXG5cdCAgICAgICAgICAgICAgLy8gQ29uZm9ybWluZyBpbXBsZW1lbnRhdGlvbnMgc2hvdWxkIGFsc28gY29lcmNlIHRoZSBpbml0aWFsIGFyZ3VtZW50IHRvXG5cdCAgICAgICAgICAgICAgLy8gYSBzdHJpbmcgcHJpb3IgdG8gcGFyc2luZy5cblx0ICAgICAgICAgICAgICBpZiAocGFyc2UoXCIwXCIpID09PSAwICYmICFwYXJzZShmYWxzZSkpIHtcblx0ICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBwYXJzaW5nIHRlc3QuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcnNlKHNlcmlhbGl6ZWQpO1xuXHQgICAgICAgICAgICAgICAgdmFyIHBhcnNlU3VwcG9ydGVkID0gdmFsdWVbXCJhXCJdLmxlbmd0aCA9PSA1ICYmIHZhbHVlW1wiYVwiXVswXSA9PT0gMTtcblx0ICAgICAgICAgICAgICAgIGlmIChwYXJzZVN1cHBvcnRlZCkge1xuXHQgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaSA8PSA1LjEuMiBhbmQgRkYgMy4xYjEgYWxsb3cgdW5lc2NhcGVkIHRhYnMgaW4gc3RyaW5ncy5cblx0ICAgICAgICAgICAgICAgICAgICBwYXJzZVN1cHBvcnRlZCA9ICFwYXJzZSgnXCJcXHRcIicpO1xuXHQgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHt9XG5cdCAgICAgICAgICAgICAgICAgIGlmIChwYXJzZVN1cHBvcnRlZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAvLyBGRiA0LjAgYW5kIDQuMC4xIGFsbG93IGxlYWRpbmcgYCtgIHNpZ25zIGFuZCBsZWFkaW5nXG5cdCAgICAgICAgICAgICAgICAgICAgICAvLyBkZWNpbWFsIHBvaW50cy4gRkYgNC4wLCA0LjAuMSwgYW5kIElFIDktMTAgYWxzbyBhbGxvd1xuXHQgICAgICAgICAgICAgICAgICAgICAgLy8gY2VydGFpbiBvY3RhbCBsaXRlcmFscy5cblx0ICAgICAgICAgICAgICAgICAgICAgIHBhcnNlU3VwcG9ydGVkID0gcGFyc2UoXCIwMVwiKSAhPT0gMTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHt9XG5cdCAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlU3VwcG9ydGVkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgIC8vIEZGIDQuMCwgNC4wLjEsIGFuZCBSaGlubyAxLjdSMy1SNCBhbGxvdyB0cmFpbGluZyBkZWNpbWFsXG5cdCAgICAgICAgICAgICAgICAgICAgICAvLyBwb2ludHMuIFRoZXNlIGVudmlyb25tZW50cywgYWxvbmcgd2l0aCBGRiAzLjFiMSBhbmQgMixcblx0ICAgICAgICAgICAgICAgICAgICAgIC8vIGFsc28gYWxsb3cgdHJhaWxpbmcgY29tbWFzIGluIEpTT04gb2JqZWN0cyBhbmQgYXJyYXlzLlxuXHQgICAgICAgICAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSBwYXJzZShcIjEuXCIpICE9PSAxO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge31cblx0ICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG5cdCAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaXNTdXBwb3J0ZWQgPSBwYXJzZVN1cHBvcnRlZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGhhc1tuYW1lXSA9ICEhaXNTdXBwb3J0ZWQ7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFoYXMoXCJqc29uXCIpKSB7XG5cdCAgICAgIC8vIENvbW1vbiBgW1tDbGFzc11dYCBuYW1lIGFsaWFzZXMuXG5cdCAgICAgIHZhciBmdW5jdGlvbkNsYXNzID0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiLFxuXHQgICAgICAgICAgZGF0ZUNsYXNzID0gXCJbb2JqZWN0IERhdGVdXCIsXG5cdCAgICAgICAgICBudW1iZXJDbGFzcyA9IFwiW29iamVjdCBOdW1iZXJdXCIsXG5cdCAgICAgICAgICBzdHJpbmdDbGFzcyA9IFwiW29iamVjdCBTdHJpbmddXCIsXG5cdCAgICAgICAgICBhcnJheUNsYXNzID0gXCJbb2JqZWN0IEFycmF5XVwiLFxuXHQgICAgICAgICAgYm9vbGVhbkNsYXNzID0gXCJbb2JqZWN0IEJvb2xlYW5dXCI7XG5cdFxuXHQgICAgICAvLyBEZXRlY3QgaW5jb21wbGV0ZSBzdXBwb3J0IGZvciBhY2Nlc3Npbmcgc3RyaW5nIGNoYXJhY3RlcnMgYnkgaW5kZXguXG5cdCAgICAgIHZhciBjaGFySW5kZXhCdWdneSA9IGhhcyhcImJ1Zy1zdHJpbmctY2hhci1pbmRleFwiKTtcblx0XG5cdCAgICAgIC8vIERlZmluZSBhZGRpdGlvbmFsIHV0aWxpdHkgbWV0aG9kcyBpZiB0aGUgYERhdGVgIG1ldGhvZHMgYXJlIGJ1Z2d5LlxuXHQgICAgICBpZiAoIWlzRXh0ZW5kZWQpIHtcblx0ICAgICAgICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xuXHQgICAgICAgIC8vIEEgbWFwcGluZyBiZXR3ZWVuIHRoZSBtb250aHMgb2YgdGhlIHllYXIgYW5kIHRoZSBudW1iZXIgb2YgZGF5cyBiZXR3ZWVuXG5cdCAgICAgICAgLy8gSmFudWFyeSAxc3QgYW5kIHRoZSBmaXJzdCBvZiB0aGUgcmVzcGVjdGl2ZSBtb250aC5cblx0ICAgICAgICB2YXIgTW9udGhzID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcblx0ICAgICAgICAvLyBJbnRlcm5hbDogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIGRheXMgYmV0d2VlbiB0aGUgVW5peCBlcG9jaCBhbmQgdGhlXG5cdCAgICAgICAgLy8gZmlyc3QgZGF5IG9mIHRoZSBnaXZlbiBtb250aC5cblx0ICAgICAgICB2YXIgZ2V0RGF5ID0gZnVuY3Rpb24gKHllYXIsIG1vbnRoKSB7XG5cdCAgICAgICAgICByZXR1cm4gTW9udGhzW21vbnRoXSArIDM2NSAqICh5ZWFyIC0gMTk3MCkgKyBmbG9vcigoeWVhciAtIDE5NjkgKyAobW9udGggPSArKG1vbnRoID4gMSkpKSAvIDQpIC0gZmxvb3IoKHllYXIgLSAxOTAxICsgbW9udGgpIC8gMTAwKSArIGZsb29yKCh5ZWFyIC0gMTYwMSArIG1vbnRoKSAvIDQwMCk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gSW50ZXJuYWw6IERldGVybWluZXMgaWYgYSBwcm9wZXJ0eSBpcyBhIGRpcmVjdCBwcm9wZXJ0eSBvZiB0aGUgZ2l2ZW5cblx0ICAgICAgLy8gb2JqZWN0LiBEZWxlZ2F0ZXMgdG8gdGhlIG5hdGl2ZSBgT2JqZWN0I2hhc093blByb3BlcnR5YCBtZXRob2QuXG5cdCAgICAgIGlmICghKGlzUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eSkpIHtcblx0ICAgICAgICBpc1Byb3BlcnR5ID0gZnVuY3Rpb24gKHByb3BlcnR5KSB7XG5cdCAgICAgICAgICB2YXIgbWVtYmVycyA9IHt9LCBjb25zdHJ1Y3Rvcjtcblx0ICAgICAgICAgIGlmICgobWVtYmVycy5fX3Byb3RvX18gPSBudWxsLCBtZW1iZXJzLl9fcHJvdG9fXyA9IHtcblx0ICAgICAgICAgICAgLy8gVGhlICpwcm90byogcHJvcGVydHkgY2Fubm90IGJlIHNldCBtdWx0aXBsZSB0aW1lcyBpbiByZWNlbnRcblx0ICAgICAgICAgICAgLy8gdmVyc2lvbnMgb2YgRmlyZWZveCBhbmQgU2VhTW9ua2V5LlxuXHQgICAgICAgICAgICBcInRvU3RyaW5nXCI6IDFcblx0ICAgICAgICAgIH0sIG1lbWJlcnMpLnRvU3RyaW5nICE9IGdldENsYXNzKSB7XG5cdCAgICAgICAgICAgIC8vIFNhZmFyaSA8PSAyLjAuMyBkb2Vzbid0IGltcGxlbWVudCBgT2JqZWN0I2hhc093blByb3BlcnR5YCwgYnV0XG5cdCAgICAgICAgICAgIC8vIHN1cHBvcnRzIHRoZSBtdXRhYmxlICpwcm90byogcHJvcGVydHkuXG5cdCAgICAgICAgICAgIGlzUHJvcGVydHkgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcblx0ICAgICAgICAgICAgICAvLyBDYXB0dXJlIGFuZCBicmVhayB0aGUgb2JqZWN0J3MgcHJvdG90eXBlIGNoYWluIChzZWUgc2VjdGlvbiA4LjYuMlxuXHQgICAgICAgICAgICAgIC8vIG9mIHRoZSBFUyA1LjEgc3BlYykuIFRoZSBwYXJlbnRoZXNpemVkIGV4cHJlc3Npb24gcHJldmVudHMgYW5cblx0ICAgICAgICAgICAgICAvLyB1bnNhZmUgdHJhbnNmb3JtYXRpb24gYnkgdGhlIENsb3N1cmUgQ29tcGlsZXIuXG5cdCAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsID0gdGhpcy5fX3Byb3RvX18sIHJlc3VsdCA9IHByb3BlcnR5IGluICh0aGlzLl9fcHJvdG9fXyA9IG51bGwsIHRoaXMpO1xuXHQgICAgICAgICAgICAgIC8vIFJlc3RvcmUgdGhlIG9yaWdpbmFsIHByb3RvdHlwZSBjaGFpbi5cblx0ICAgICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IG9yaWdpbmFsO1xuXHQgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAvLyBDYXB0dXJlIGEgcmVmZXJlbmNlIHRvIHRoZSB0b3AtbGV2ZWwgYE9iamVjdGAgY29uc3RydWN0b3IuXG5cdCAgICAgICAgICAgIGNvbnN0cnVjdG9yID0gbWVtYmVycy5jb25zdHJ1Y3Rvcjtcblx0ICAgICAgICAgICAgLy8gVXNlIHRoZSBgY29uc3RydWN0b3JgIHByb3BlcnR5IHRvIHNpbXVsYXRlIGBPYmplY3QjaGFzT3duUHJvcGVydHlgIGluXG5cdCAgICAgICAgICAgIC8vIG90aGVyIGVudmlyb25tZW50cy5cblx0ICAgICAgICAgICAgaXNQcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuXHQgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSAodGhpcy5jb25zdHJ1Y3RvciB8fCBjb25zdHJ1Y3RvcikucHJvdG90eXBlO1xuXHQgICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eSBpbiB0aGlzICYmICEocHJvcGVydHkgaW4gcGFyZW50ICYmIHRoaXNbcHJvcGVydHldID09PSBwYXJlbnRbcHJvcGVydHldKTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG1lbWJlcnMgPSBudWxsO1xuXHQgICAgICAgICAgcmV0dXJuIGlzUHJvcGVydHkuY2FsbCh0aGlzLCBwcm9wZXJ0eSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gSW50ZXJuYWw6IE5vcm1hbGl6ZXMgdGhlIGBmb3IuLi5pbmAgaXRlcmF0aW9uIGFsZ29yaXRobSBhY3Jvc3Ncblx0ICAgICAgLy8gZW52aXJvbm1lbnRzLiBFYWNoIGVudW1lcmF0ZWQga2V5IGlzIHlpZWxkZWQgdG8gYSBgY2FsbGJhY2tgIGZ1bmN0aW9uLlxuXHQgICAgICBmb3JFYWNoID0gZnVuY3Rpb24gKG9iamVjdCwgY2FsbGJhY2spIHtcblx0ICAgICAgICB2YXIgc2l6ZSA9IDAsIFByb3BlcnRpZXMsIG1lbWJlcnMsIHByb3BlcnR5O1xuXHRcblx0ICAgICAgICAvLyBUZXN0cyBmb3IgYnVncyBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudCdzIGBmb3IuLi5pbmAgYWxnb3JpdGhtLiBUaGVcblx0ICAgICAgICAvLyBgdmFsdWVPZmAgcHJvcGVydHkgaW5oZXJpdHMgdGhlIG5vbi1lbnVtZXJhYmxlIGZsYWcgZnJvbVxuXHQgICAgICAgIC8vIGBPYmplY3QucHJvdG90eXBlYCBpbiBvbGRlciB2ZXJzaW9ucyBvZiBJRSwgTmV0c2NhcGUsIGFuZCBNb3ppbGxhLlxuXHQgICAgICAgIChQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdGhpcy52YWx1ZU9mID0gMDtcblx0ICAgICAgICB9KS5wcm90b3R5cGUudmFsdWVPZiA9IDA7XG5cdFxuXHQgICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgYFByb3BlcnRpZXNgIGNsYXNzLlxuXHQgICAgICAgIG1lbWJlcnMgPSBuZXcgUHJvcGVydGllcygpO1xuXHQgICAgICAgIGZvciAocHJvcGVydHkgaW4gbWVtYmVycykge1xuXHQgICAgICAgICAgLy8gSWdub3JlIGFsbCBwcm9wZXJ0aWVzIGluaGVyaXRlZCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC5cblx0ICAgICAgICAgIGlmIChpc1Byb3BlcnR5LmNhbGwobWVtYmVycywgcHJvcGVydHkpKSB7XG5cdCAgICAgICAgICAgIHNpemUrKztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgUHJvcGVydGllcyA9IG1lbWJlcnMgPSBudWxsO1xuXHRcblx0ICAgICAgICAvLyBOb3JtYWxpemUgdGhlIGl0ZXJhdGlvbiBhbGdvcml0aG0uXG5cdCAgICAgICAgaWYgKCFzaXplKSB7XG5cdCAgICAgICAgICAvLyBBIGxpc3Qgb2Ygbm9uLWVudW1lcmFibGUgcHJvcGVydGllcyBpbmhlcml0ZWQgZnJvbSBgT2JqZWN0LnByb3RvdHlwZWAuXG5cdCAgICAgICAgICBtZW1iZXJzID0gW1widmFsdWVPZlwiLCBcInRvU3RyaW5nXCIsIFwidG9Mb2NhbGVTdHJpbmdcIiwgXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLCBcImlzUHJvdG90eXBlT2ZcIiwgXCJoYXNPd25Qcm9wZXJ0eVwiLCBcImNvbnN0cnVjdG9yXCJdO1xuXHQgICAgICAgICAgLy8gSUUgPD0gOCwgTW96aWxsYSAxLjAsIGFuZCBOZXRzY2FwZSA2LjIgaWdub3JlIHNoYWRvd2VkIG5vbi1lbnVtZXJhYmxlXG5cdCAgICAgICAgICAvLyBwcm9wZXJ0aWVzLlxuXHQgICAgICAgICAgZm9yRWFjaCA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG5cdCAgICAgICAgICAgIHZhciBpc0Z1bmN0aW9uID0gZ2V0Q2xhc3MuY2FsbChvYmplY3QpID09IGZ1bmN0aW9uQ2xhc3MsIHByb3BlcnR5LCBsZW5ndGg7XG5cdCAgICAgICAgICAgIHZhciBoYXNQcm9wZXJ0eSA9ICFpc0Z1bmN0aW9uICYmIHR5cGVvZiBvYmplY3QuY29uc3RydWN0b3IgIT0gXCJmdW5jdGlvblwiICYmIG9iamVjdFR5cGVzW3R5cGVvZiBvYmplY3QuaGFzT3duUHJvcGVydHldICYmIG9iamVjdC5oYXNPd25Qcm9wZXJ0eSB8fCBpc1Byb3BlcnR5O1xuXHQgICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuXHQgICAgICAgICAgICAgIC8vIEdlY2tvIDw9IDEuMCBlbnVtZXJhdGVzIHRoZSBgcHJvdG90eXBlYCBwcm9wZXJ0eSBvZiBmdW5jdGlvbnMgdW5kZXJcblx0ICAgICAgICAgICAgICAvLyBjZXJ0YWluIGNvbmRpdGlvbnM7IElFIGRvZXMgbm90LlxuXHQgICAgICAgICAgICAgIGlmICghKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gXCJwcm90b3R5cGVcIikgJiYgaGFzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkge1xuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2socHJvcGVydHkpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAvLyBNYW51YWxseSBpbnZva2UgdGhlIGNhbGxiYWNrIGZvciBlYWNoIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5LlxuXHQgICAgICAgICAgICBmb3IgKGxlbmd0aCA9IG1lbWJlcnMubGVuZ3RoOyBwcm9wZXJ0eSA9IG1lbWJlcnNbLS1sZW5ndGhdOyBoYXNQcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpICYmIGNhbGxiYWNrKHByb3BlcnR5KSk7XG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gZWxzZSBpZiAoc2l6ZSA9PSAyKSB7XG5cdCAgICAgICAgICAvLyBTYWZhcmkgPD0gMi4wLjQgZW51bWVyYXRlcyBzaGFkb3dlZCBwcm9wZXJ0aWVzIHR3aWNlLlxuXHQgICAgICAgICAgZm9yRWFjaCA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG5cdCAgICAgICAgICAgIC8vIENyZWF0ZSBhIHNldCBvZiBpdGVyYXRlZCBwcm9wZXJ0aWVzLlxuXHQgICAgICAgICAgICB2YXIgbWVtYmVycyA9IHt9LCBpc0Z1bmN0aW9uID0gZ2V0Q2xhc3MuY2FsbChvYmplY3QpID09IGZ1bmN0aW9uQ2xhc3MsIHByb3BlcnR5O1xuXHQgICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuXHQgICAgICAgICAgICAgIC8vIFN0b3JlIGVhY2ggcHJvcGVydHkgbmFtZSB0byBwcmV2ZW50IGRvdWJsZSBlbnVtZXJhdGlvbi4gVGhlXG5cdCAgICAgICAgICAgICAgLy8gYHByb3RvdHlwZWAgcHJvcGVydHkgb2YgZnVuY3Rpb25zIGlzIG5vdCBlbnVtZXJhdGVkIGR1ZSB0byBjcm9zcy1cblx0ICAgICAgICAgICAgICAvLyBlbnZpcm9ubWVudCBpbmNvbnNpc3RlbmNpZXMuXG5cdCAgICAgICAgICAgICAgaWYgKCEoaXNGdW5jdGlvbiAmJiBwcm9wZXJ0eSA9PSBcInByb3RvdHlwZVwiKSAmJiAhaXNQcm9wZXJ0eS5jYWxsKG1lbWJlcnMsIHByb3BlcnR5KSAmJiAobWVtYmVyc1twcm9wZXJ0eV0gPSAxKSAmJiBpc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHtcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKHByb3BlcnR5KTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIE5vIGJ1Z3MgZGV0ZWN0ZWQ7IHVzZSB0aGUgc3RhbmRhcmQgYGZvci4uLmluYCBhbGdvcml0aG0uXG5cdCAgICAgICAgICBmb3JFYWNoID0gZnVuY3Rpb24gKG9iamVjdCwgY2FsbGJhY2spIHtcblx0ICAgICAgICAgICAgdmFyIGlzRnVuY3Rpb24gPSBnZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcywgcHJvcGVydHksIGlzQ29uc3RydWN0b3I7XG5cdCAgICAgICAgICAgIGZvciAocHJvcGVydHkgaW4gb2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgaWYgKCEoaXNGdW5jdGlvbiAmJiBwcm9wZXJ0eSA9PSBcInByb3RvdHlwZVwiKSAmJiBpc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkgJiYgIShpc0NvbnN0cnVjdG9yID0gcHJvcGVydHkgPT09IFwiY29uc3RydWN0b3JcIikpIHtcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKHByb3BlcnR5KTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgLy8gTWFudWFsbHkgaW52b2tlIHRoZSBjYWxsYmFjayBmb3IgdGhlIGBjb25zdHJ1Y3RvcmAgcHJvcGVydHkgZHVlIHRvXG5cdCAgICAgICAgICAgIC8vIGNyb3NzLWVudmlyb25tZW50IGluY29uc2lzdGVuY2llcy5cblx0ICAgICAgICAgICAgaWYgKGlzQ29uc3RydWN0b3IgfHwgaXNQcm9wZXJ0eS5jYWxsKG9iamVjdCwgKHByb3BlcnR5ID0gXCJjb25zdHJ1Y3RvclwiKSkpIHtcblx0ICAgICAgICAgICAgICBjYWxsYmFjayhwcm9wZXJ0eSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBmb3JFYWNoKG9iamVjdCwgY2FsbGJhY2spO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gUHVibGljOiBTZXJpYWxpemVzIGEgSmF2YVNjcmlwdCBgdmFsdWVgIGFzIGEgSlNPTiBzdHJpbmcuIFRoZSBvcHRpb25hbFxuXHQgICAgICAvLyBgZmlsdGVyYCBhcmd1bWVudCBtYXkgc3BlY2lmeSBlaXRoZXIgYSBmdW5jdGlvbiB0aGF0IGFsdGVycyBob3cgb2JqZWN0IGFuZFxuXHQgICAgICAvLyBhcnJheSBtZW1iZXJzIGFyZSBzZXJpYWxpemVkLCBvciBhbiBhcnJheSBvZiBzdHJpbmdzIGFuZCBudW1iZXJzIHRoYXRcblx0ICAgICAgLy8gaW5kaWNhdGVzIHdoaWNoIHByb3BlcnRpZXMgc2hvdWxkIGJlIHNlcmlhbGl6ZWQuIFRoZSBvcHRpb25hbCBgd2lkdGhgXG5cdCAgICAgIC8vIGFyZ3VtZW50IG1heSBiZSBlaXRoZXIgYSBzdHJpbmcgb3IgbnVtYmVyIHRoYXQgc3BlY2lmaWVzIHRoZSBpbmRlbnRhdGlvblxuXHQgICAgICAvLyBsZXZlbCBvZiB0aGUgb3V0cHV0LlxuXHQgICAgICBpZiAoIWhhcyhcImpzb24tc3RyaW5naWZ5XCIpKSB7XG5cdCAgICAgICAgLy8gSW50ZXJuYWw6IEEgbWFwIG9mIGNvbnRyb2wgY2hhcmFjdGVycyBhbmQgdGhlaXIgZXNjYXBlZCBlcXVpdmFsZW50cy5cblx0ICAgICAgICB2YXIgRXNjYXBlcyA9IHtcblx0ICAgICAgICAgIDkyOiBcIlxcXFxcXFxcXCIsXG5cdCAgICAgICAgICAzNDogJ1xcXFxcIicsXG5cdCAgICAgICAgICA4OiBcIlxcXFxiXCIsXG5cdCAgICAgICAgICAxMjogXCJcXFxcZlwiLFxuXHQgICAgICAgICAgMTA6IFwiXFxcXG5cIixcblx0ICAgICAgICAgIDEzOiBcIlxcXFxyXCIsXG5cdCAgICAgICAgICA5OiBcIlxcXFx0XCJcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICAvLyBJbnRlcm5hbDogQ29udmVydHMgYHZhbHVlYCBpbnRvIGEgemVyby1wYWRkZWQgc3RyaW5nIHN1Y2ggdGhhdCBpdHNcblx0ICAgICAgICAvLyBsZW5ndGggaXMgYXQgbGVhc3QgZXF1YWwgdG8gYHdpZHRoYC4gVGhlIGB3aWR0aGAgbXVzdCBiZSA8PSA2LlxuXHQgICAgICAgIHZhciBsZWFkaW5nWmVyb2VzID0gXCIwMDAwMDBcIjtcblx0ICAgICAgICB2YXIgdG9QYWRkZWRTdHJpbmcgPSBmdW5jdGlvbiAod2lkdGgsIHZhbHVlKSB7XG5cdCAgICAgICAgICAvLyBUaGUgYHx8IDBgIGV4cHJlc3Npb24gaXMgbmVjZXNzYXJ5IHRvIHdvcmsgYXJvdW5kIGEgYnVnIGluXG5cdCAgICAgICAgICAvLyBPcGVyYSA8PSA3LjU0dTIgd2hlcmUgYDAgPT0gLTBgLCBidXQgYFN0cmluZygtMCkgIT09IFwiMFwiYC5cblx0ICAgICAgICAgIHJldHVybiAobGVhZGluZ1plcm9lcyArICh2YWx1ZSB8fCAwKSkuc2xpY2UoLXdpZHRoKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICAvLyBJbnRlcm5hbDogRG91YmxlLXF1b3RlcyBhIHN0cmluZyBgdmFsdWVgLCByZXBsYWNpbmcgYWxsIEFTQ0lJIGNvbnRyb2xcblx0ICAgICAgICAvLyBjaGFyYWN0ZXJzIChjaGFyYWN0ZXJzIHdpdGggY29kZSB1bml0IHZhbHVlcyBiZXR3ZWVuIDAgYW5kIDMxKSB3aXRoXG5cdCAgICAgICAgLy8gdGhlaXIgZXNjYXBlZCBlcXVpdmFsZW50cy4gVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcblx0ICAgICAgICAvLyBgUXVvdGUodmFsdWUpYCBvcGVyYXRpb24gZGVmaW5lZCBpbiBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLlxuXHQgICAgICAgIHZhciB1bmljb2RlUHJlZml4ID0gXCJcXFxcdTAwXCI7XG5cdCAgICAgICAgdmFyIHF1b3RlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgICB2YXIgcmVzdWx0ID0gJ1wiJywgaW5kZXggPSAwLCBsZW5ndGggPSB2YWx1ZS5sZW5ndGgsIHVzZUNoYXJJbmRleCA9ICFjaGFySW5kZXhCdWdneSB8fCBsZW5ndGggPiAxMDtcblx0ICAgICAgICAgIHZhciBzeW1ib2xzID0gdXNlQ2hhckluZGV4ICYmIChjaGFySW5kZXhCdWdneSA/IHZhbHVlLnNwbGl0KFwiXCIpIDogdmFsdWUpO1xuXHQgICAgICAgICAgZm9yICg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IHZhbHVlLmNoYXJDb2RlQXQoaW5kZXgpO1xuXHQgICAgICAgICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIGlzIGEgY29udHJvbCBjaGFyYWN0ZXIsIGFwcGVuZCBpdHMgVW5pY29kZSBvclxuXHQgICAgICAgICAgICAvLyBzaG9ydGhhbmQgZXNjYXBlIHNlcXVlbmNlOyBvdGhlcndpc2UsIGFwcGVuZCB0aGUgY2hhcmFjdGVyIGFzLWlzLlxuXHQgICAgICAgICAgICBzd2l0Y2ggKGNoYXJDb2RlKSB7XG5cdCAgICAgICAgICAgICAgY2FzZSA4OiBjYXNlIDk6IGNhc2UgMTA6IGNhc2UgMTI6IGNhc2UgMTM6IGNhc2UgMzQ6IGNhc2UgOTI6XG5cdCAgICAgICAgICAgICAgICByZXN1bHQgKz0gRXNjYXBlc1tjaGFyQ29kZV07XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlIDwgMzIpIHtcblx0ICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHVuaWNvZGVQcmVmaXggKyB0b1BhZGRlZFN0cmluZygyLCBjaGFyQ29kZS50b1N0cmluZygxNikpO1xuXHQgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHJlc3VsdCArPSB1c2VDaGFySW5kZXggPyBzeW1ib2xzW2luZGV4XSA6IHZhbHVlLmNoYXJBdChpbmRleCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHJldHVybiByZXN1bHQgKyAnXCInO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIC8vIEludGVybmFsOiBSZWN1cnNpdmVseSBzZXJpYWxpemVzIGFuIG9iamVjdC4gSW1wbGVtZW50cyB0aGVcblx0ICAgICAgICAvLyBgU3RyKGtleSwgaG9sZGVyKWAsIGBKTyh2YWx1ZSlgLCBhbmQgYEpBKHZhbHVlKWAgb3BlcmF0aW9ucy5cblx0ICAgICAgICB2YXIgc2VyaWFsaXplID0gZnVuY3Rpb24gKHByb3BlcnR5LCBvYmplY3QsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCB3aGl0ZXNwYWNlLCBpbmRlbnRhdGlvbiwgc3RhY2spIHtcblx0ICAgICAgICAgIHZhciB2YWx1ZSwgY2xhc3NOYW1lLCB5ZWFyLCBtb250aCwgZGF0ZSwgdGltZSwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcywgcmVzdWx0cywgZWxlbWVudCwgaW5kZXgsIGxlbmd0aCwgcHJlZml4LCByZXN1bHQ7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBOZWNlc3NhcnkgZm9yIGhvc3Qgb2JqZWN0IHN1cHBvcnQuXG5cdCAgICAgICAgICAgIHZhbHVlID0gb2JqZWN0W3Byb3BlcnR5XTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge31cblx0ICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIiAmJiB2YWx1ZSkge1xuXHQgICAgICAgICAgICBjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHZhbHVlKTtcblx0ICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSBkYXRlQ2xhc3MgJiYgIWlzUHJvcGVydHkuY2FsbCh2YWx1ZSwgXCJ0b0pTT05cIikpIHtcblx0ICAgICAgICAgICAgICBpZiAodmFsdWUgPiAtMSAvIDAgJiYgdmFsdWUgPCAxIC8gMCkge1xuXHQgICAgICAgICAgICAgICAgLy8gRGF0ZXMgYXJlIHNlcmlhbGl6ZWQgYWNjb3JkaW5nIHRvIHRoZSBgRGF0ZSN0b0pTT05gIG1ldGhvZFxuXHQgICAgICAgICAgICAgICAgLy8gc3BlY2lmaWVkIGluIEVTIDUuMSBzZWN0aW9uIDE1LjkuNS40NC4gU2VlIHNlY3Rpb24gMTUuOS4xLjE1XG5cdCAgICAgICAgICAgICAgICAvLyBmb3IgdGhlIElTTyA4NjAxIGRhdGUgdGltZSBzdHJpbmcgZm9ybWF0LlxuXHQgICAgICAgICAgICAgICAgaWYgKGdldERheSkge1xuXHQgICAgICAgICAgICAgICAgICAvLyBNYW51YWxseSBjb21wdXRlIHRoZSB5ZWFyLCBtb250aCwgZGF0ZSwgaG91cnMsIG1pbnV0ZXMsXG5cdCAgICAgICAgICAgICAgICAgIC8vIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgaWYgdGhlIGBnZXRVVEMqYCBtZXRob2RzIGFyZVxuXHQgICAgICAgICAgICAgICAgICAvLyBidWdneS4gQWRhcHRlZCBmcm9tIEBZYWZmbGUncyBgZGF0ZS1zaGltYCBwcm9qZWN0LlxuXHQgICAgICAgICAgICAgICAgICBkYXRlID0gZmxvb3IodmFsdWUgLyA4NjRlNSk7XG5cdCAgICAgICAgICAgICAgICAgIGZvciAoeWVhciA9IGZsb29yKGRhdGUgLyAzNjUuMjQyNSkgKyAxOTcwIC0gMTsgZ2V0RGF5KHllYXIgKyAxLCAwKSA8PSBkYXRlOyB5ZWFyKyspO1xuXHQgICAgICAgICAgICAgICAgICBmb3IgKG1vbnRoID0gZmxvb3IoKGRhdGUgLSBnZXREYXkoeWVhciwgMCkpIC8gMzAuNDIpOyBnZXREYXkoeWVhciwgbW9udGggKyAxKSA8PSBkYXRlOyBtb250aCsrKTtcblx0ICAgICAgICAgICAgICAgICAgZGF0ZSA9IDEgKyBkYXRlIC0gZ2V0RGF5KHllYXIsIG1vbnRoKTtcblx0ICAgICAgICAgICAgICAgICAgLy8gVGhlIGB0aW1lYCB2YWx1ZSBzcGVjaWZpZXMgdGhlIHRpbWUgd2l0aGluIHRoZSBkYXkgKHNlZSBFU1xuXHQgICAgICAgICAgICAgICAgICAvLyA1LjEgc2VjdGlvbiAxNS45LjEuMikuIFRoZSBmb3JtdWxhIGAoQSAlIEIgKyBCKSAlIEJgIGlzIHVzZWRcblx0ICAgICAgICAgICAgICAgICAgLy8gdG8gY29tcHV0ZSBgQSBtb2R1bG8gQmAsIGFzIHRoZSBgJWAgb3BlcmF0b3IgZG9lcyBub3Rcblx0ICAgICAgICAgICAgICAgICAgLy8gY29ycmVzcG9uZCB0byB0aGUgYG1vZHVsb2Agb3BlcmF0aW9uIGZvciBuZWdhdGl2ZSBudW1iZXJzLlxuXHQgICAgICAgICAgICAgICAgICB0aW1lID0gKHZhbHVlICUgODY0ZTUgKyA4NjRlNSkgJSA4NjRlNTtcblx0ICAgICAgICAgICAgICAgICAgLy8gVGhlIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBhbmQgbWlsbGlzZWNvbmRzIGFyZSBvYnRhaW5lZCBieVxuXHQgICAgICAgICAgICAgICAgICAvLyBkZWNvbXBvc2luZyB0aGUgdGltZSB3aXRoaW4gdGhlIGRheS4gU2VlIHNlY3Rpb24gMTUuOS4xLjEwLlxuXHQgICAgICAgICAgICAgICAgICBob3VycyA9IGZsb29yKHRpbWUgLyAzNmU1KSAlIDI0O1xuXHQgICAgICAgICAgICAgICAgICBtaW51dGVzID0gZmxvb3IodGltZSAvIDZlNCkgJSA2MDtcblx0ICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IGZsb29yKHRpbWUgLyAxZTMpICUgNjA7XG5cdCAgICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kcyA9IHRpbWUgJSAxZTM7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICB5ZWFyID0gdmFsdWUuZ2V0VVRDRnVsbFllYXIoKTtcblx0ICAgICAgICAgICAgICAgICAgbW9udGggPSB2YWx1ZS5nZXRVVENNb250aCgpO1xuXHQgICAgICAgICAgICAgICAgICBkYXRlID0gdmFsdWUuZ2V0VVRDRGF0ZSgpO1xuXHQgICAgICAgICAgICAgICAgICBob3VycyA9IHZhbHVlLmdldFVUQ0hvdXJzKCk7XG5cdCAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSB2YWx1ZS5nZXRVVENNaW51dGVzKCk7XG5cdCAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSB2YWx1ZS5nZXRVVENTZWNvbmRzKCk7XG5cdCAgICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kcyA9IHZhbHVlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgLy8gU2VyaWFsaXplIGV4dGVuZGVkIHllYXJzIGNvcnJlY3RseS5cblx0ICAgICAgICAgICAgICAgIHZhbHVlID0gKHllYXIgPD0gMCB8fCB5ZWFyID49IDFlNCA/ICh5ZWFyIDwgMCA/IFwiLVwiIDogXCIrXCIpICsgdG9QYWRkZWRTdHJpbmcoNiwgeWVhciA8IDAgPyAteWVhciA6IHllYXIpIDogdG9QYWRkZWRTdHJpbmcoNCwgeWVhcikpICtcblx0ICAgICAgICAgICAgICAgICAgXCItXCIgKyB0b1BhZGRlZFN0cmluZygyLCBtb250aCArIDEpICsgXCItXCIgKyB0b1BhZGRlZFN0cmluZygyLCBkYXRlKSArXG5cdCAgICAgICAgICAgICAgICAgIC8vIE1vbnRocywgZGF0ZXMsIGhvdXJzLCBtaW51dGVzLCBhbmQgc2Vjb25kcyBzaG91bGQgaGF2ZSB0d29cblx0ICAgICAgICAgICAgICAgICAgLy8gZGlnaXRzOyBtaWxsaXNlY29uZHMgc2hvdWxkIGhhdmUgdGhyZWUuXG5cdCAgICAgICAgICAgICAgICAgIFwiVFwiICsgdG9QYWRkZWRTdHJpbmcoMiwgaG91cnMpICsgXCI6XCIgKyB0b1BhZGRlZFN0cmluZygyLCBtaW51dGVzKSArIFwiOlwiICsgdG9QYWRkZWRTdHJpbmcoMiwgc2Vjb25kcykgK1xuXHQgICAgICAgICAgICAgICAgICAvLyBNaWxsaXNlY29uZHMgYXJlIG9wdGlvbmFsIGluIEVTIDUuMCwgYnV0IHJlcXVpcmVkIGluIDUuMS5cblx0ICAgICAgICAgICAgICAgICAgXCIuXCIgKyB0b1BhZGRlZFN0cmluZygzLCBtaWxsaXNlY29uZHMpICsgXCJaXCI7XG5cdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlLnRvSlNPTiA9PSBcImZ1bmN0aW9uXCIgJiYgKChjbGFzc05hbWUgIT0gbnVtYmVyQ2xhc3MgJiYgY2xhc3NOYW1lICE9IHN0cmluZ0NsYXNzICYmIGNsYXNzTmFtZSAhPSBhcnJheUNsYXNzKSB8fCBpc1Byb3BlcnR5LmNhbGwodmFsdWUsIFwidG9KU09OXCIpKSkge1xuXHQgICAgICAgICAgICAgIC8vIFByb3RvdHlwZSA8PSAxLjYuMSBhZGRzIG5vbi1zdGFuZGFyZCBgdG9KU09OYCBtZXRob2RzIHRvIHRoZVxuXHQgICAgICAgICAgICAgIC8vIGBOdW1iZXJgLCBgU3RyaW5nYCwgYERhdGVgLCBhbmQgYEFycmF5YCBwcm90b3R5cGVzLiBKU09OIDNcblx0ICAgICAgICAgICAgICAvLyBpZ25vcmVzIGFsbCBgdG9KU09OYCBtZXRob2RzIG9uIHRoZXNlIG9iamVjdHMgdW5sZXNzIHRoZXkgYXJlXG5cdCAgICAgICAgICAgICAgLy8gZGVmaW5lZCBkaXJlY3RseSBvbiBhbiBpbnN0YW5jZS5cblx0ICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvSlNPTihwcm9wZXJ0eSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuXHQgICAgICAgICAgICAvLyBJZiBhIHJlcGxhY2VtZW50IGZ1bmN0aW9uIHdhcyBwcm92aWRlZCwgY2FsbCBpdCB0byBvYnRhaW4gdGhlIHZhbHVlXG5cdCAgICAgICAgICAgIC8vIGZvciBzZXJpYWxpemF0aW9uLlxuXHQgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmNhbGwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBcIm51bGxcIjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwodmFsdWUpO1xuXHQgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSBib29sZWFuQ2xhc3MpIHtcblx0ICAgICAgICAgICAgLy8gQm9vbGVhbnMgYXJlIHJlcHJlc2VudGVkIGxpdGVyYWxseS5cblx0ICAgICAgICAgICAgcmV0dXJuIFwiXCIgKyB2YWx1ZTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IG51bWJlckNsYXNzKSB7XG5cdCAgICAgICAgICAgIC8vIEpTT04gbnVtYmVycyBtdXN0IGJlIGZpbml0ZS4gYEluZmluaXR5YCBhbmQgYE5hTmAgYXJlIHNlcmlhbGl6ZWQgYXNcblx0ICAgICAgICAgICAgLy8gYFwibnVsbFwiYC5cblx0ICAgICAgICAgICAgcmV0dXJuIHZhbHVlID4gLTEgLyAwICYmIHZhbHVlIDwgMSAvIDAgPyBcIlwiICsgdmFsdWUgOiBcIm51bGxcIjtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzKSB7XG5cdCAgICAgICAgICAgIC8vIFN0cmluZ3MgYXJlIGRvdWJsZS1xdW90ZWQgYW5kIGVzY2FwZWQuXG5cdCAgICAgICAgICAgIHJldHVybiBxdW90ZShcIlwiICsgdmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgc2VyaWFsaXplIG9iamVjdHMgYW5kIGFycmF5cy5cblx0ICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIikge1xuXHQgICAgICAgICAgICAvLyBDaGVjayBmb3IgY3ljbGljIHN0cnVjdHVyZXMuIFRoaXMgaXMgYSBsaW5lYXIgc2VhcmNoOyBwZXJmb3JtYW5jZVxuXHQgICAgICAgICAgICAvLyBpcyBpbnZlcnNlbHkgcHJvcG9ydGlvbmFsIHRvIHRoZSBudW1iZXIgb2YgdW5pcXVlIG5lc3RlZCBvYmplY3RzLlxuXHQgICAgICAgICAgICBmb3IgKGxlbmd0aCA9IHN0YWNrLmxlbmd0aDsgbGVuZ3RoLS07KSB7XG5cdCAgICAgICAgICAgICAgaWYgKHN0YWNrW2xlbmd0aF0gPT09IHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBDeWNsaWMgc3RydWN0dXJlcyBjYW5ub3QgYmUgc2VyaWFsaXplZCBieSBgSlNPTi5zdHJpbmdpZnlgLlxuXHQgICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIC8vIEFkZCB0aGUgb2JqZWN0IHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cblx0ICAgICAgICAgICAgc3RhY2sucHVzaCh2YWx1ZSk7XG5cdCAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcblx0ICAgICAgICAgICAgLy8gU2F2ZSB0aGUgY3VycmVudCBpbmRlbnRhdGlvbiBsZXZlbCBhbmQgaW5kZW50IG9uZSBhZGRpdGlvbmFsIGxldmVsLlxuXHQgICAgICAgICAgICBwcmVmaXggPSBpbmRlbnRhdGlvbjtcblx0ICAgICAgICAgICAgaW5kZW50YXRpb24gKz0gd2hpdGVzcGFjZTtcblx0ICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzKSB7XG5cdCAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgc2VyaWFsaXplIGFycmF5IGVsZW1lbnRzLlxuXHQgICAgICAgICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICAgICAgICAgICAgICBlbGVtZW50ID0gc2VyaWFsaXplKGluZGV4LCB2YWx1ZSwgY2FsbGJhY2ssIHByb3BlcnRpZXMsIHdoaXRlc3BhY2UsIGluZGVudGF0aW9uLCBzdGFjayk7XG5cdCAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goZWxlbWVudCA9PT0gdW5kZWYgPyBcIm51bGxcIiA6IGVsZW1lbnQpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRzLmxlbmd0aCA/ICh3aGl0ZXNwYWNlID8gXCJbXFxuXCIgKyBpbmRlbnRhdGlvbiArIHJlc3VsdHMuam9pbihcIixcXG5cIiArIGluZGVudGF0aW9uKSArIFwiXFxuXCIgKyBwcmVmaXggKyBcIl1cIiA6IChcIltcIiArIHJlc3VsdHMuam9pbihcIixcIikgKyBcIl1cIikpIDogXCJbXVwiO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHNlcmlhbGl6ZSBvYmplY3QgbWVtYmVycy4gTWVtYmVycyBhcmUgc2VsZWN0ZWQgZnJvbVxuXHQgICAgICAgICAgICAgIC8vIGVpdGhlciBhIHVzZXItc3BlY2lmaWVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMsIG9yIHRoZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAvLyBpdHNlbGYuXG5cdCAgICAgICAgICAgICAgZm9yRWFjaChwcm9wZXJ0aWVzIHx8IHZhbHVlLCBmdW5jdGlvbiAocHJvcGVydHkpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2VyaWFsaXplKHByb3BlcnR5LCB2YWx1ZSwgY2FsbGJhY2ssIHByb3BlcnRpZXMsIHdoaXRlc3BhY2UsIGluZGVudGF0aW9uLCBzdGFjayk7XG5cdCAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gdW5kZWYpIHtcblx0ICAgICAgICAgICAgICAgICAgLy8gQWNjb3JkaW5nIHRvIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjM6IFwiSWYgYGdhcGAge3doaXRlc3BhY2V9XG5cdCAgICAgICAgICAgICAgICAgIC8vIGlzIG5vdCB0aGUgZW1wdHkgc3RyaW5nLCBsZXQgYG1lbWJlcmAge3F1b3RlKHByb3BlcnR5KSArIFwiOlwifVxuXHQgICAgICAgICAgICAgICAgICAvLyBiZSB0aGUgY29uY2F0ZW5hdGlvbiBvZiBgbWVtYmVyYCBhbmQgdGhlIGBzcGFjZWAgY2hhcmFjdGVyLlwiXG5cdCAgICAgICAgICAgICAgICAgIC8vIFRoZSBcImBzcGFjZWAgY2hhcmFjdGVyXCIgcmVmZXJzIHRvIHRoZSBsaXRlcmFsIHNwYWNlXG5cdCAgICAgICAgICAgICAgICAgIC8vIGNoYXJhY3Rlciwgbm90IHRoZSBgc3BhY2VgIHt3aWR0aH0gYXJndW1lbnQgcHJvdmlkZWQgdG9cblx0ICAgICAgICAgICAgICAgICAgLy8gYEpTT04uc3RyaW5naWZ5YC5cblx0ICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHF1b3RlKHByb3BlcnR5KSArIFwiOlwiICsgKHdoaXRlc3BhY2UgPyBcIiBcIiA6IFwiXCIpICsgZWxlbWVudCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0cy5sZW5ndGggPyAod2hpdGVzcGFjZSA/IFwie1xcblwiICsgaW5kZW50YXRpb24gKyByZXN1bHRzLmpvaW4oXCIsXFxuXCIgKyBpbmRlbnRhdGlvbikgKyBcIlxcblwiICsgcHJlZml4ICsgXCJ9XCIgOiAoXCJ7XCIgKyByZXN1bHRzLmpvaW4oXCIsXCIpICsgXCJ9XCIpKSA6IFwie31cIjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG9iamVjdCBmcm9tIHRoZSB0cmF2ZXJzZWQgb2JqZWN0IHN0YWNrLlxuXHQgICAgICAgICAgICBzdGFjay5wb3AoKTtcblx0ICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICAvLyBQdWJsaWM6IGBKU09OLnN0cmluZ2lmeWAuIFNlZSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLlxuXHQgICAgICAgIGV4cG9ydHMuc3RyaW5naWZ5ID0gZnVuY3Rpb24gKHNvdXJjZSwgZmlsdGVyLCB3aWR0aCkge1xuXHQgICAgICAgICAgdmFyIHdoaXRlc3BhY2UsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCBjbGFzc05hbWU7XG5cdCAgICAgICAgICBpZiAob2JqZWN0VHlwZXNbdHlwZW9mIGZpbHRlcl0gJiYgZmlsdGVyKSB7XG5cdCAgICAgICAgICAgIGlmICgoY2xhc3NOYW1lID0gZ2V0Q2xhc3MuY2FsbChmaWx0ZXIpKSA9PSBmdW5jdGlvbkNsYXNzKSB7XG5cdCAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmaWx0ZXI7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IGFycmF5Q2xhc3MpIHtcblx0ICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBwcm9wZXJ0eSBuYW1lcyBhcnJheSBpbnRvIGEgbWFrZXNoaWZ0IHNldC5cblx0ICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0ge307XG5cdCAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGggPSBmaWx0ZXIubGVuZ3RoLCB2YWx1ZTsgaW5kZXggPCBsZW5ndGg7IHZhbHVlID0gZmlsdGVyW2luZGV4KytdLCAoKGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwodmFsdWUpKSwgY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzIHx8IGNsYXNzTmFtZSA9PSBudW1iZXJDbGFzcykgJiYgKHByb3BlcnRpZXNbdmFsdWVdID0gMSkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBpZiAod2lkdGgpIHtcblx0ICAgICAgICAgICAgaWYgKChjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHdpZHRoKSkgPT0gbnVtYmVyQ2xhc3MpIHtcblx0ICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBgd2lkdGhgIHRvIGFuIGludGVnZXIgYW5kIGNyZWF0ZSBhIHN0cmluZyBjb250YWluaW5nXG5cdCAgICAgICAgICAgICAgLy8gYHdpZHRoYCBudW1iZXIgb2Ygc3BhY2UgY2hhcmFjdGVycy5cblx0ICAgICAgICAgICAgICBpZiAoKHdpZHRoIC09IHdpZHRoICUgMSkgPiAwKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHdoaXRlc3BhY2UgPSBcIlwiLCB3aWR0aCA+IDEwICYmICh3aWR0aCA9IDEwKTsgd2hpdGVzcGFjZS5sZW5ndGggPCB3aWR0aDsgd2hpdGVzcGFjZSArPSBcIiBcIik7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZSA9PSBzdHJpbmdDbGFzcykge1xuXHQgICAgICAgICAgICAgIHdoaXRlc3BhY2UgPSB3aWR0aC5sZW5ndGggPD0gMTAgPyB3aWR0aCA6IHdpZHRoLnNsaWNlKDAsIDEwKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gT3BlcmEgPD0gNy41NHUyIGRpc2NhcmRzIHRoZSB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIGVtcHR5IHN0cmluZyBrZXlzXG5cdCAgICAgICAgICAvLyAoYFwiXCJgKSBvbmx5IGlmIHRoZXkgYXJlIHVzZWQgZGlyZWN0bHkgd2l0aGluIGFuIG9iamVjdCBtZW1iZXIgbGlzdFxuXHQgICAgICAgICAgLy8gKGUuZy4sIGAhKFwiXCIgaW4geyBcIlwiOiAxfSlgKS5cblx0ICAgICAgICAgIHJldHVybiBzZXJpYWxpemUoXCJcIiwgKHZhbHVlID0ge30sIHZhbHVlW1wiXCJdID0gc291cmNlLCB2YWx1ZSksIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCB3aGl0ZXNwYWNlLCBcIlwiLCBbXSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gUHVibGljOiBQYXJzZXMgYSBKU09OIHNvdXJjZSBzdHJpbmcuXG5cdCAgICAgIGlmICghaGFzKFwianNvbi1wYXJzZVwiKSkge1xuXHQgICAgICAgIHZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXHRcblx0ICAgICAgICAvLyBJbnRlcm5hbDogQSBtYXAgb2YgZXNjYXBlZCBjb250cm9sIGNoYXJhY3RlcnMgYW5kIHRoZWlyIHVuZXNjYXBlZFxuXHQgICAgICAgIC8vIGVxdWl2YWxlbnRzLlxuXHQgICAgICAgIHZhciBVbmVzY2FwZXMgPSB7XG5cdCAgICAgICAgICA5MjogXCJcXFxcXCIsXG5cdCAgICAgICAgICAzNDogJ1wiJyxcblx0ICAgICAgICAgIDQ3OiBcIi9cIixcblx0ICAgICAgICAgIDk4OiBcIlxcYlwiLFxuXHQgICAgICAgICAgMTE2OiBcIlxcdFwiLFxuXHQgICAgICAgICAgMTEwOiBcIlxcblwiLFxuXHQgICAgICAgICAgMTAyOiBcIlxcZlwiLFxuXHQgICAgICAgICAgMTE0OiBcIlxcclwiXG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgLy8gSW50ZXJuYWw6IFN0b3JlcyB0aGUgcGFyc2VyIHN0YXRlLlxuXHQgICAgICAgIHZhciBJbmRleCwgU291cmNlO1xuXHRcblx0ICAgICAgICAvLyBJbnRlcm5hbDogUmVzZXRzIHRoZSBwYXJzZXIgc3RhdGUgYW5kIHRocm93cyBhIGBTeW50YXhFcnJvcmAuXG5cdCAgICAgICAgdmFyIGFib3J0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgSW5kZXggPSBTb3VyY2UgPSBudWxsO1xuXHQgICAgICAgICAgdGhyb3cgU3ludGF4RXJyb3IoKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICAvLyBJbnRlcm5hbDogUmV0dXJucyB0aGUgbmV4dCB0b2tlbiwgb3IgYFwiJFwiYCBpZiB0aGUgcGFyc2VyIGhhcyByZWFjaGVkXG5cdCAgICAgICAgLy8gdGhlIGVuZCBvZiB0aGUgc291cmNlIHN0cmluZy4gQSB0b2tlbiBtYXkgYmUgYSBzdHJpbmcsIG51bWJlciwgYG51bGxgXG5cdCAgICAgICAgLy8gbGl0ZXJhbCwgb3IgQm9vbGVhbiBsaXRlcmFsLlxuXHQgICAgICAgIHZhciBsZXggPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgc291cmNlID0gU291cmNlLCBsZW5ndGggPSBzb3VyY2UubGVuZ3RoLCB2YWx1ZSwgYmVnaW4sIHBvc2l0aW9uLCBpc1NpZ25lZCwgY2hhckNvZGU7XG5cdCAgICAgICAgICB3aGlsZSAoSW5kZXggPCBsZW5ndGgpIHtcblx0ICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7XG5cdCAgICAgICAgICAgIHN3aXRjaCAoY2hhckNvZGUpIHtcblx0ICAgICAgICAgICAgICBjYXNlIDk6IGNhc2UgMTA6IGNhc2UgMTM6IGNhc2UgMzI6XG5cdCAgICAgICAgICAgICAgICAvLyBTa2lwIHdoaXRlc3BhY2UgdG9rZW5zLCBpbmNsdWRpbmcgdGFicywgY2FycmlhZ2UgcmV0dXJucywgbGluZVxuXHQgICAgICAgICAgICAgICAgLy8gZmVlZHMsIGFuZCBzcGFjZSBjaGFyYWN0ZXJzLlxuXHQgICAgICAgICAgICAgICAgSW5kZXgrKztcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgIGNhc2UgMTIzOiBjYXNlIDEyNTogY2FzZSA5MTogY2FzZSA5MzogY2FzZSA1ODogY2FzZSA0NDpcblx0ICAgICAgICAgICAgICAgIC8vIFBhcnNlIGEgcHVuY3R1YXRvciB0b2tlbiAoYHtgLCBgfWAsIGBbYCwgYF1gLCBgOmAsIG9yIGAsYCkgYXRcblx0ICAgICAgICAgICAgICAgIC8vIHRoZSBjdXJyZW50IHBvc2l0aW9uLlxuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSBjaGFySW5kZXhCdWdneSA/IHNvdXJjZS5jaGFyQXQoSW5kZXgpIDogc291cmNlW0luZGV4XTtcblx0ICAgICAgICAgICAgICAgIEluZGV4Kys7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgICAgICAgICAgY2FzZSAzNDpcblx0ICAgICAgICAgICAgICAgIC8vIGBcImAgZGVsaW1pdHMgYSBKU09OIHN0cmluZzsgYWR2YW5jZSB0byB0aGUgbmV4dCBjaGFyYWN0ZXIgYW5kXG5cdCAgICAgICAgICAgICAgICAvLyBiZWdpbiBwYXJzaW5nIHRoZSBzdHJpbmcuIFN0cmluZyB0b2tlbnMgYXJlIHByZWZpeGVkIHdpdGggdGhlXG5cdCAgICAgICAgICAgICAgICAvLyBzZW50aW5lbCBgQGAgY2hhcmFjdGVyIHRvIGRpc3Rpbmd1aXNoIHRoZW0gZnJvbSBwdW5jdHVhdG9ycyBhbmRcblx0ICAgICAgICAgICAgICAgIC8vIGVuZC1vZi1zdHJpbmcgdG9rZW5zLlxuXHQgICAgICAgICAgICAgICAgZm9yICh2YWx1ZSA9IFwiQFwiLCBJbmRleCsrOyBJbmRleCA8IGxlbmd0aDspIHtcblx0ICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7XG5cdCAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA8IDMyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gVW5lc2NhcGVkIEFTQ0lJIGNvbnRyb2wgY2hhcmFjdGVycyAodGhvc2Ugd2l0aCBhIGNvZGUgdW5pdFxuXHQgICAgICAgICAgICAgICAgICAgIC8vIGxlc3MgdGhhbiB0aGUgc3BhY2UgY2hhcmFjdGVyKSBhcmUgbm90IHBlcm1pdHRlZC5cblx0ICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXJDb2RlID09IDkyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gQSByZXZlcnNlIHNvbGlkdXMgKGBcXGApIG1hcmtzIHRoZSBiZWdpbm5pbmcgb2YgYW4gZXNjYXBlZFxuXHQgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRyb2wgY2hhcmFjdGVyIChpbmNsdWRpbmcgYFwiYCwgYFxcYCwgYW5kIGAvYCkgb3IgVW5pY29kZVxuXHQgICAgICAgICAgICAgICAgICAgIC8vIGVzY2FwZSBzZXF1ZW5jZS5cblx0ICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY2hhckNvZGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTI6IGNhc2UgMzQ6IGNhc2UgNDc6IGNhc2UgOTg6IGNhc2UgMTE2OiBjYXNlIDExMDogY2FzZSAxMDI6IGNhc2UgMTE0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXZpdmUgZXNjYXBlZCBjb250cm9sIGNoYXJhY3RlcnMuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IFVuZXNjYXBlc1tjaGFyQ29kZV07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIEluZGV4Kys7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTc6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIGBcXHVgIG1hcmtzIHRoZSBiZWdpbm5pbmcgb2YgYSBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZS5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0byB0aGUgZmlyc3QgY2hhcmFjdGVyIGFuZCB2YWxpZGF0ZSB0aGVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm91ci1kaWdpdCBjb2RlIHBvaW50LlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbiA9ICsrSW5kZXg7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvciAocG9zaXRpb24gPSBJbmRleCArIDQ7IEluZGV4IDwgcG9zaXRpb247IEluZGV4KyspIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBIHZhbGlkIHNlcXVlbmNlIGNvbXByaXNlcyBmb3VyIGhleGRpZ2l0cyAoY2FzZS1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnNlbnNpdGl2ZSkgdGhhdCBmb3JtIGEgc2luZ2xlIGhleGFkZWNpbWFsIHZhbHVlLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3IHx8IGNoYXJDb2RlID49IDk3ICYmIGNoYXJDb2RlIDw9IDEwMiB8fCBjaGFyQ29kZSA+PSA2NSAmJiBjaGFyQ29kZSA8PSA3MCkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWQgVW5pY29kZSBlc2NhcGUgc2VxdWVuY2UuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXZpdmUgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBmcm9tQ2hhckNvZGUoXCIweFwiICsgc291cmNlLnNsaWNlKGJlZ2luLCBJbmRleCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWQgZXNjYXBlIHNlcXVlbmNlLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPT0gMzQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgIC8vIEFuIHVuZXNjYXBlZCBkb3VibGUtcXVvdGUgY2hhcmFjdGVyIG1hcmtzIHRoZSBlbmQgb2YgdGhlXG5cdCAgICAgICAgICAgICAgICAgICAgICAvLyBzdHJpbmcuXG5cdCAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYmVnaW4gPSBJbmRleDtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBPcHRpbWl6ZSBmb3IgdGhlIGNvbW1vbiBjYXNlIHdoZXJlIGEgc3RyaW5nIGlzIHZhbGlkLlxuXHQgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjaGFyQ29kZSA+PSAzMiAmJiBjaGFyQ29kZSAhPSA5MiAmJiBjaGFyQ29kZSAhPSAzNCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBzdHJpbmcgYXMtaXMuXG5cdCAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gc291cmNlLnNsaWNlKGJlZ2luLCBJbmRleCk7XG5cdCAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuY2hhckNvZGVBdChJbmRleCkgPT0gMzQpIHtcblx0ICAgICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0byB0aGUgbmV4dCBjaGFyYWN0ZXIgYW5kIHJldHVybiB0aGUgcmV2aXZlZCBzdHJpbmcuXG5cdCAgICAgICAgICAgICAgICAgIEluZGV4Kys7XG5cdCAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIC8vIFVudGVybWluYXRlZCBzdHJpbmcuXG5cdCAgICAgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgICAgICAvLyBQYXJzZSBudW1iZXJzIGFuZCBsaXRlcmFscy5cblx0ICAgICAgICAgICAgICAgIGJlZ2luID0gSW5kZXg7XG5cdCAgICAgICAgICAgICAgICAvLyBBZHZhbmNlIHBhc3QgdGhlIG5lZ2F0aXZlIHNpZ24sIGlmIG9uZSBpcyBzcGVjaWZpZWQuXG5cdCAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPT0gNDUpIHtcblx0ICAgICAgICAgICAgICAgICAgaXNTaWduZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgLy8gUGFyc2UgYW4gaW50ZWdlciBvciBmbG9hdGluZy1wb2ludCB2YWx1ZS5cblx0ICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nykge1xuXHQgICAgICAgICAgICAgICAgICAvLyBMZWFkaW5nIHplcm9lcyBhcmUgaW50ZXJwcmV0ZWQgYXMgb2N0YWwgbGl0ZXJhbHMuXG5cdCAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSA0OCAmJiAoKGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXggKyAxKSksIGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KSkge1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIElsbGVnYWwgb2N0YWwgbGl0ZXJhbC5cblx0ICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgIGlzU2lnbmVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBpbnRlZ2VyIGNvbXBvbmVudC5cblx0ICAgICAgICAgICAgICAgICAgZm9yICg7IEluZGV4IDwgbGVuZ3RoICYmICgoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCkpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7IEluZGV4KyspO1xuXHQgICAgICAgICAgICAgICAgICAvLyBGbG9hdHMgY2Fubm90IGNvbnRhaW4gYSBsZWFkaW5nIGRlY2ltYWwgcG9pbnQ7IGhvd2V2ZXIsIHRoaXNcblx0ICAgICAgICAgICAgICAgICAgLy8gY2FzZSBpcyBhbHJlYWR5IGFjY291bnRlZCBmb3IgYnkgdGhlIHBhcnNlci5cblx0ICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KSA9PSA0Nikge1xuXHQgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gKytJbmRleDtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgZGVjaW1hbCBjb21wb25lbnQuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICg7IHBvc2l0aW9uIDwgbGVuZ3RoICYmICgoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbikpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7IHBvc2l0aW9uKyspO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PSBJbmRleCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgLy8gSWxsZWdhbCB0cmFpbGluZyBkZWNpbWFsLlxuXHQgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgSW5kZXggPSBwb3NpdGlvbjtcblx0ICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAvLyBQYXJzZSBleHBvbmVudHMuIFRoZSBgZWAgZGVub3RpbmcgdGhlIGV4cG9uZW50IGlzXG5cdCAgICAgICAgICAgICAgICAgIC8vIGNhc2UtaW5zZW5zaXRpdmUuXG5cdCAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO1xuXHQgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPT0gMTAxIHx8IGNoYXJDb2RlID09IDY5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIHBhc3QgdGhlIHNpZ24gZm9sbG93aW5nIHRoZSBleHBvbmVudCwgaWYgb25lIGlzXG5cdCAgICAgICAgICAgICAgICAgICAgLy8gc3BlY2lmaWVkLlxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSA0MyB8fCBjaGFyQ29kZSA9PSA0NSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgSW5kZXgrKztcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgdGhlIGV4cG9uZW50aWFsIGNvbXBvbmVudC5cblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKHBvc2l0aW9uID0gSW5kZXg7IHBvc2l0aW9uIDwgbGVuZ3RoICYmICgoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbikpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7IHBvc2l0aW9uKyspO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PSBJbmRleCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgLy8gSWxsZWdhbCBlbXB0eSBleHBvbmVudC5cblx0ICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIEluZGV4ID0gcG9zaXRpb247XG5cdCAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgLy8gQ29lcmNlIHRoZSBwYXJzZWQgdmFsdWUgdG8gYSBKYXZhU2NyaXB0IG51bWJlci5cblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuICtzb3VyY2Uuc2xpY2UoYmVnaW4sIEluZGV4KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIC8vIEEgbmVnYXRpdmUgc2lnbiBtYXkgb25seSBwcmVjZWRlIG51bWJlcnMuXG5cdCAgICAgICAgICAgICAgICBpZiAoaXNTaWduZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIC8vIGB0cnVlYCwgYGZhbHNlYCwgYW5kIGBudWxsYCBsaXRlcmFscy5cblx0ICAgICAgICAgICAgICAgIGlmIChzb3VyY2Uuc2xpY2UoSW5kZXgsIEluZGV4ICsgNCkgPT0gXCJ0cnVlXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgSW5kZXggKz0gNDtcblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZS5zbGljZShJbmRleCwgSW5kZXggKyA1KSA9PSBcImZhbHNlXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgSW5kZXggKz0gNTtcblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2Uuc2xpY2UoSW5kZXgsIEluZGV4ICsgNCkgPT0gXCJudWxsXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgSW5kZXggKz0gNDtcblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAvLyBVbnJlY29nbml6ZWQgdG9rZW4uXG5cdCAgICAgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNlbnRpbmVsIGAkYCBjaGFyYWN0ZXIgaWYgdGhlIHBhcnNlciBoYXMgcmVhY2hlZCB0aGUgZW5kXG5cdCAgICAgICAgICAvLyBvZiB0aGUgc291cmNlIHN0cmluZy5cblx0ICAgICAgICAgIHJldHVybiBcIiRcIjtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICAvLyBJbnRlcm5hbDogUGFyc2VzIGEgSlNPTiBgdmFsdWVgIHRva2VuLlxuXHQgICAgICAgIHZhciBnZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgIHZhciByZXN1bHRzLCBoYXNNZW1iZXJzO1xuXHQgICAgICAgICAgaWYgKHZhbHVlID09IFwiJFwiKSB7XG5cdCAgICAgICAgICAgIC8vIFVuZXhwZWN0ZWQgZW5kIG9mIGlucHV0LlxuXHQgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgICAgICAgIGlmICgoY2hhckluZGV4QnVnZ3kgPyB2YWx1ZS5jaGFyQXQoMCkgOiB2YWx1ZVswXSkgPT0gXCJAXCIpIHtcblx0ICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHNlbnRpbmVsIGBAYCBjaGFyYWN0ZXIuXG5cdCAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDEpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIC8vIFBhcnNlIG9iamVjdCBhbmQgYXJyYXkgbGl0ZXJhbHMuXG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIltcIikge1xuXHQgICAgICAgICAgICAgIC8vIFBhcnNlcyBhIEpTT04gYXJyYXksIHJldHVybmluZyBhIG5ldyBKYXZhU2NyaXB0IGFycmF5LlxuXHQgICAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcblx0ICAgICAgICAgICAgICBmb3IgKDs7IGhhc01lbWJlcnMgfHwgKGhhc01lbWJlcnMgPSB0cnVlKSkge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtcblx0ICAgICAgICAgICAgICAgIC8vIEEgY2xvc2luZyBzcXVhcmUgYnJhY2tldCBtYXJrcyB0aGUgZW5kIG9mIHRoZSBhcnJheSBsaXRlcmFsLlxuXHQgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiXVwiKSB7XG5cdCAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGFycmF5IGxpdGVyYWwgY29udGFpbnMgZWxlbWVudHMsIHRoZSBjdXJyZW50IHRva2VuXG5cdCAgICAgICAgICAgICAgICAvLyBzaG91bGQgYmUgYSBjb21tYSBzZXBhcmF0aW5nIHRoZSBwcmV2aW91cyBlbGVtZW50IGZyb20gdGhlXG5cdCAgICAgICAgICAgICAgICAvLyBuZXh0LlxuXHQgICAgICAgICAgICAgICAgaWYgKGhhc01lbWJlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCJdXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZXhwZWN0ZWQgdHJhaWxpbmcgYCxgIGluIGFycmF5IGxpdGVyYWwuXG5cdCAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAvLyBBIGAsYCBtdXN0IHNlcGFyYXRlIGVhY2ggYXJyYXkgZWxlbWVudC5cblx0ICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAvLyBFbGlzaW9ucyBhbmQgbGVhZGluZyBjb21tYXMgYXJlIG5vdCBwZXJtaXR0ZWQuXG5cdCAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCIsXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChnZXQodmFsdWUpKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gXCJ7XCIpIHtcblx0ICAgICAgICAgICAgICAvLyBQYXJzZXMgYSBKU09OIG9iamVjdCwgcmV0dXJuaW5nIGEgbmV3IEphdmFTY3JpcHQgb2JqZWN0LlxuXHQgICAgICAgICAgICAgIHJlc3VsdHMgPSB7fTtcblx0ICAgICAgICAgICAgICBmb3IgKDs7IGhhc01lbWJlcnMgfHwgKGhhc01lbWJlcnMgPSB0cnVlKSkge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtcblx0ICAgICAgICAgICAgICAgIC8vIEEgY2xvc2luZyBjdXJseSBicmFjZSBtYXJrcyB0aGUgZW5kIG9mIHRoZSBvYmplY3QgbGl0ZXJhbC5cblx0ICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIn1cIikge1xuXHQgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIC8vIElmIHRoZSBvYmplY3QgbGl0ZXJhbCBjb250YWlucyBtZW1iZXJzLCB0aGUgY3VycmVudCB0b2tlblxuXHQgICAgICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGEgY29tbWEgc2VwYXJhdG9yLlxuXHQgICAgICAgICAgICAgICAgaWYgKGhhc01lbWJlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCJ9XCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZXhwZWN0ZWQgdHJhaWxpbmcgYCxgIGluIG9iamVjdCBsaXRlcmFsLlxuXHQgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gQSBgLGAgbXVzdCBzZXBhcmF0ZSBlYWNoIG9iamVjdCBtZW1iZXIuXG5cdCAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcblx0ICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgLy8gTGVhZGluZyBjb21tYXMgYXJlIG5vdCBwZXJtaXR0ZWQsIG9iamVjdCBwcm9wZXJ0eSBuYW1lcyBtdXN0IGJlXG5cdCAgICAgICAgICAgICAgICAvLyBkb3VibGUtcXVvdGVkIHN0cmluZ3MsIGFuZCBhIGA6YCBtdXN0IHNlcGFyYXRlIGVhY2ggcHJvcGVydHlcblx0ICAgICAgICAgICAgICAgIC8vIG5hbWUgYW5kIHZhbHVlLlxuXHQgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiIHx8IHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiIHx8IChjaGFySW5kZXhCdWdneSA/IHZhbHVlLmNoYXJBdCgwKSA6IHZhbHVlWzBdKSAhPSBcIkBcIiB8fCBsZXgoKSAhPSBcIjpcIikge1xuXHQgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgcmVzdWx0c1t2YWx1ZS5zbGljZSgxKV0gPSBnZXQobGV4KCkpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAvLyBVbmV4cGVjdGVkIHRva2VuIGVuY291bnRlcmVkLlxuXHQgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIC8vIEludGVybmFsOiBVcGRhdGVzIGEgdHJhdmVyc2VkIG9iamVjdCBtZW1iZXIuXG5cdCAgICAgICAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uIChzb3VyY2UsIHByb3BlcnR5LCBjYWxsYmFjaykge1xuXHQgICAgICAgICAgdmFyIGVsZW1lbnQgPSB3YWxrKHNvdXJjZSwgcHJvcGVydHksIGNhbGxiYWNrKTtcblx0ICAgICAgICAgIGlmIChlbGVtZW50ID09PSB1bmRlZikge1xuXHQgICAgICAgICAgICBkZWxldGUgc291cmNlW3Byb3BlcnR5XTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHNvdXJjZVtwcm9wZXJ0eV0gPSBlbGVtZW50O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIC8vIEludGVybmFsOiBSZWN1cnNpdmVseSB0cmF2ZXJzZXMgYSBwYXJzZWQgSlNPTiBvYmplY3QsIGludm9raW5nIHRoZVxuXHQgICAgICAgIC8vIGBjYWxsYmFja2AgZnVuY3Rpb24gZm9yIGVhY2ggdmFsdWUuIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlXG5cdCAgICAgICAgLy8gYFdhbGsoaG9sZGVyLCBuYW1lKWAgb3BlcmF0aW9uIGRlZmluZWQgaW4gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMi5cblx0ICAgICAgICB2YXIgd2FsayA9IGZ1bmN0aW9uIChzb3VyY2UsIHByb3BlcnR5LCBjYWxsYmFjaykge1xuXHQgICAgICAgICAgdmFyIHZhbHVlID0gc291cmNlW3Byb3BlcnR5XSwgbGVuZ3RoO1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiICYmIHZhbHVlKSB7XG5cdCAgICAgICAgICAgIC8vIGBmb3JFYWNoYCBjYW4ndCBiZSB1c2VkIHRvIHRyYXZlcnNlIGFuIGFycmF5IGluIE9wZXJhIDw9IDguNTRcblx0ICAgICAgICAgICAgLy8gYmVjYXVzZSBpdHMgYE9iamVjdCNoYXNPd25Qcm9wZXJ0eWAgaW1wbGVtZW50YXRpb24gcmV0dXJucyBgZmFsc2VgXG5cdCAgICAgICAgICAgIC8vIGZvciBhcnJheSBpbmRpY2VzIChlLmcuLCBgIVsxLCAyLCAzXS5oYXNPd25Qcm9wZXJ0eShcIjBcIilgKS5cblx0ICAgICAgICAgICAgaWYgKGdldENsYXNzLmNhbGwodmFsdWUpID09IGFycmF5Q2xhc3MpIHtcblx0ICAgICAgICAgICAgICBmb3IgKGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgbGVuZ3RoLS07KSB7XG5cdCAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUsIGxlbmd0aCwgY2FsbGJhY2spO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbiAocHJvcGVydHkpIHtcblx0ICAgICAgICAgICAgICAgIHVwZGF0ZSh2YWx1ZSwgcHJvcGVydHksIGNhbGxiYWNrKTtcblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoc291cmNlLCBwcm9wZXJ0eSwgdmFsdWUpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIC8vIFB1YmxpYzogYEpTT04ucGFyc2VgLiBTZWUgRVMgNS4xIHNlY3Rpb24gMTUuMTIuMi5cblx0ICAgICAgICBleHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHNvdXJjZSwgY2FsbGJhY2spIHtcblx0ICAgICAgICAgIHZhciByZXN1bHQsIHZhbHVlO1xuXHQgICAgICAgICAgSW5kZXggPSAwO1xuXHQgICAgICAgICAgU291cmNlID0gXCJcIiArIHNvdXJjZTtcblx0ICAgICAgICAgIHJlc3VsdCA9IGdldChsZXgoKSk7XG5cdCAgICAgICAgICAvLyBJZiBhIEpTT04gc3RyaW5nIGNvbnRhaW5zIG11bHRpcGxlIHRva2VucywgaXQgaXMgaW52YWxpZC5cblx0ICAgICAgICAgIGlmIChsZXgoKSAhPSBcIiRcIikge1xuXHQgICAgICAgICAgICBhYm9ydCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gUmVzZXQgdGhlIHBhcnNlciBzdGF0ZS5cblx0ICAgICAgICAgIEluZGV4ID0gU291cmNlID0gbnVsbDtcblx0ICAgICAgICAgIHJldHVybiBjYWxsYmFjayAmJiBnZXRDbGFzcy5jYWxsKGNhbGxiYWNrKSA9PSBmdW5jdGlvbkNsYXNzID8gd2FsaygodmFsdWUgPSB7fSwgdmFsdWVbXCJcIl0gPSByZXN1bHQsIHZhbHVlKSwgXCJcIiwgY2FsbGJhY2spIDogcmVzdWx0O1xuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBleHBvcnRzW1wicnVuSW5Db250ZXh0XCJdID0gcnVuSW5Db250ZXh0O1xuXHQgICAgcmV0dXJuIGV4cG9ydHM7XG5cdCAgfVxuXHRcblx0ICBpZiAoZnJlZUV4cG9ydHMgJiYgIWlzTG9hZGVyKSB7XG5cdCAgICAvLyBFeHBvcnQgZm9yIENvbW1vbkpTIGVudmlyb25tZW50cy5cblx0ICAgIHJ1bkluQ29udGV4dChyb290LCBmcmVlRXhwb3J0cyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIEV4cG9ydCBmb3Igd2ViIGJyb3dzZXJzIGFuZCBKYXZhU2NyaXB0IGVuZ2luZXMuXG5cdCAgICB2YXIgbmF0aXZlSlNPTiA9IHJvb3QuSlNPTixcblx0ICAgICAgICBwcmV2aW91c0pTT04gPSByb290W1wiSlNPTjNcIl0sXG5cdCAgICAgICAgaXNSZXN0b3JlZCA9IGZhbHNlO1xuXHRcblx0ICAgIHZhciBKU09OMyA9IHJ1bkluQ29udGV4dChyb290LCAocm9vdFtcIkpTT04zXCJdID0ge1xuXHQgICAgICAvLyBQdWJsaWM6IFJlc3RvcmVzIHRoZSBvcmlnaW5hbCB2YWx1ZSBvZiB0aGUgZ2xvYmFsIGBKU09OYCBvYmplY3QgYW5kXG5cdCAgICAgIC8vIHJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIGBKU09OM2Agb2JqZWN0LlxuXHQgICAgICBcIm5vQ29uZmxpY3RcIjogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICghaXNSZXN0b3JlZCkge1xuXHQgICAgICAgICAgaXNSZXN0b3JlZCA9IHRydWU7XG5cdCAgICAgICAgICByb290LkpTT04gPSBuYXRpdmVKU09OO1xuXHQgICAgICAgICAgcm9vdFtcIkpTT04zXCJdID0gcHJldmlvdXNKU09OO1xuXHQgICAgICAgICAgbmF0aXZlSlNPTiA9IHByZXZpb3VzSlNPTiA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBKU09OMztcblx0ICAgICAgfVxuXHQgICAgfSkpO1xuXHRcblx0ICAgIHJvb3QuSlNPTiA9IHtcblx0ICAgICAgXCJwYXJzZVwiOiBKU09OMy5wYXJzZSxcblx0ICAgICAgXCJzdHJpbmdpZnlcIjogSlNPTjMuc3RyaW5naWZ5XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLy8gRXhwb3J0IGZvciBhc3luY2hyb25vdXMgbW9kdWxlIGxvYWRlcnMuXG5cdCAgaWYgKGlzTG9hZGVyKSB7XG5cdCAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gSlNPTjM7XG5cdCAgICB9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgIH1cblx0fSkuY2FsbCh0aGlzKTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KShtb2R1bGUpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgcmFuZG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBvblVubG9hZCA9IHt9XG5cdCAgLCBhZnRlclVubG9hZCA9IGZhbHNlXG5cdCAgICAvLyBkZXRlY3QgZ29vZ2xlIGNocm9tZSBwYWNrYWdlZCBhcHBzIGJlY2F1c2UgdGhleSBkb24ndCBhbGxvdyB0aGUgJ3VubG9hZCcgZXZlbnRcblx0ICAsIGlzQ2hyb21lUGFja2FnZWRBcHAgPSBnbG9iYWwuY2hyb21lICYmIGdsb2JhbC5jaHJvbWUuYXBwICYmIGdsb2JhbC5jaHJvbWUuYXBwLnJ1bnRpbWVcblx0ICA7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBhdHRhY2hFdmVudDogZnVuY3Rpb24oZXZlbnQsIGxpc3RlbmVyKSB7XG5cdCAgICBpZiAodHlwZW9mIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLmRvY3VtZW50ICYmIGdsb2JhbC5hdHRhY2hFdmVudCkge1xuXHQgICAgICAvLyBJRSBxdWlya3MuXG5cdCAgICAgIC8vIEFjY29yZGluZyB0bzogaHR0cDovL3N0ZXZlc291ZGVycy5jb20vbWlzYy90ZXN0LXBvc3RtZXNzYWdlLnBocFxuXHQgICAgICAvLyB0aGUgbWVzc2FnZSBnZXRzIGRlbGl2ZXJlZCBvbmx5IHRvICdkb2N1bWVudCcsIG5vdCAnd2luZG93Jy5cblx0ICAgICAgZ2xvYmFsLmRvY3VtZW50LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xuXHQgICAgICAvLyBJIGdldCAnd2luZG93JyBmb3IgaWU4LlxuXHQgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0LCBkZXRhY2hFdmVudDogZnVuY3Rpb24oZXZlbnQsIGxpc3RlbmVyKSB7XG5cdCAgICBpZiAodHlwZW9mIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBnbG9iYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLmRvY3VtZW50ICYmIGdsb2JhbC5kZXRhY2hFdmVudCkge1xuXHQgICAgICBnbG9iYWwuZG9jdW1lbnQuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG5cdCAgICAgIGdsb2JhbC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQsIHVubG9hZEFkZDogZnVuY3Rpb24obGlzdGVuZXIpIHtcblx0ICAgIGlmIChpc0Nocm9tZVBhY2thZ2VkQXBwKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZWYgPSByYW5kb20uc3RyaW5nKDgpO1xuXHQgICAgb25VbmxvYWRbcmVmXSA9IGxpc3RlbmVyO1xuXHQgICAgaWYgKGFmdGVyVW5sb2FkKSB7XG5cdCAgICAgIHNldFRpbWVvdXQodGhpcy50cmlnZ2VyVW5sb2FkQ2FsbGJhY2tzLCAwKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZWY7XG5cdCAgfVxuXHRcblx0LCB1bmxvYWREZWw6IGZ1bmN0aW9uKHJlZikge1xuXHQgICAgaWYgKHJlZiBpbiBvblVubG9hZCkge1xuXHQgICAgICBkZWxldGUgb25VbmxvYWRbcmVmXTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQsIHRyaWdnZXJVbmxvYWRDYWxsYmFja3M6IGZ1bmN0aW9uKCkge1xuXHQgICAgZm9yICh2YXIgcmVmIGluIG9uVW5sb2FkKSB7XG5cdCAgICAgIG9uVW5sb2FkW3JlZl0oKTtcblx0ICAgICAgZGVsZXRlIG9uVW5sb2FkW3JlZl07XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHVubG9hZFRyaWdnZXJlZCA9IGZ1bmN0aW9uKCkge1xuXHQgIGlmIChhZnRlclVubG9hZCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBhZnRlclVubG9hZCA9IHRydWU7XG5cdCAgbW9kdWxlLmV4cG9ydHMudHJpZ2dlclVubG9hZENhbGxiYWNrcygpO1xuXHR9O1xuXHRcblx0Ly8gJ3VubG9hZCcgYWxvbmUgaXMgbm90IHJlbGlhYmxlIGluIG9wZXJhIHdpdGhpbiBhbiBpZnJhbWUsIGJ1dCB3ZVxuXHQvLyBjYW4ndCB1c2UgYGJlZm9yZXVubG9hZGAgYXMgSUUgZmlyZXMgaXQgb24gamF2YXNjcmlwdDogbGlua3MuXG5cdGlmICghaXNDaHJvbWVQYWNrYWdlZEFwcCkge1xuXHQgIG1vZHVsZS5leHBvcnRzLmF0dGFjaEV2ZW50KCd1bmxvYWQnLCB1bmxvYWRUcmlnZ2VyZWQpO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIHVybFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KVxuXHQgICwgU2VuZGVyUmVjZWl2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KVxuXHQgIDtcblx0XG5cdHZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgZGVidWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCdzb2NranMtY2xpZW50OmFqYXgtYmFzZWQnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQWpheFNlbmRlcihBamF4T2JqZWN0KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKHVybCwgcGF5bG9hZCwgY2FsbGJhY2spIHtcblx0ICAgIGRlYnVnKCdjcmVhdGUgYWpheCBzZW5kZXInLCB1cmwsIHBheWxvYWQpO1xuXHQgICAgdmFyIG9wdCA9IHt9O1xuXHQgICAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSAnc3RyaW5nJykge1xuXHQgICAgICBvcHQuaGVhZGVycyA9IHsnQ29udGVudC10eXBlJzogJ3RleHQvcGxhaW4nfTtcblx0ICAgIH1cblx0ICAgIHZhciBhamF4VXJsID0gdXJsVXRpbHMuYWRkUGF0aCh1cmwsICcveGhyX3NlbmQnKTtcblx0ICAgIHZhciB4byA9IG5ldyBBamF4T2JqZWN0KCdQT1NUJywgYWpheFVybCwgcGF5bG9hZCwgb3B0KTtcblx0ICAgIHhvLm9uY2UoJ2ZpbmlzaCcsIGZ1bmN0aW9uKHN0YXR1cykge1xuXHQgICAgICBkZWJ1ZygnZmluaXNoJywgc3RhdHVzKTtcblx0ICAgICAgeG8gPSBudWxsO1xuXHRcblx0ICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwICYmIHN0YXR1cyAhPT0gMjA0KSB7XG5cdCAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignaHR0cCBzdGF0dXMgJyArIHN0YXR1cykpO1xuXHQgICAgICB9XG5cdCAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgZGVidWcoJ2Fib3J0Jyk7XG5cdCAgICAgIHhvLmNsb3NlKCk7XG5cdCAgICAgIHhvID0gbnVsbDtcblx0XG5cdCAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ0Fib3J0ZWQnKTtcblx0ICAgICAgZXJyLmNvZGUgPSAxMDAwO1xuXHQgICAgICBjYWxsYmFjayhlcnIpO1xuXHQgICAgfTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBBamF4QmFzZWRUcmFuc3BvcnQodHJhbnNVcmwsIHVybFN1ZmZpeCwgUmVjZWl2ZXIsIEFqYXhPYmplY3QpIHtcblx0ICBTZW5kZXJSZWNlaXZlci5jYWxsKHRoaXMsIHRyYW5zVXJsLCB1cmxTdWZmaXgsIGNyZWF0ZUFqYXhTZW5kZXIoQWpheE9iamVjdCksIFJlY2VpdmVyLCBBamF4T2JqZWN0KTtcblx0fVxuXHRcblx0aW5oZXJpdHMoQWpheEJhc2VkVHJhbnNwb3J0LCBTZW5kZXJSZWNlaXZlcik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEFqYXhCYXNlZFRyYW5zcG9ydDtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKSlcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qIGdsb2JhbCBjcnlwdG86dHJ1ZSAqL1xuXHR2YXIgY3J5cHRvID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7XG5cdFxuXHQvLyBUaGlzIHN0cmluZyBoYXMgbGVuZ3RoIDMyLCBhIHBvd2VyIG9mIDIsIHNvIHRoZSBtb2R1bHVzIGRvZXNuJ3QgaW50cm9kdWNlIGFcblx0Ly8gYmlhcy5cblx0dmFyIF9yYW5kb21TdHJpbmdDaGFycyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NSc7XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIHN0cmluZzogZnVuY3Rpb24obGVuZ3RoKSB7XG5cdCAgICB2YXIgbWF4ID0gX3JhbmRvbVN0cmluZ0NoYXJzLmxlbmd0aDtcblx0ICAgIHZhciBieXRlcyA9IGNyeXB0by5yYW5kb21CeXRlcyhsZW5ndGgpO1xuXHQgICAgdmFyIHJldCA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICByZXQucHVzaChfcmFuZG9tU3RyaW5nQ2hhcnMuc3Vic3RyKGJ5dGVzW2ldICUgbWF4LCAxKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmV0LmpvaW4oJycpO1xuXHQgIH1cblx0XG5cdCwgbnVtYmVyOiBmdW5jdGlvbihtYXgpIHtcblx0ICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpO1xuXHQgIH1cblx0XG5cdCwgbnVtYmVyU3RyaW5nOiBmdW5jdGlvbihtYXgpIHtcblx0ICAgIHZhciB0ID0gKCcnICsgKG1heCAtIDEpKS5sZW5ndGg7XG5cdCAgICB2YXIgcCA9IG5ldyBBcnJheSh0ICsgMSkuam9pbignMCcpO1xuXHQgICAgcmV0dXJuIChwICsgdGhpcy5udW1iZXIobWF4KSkuc2xpY2UoLXQpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVxuXHQgICwgWGhyRHJpdmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMylcblx0ICA7XG5cdFxuXHRmdW5jdGlvbiBYSFJMb2NhbE9iamVjdChtZXRob2QsIHVybCwgcGF5bG9hZCAvKiwgb3B0cyAqLykge1xuXHQgIFhockRyaXZlci5jYWxsKHRoaXMsIG1ldGhvZCwgdXJsLCBwYXlsb2FkLCB7XG5cdCAgICBub0NyZWRlbnRpYWxzOiB0cnVlXG5cdCAgfSk7XG5cdH1cblx0XG5cdGluaGVyaXRzKFhIUkxvY2FsT2JqZWN0LCBYaHJEcml2ZXIpO1xuXHRcblx0WEhSTG9jYWxPYmplY3QuZW5hYmxlZCA9IFhockRyaXZlci5lbmFibGVkO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBYSFJMb2NhbE9iamVjdDtcblxuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBpc09wZXJhOiBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBnbG9iYWwubmF2aWdhdG9yICYmXG5cdCAgICAgIC9vcGVyYS9pLnRlc3QoZ2xvYmFsLm5hdmlnYXRvci51c2VyQWdlbnQpO1xuXHQgIH1cblx0XG5cdCwgaXNLb25xdWVyb3I6IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIGdsb2JhbC5uYXZpZ2F0b3IgJiZcblx0ICAgICAgL2tvbnF1ZXJvci9pLnRlc3QoZ2xvYmFsLm5hdmlnYXRvci51c2VyQWdlbnQpO1xuXHQgIH1cblx0XG5cdCAgLy8gIzE4NyB3cmFwIGRvY3VtZW50LmRvbWFpbiBpbiB0cnkvY2F0Y2ggYmVjYXVzZSBvZiBXUDggZnJvbSBmaWxlOi8vL1xuXHQsIGhhc0RvbWFpbjogZnVuY3Rpb24gKCkge1xuXHQgICAgLy8gbm9uLWJyb3dzZXIgY2xpZW50IGFsd2F5cyBoYXMgYSBkb21haW5cblx0ICAgIGlmICghZ2xvYmFsLmRvY3VtZW50KSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiAhIWdsb2JhbC5kb2N1bWVudC5kb21haW47XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIGdsb2JhbCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBldmVudFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KVxuXHQgICwgSlNPTjMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgLCBicm93c2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMClcblx0ICA7XG5cdFxuXHR2YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIGRlYnVnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgnc29ja2pzLWNsaWVudDp1dGlsczppZnJhbWUnKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgV1ByZWZpeDogJ19qcCdcblx0LCBjdXJyZW50V2luZG93SWQ6IG51bGxcblx0XG5cdCwgcG9sbHV0ZUdsb2JhbE5hbWVzcGFjZTogZnVuY3Rpb24oKSB7XG5cdCAgICBpZiAoIShtb2R1bGUuZXhwb3J0cy5XUHJlZml4IGluIGdsb2JhbCkpIHtcblx0ICAgICAgZ2xvYmFsW21vZHVsZS5leHBvcnRzLldQcmVmaXhdID0ge307XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0LCBwb3N0TWVzc2FnZTogZnVuY3Rpb24odHlwZSwgZGF0YSkge1xuXHQgICAgaWYgKGdsb2JhbC5wYXJlbnQgIT09IGdsb2JhbCkge1xuXHQgICAgICBnbG9iYWwucGFyZW50LnBvc3RNZXNzYWdlKEpTT04zLnN0cmluZ2lmeSh7XG5cdCAgICAgICAgd2luZG93SWQ6IG1vZHVsZS5leHBvcnRzLmN1cnJlbnRXaW5kb3dJZFxuXHQgICAgICAsIHR5cGU6IHR5cGVcblx0ICAgICAgLCBkYXRhOiBkYXRhIHx8ICcnXG5cdCAgICAgIH0pLCAnKicpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZGVidWcoJ0Nhbm5vdCBwb3N0TWVzc2FnZSwgbm8gcGFyZW50IHdpbmRvdy4nLCB0eXBlLCBkYXRhKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQsIGNyZWF0ZUlmcmFtZTogZnVuY3Rpb24oaWZyYW1lVXJsLCBlcnJvckNhbGxiYWNrKSB7XG5cdCAgICB2YXIgaWZyYW1lID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXHQgICAgdmFyIHRyZWYsIHVubG9hZFJlZjtcblx0ICAgIHZhciB1bmF0dGFjaCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBkZWJ1ZygndW5hdHRhY2gnKTtcblx0ICAgICAgY2xlYXJUaW1lb3V0KHRyZWYpO1xuXHQgICAgICAvLyBFeHBsb3JlciBoYWQgcHJvYmxlbXMgd2l0aCB0aGF0LlxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmcmFtZS5vbmxvYWQgPSBudWxsO1xuXHQgICAgICB9IGNhdGNoICh4KSB7XG5cdCAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuXHQgICAgICB9XG5cdCAgICAgIGlmcmFtZS5vbmVycm9yID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBkZWJ1ZygnY2xlYW51cCcpO1xuXHQgICAgICBpZiAoaWZyYW1lKSB7XG5cdCAgICAgICAgdW5hdHRhY2goKTtcblx0ICAgICAgICAvLyBUaGlzIHRpbWVvdXQgbWFrZXMgY2hyb21lIGZpcmUgb25iZWZvcmV1bmxvYWQgZXZlbnRcblx0ICAgICAgICAvLyB3aXRoaW4gaWZyYW1lLiBXaXRob3V0IHRoZSB0aW1lb3V0IGl0IGdvZXMgc3RyYWlnaHQgdG9cblx0ICAgICAgICAvLyBvbnVubG9hZC5cblx0ICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYgKGlmcmFtZSkge1xuXHQgICAgICAgICAgICBpZnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpZnJhbWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaWZyYW1lID0gbnVsbDtcblx0ICAgICAgICB9LCAwKTtcblx0ICAgICAgICBldmVudFV0aWxzLnVubG9hZERlbCh1bmxvYWRSZWYpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdmFyIG9uZXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcblx0ICAgICAgZGVidWcoJ29uZXJyb3InLCBlcnIpO1xuXHQgICAgICBpZiAoaWZyYW1lKSB7XG5cdCAgICAgICAgY2xlYW51cCgpO1xuXHQgICAgICAgIGVycm9yQ2FsbGJhY2soZXJyKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHZhciBwb3N0ID0gZnVuY3Rpb24obXNnLCBvcmlnaW4pIHtcblx0ICAgICAgZGVidWcoJ3Bvc3QnLCBtc2csIG9yaWdpbik7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgLy8gV2hlbiB0aGUgaWZyYW1lIGlzIG5vdCBsb2FkZWQsIElFIHJhaXNlcyBhbiBleGNlcHRpb25cblx0ICAgICAgICAvLyBvbiAnY29udGVudFdpbmRvdycuXG5cdCAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIGlmIChpZnJhbWUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcblx0ICAgICAgICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UobXNnLCBvcmlnaW4pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIDApO1xuXHQgICAgICB9IGNhdGNoICh4KSB7XG5cdCAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGlmcmFtZS5zcmMgPSBpZnJhbWVVcmw7XG5cdCAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ICAgIGlmcmFtZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cdCAgICBpZnJhbWUub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBvbmVycm9yKCdvbmVycm9yJyk7XG5cdCAgICB9O1xuXHQgICAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBkZWJ1Zygnb25sb2FkJyk7XG5cdCAgICAgIC8vIGBvbmxvYWRgIGlzIHRyaWdnZXJlZCBiZWZvcmUgc2NyaXB0cyBvbiB0aGUgaWZyYW1lIGFyZVxuXHQgICAgICAvLyBleGVjdXRlZC4gR2l2ZSBpdCBmZXcgc2Vjb25kcyB0byBhY3R1YWxseSBsb2FkIHN0dWZmLlxuXHQgICAgICBjbGVhclRpbWVvdXQodHJlZik7XG5cdCAgICAgIHRyZWYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIG9uZXJyb3IoJ29ubG9hZCB0aW1lb3V0Jyk7XG5cdCAgICAgIH0sIDIwMDApO1xuXHQgICAgfTtcblx0ICAgIGdsb2JhbC5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG5cdCAgICB0cmVmID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgICAgb25lcnJvcigndGltZW91dCcpO1xuXHQgICAgfSwgMTUwMDApO1xuXHQgICAgdW5sb2FkUmVmID0gZXZlbnRVdGlscy51bmxvYWRBZGQoY2xlYW51cCk7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBwb3N0OiBwb3N0XG5cdCAgICAsIGNsZWFudXA6IGNsZWFudXBcblx0ICAgICwgbG9hZGVkOiB1bmF0dGFjaFxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQvKiBqc2hpbnQgdW5kZWY6IGZhbHNlLCBuZXdjYXA6IGZhbHNlICovXG5cdC8qIGVzbGludCBuby11bmRlZjogMCwgbmV3LWNhcDogMCAqL1xuXHQsIGNyZWF0ZUh0bWxmaWxlOiBmdW5jdGlvbihpZnJhbWVVcmwsIGVycm9yQ2FsbGJhY2spIHtcblx0ICAgIHZhciBheG8gPSBbJ0FjdGl2ZSddLmNvbmNhdCgnT2JqZWN0Jykuam9pbignWCcpO1xuXHQgICAgdmFyIGRvYyA9IG5ldyBnbG9iYWxbYXhvXSgnaHRtbGZpbGUnKTtcblx0ICAgIHZhciB0cmVmLCB1bmxvYWRSZWY7XG5cdCAgICB2YXIgaWZyYW1lO1xuXHQgICAgdmFyIHVuYXR0YWNoID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dCh0cmVmKTtcblx0ICAgICAgaWZyYW1lLm9uZXJyb3IgPSBudWxsO1xuXHQgICAgfTtcblx0ICAgIHZhciBjbGVhbnVwID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmIChkb2MpIHtcblx0ICAgICAgICB1bmF0dGFjaCgpO1xuXHQgICAgICAgIGV2ZW50VXRpbHMudW5sb2FkRGVsKHVubG9hZFJlZik7XG5cdCAgICAgICAgaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcblx0ICAgICAgICBpZnJhbWUgPSBkb2MgPSBudWxsO1xuXHQgICAgICAgIENvbGxlY3RHYXJiYWdlKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgb25lcnJvciA9IGZ1bmN0aW9uKHIpIHtcblx0ICAgICAgZGVidWcoJ29uZXJyb3InLCByKTtcblx0ICAgICAgaWYgKGRvYykge1xuXHQgICAgICAgIGNsZWFudXAoKTtcblx0ICAgICAgICBlcnJvckNhbGxiYWNrKHIpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdmFyIHBvc3QgPSBmdW5jdGlvbihtc2csIG9yaWdpbikge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIC8vIFdoZW4gdGhlIGlmcmFtZSBpcyBub3QgbG9hZGVkLCBJRSByYWlzZXMgYW4gZXhjZXB0aW9uXG5cdCAgICAgICAgLy8gb24gJ2NvbnRlbnRXaW5kb3cnLlxuXHQgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBpZiAoaWZyYW1lICYmIGlmcmFtZS5jb250ZW50V2luZG93KSB7XG5cdCAgICAgICAgICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UobXNnLCBvcmlnaW4pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIDApO1xuXHQgICAgICB9IGNhdGNoICh4KSB7XG5cdCAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGRvYy5vcGVuKCk7XG5cdCAgICBkb2Mud3JpdGUoJzxodG1sPjxzJyArICdjcmlwdD4nICtcblx0ICAgICAgICAgICAgICAnZG9jdW1lbnQuZG9tYWluPVwiJyArIGdsb2JhbC5kb2N1bWVudC5kb21haW4gKyAnXCI7JyArXG5cdCAgICAgICAgICAgICAgJzwvcycgKyAnY3JpcHQ+PC9odG1sPicpO1xuXHQgICAgZG9jLmNsb3NlKCk7XG5cdCAgICBkb2MucGFyZW50V2luZG93W21vZHVsZS5leHBvcnRzLldQcmVmaXhdID0gZ2xvYmFsW21vZHVsZS5leHBvcnRzLldQcmVmaXhdO1xuXHQgICAgdmFyIGMgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChjKTtcblx0ICAgIGlmcmFtZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcblx0ICAgIGMuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblx0ICAgIGlmcmFtZS5zcmMgPSBpZnJhbWVVcmw7XG5cdCAgICBpZnJhbWUub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBvbmVycm9yKCdvbmVycm9yJyk7XG5cdCAgICB9O1xuXHQgICAgdHJlZiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgIG9uZXJyb3IoJ3RpbWVvdXQnKTtcblx0ICAgIH0sIDE1MDAwKTtcblx0ICAgIHVubG9hZFJlZiA9IGV2ZW50VXRpbHMudW5sb2FkQWRkKGNsZWFudXApO1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgcG9zdDogcG9zdFxuXHQgICAgLCBjbGVhbnVwOiBjbGVhbnVwXG5cdCAgICAsIGxvYWRlZDogdW5hdHRhY2hcblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMuaWZyYW1lRW5hYmxlZCA9IGZhbHNlO1xuXHRpZiAoZ2xvYmFsLmRvY3VtZW50KSB7XG5cdCAgLy8gcG9zdE1lc3NhZ2UgbWlzYmVoYXZlcyBpbiBrb25xdWVyb3IgNC42LjUgLSB0aGUgbWVzc2FnZXMgYXJlIGRlbGl2ZXJlZCB3aXRoXG5cdCAgLy8gaHVnZSBkZWxheSwgb3Igbm90IGF0IGFsbC5cblx0ICBtb2R1bGUuZXhwb3J0cy5pZnJhbWVFbmFibGVkID0gKHR5cGVvZiBnbG9iYWwucG9zdE1lc3NhZ2UgPT09ICdmdW5jdGlvbicgfHxcblx0ICAgIHR5cGVvZiBnbG9iYWwucG9zdE1lc3NhZ2UgPT09ICdvYmplY3QnKSAmJiAoIWJyb3dzZXIuaXNLb25xdWVyb3IoKSk7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIEV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMykuRXZlbnRFbWl0dGVyXG5cdCAgO1xuXHRcblx0dmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBkZWJ1ZyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoJ3NvY2tqcy1jbGllbnQ6cmVjZWl2ZXI6eGhyJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFhoclJlY2VpdmVyKHVybCwgQWpheE9iamVjdCkge1xuXHQgIGRlYnVnKHVybCk7XG5cdCAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHRcblx0ICB0aGlzLmJ1ZmZlclBvc2l0aW9uID0gMDtcblx0XG5cdCAgdGhpcy54byA9IG5ldyBBamF4T2JqZWN0KCdQT1NUJywgdXJsLCBudWxsKTtcblx0ICB0aGlzLnhvLm9uKCdjaHVuaycsIHRoaXMuX2NodW5rSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0ICB0aGlzLnhvLm9uY2UoJ2ZpbmlzaCcsIGZ1bmN0aW9uKHN0YXR1cywgdGV4dCkge1xuXHQgICAgZGVidWcoJ2ZpbmlzaCcsIHN0YXR1cywgdGV4dCk7XG5cdCAgICBzZWxmLl9jaHVua0hhbmRsZXIoc3RhdHVzLCB0ZXh0KTtcblx0ICAgIHNlbGYueG8gPSBudWxsO1xuXHQgICAgdmFyIHJlYXNvbiA9IHN0YXR1cyA9PT0gMjAwID8gJ25ldHdvcmsnIDogJ3Blcm1hbmVudCc7XG5cdCAgICBkZWJ1ZygnY2xvc2UnLCByZWFzb24pO1xuXHQgICAgc2VsZi5lbWl0KCdjbG9zZScsIG51bGwsIHJlYXNvbik7XG5cdCAgICBzZWxmLl9jbGVhbnVwKCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdGluaGVyaXRzKFhoclJlY2VpdmVyLCBFdmVudEVtaXR0ZXIpO1xuXHRcblx0WGhyUmVjZWl2ZXIucHJvdG90eXBlLl9jaHVua0hhbmRsZXIgPSBmdW5jdGlvbihzdGF0dXMsIHRleHQpIHtcblx0ICBkZWJ1ZygnX2NodW5rSGFuZGxlcicsIHN0YXR1cyk7XG5cdCAgaWYgKHN0YXR1cyAhPT0gMjAwIHx8ICF0ZXh0KSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICBmb3IgKHZhciBpZHggPSAtMTsgOyB0aGlzLmJ1ZmZlclBvc2l0aW9uICs9IGlkeCArIDEpIHtcblx0ICAgIHZhciBidWYgPSB0ZXh0LnNsaWNlKHRoaXMuYnVmZmVyUG9zaXRpb24pO1xuXHQgICAgaWR4ID0gYnVmLmluZGV4T2YoJ1xcbicpO1xuXHQgICAgaWYgKGlkeCA9PT0gLTEpIHtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgICB2YXIgbXNnID0gYnVmLnNsaWNlKDAsIGlkeCk7XG5cdCAgICBpZiAobXNnKSB7XG5cdCAgICAgIGRlYnVnKCdtZXNzYWdlJywgbXNnKTtcblx0ICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgbXNnKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRYaHJSZWNlaXZlci5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcblx0ICBkZWJ1ZygnX2NsZWFudXAnKTtcblx0ICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHR9O1xuXHRcblx0WGhyUmVjZWl2ZXIucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ2Fib3J0Jyk7XG5cdCAgaWYgKHRoaXMueG8pIHtcblx0ICAgIHRoaXMueG8uY2xvc2UoKTtcblx0ICAgIGRlYnVnKCdjbG9zZScpO1xuXHQgICAgdGhpcy5lbWl0KCdjbG9zZScsIG51bGwsICd1c2VyJyk7XG5cdCAgICB0aGlzLnhvID0gbnVsbDtcblx0ICB9XG5cdCAgdGhpcy5fY2xlYW51cCgpO1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBYaHJSZWNlaXZlcjtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKSlcblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCBYaHJEcml2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKVxuXHQgIDtcblx0XG5cdGZ1bmN0aW9uIFhIUkNvcnNPYmplY3QobWV0aG9kLCB1cmwsIHBheWxvYWQsIG9wdHMpIHtcblx0ICBYaHJEcml2ZXIuY2FsbCh0aGlzLCBtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cyk7XG5cdH1cblx0XG5cdGluaGVyaXRzKFhIUkNvcnNPYmplY3QsIFhockRyaXZlcik7XG5cdFxuXHRYSFJDb3JzT2JqZWN0LmVuYWJsZWQgPSBYaHJEcml2ZXIuZW5hYmxlZCAmJiBYaHJEcml2ZXIuc3VwcG9ydHNDT1JTO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBYSFJDb3JzT2JqZWN0O1xuXG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gRXZlbnQoZXZlbnRUeXBlKSB7XG5cdCAgdGhpcy50eXBlID0gZXZlbnRUeXBlO1xuXHR9XG5cdFxuXHRFdmVudC5wcm90b3R5cGUuaW5pdEV2ZW50ID0gZnVuY3Rpb24oZXZlbnRUeXBlLCBjYW5CdWJibGUsIGNhbmNlbGFibGUpIHtcblx0ICB0aGlzLnR5cGUgPSBldmVudFR5cGU7XG5cdCAgdGhpcy5idWJibGVzID0gY2FuQnViYmxlO1xuXHQgIHRoaXMuY2FuY2VsYWJsZSA9IGNhbmNlbGFibGU7XG5cdCAgdGhpcy50aW1lU3RhbXAgPSArbmV3IERhdGUoKTtcblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdEV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbigpIHt9O1xuXHRFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHt9O1xuXHRcblx0RXZlbnQuQ0FQVFVSSU5HX1BIQVNFID0gMTtcblx0RXZlbnQuQVRfVEFSR0VUID0gMjtcblx0RXZlbnQuQlVCQkxJTkdfUEhBU0UgPSAzO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBFdmVudDtcblxuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCBJZnJhbWVUcmFuc3BvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KVxuXHQgICwgb2JqZWN0VXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KVxuXHQgIDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odHJhbnNwb3J0KSB7XG5cdFxuXHQgIGZ1bmN0aW9uIElmcmFtZVdyYXBUcmFuc3BvcnQodHJhbnNVcmwsIGJhc2VVcmwpIHtcblx0ICAgIElmcmFtZVRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zcG9ydC50cmFuc3BvcnROYW1lLCB0cmFuc1VybCwgYmFzZVVybCk7XG5cdCAgfVxuXHRcblx0ICBpbmhlcml0cyhJZnJhbWVXcmFwVHJhbnNwb3J0LCBJZnJhbWVUcmFuc3BvcnQpO1xuXHRcblx0ICBJZnJhbWVXcmFwVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbih1cmwsIGluZm8pIHtcblx0ICAgIGlmICghZ2xvYmFsLmRvY3VtZW50KSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaWZyYW1lSW5mbyA9IG9iamVjdFV0aWxzLmV4dGVuZCh7fSwgaW5mbyk7XG5cdCAgICBpZnJhbWVJbmZvLnNhbWVPcmlnaW4gPSB0cnVlO1xuXHQgICAgcmV0dXJuIHRyYW5zcG9ydC5lbmFibGVkKGlmcmFtZUluZm8pICYmIElmcmFtZVRyYW5zcG9ydC5lbmFibGVkKCk7XG5cdCAgfTtcblx0XG5cdCAgSWZyYW1lV3JhcFRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ2lmcmFtZS0nICsgdHJhbnNwb3J0LnRyYW5zcG9ydE5hbWU7XG5cdCAgSWZyYW1lV3JhcFRyYW5zcG9ydC5uZWVkQm9keSA9IHRydWU7XG5cdCAgSWZyYW1lV3JhcFRyYW5zcG9ydC5yb3VuZFRyaXBzID0gSWZyYW1lVHJhbnNwb3J0LnJvdW5kVHJpcHMgKyB0cmFuc3BvcnQucm91bmRUcmlwcyAtIDE7IC8vIGh0bWwsIGphdmFzY3JpcHQgKDIpICsgdHJhbnNwb3J0IC0gbm8gQ09SUyAoMSlcblx0XG5cdCAgSWZyYW1lV3JhcFRyYW5zcG9ydC5mYWNhZGVUcmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG5cdFxuXHQgIHJldHVybiBJZnJhbWVXcmFwVHJhbnNwb3J0O1xuXHR9O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXZlbnRFbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKS5FdmVudEVtaXR0ZXJcblx0ICAsIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVxuXHQgICwgZXZlbnRVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNilcblx0ICAsIGJyb3dzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKVxuXHQgICwgdXJsVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdCAgO1xuXHRcblx0dmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBkZWJ1ZyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoJ3NvY2tqcy1jbGllbnQ6c2VuZGVyOnhkcicpO1xuXHR9XG5cdFxuXHQvLyBSZWZlcmVuY2VzOlxuXHQvLyAgIGh0dHA6Ly9hamF4aWFuLmNvbS9hcmNoaXZlcy8xMDAtbGluZS1hamF4LXdyYXBwZXJcblx0Ly8gICBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvY2MyODgwNjAodj1WUy44NSkuYXNweFxuXHRcblx0ZnVuY3Rpb24gWERST2JqZWN0KG1ldGhvZCwgdXJsLCBwYXlsb2FkKSB7XG5cdCAgZGVidWcobWV0aG9kLCB1cmwpO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblx0XG5cdCAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgIHNlbGYuX3N0YXJ0KG1ldGhvZCwgdXJsLCBwYXlsb2FkKTtcblx0ICB9LCAwKTtcblx0fVxuXHRcblx0aW5oZXJpdHMoWERST2JqZWN0LCBFdmVudEVtaXR0ZXIpO1xuXHRcblx0WERST2JqZWN0LnByb3RvdHlwZS5fc3RhcnQgPSBmdW5jdGlvbihtZXRob2QsIHVybCwgcGF5bG9hZCkge1xuXHQgIGRlYnVnKCdfc3RhcnQnKTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIHhkciA9IG5ldyBnbG9iYWwuWERvbWFpblJlcXVlc3QoKTtcblx0ICAvLyBJRSBjYWNoZXMgZXZlbiBQT1NUc1xuXHQgIHVybCA9IHVybFV0aWxzLmFkZFF1ZXJ5KHVybCwgJ3Q9JyArICgrbmV3IERhdGUoKSkpO1xuXHRcblx0ICB4ZHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgZGVidWcoJ29uZXJyb3InKTtcblx0ICAgIHNlbGYuX2Vycm9yKCk7XG5cdCAgfTtcblx0ICB4ZHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICBkZWJ1Zygnb250aW1lb3V0Jyk7XG5cdCAgICBzZWxmLl9lcnJvcigpO1xuXHQgIH07XG5cdCAgeGRyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbigpIHtcblx0ICAgIGRlYnVnKCdwcm9ncmVzcycsIHhkci5yZXNwb25zZVRleHQpO1xuXHQgICAgc2VsZi5lbWl0KCdjaHVuaycsIDIwMCwgeGRyLnJlc3BvbnNlVGV4dCk7XG5cdCAgfTtcblx0ICB4ZHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdCAgICBkZWJ1ZygnbG9hZCcpO1xuXHQgICAgc2VsZi5lbWl0KCdmaW5pc2gnLCAyMDAsIHhkci5yZXNwb25zZVRleHQpO1xuXHQgICAgc2VsZi5fY2xlYW51cChmYWxzZSk7XG5cdCAgfTtcblx0ICB0aGlzLnhkciA9IHhkcjtcblx0ICB0aGlzLnVubG9hZFJlZiA9IGV2ZW50VXRpbHMudW5sb2FkQWRkKGZ1bmN0aW9uKCkge1xuXHQgICAgc2VsZi5fY2xlYW51cCh0cnVlKTtcblx0ICB9KTtcblx0ICB0cnkge1xuXHQgICAgLy8gRmFpbHMgd2l0aCBBY2Nlc3NEZW5pZWQgaWYgcG9ydCBudW1iZXIgaXMgYm9ndXNcblx0ICAgIHRoaXMueGRyLm9wZW4obWV0aG9kLCB1cmwpO1xuXHQgICAgaWYgKHRoaXMudGltZW91dCkge1xuXHQgICAgICB0aGlzLnhkci50aW1lb3V0ID0gdGhpcy50aW1lb3V0O1xuXHQgICAgfVxuXHQgICAgdGhpcy54ZHIuc2VuZChwYXlsb2FkKTtcblx0ICB9IGNhdGNoICh4KSB7XG5cdCAgICB0aGlzLl9lcnJvcigpO1xuXHQgIH1cblx0fTtcblx0XG5cdFhEUk9iamVjdC5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgdGhpcy5lbWl0KCdmaW5pc2gnLCAwLCAnJyk7XG5cdCAgdGhpcy5fY2xlYW51cChmYWxzZSk7XG5cdH07XG5cdFxuXHRYRFJPYmplY3QucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oYWJvcnQpIHtcblx0ICBkZWJ1ZygnY2xlYW51cCcsIGFib3J0KTtcblx0ICBpZiAoIXRoaXMueGRyKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdCAgZXZlbnRVdGlscy51bmxvYWREZWwodGhpcy51bmxvYWRSZWYpO1xuXHRcblx0ICB0aGlzLnhkci5vbnRpbWVvdXQgPSB0aGlzLnhkci5vbmVycm9yID0gdGhpcy54ZHIub25wcm9ncmVzcyA9IHRoaXMueGRyLm9ubG9hZCA9IG51bGw7XG5cdCAgaWYgKGFib3J0KSB7XG5cdCAgICB0cnkge1xuXHQgICAgICB0aGlzLnhkci5hYm9ydCgpO1xuXHQgICAgfSBjYXRjaCAoeCkge1xuXHQgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG5cdCAgICB9XG5cdCAgfVxuXHQgIHRoaXMudW5sb2FkUmVmID0gdGhpcy54ZHIgPSBudWxsO1xuXHR9O1xuXHRcblx0WERST2JqZWN0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuXHQgIGRlYnVnKCdjbG9zZScpO1xuXHQgIHRoaXMuX2NsZWFudXAodHJ1ZSk7XG5cdH07XG5cdFxuXHQvLyBJRSA4LzkgaWYgdGhlIHJlcXVlc3QgdGFyZ2V0IHVzZXMgdGhlIHNhbWUgc2NoZW1lIC0gIzc5XG5cdFhEUk9iamVjdC5lbmFibGVkID0gISEoZ2xvYmFsLlhEb21haW5SZXF1ZXN0ICYmIGJyb3dzZXIuaGFzRG9tYWluKCkpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBYRFJPYmplY3Q7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygyKSwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgaXNPYmplY3Q6IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqO1xuXHQgICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG5cdCAgfVxuXHRcblx0LCBleHRlbmQ6IGZ1bmN0aW9uKG9iaikge1xuXHQgICAgaWYgKCF0aGlzLmlzT2JqZWN0KG9iaikpIHtcblx0ICAgICAgcmV0dXJuIG9iajtcblx0ICAgIH1cblx0ICAgIHZhciBzb3VyY2UsIHByb3A7XG5cdCAgICBmb3IgKHZhciBpID0gMSwgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgZm9yIChwcm9wIGluIHNvdXJjZSkge1xuXHQgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBwcm9wKSkge1xuXHQgICAgICAgICAgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9iajtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgcmVxdWlyZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKVxuXHQgICwgbG9sY2F0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nilcblx0ICAsIHFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSlcblx0ICAsIHJlbGF0aXZlcmUgPSAvXlxcLyg/IVxcLykvXG5cdCAgLCBwcm90b2NvbHJlID0gL14oW2EtejAtOS4rLV0rOik/KFxcL1xcLyk/KC4qKSQvaTsgLy8gYWN0dWFsIHByb3RvY29sIGlzIGZpcnN0IG1hdGNoXG5cdFxuXHQvKipcblx0ICogVGhlc2UgYXJlIHRoZSBwYXJzZSBpbnN0cnVjdGlvbnMgZm9yIHRoZSBVUkwgcGFyc2VycywgaXQgaW5mb3JtcyB0aGUgcGFyc2VyXG5cdCAqIGFib3V0OlxuXHQgKlxuXHQgKiAwLiBUaGUgY2hhciBpdCBOZWVkcyB0byBwYXJzZSwgaWYgaXQncyBhIHN0cmluZyBpdCBzaG91bGQgYmUgZG9uZSB1c2luZ1xuXHQgKiAgICBpbmRleE9mLCBSZWdFeHAgdXNpbmcgZXhlYyBhbmQgTmFOIG1lYW5zIHNldCBhcyBjdXJyZW50IHZhbHVlLlxuXHQgKiAxLiBUaGUgcHJvcGVydHkgd2Ugc2hvdWxkIHNldCB3aGVuIHBhcnNpbmcgdGhpcyB2YWx1ZS5cblx0ICogMi4gSW5kaWNhdGlvbiBpZiBpdCdzIGJhY2t3YXJkcyBvciBmb3J3YXJkIHBhcnNpbmcsIHdoZW4gc2V0IGFzIG51bWJlciBpdCdzXG5cdCAqICAgIHRoZSB2YWx1ZSBvZiBleHRyYSBjaGFycyB0aGF0IHNob3VsZCBiZSBzcGxpdCBvZmYuXG5cdCAqIDMuIEluaGVyaXQgZnJvbSBsb2NhdGlvbiBpZiBub24gZXhpc3RpbmcgaW4gdGhlIHBhcnNlci5cblx0ICogNC4gYHRvTG93ZXJDYXNlYCB0aGUgcmVzdWx0aW5nIHZhbHVlLlxuXHQgKi9cblx0dmFyIGluc3RydWN0aW9ucyA9IFtcblx0ICBbJyMnLCAnaGFzaCddLCAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgYmFjay5cblx0ICBbJz8nLCAncXVlcnknXSwgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgYmFjay5cblx0ICBbJy8nLCAncGF0aG5hbWUnXSwgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgYmFjay5cblx0ICBbJ0AnLCAnYXV0aCcsIDFdLCAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgZnJvbnQuXG5cdCAgW05hTiwgJ2hvc3QnLCB1bmRlZmluZWQsIDEsIDFdLCAgICAgICAvLyBTZXQgbGVmdCBvdmVyIHZhbHVlLlxuXHQgIFsvXFw6KFxcZCspJC8sICdwb3J0J10sICAgICAgICAgICAgICAgICAvLyBSZWdFeHAgdGhlIGJhY2suXG5cdCAgW05hTiwgJ2hvc3RuYW1lJywgdW5kZWZpbmVkLCAxLCAxXSAgICAvLyBTZXQgbGVmdCBvdmVyLlxuXHRdO1xuXHRcblx0IC8qKlxuXHQgKiBAdHlwZWRlZiBQcm90b2NvbEV4dHJhY3Rcblx0ICogQHR5cGUgT2JqZWN0XG5cdCAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBwcm90b2NvbCBQcm90b2NvbCBtYXRjaGVkIGluIHRoZSBVUkwsIGluIGxvd2VyY2FzZVxuXHQgKiBAcHJvcGVydHkge0Jvb2xlYW59IHNsYXNoZXMgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHByb3RvY29sIGlzIGZvbGxvd2VkIGJ5IGRvdWJsZSBzbGFzaCAoXCIvL1wiKVxuXHQgKiBAcHJvcGVydHkge1N0cmluZ30gcmVzdCAgICAgUmVzdCBvZiB0aGUgVVJMIHRoYXQgaXMgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sXG5cdCAqL1xuXHRcblx0IC8qKlxuXHQgICogRXh0cmFjdCBwcm90b2NvbCBpbmZvcm1hdGlvbiBmcm9tIGEgVVJMIHdpdGgvd2l0aG91dCBkb3VibGUgc2xhc2ggKFwiLy9cIilcblx0ICAqXG5cdCAgKiBAcGFyYW0gIHtTdHJpbmd9IGFkZHJlc3MgICBVUkwgd2Ugd2FudCB0byBleHRyYWN0IGZyb20uXG5cdCAgKiBAcmV0dXJuIHtQcm90b2NvbEV4dHJhY3R9ICBFeHRyYWN0ZWQgaW5mb3JtYXRpb25cblx0ICAqIEBwcml2YXRlXG5cdCAgKi9cblx0ZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKGFkZHJlc3MpIHtcblx0ICB2YXIgbWF0Y2ggPSBwcm90b2NvbHJlLmV4ZWMoYWRkcmVzcyk7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHByb3RvY29sOiBtYXRjaFsxXSA/IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgOiAnJyxcblx0ICAgIHNsYXNoZXM6ICEhbWF0Y2hbMl0sXG5cdCAgICByZXN0OiBtYXRjaFszXSA/IG1hdGNoWzNdIDogJydcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGFjdHVhbCBVUkwgaW5zdGFuY2UuIEluc3RlYWQgb2YgcmV0dXJuaW5nIGFuIG9iamVjdCB3ZSd2ZSBvcHRlZC1pbiB0b1xuXHQgKiBjcmVhdGUgYW4gYWN0dWFsIGNvbnN0cnVjdG9yIGFzIGl0J3MgbXVjaCBtb3JlIG1lbW9yeSBlZmZpY2llbnQgYW5kXG5cdCAqIGZhc3RlciBhbmQgaXQgcGxlYXNlcyBteSBDRE8uXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYWRkcmVzcyBVUkwgd2Ugd2FudCB0byBwYXJzZS5cblx0ICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBsb2NhdGlvbiBMb2NhdGlvbiBkZWZhdWx0cyBmb3IgcmVsYXRpdmUgcGF0aHMuXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gcGFyc2VyIFBhcnNlciBmb3IgdGhlIHF1ZXJ5IHN0cmluZy5cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdGZ1bmN0aW9uIFVSTChhZGRyZXNzLCBsb2NhdGlvbiwgcGFyc2VyKSB7XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVSTCkpIHtcblx0ICAgIHJldHVybiBuZXcgVVJMKGFkZHJlc3MsIGxvY2F0aW9uLCBwYXJzZXIpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHJlbGF0aXZlID0gcmVsYXRpdmVyZS50ZXN0KGFkZHJlc3MpXG5cdCAgICAsIHBhcnNlLCBpbnN0cnVjdGlvbiwgaW5kZXgsIGtleVxuXHQgICAgLCB0eXBlID0gdHlwZW9mIGxvY2F0aW9uXG5cdCAgICAsIHVybCA9IHRoaXNcblx0ICAgICwgaSA9IDA7XG5cdFxuXHQgIC8vXG5cdCAgLy8gVGhlIGZvbGxvd2luZyBpZiBzdGF0ZW1lbnRzIGFsbG93cyB0aGlzIG1vZHVsZSB0d28gaGF2ZSBjb21wYXRpYmlsaXR5IHdpdGhcblx0ICAvLyAyIGRpZmZlcmVudCBBUEk6XG5cdCAgLy9cblx0ICAvLyAxLiBOb2RlLmpzJ3MgYHVybC5wYXJzZWAgYXBpIHdoaWNoIGFjY2VwdHMgYSBVUkwsIGJvb2xlYW4gYXMgYXJndW1lbnRzXG5cdCAgLy8gICAgd2hlcmUgdGhlIGJvb2xlYW4gaW5kaWNhdGVzIHRoYXQgdGhlIHF1ZXJ5IHN0cmluZyBzaG91bGQgYWxzbyBiZSBwYXJzZWQuXG5cdCAgLy9cblx0ICAvLyAyLiBUaGUgYFVSTGAgaW50ZXJmYWNlIG9mIHRoZSBicm93c2VyIHdoaWNoIGFjY2VwdHMgYSBVUkwsIG9iamVjdCBhc1xuXHQgIC8vICAgIGFyZ3VtZW50cy4gVGhlIHN1cHBsaWVkIG9iamVjdCB3aWxsIGJlIHVzZWQgYXMgZGVmYXVsdCB2YWx1ZXMgLyBmYWxsLWJhY2tcblx0ICAvLyAgICBmb3IgcmVsYXRpdmUgcGF0aHMuXG5cdCAgLy9cblx0ICBpZiAoJ29iamVjdCcgIT09IHR5cGUgJiYgJ3N0cmluZycgIT09IHR5cGUpIHtcblx0ICAgIHBhcnNlciA9IGxvY2F0aW9uO1xuXHQgICAgbG9jYXRpb24gPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgaWYgKHBhcnNlciAmJiAnZnVuY3Rpb24nICE9PSB0eXBlb2YgcGFyc2VyKSB7XG5cdCAgICBwYXJzZXIgPSBxcy5wYXJzZTtcblx0ICB9XG5cdFxuXHQgIGxvY2F0aW9uID0gbG9sY2F0aW9uKGxvY2F0aW9uKTtcblx0XG5cdCAgLy8gZXh0cmFjdCBwcm90b2NvbCBpbmZvcm1hdGlvbiBiZWZvcmUgcnVubmluZyB0aGUgaW5zdHJ1Y3Rpb25zXG5cdCAgdmFyIGV4dHJhY3RlZCA9IGV4dHJhY3RQcm90b2NvbChhZGRyZXNzKTtcblx0ICB1cmwucHJvdG9jb2wgPSBleHRyYWN0ZWQucHJvdG9jb2wgfHwgbG9jYXRpb24ucHJvdG9jb2wgfHwgJyc7XG5cdCAgdXJsLnNsYXNoZXMgPSBleHRyYWN0ZWQuc2xhc2hlcyB8fCBsb2NhdGlvbi5zbGFzaGVzO1xuXHQgIGFkZHJlc3MgPSBleHRyYWN0ZWQucmVzdDtcblx0XG5cdCAgZm9yICg7IGkgPCBpbnN0cnVjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0ICAgIGluc3RydWN0aW9uID0gaW5zdHJ1Y3Rpb25zW2ldO1xuXHQgICAgcGFyc2UgPSBpbnN0cnVjdGlvblswXTtcblx0ICAgIGtleSA9IGluc3RydWN0aW9uWzFdO1xuXHRcblx0ICAgIGlmIChwYXJzZSAhPT0gcGFyc2UpIHtcblx0ICAgICAgdXJsW2tleV0gPSBhZGRyZXNzO1xuXHQgICAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHBhcnNlKSB7XG5cdCAgICAgIGlmICh+KGluZGV4ID0gYWRkcmVzcy5pbmRleE9mKHBhcnNlKSkpIHtcblx0ICAgICAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBpbnN0cnVjdGlvblsyXSkge1xuXHQgICAgICAgICAgdXJsW2tleV0gPSBhZGRyZXNzLnNsaWNlKDAsIGluZGV4KTtcblx0ICAgICAgICAgIGFkZHJlc3MgPSBhZGRyZXNzLnNsaWNlKGluZGV4ICsgaW5zdHJ1Y3Rpb25bMl0pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB1cmxba2V5XSA9IGFkZHJlc3Muc2xpY2UoaW5kZXgpO1xuXHQgICAgICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc2xpY2UoMCwgaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpbmRleCA9IHBhcnNlLmV4ZWMoYWRkcmVzcykpIHtcblx0ICAgICAgdXJsW2tleV0gPSBpbmRleFsxXTtcblx0ICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc2xpY2UoMCwgYWRkcmVzcy5sZW5ndGggLSBpbmRleFswXS5sZW5ndGgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHVybFtrZXldID0gdXJsW2tleV0gfHwgKGluc3RydWN0aW9uWzNdIHx8ICgncG9ydCcgPT09IGtleSAmJiByZWxhdGl2ZSkgPyBsb2NhdGlvbltrZXldIHx8ICcnIDogJycpO1xuXHRcblx0ICAgIC8vXG5cdCAgICAvLyBIb3N0bmFtZSwgaG9zdCBhbmQgcHJvdG9jb2wgc2hvdWxkIGJlIGxvd2VyY2FzZWQgc28gdGhleSBjYW4gYmUgdXNlZCB0b1xuXHQgICAgLy8gY3JlYXRlIGEgcHJvcGVyIGBvcmlnaW5gLlxuXHQgICAgLy9cblx0ICAgIGlmIChpbnN0cnVjdGlvbls0XSkge1xuXHQgICAgICB1cmxba2V5XSA9IHVybFtrZXldLnRvTG93ZXJDYXNlKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvL1xuXHQgIC8vIEFsc28gcGFyc2UgdGhlIHN1cHBsaWVkIHF1ZXJ5IHN0cmluZyBpbiB0byBhbiBvYmplY3QuIElmIHdlJ3JlIHN1cHBsaWVkXG5cdCAgLy8gd2l0aCBhIGN1c3RvbSBwYXJzZXIgYXMgZnVuY3Rpb24gdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBidWlsZC1pblxuXHQgIC8vIHBhcnNlci5cblx0ICAvL1xuXHQgIGlmIChwYXJzZXIpIHVybC5xdWVyeSA9IHBhcnNlcih1cmwucXVlcnkpO1xuXHRcblx0ICAvL1xuXHQgIC8vIFdlIHNob3VsZCBub3QgYWRkIHBvcnQgbnVtYmVycyBpZiB0aGV5IGFyZSBhbHJlYWR5IHRoZSBkZWZhdWx0IHBvcnQgbnVtYmVyXG5cdCAgLy8gZm9yIGEgZ2l2ZW4gcHJvdG9jb2wuIEFzIHRoZSBob3N0IGFsc28gY29udGFpbnMgdGhlIHBvcnQgbnVtYmVyIHdlJ3JlIGdvaW5nXG5cdCAgLy8gb3ZlcnJpZGUgaXQgd2l0aCB0aGUgaG9zdG5hbWUgd2hpY2ggY29udGFpbnMgbm8gcG9ydCBudW1iZXIuXG5cdCAgLy9cblx0ICBpZiAoIXJlcXVpcmVkKHVybC5wb3J0LCB1cmwucHJvdG9jb2wpKSB7XG5cdCAgICB1cmwuaG9zdCA9IHVybC5ob3N0bmFtZTtcblx0ICAgIHVybC5wb3J0ID0gJyc7XG5cdCAgfVxuXHRcblx0ICAvL1xuXHQgIC8vIFBhcnNlIGRvd24gdGhlIGBhdXRoYCBmb3IgdGhlIHVzZXJuYW1lIGFuZCBwYXNzd29yZC5cblx0ICAvL1xuXHQgIHVybC51c2VybmFtZSA9IHVybC5wYXNzd29yZCA9ICcnO1xuXHQgIGlmICh1cmwuYXV0aCkge1xuXHQgICAgaW5zdHJ1Y3Rpb24gPSB1cmwuYXV0aC5zcGxpdCgnOicpO1xuXHQgICAgdXJsLnVzZXJuYW1lID0gaW5zdHJ1Y3Rpb25bMF0gfHwgJyc7XG5cdCAgICB1cmwucGFzc3dvcmQgPSBpbnN0cnVjdGlvblsxXSB8fCAnJztcblx0ICB9XG5cdFxuXHQgIC8vXG5cdCAgLy8gVGhlIGhyZWYgaXMganVzdCB0aGUgY29tcGlsZWQgcmVzdWx0LlxuXHQgIC8vXG5cdCAgdXJsLmhyZWYgPSB1cmwudG9TdHJpbmcoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgaXMgY29udmVuaWVuY2UgbWV0aG9kIGZvciBjaGFuZ2luZyBwcm9wZXJ0aWVzIGluIHRoZSBVUkwgaW5zdGFuY2UgdG9cblx0ICogaW5zdXJlIHRoYXQgdGhleSBhbGwgcHJvcGFnYXRlIGNvcnJlY3RseS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb3AgICAgICAgICAgUHJvcGVydHkgd2UgbmVlZCB0byBhZGp1c3QuXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlICAgICAgICAgIFRoZSBuZXdseSBhc3NpZ25lZCB2YWx1ZS5cblx0ICogQHBhcmFtIHtCb29sZWFufEZ1bmN0aW9ufSBmbiAgV2hlbiBzZXR0aW5nIHRoZSBxdWVyeSwgaXQgd2lsbCBiZSB0aGUgZnVuY3Rpb24gdXNlZCB0byBwYXJzZVxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgcXVlcnkuXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdoZW4gc2V0dGluZyB0aGUgcHJvdG9jb2wsIGRvdWJsZSBzbGFzaCB3aWxsIGJlIHJlbW92ZWQgZnJvbVxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZmluYWwgdXJsIGlmIGl0IGlzIHRydWUuXG5cdCAqIEByZXR1cm5zIHtVUkx9XG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRVUkwucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldChwYXJ0LCB2YWx1ZSwgZm4pIHtcblx0ICB2YXIgdXJsID0gdGhpcztcblx0XG5cdCAgaWYgKCdxdWVyeScgPT09IHBhcnQpIHtcblx0ICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHZhbHVlICYmIHZhbHVlLmxlbmd0aCkge1xuXHQgICAgICB2YWx1ZSA9IChmbiB8fCBxcy5wYXJzZSkodmFsdWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuXHQgIH0gZWxzZSBpZiAoJ3BvcnQnID09PSBwYXJ0KSB7XG5cdCAgICB1cmxbcGFydF0gPSB2YWx1ZTtcblx0XG5cdCAgICBpZiAoIXJlcXVpcmVkKHZhbHVlLCB1cmwucHJvdG9jb2wpKSB7XG5cdCAgICAgIHVybC5ob3N0ID0gdXJsLmhvc3RuYW1lO1xuXHQgICAgICB1cmxbcGFydF0gPSAnJztcblx0ICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcblx0ICAgICAgdXJsLmhvc3QgPSB1cmwuaG9zdG5hbWUgKyc6JysgdmFsdWU7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICgnaG9zdG5hbWUnID09PSBwYXJ0KSB7XG5cdCAgICB1cmxbcGFydF0gPSB2YWx1ZTtcblx0XG5cdCAgICBpZiAodXJsLnBvcnQpIHZhbHVlICs9ICc6JysgdXJsLnBvcnQ7XG5cdCAgICB1cmwuaG9zdCA9IHZhbHVlO1xuXHQgIH0gZWxzZSBpZiAoJ2hvc3QnID09PSBwYXJ0KSB7XG5cdCAgICB1cmxbcGFydF0gPSB2YWx1ZTtcblx0XG5cdCAgICBpZiAoL1xcOlxcZCsvLnRlc3QodmFsdWUpKSB7XG5cdCAgICAgIHZhbHVlID0gdmFsdWUuc3BsaXQoJzonKTtcblx0ICAgICAgdXJsLmhvc3RuYW1lID0gdmFsdWVbMF07XG5cdCAgICAgIHVybC5wb3J0ID0gdmFsdWVbMV07XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICgncHJvdG9jb2wnID09PSBwYXJ0KSB7XG5cdCAgICB1cmwucHJvdG9jb2wgPSB2YWx1ZTtcblx0ICAgIHVybC5zbGFzaGVzID0gIWZuO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB1cmxbcGFydF0gPSB2YWx1ZTtcblx0ICB9XG5cdFxuXHQgIHVybC5ocmVmID0gdXJsLnRvU3RyaW5nKCk7XG5cdCAgcmV0dXJuIHVybDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUcmFuc2Zvcm0gdGhlIHByb3BlcnRpZXMgYmFjayBpbiB0byBhIHZhbGlkIGFuZCBmdWxsIFVSTCBzdHJpbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHN0cmluZ2lmeSBPcHRpb25hbCBxdWVyeSBzdHJpbmdpZnkgZnVuY3Rpb24uXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9XG5cdCAqIEBhcGkgcHVibGljXG5cdCAqL1xuXHRVUkwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoc3RyaW5naWZ5KSB7XG5cdCAgaWYgKCFzdHJpbmdpZnkgfHwgJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mIHN0cmluZ2lmeSkgc3RyaW5naWZ5ID0gcXMuc3RyaW5naWZ5O1xuXHRcblx0ICB2YXIgcXVlcnlcblx0ICAgICwgdXJsID0gdGhpc1xuXHQgICAgLCBwcm90b2NvbCA9IHVybC5wcm90b2NvbDtcblx0XG5cdCAgaWYgKHByb3RvY29sICYmIHByb3RvY29sLmNoYXJBdChwcm90b2NvbC5sZW5ndGggLSAxKSAhPT0gJzonKSBwcm90b2NvbCArPSAnOic7XG5cdFxuXHQgIHZhciByZXN1bHQgPSBwcm90b2NvbCArICh1cmwuc2xhc2hlcyA/ICcvLycgOiAnJyk7XG5cdFxuXHQgIGlmICh1cmwudXNlcm5hbWUpIHtcblx0ICAgIHJlc3VsdCArPSB1cmwudXNlcm5hbWU7XG5cdCAgICBpZiAodXJsLnBhc3N3b3JkKSByZXN1bHQgKz0gJzonKyB1cmwucGFzc3dvcmQ7XG5cdCAgICByZXN1bHQgKz0gJ0AnO1xuXHQgIH1cblx0XG5cdCAgcmVzdWx0ICs9IHVybC5ob3N0bmFtZTtcblx0ICBpZiAodXJsLnBvcnQpIHJlc3VsdCArPSAnOicrIHVybC5wb3J0O1xuXHRcblx0ICByZXN1bHQgKz0gdXJsLnBhdGhuYW1lO1xuXHRcblx0ICBxdWVyeSA9ICdvYmplY3QnID09PSB0eXBlb2YgdXJsLnF1ZXJ5ID8gc3RyaW5naWZ5KHVybC5xdWVyeSkgOiB1cmwucXVlcnk7XG5cdCAgaWYgKHF1ZXJ5KSByZXN1bHQgKz0gJz8nICE9PSBxdWVyeS5jaGFyQXQoMCkgPyAnPycrIHF1ZXJ5IDogcXVlcnk7XG5cdFxuXHQgIGlmICh1cmwuaGFzaCkgcmVzdWx0ICs9IHVybC5oYXNoO1xuXHRcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0Ly9cblx0Ly8gRXhwb3NlIHRoZSBVUkwgcGFyc2VyIGFuZCBzb21lIGFkZGl0aW9uYWwgcHJvcGVydGllcyB0aGF0IG1pZ2h0IGJlIHVzZWZ1bCBmb3Jcblx0Ly8gb3RoZXJzLlxuXHQvL1xuXHRVUkwucXMgPSBxcztcblx0VVJMLmxvY2F0aW9uID0gbG9sY2F0aW9uO1xuXHRtb2R1bGUuZXhwb3J0cyA9IFVSTDtcblxuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qIFNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24gb2YgRE9NMiBFdmVudFRhcmdldC5cblx0ICogICBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMi1FdmVudHMvZXZlbnRzLmh0bWwjRXZlbnRzLUV2ZW50VGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gRXZlbnRUYXJnZXQoKSB7XG5cdCAgdGhpcy5fbGlzdGVuZXJzID0ge307XG5cdH1cblx0XG5cdEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnRUeXBlLCBsaXN0ZW5lcikge1xuXHQgIGlmICghKGV2ZW50VHlwZSBpbiB0aGlzLl9saXN0ZW5lcnMpKSB7XG5cdCAgICB0aGlzLl9saXN0ZW5lcnNbZXZlbnRUeXBlXSA9IFtdO1xuXHQgIH1cblx0ICB2YXIgYXJyID0gdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV07XG5cdCAgLy8gIzRcblx0ICBpZiAoYXJyLmluZGV4T2YobGlzdGVuZXIpID09PSAtMSkge1xuXHQgICAgLy8gTWFrZSBhIGNvcHkgc28gYXMgbm90IHRvIGludGVyZmVyZSB3aXRoIGEgY3VycmVudCBkaXNwYXRjaEV2ZW50LlxuXHQgICAgYXJyID0gYXJyLmNvbmNhdChbbGlzdGVuZXJdKTtcblx0ICB9XG5cdCAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV0gPSBhcnI7XG5cdH07XG5cdFxuXHRFdmVudFRhcmdldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50VHlwZSwgbGlzdGVuZXIpIHtcblx0ICB2YXIgYXJyID0gdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV07XG5cdCAgaWYgKCFhcnIpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGlkeCA9IGFyci5pbmRleE9mKGxpc3RlbmVyKTtcblx0ICBpZiAoaWR4ICE9PSAtMSkge1xuXHQgICAgaWYgKGFyci5sZW5ndGggPiAxKSB7XG5cdCAgICAgIC8vIE1ha2UgYSBjb3B5IHNvIGFzIG5vdCB0byBpbnRlcmZlcmUgd2l0aCBhIGN1cnJlbnQgZGlzcGF0Y2hFdmVudC5cblx0ICAgICAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV0gPSBhcnIuc2xpY2UoMCwgaWR4KS5jb25jYXQoYXJyLnNsaWNlKGlkeCArIDEpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGRlbGV0ZSB0aGlzLl9saXN0ZW5lcnNbZXZlbnRUeXBlXTtcblx0ICAgIH1cblx0ICAgIHJldHVybjtcblx0ICB9XG5cdH07XG5cdFxuXHRFdmVudFRhcmdldC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBldmVudCA9IGFyZ3VtZW50c1swXTtcblx0ICB2YXIgdCA9IGV2ZW50LnR5cGU7XG5cdCAgLy8gZXF1aXZhbGVudCBvZiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXHQgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IFtldmVudF0gOiBBcnJheS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHQgIC8vIFRPRE86IFRoaXMgZG9lc24ndCBtYXRjaCB0aGUgcmVhbCBiZWhhdmlvcjsgcGVyIHNwZWMsIG9uZm9vIGdldFxuXHQgIC8vIHRoZWlyIHBsYWNlIGluIGxpbmUgZnJvbSB0aGUgL2ZpcnN0LyB0aW1lIHRoZXkncmUgc2V0IGZyb21cblx0ICAvLyBub24tbnVsbC4gQWx0aG91Z2ggV2ViS2l0IGJ1bXBzIGl0IHRvIHRoZSBlbmQgZXZlcnkgdGltZSBpdCdzXG5cdCAgLy8gc2V0LlxuXHQgIGlmICh0aGlzWydvbicgKyB0XSkge1xuXHQgICAgdGhpc1snb24nICsgdF0uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgfVxuXHQgIGlmICh0IGluIHRoaXMuX2xpc3RlbmVycykge1xuXHQgICAgLy8gR3JhYiBhIHJlZmVyZW5jZSB0byB0aGUgbGlzdGVuZXJzIGxpc3QuIHJlbW92ZUV2ZW50TGlzdGVuZXIgbWF5IGFsdGVyIHRoZSBsaXN0LlxuXHQgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc1t0XTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEV2ZW50VGFyZ2V0O1xuXG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXZlbnRFbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKS5FdmVudEVtaXR0ZXJcblx0ICAsIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVxuXHQgICwgSlNPTjMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgLCBvYmplY3RVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpXG5cdCAgO1xuXHRcblx0dmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBkZWJ1ZyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoJ3NvY2tqcy1jbGllbnQ6aW5mby1hamF4Jyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEluZm9BamF4KHVybCwgQWpheE9iamVjdCkge1xuXHQgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXHRcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIHQwID0gK25ldyBEYXRlKCk7XG5cdCAgdGhpcy54byA9IG5ldyBBamF4T2JqZWN0KCdHRVQnLCB1cmwpO1xuXHRcblx0ICB0aGlzLnhvLm9uY2UoJ2ZpbmlzaCcsIGZ1bmN0aW9uKHN0YXR1cywgdGV4dCkge1xuXHQgICAgdmFyIGluZm8sIHJ0dDtcblx0ICAgIGlmIChzdGF0dXMgPT09IDIwMCkge1xuXHQgICAgICBydHQgPSAoK25ldyBEYXRlKCkpIC0gdDA7XG5cdCAgICAgIGlmICh0ZXh0KSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGluZm8gPSBKU09OMy5wYXJzZSh0ZXh0KTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBkZWJ1ZygnYmFkIGpzb24nLCB0ZXh0KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghb2JqZWN0VXRpbHMuaXNPYmplY3QoaW5mbykpIHtcblx0ICAgICAgICBpbmZvID0ge307XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHNlbGYuZW1pdCgnZmluaXNoJywgaW5mbywgcnR0KTtcblx0ICAgIHNlbGYucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdGluaGVyaXRzKEluZm9BamF4LCBFdmVudEVtaXR0ZXIpO1xuXHRcblx0SW5mb0FqYXgucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICB0aGlzLnhvLmNsb3NlKCk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEluZm9BamF4O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMikpKVxuXG4vKioqLyB9LFxuLyogMjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIEV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMykuRXZlbnRFbWl0dGVyXG5cdCAgLCBKU09OMyA9IF9fd2VicGFja19yZXF1aXJlX18oNSlcblx0ICAsIFhIUkxvY2FsT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KVxuXHQgICwgSW5mb0FqYXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKVxuXHQgIDtcblx0XG5cdGZ1bmN0aW9uIEluZm9SZWNlaXZlcklmcmFtZSh0cmFuc1VybCkge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblx0XG5cdCAgdGhpcy5pciA9IG5ldyBJbmZvQWpheCh0cmFuc1VybCwgWEhSTG9jYWxPYmplY3QpO1xuXHQgIHRoaXMuaXIub25jZSgnZmluaXNoJywgZnVuY3Rpb24oaW5mbywgcnR0KSB7XG5cdCAgICBzZWxmLmlyID0gbnVsbDtcblx0ICAgIHNlbGYuZW1pdCgnbWVzc2FnZScsIEpTT04zLnN0cmluZ2lmeShbaW5mbywgcnR0XSkpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRpbmhlcml0cyhJbmZvUmVjZWl2ZXJJZnJhbWUsIEV2ZW50RW1pdHRlcik7XG5cdFxuXHRJbmZvUmVjZWl2ZXJJZnJhbWUudHJhbnNwb3J0TmFtZSA9ICdpZnJhbWUtaW5mby1yZWNlaXZlcic7XG5cdFxuXHRJbmZvUmVjZWl2ZXJJZnJhbWUucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgaWYgKHRoaXMuaXIpIHtcblx0ICAgIHRoaXMuaXIuY2xvc2UoKTtcblx0ICAgIHRoaXMuaXIgPSBudWxsO1xuXHQgIH1cblx0ICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBJbmZvUmVjZWl2ZXJJZnJhbWU7XG5cblxuLyoqKi8gfSxcbi8qIDIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwubG9jYXRpb24gfHwge1xuXHQgIG9yaWdpbjogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAnXG5cdCwgcHJvdG9jb2w6ICdodHRwJ1xuXHQsIGhvc3Q6ICdsb2NhbGhvc3QnXG5cdCwgcG9ydDogODBcblx0LCBocmVmOiAnaHR0cDovL2xvY2FsaG9zdC8nXG5cdCwgaGFzaDogJydcblx0fTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMykuRXZlbnRFbWl0dGVyXG5cdCAgLCBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KVxuXHQgICwgdXJsVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdCAgLCBYSFIgPSBnbG9iYWwuWE1MSHR0cFJlcXVlc3Rcblx0ICA7XG5cdFxuXHR2YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIGRlYnVnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgnc29ja2pzLWNsaWVudDpicm93c2VyOnhocicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBBYnN0cmFjdFhIUk9iamVjdChtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cykge1xuXHQgIGRlYnVnKG1ldGhvZCwgdXJsKTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cdFxuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgc2VsZi5fc3RhcnQobWV0aG9kLCB1cmwsIHBheWxvYWQsIG9wdHMpO1xuXHQgIH0sIDApO1xuXHR9XG5cdFxuXHRpbmhlcml0cyhBYnN0cmFjdFhIUk9iamVjdCwgRXZlbnRFbWl0dGVyKTtcblx0XG5cdEFic3RyYWN0WEhST2JqZWN0LnByb3RvdHlwZS5fc3RhcnQgPSBmdW5jdGlvbihtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cykge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0XG5cdCAgdHJ5IHtcblx0ICAgIHRoaXMueGhyID0gbmV3IFhIUigpO1xuXHQgIH0gY2F0Y2ggKHgpIHtcblx0ICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcblx0ICB9XG5cdFxuXHQgIGlmICghdGhpcy54aHIpIHtcblx0ICAgIGRlYnVnKCdubyB4aHInKTtcblx0ICAgIHRoaXMuZW1pdCgnZmluaXNoJywgMCwgJ25vIHhociBzdXBwb3J0Jyk7XG5cdCAgICB0aGlzLl9jbGVhbnVwKCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICAvLyBzZXZlcmFsIGJyb3dzZXJzIGNhY2hlIFBPU1RzXG5cdCAgdXJsID0gdXJsVXRpbHMuYWRkUXVlcnkodXJsLCAndD0nICsgKCtuZXcgRGF0ZSgpKSk7XG5cdFxuXHQgIC8vIEV4cGxvcmVyIHRlbmRzIHRvIGtlZXAgY29ubmVjdGlvbiBvcGVuLCBldmVuIGFmdGVyIHRoZVxuXHQgIC8vIHRhYiBnZXRzIGNsb3NlZDogaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvNTI4MFxuXHQgIHRoaXMudW5sb2FkUmVmID0gdXRpbHMudW5sb2FkQWRkKGZ1bmN0aW9uKCkge1xuXHQgICAgZGVidWcoJ3VubG9hZCBjbGVhbnVwJyk7XG5cdCAgICBzZWxmLl9jbGVhbnVwKHRydWUpO1xuXHQgIH0pO1xuXHQgIHRyeSB7XG5cdCAgICB0aGlzLnhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcblx0ICAgIGlmICh0aGlzLnRpbWVvdXQgJiYgJ3RpbWVvdXQnIGluIHRoaXMueGhyKSB7XG5cdCAgICAgIHRoaXMueGhyLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQ7XG5cdCAgICAgIHRoaXMueGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGRlYnVnKCd4aHIgdGltZW91dCcpO1xuXHQgICAgICAgIHNlbGYuZW1pdCgnZmluaXNoJywgMCwgJycpO1xuXHQgICAgICAgIHNlbGYuX2NsZWFudXAoZmFsc2UpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGRlYnVnKCdleGNlcHRpb24nLCBlKTtcblx0ICAgIC8vIElFIHJhaXNlcyBhbiBleGNlcHRpb24gb24gd3JvbmcgcG9ydC5cblx0ICAgIHRoaXMuZW1pdCgnZmluaXNoJywgMCwgJycpO1xuXHQgICAgdGhpcy5fY2xlYW51cChmYWxzZSk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICBpZiAoKCFvcHRzIHx8ICFvcHRzLm5vQ3JlZGVudGlhbHMpICYmIEFic3RyYWN0WEhST2JqZWN0LnN1cHBvcnRzQ09SUykge1xuXHQgICAgZGVidWcoJ3dpdGhDcmVkZW50aWFscycpO1xuXHQgICAgLy8gTW96aWxsYSBkb2NzIHNheXMgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vWE1MSHR0cFJlcXVlc3QgOlxuXHQgICAgLy8gXCJUaGlzIG5ldmVyIGFmZmVjdHMgc2FtZS1zaXRlIHJlcXVlc3RzLlwiXG5cdFxuXHQgICAgdGhpcy54aHIud2l0aENyZWRlbnRpYWxzID0gJ3RydWUnO1xuXHQgIH1cblx0ICBpZiAob3B0cyAmJiBvcHRzLmhlYWRlcnMpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBvcHRzLmhlYWRlcnMpIHtcblx0ICAgICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIG9wdHMuaGVhZGVyc1trZXldKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHRoaXMueGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgaWYgKHNlbGYueGhyKSB7XG5cdCAgICAgIHZhciB4ID0gc2VsZi54aHI7XG5cdCAgICAgIHZhciB0ZXh0LCBzdGF0dXM7XG5cdCAgICAgIGRlYnVnKCdyZWFkeVN0YXRlJywgeC5yZWFkeVN0YXRlKTtcblx0ICAgICAgc3dpdGNoICh4LnJlYWR5U3RhdGUpIHtcblx0ICAgICAgY2FzZSAzOlxuXHQgICAgICAgIC8vIElFIGRvZXNuJ3QgbGlrZSBwZWVraW5nIGludG8gcmVzcG9uc2VUZXh0IG9yIHN0YXR1c1xuXHQgICAgICAgIC8vIG9uIE1pY3Jvc29mdC5YTUxIVFRQIGFuZCByZWFkeXN0YXRlPTNcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgc3RhdHVzID0geC5zdGF0dXM7XG5cdCAgICAgICAgICB0ZXh0ID0geC5yZXNwb25zZVRleHQ7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuXHQgICAgICAgIH1cblx0ICAgICAgICBkZWJ1Zygnc3RhdHVzJywgc3RhdHVzKTtcblx0ICAgICAgICAvLyBJRSByZXR1cm5zIDEyMjMgZm9yIDIwNDogaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTQ1MFxuXHQgICAgICAgIGlmIChzdGF0dXMgPT09IDEyMjMpIHtcblx0ICAgICAgICAgIHN0YXR1cyA9IDIwNDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIElFIGRvZXMgcmV0dXJuIHJlYWR5c3RhdGUgPT0gMyBmb3IgNDA0IGFuc3dlcnMuXG5cdCAgICAgICAgaWYgKHN0YXR1cyA9PT0gMjAwICYmIHRleHQgJiYgdGV4dC5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICBkZWJ1ZygnY2h1bmsnKTtcblx0ICAgICAgICAgIHNlbGYuZW1pdCgnY2h1bmsnLCBzdGF0dXMsIHRleHQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSA0OlxuXHQgICAgICAgIHN0YXR1cyA9IHguc3RhdHVzO1xuXHQgICAgICAgIGRlYnVnKCdzdGF0dXMnLCBzdGF0dXMpO1xuXHQgICAgICAgIC8vIElFIHJldHVybnMgMTIyMyBmb3IgMjA0OiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xNDUwXG5cdCAgICAgICAgaWYgKHN0YXR1cyA9PT0gMTIyMykge1xuXHQgICAgICAgICAgc3RhdHVzID0gMjA0O1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBJRSByZXR1cm5zIHRoaXMgZm9yIGEgYmFkIHBvcnRcblx0ICAgICAgICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvd2luZG93cy9kZXNrdG9wL2FhMzgzNzcwKHY9dnMuODUpLmFzcHhcblx0ICAgICAgICBpZiAoc3RhdHVzID09PSAxMjAwNSB8fCBzdGF0dXMgPT09IDEyMDI5KSB7XG5cdCAgICAgICAgICBzdGF0dXMgPSAwO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgZGVidWcoJ2ZpbmlzaCcsIHN0YXR1cywgeC5yZXNwb25zZVRleHQpO1xuXHQgICAgICAgIHNlbGYuZW1pdCgnZmluaXNoJywgc3RhdHVzLCB4LnJlc3BvbnNlVGV4dCk7XG5cdCAgICAgICAgc2VsZi5fY2xlYW51cChmYWxzZSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICB0cnkge1xuXHQgICAgc2VsZi54aHIuc2VuZChwYXlsb2FkKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIDAsICcnKTtcblx0ICAgIHNlbGYuX2NsZWFudXAoZmFsc2UpO1xuXHQgIH1cblx0fTtcblx0XG5cdEFic3RyYWN0WEhST2JqZWN0LnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKGFib3J0KSB7XG5cdCAgZGVidWcoJ2NsZWFudXAnKTtcblx0ICBpZiAoIXRoaXMueGhyKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdCAgdXRpbHMudW5sb2FkRGVsKHRoaXMudW5sb2FkUmVmKTtcblx0XG5cdCAgLy8gSUUgbmVlZHMgdGhpcyBmaWVsZCB0byBiZSBhIGZ1bmN0aW9uXG5cdCAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7fTtcblx0ICBpZiAodGhpcy54aHIub250aW1lb3V0KSB7XG5cdCAgICB0aGlzLnhoci5vbnRpbWVvdXQgPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgaWYgKGFib3J0KSB7XG5cdCAgICB0cnkge1xuXHQgICAgICB0aGlzLnhoci5hYm9ydCgpO1xuXHQgICAgfSBjYXRjaCAoeCkge1xuXHQgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG5cdCAgICB9XG5cdCAgfVxuXHQgIHRoaXMudW5sb2FkUmVmID0gdGhpcy54aHIgPSBudWxsO1xuXHR9O1xuXHRcblx0QWJzdHJhY3RYSFJPYmplY3QucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ2Nsb3NlJyk7XG5cdCAgdGhpcy5fY2xlYW51cCh0cnVlKTtcblx0fTtcblx0XG5cdEFic3RyYWN0WEhST2JqZWN0LmVuYWJsZWQgPSAhIVhIUjtcblx0Ly8gb3ZlcnJpZGUgWE1MSHR0cFJlcXVlc3QgZm9yIElFNi83XG5cdC8vIG9iZnVzY2F0ZSB0byBhdm9pZCBmaXJld2FsbHNcblx0dmFyIGF4byA9IFsnQWN0aXZlJ10uY29uY2F0KCdPYmplY3QnKS5qb2luKCdYJyk7XG5cdGlmICghQWJzdHJhY3RYSFJPYmplY3QuZW5hYmxlZCAmJiAoYXhvIGluIGdsb2JhbCkpIHtcblx0ICBkZWJ1Zygnb3ZlcnJpZGluZyB4bWxodHRwcmVxdWVzdCcpO1xuXHQgIFhIUiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIG5ldyBnbG9iYWxbYXhvXSgnTWljcm9zb2Z0LlhNTEhUVFAnKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdCAgfTtcblx0ICBBYnN0cmFjdFhIUk9iamVjdC5lbmFibGVkID0gISFuZXcgWEhSKCk7XG5cdH1cblx0XG5cdHZhciBjb3JzID0gZmFsc2U7XG5cdHRyeSB7XG5cdCAgY29ycyA9ICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBYSFIoKTtcblx0fSBjYXRjaCAoaWdub3JlZCkge1xuXHQgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcblx0fVxuXHRcblx0QWJzdHJhY3RYSFJPYmplY3Quc3VwcG9ydHNDT1JTID0gY29ycztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQWJzdHJhY3RYSFJPYmplY3Q7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXygyKSkpXG5cbi8qKiovIH0sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge21vZHVsZS5leHBvcnRzID0gZ2xvYmFsLkV2ZW50U291cmNlO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIEFqYXhCYXNlZFRyYW5zcG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNylcblx0ICAsIEV2ZW50U291cmNlUmVjZWl2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICwgWEhSQ29yc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpXG5cdCAgLCBFdmVudFNvdXJjZURyaXZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpXG5cdCAgO1xuXHRcblx0ZnVuY3Rpb24gRXZlbnRTb3VyY2VUcmFuc3BvcnQodHJhbnNVcmwpIHtcblx0ICBpZiAoIUV2ZW50U291cmNlVHJhbnNwb3J0LmVuYWJsZWQoKSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG5cdCAgfVxuXHRcblx0ICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy9ldmVudHNvdXJjZScsIEV2ZW50U291cmNlUmVjZWl2ZXIsIFhIUkNvcnNPYmplY3QpO1xuXHR9XG5cdFxuXHRpbmhlcml0cyhFdmVudFNvdXJjZVRyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblx0XG5cdEV2ZW50U291cmNlVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gISFFdmVudFNvdXJjZURyaXZlcjtcblx0fTtcblx0XG5cdEV2ZW50U291cmNlVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUgPSAnZXZlbnRzb3VyY2UnO1xuXHRFdmVudFNvdXJjZVRyYW5zcG9ydC5yb3VuZFRyaXBzID0gMjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRXZlbnRTb3VyY2VUcmFuc3BvcnQ7XG5cblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCBIdG1sZmlsZVJlY2VpdmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0ICAsIFhIUkxvY2FsT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KVxuXHQgICwgQWpheEJhc2VkVHJhbnNwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KVxuXHQgIDtcblx0XG5cdGZ1bmN0aW9uIEh0bWxGaWxlVHJhbnNwb3J0KHRyYW5zVXJsKSB7XG5cdCAgaWYgKCFIdG1sZmlsZVJlY2VpdmVyLmVuYWJsZWQpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuXHQgIH1cblx0ICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy9odG1sZmlsZScsIEh0bWxmaWxlUmVjZWl2ZXIsIFhIUkxvY2FsT2JqZWN0KTtcblx0fVxuXHRcblx0aW5oZXJpdHMoSHRtbEZpbGVUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cdFxuXHRIdG1sRmlsZVRyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oaW5mbykge1xuXHQgIHJldHVybiBIdG1sZmlsZVJlY2VpdmVyLmVuYWJsZWQgJiYgaW5mby5zYW1lT3JpZ2luO1xuXHR9O1xuXHRcblx0SHRtbEZpbGVUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICdodG1sZmlsZSc7XG5cdEh0bWxGaWxlVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBIdG1sRmlsZVRyYW5zcG9ydDtcblxuXG4vKioqLyB9LFxuLyogMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gRmV3IGNvb2wgdHJhbnNwb3J0cyBkbyB3b3JrIG9ubHkgZm9yIHNhbWUtb3JpZ2luLiBJbiBvcmRlciB0byBtYWtlXG5cdC8vIHRoZW0gd29yayBjcm9zcy1kb21haW4gd2Ugc2hhbGwgdXNlIGlmcmFtZSwgc2VydmVkIGZyb20gdGhlXG5cdC8vIHJlbW90ZSBkb21haW4uIE5ldyBicm93c2VycyBoYXZlIGNhcGFiaWxpdGllcyB0byBjb21tdW5pY2F0ZSB3aXRoXG5cdC8vIGNyb3NzIGRvbWFpbiBpZnJhbWUgdXNpbmcgcG9zdE1lc3NhZ2UoKS4gSW4gSUUgaXQgd2FzIGltcGxlbWVudGVkXG5cdC8vIGZyb20gSUUgOCssIGJ1dCBvZiBjb3Vyc2UsIElFIGdvdCBzb21lIGRldGFpbHMgd3Jvbmc6XG5cdC8vICAgIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9jYzE5NzAxNSh2PVZTLjg1KS5hc3B4XG5cdC8vICAgIGh0dHA6Ly9zdGV2ZXNvdWRlcnMuY29tL21pc2MvdGVzdC1wb3N0bWVzc2FnZS5waHBcblx0XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIEpTT04zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KVxuXHQgICwgRXZlbnRFbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKS5FdmVudEVtaXR0ZXJcblx0ICAsIHZlcnNpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKVxuXHQgICwgdXJsVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdCAgLCBpZnJhbWVVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpXG5cdCAgLCBldmVudFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KVxuXHQgICwgcmFuZG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KVxuXHQgIDtcblx0XG5cdHZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgZGVidWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCdzb2NranMtY2xpZW50OnRyYW5zcG9ydDppZnJhbWUnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gSWZyYW1lVHJhbnNwb3J0KHRyYW5zcG9ydCwgdHJhbnNVcmwsIGJhc2VVcmwpIHtcblx0ICBpZiAoIUlmcmFtZVRyYW5zcG9ydC5lbmFibGVkKCkpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuXHQgIH1cblx0ICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblx0XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHRoaXMub3JpZ2luID0gdXJsVXRpbHMuZ2V0T3JpZ2luKGJhc2VVcmwpO1xuXHQgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG5cdCAgdGhpcy50cmFuc1VybCA9IHRyYW5zVXJsO1xuXHQgIHRoaXMudHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuXHQgIHRoaXMud2luZG93SWQgPSByYW5kb20uc3RyaW5nKDgpO1xuXHRcblx0ICB2YXIgaWZyYW1lVXJsID0gdXJsVXRpbHMuYWRkUGF0aChiYXNlVXJsLCAnL2lmcmFtZS5odG1sJykgKyAnIycgKyB0aGlzLndpbmRvd0lkO1xuXHQgIGRlYnVnKHRyYW5zcG9ydCwgdHJhbnNVcmwsIGlmcmFtZVVybCk7XG5cdFxuXHQgIHRoaXMuaWZyYW1lT2JqID0gaWZyYW1lVXRpbHMuY3JlYXRlSWZyYW1lKGlmcmFtZVVybCwgZnVuY3Rpb24ocikge1xuXHQgICAgZGVidWcoJ2VyciBjYWxsYmFjaycpO1xuXHQgICAgc2VsZi5lbWl0KCdjbG9zZScsIDEwMDYsICdVbmFibGUgdG8gbG9hZCBhbiBpZnJhbWUgKCcgKyByICsgJyknKTtcblx0ICAgIHNlbGYuY2xvc2UoKTtcblx0ICB9KTtcblx0XG5cdCAgdGhpcy5vbm1lc3NhZ2VDYWxsYmFjayA9IHRoaXMuX21lc3NhZ2UuYmluZCh0aGlzKTtcblx0ICBldmVudFV0aWxzLmF0dGFjaEV2ZW50KCdtZXNzYWdlJywgdGhpcy5vbm1lc3NhZ2VDYWxsYmFjayk7XG5cdH1cblx0XG5cdGluaGVyaXRzKElmcmFtZVRyYW5zcG9ydCwgRXZlbnRFbWl0dGVyKTtcblx0XG5cdElmcmFtZVRyYW5zcG9ydC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0ICBkZWJ1ZygnY2xvc2UnKTtcblx0ICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgIGlmICh0aGlzLmlmcmFtZU9iaikge1xuXHQgICAgZXZlbnRVdGlscy5kZXRhY2hFdmVudCgnbWVzc2FnZScsIHRoaXMub25tZXNzYWdlQ2FsbGJhY2spO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgLy8gV2hlbiB0aGUgaWZyYW1lIGlzIG5vdCBsb2FkZWQsIElFIHJhaXNlcyBhbiBleGNlcHRpb25cblx0ICAgICAgLy8gb24gJ2NvbnRlbnRXaW5kb3cnLlxuXHQgICAgICB0aGlzLnBvc3RNZXNzYWdlKCdjJyk7XG5cdCAgICB9IGNhdGNoICh4KSB7XG5cdCAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcblx0ICAgIH1cblx0ICAgIHRoaXMuaWZyYW1lT2JqLmNsZWFudXAoKTtcblx0ICAgIHRoaXMuaWZyYW1lT2JqID0gbnVsbDtcblx0ICAgIHRoaXMub25tZXNzYWdlQ2FsbGJhY2sgPSB0aGlzLmlmcmFtZU9iaiA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0SWZyYW1lVHJhbnNwb3J0LnByb3RvdHlwZS5fbWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcblx0ICBkZWJ1ZygnbWVzc2FnZScsIGUuZGF0YSk7XG5cdCAgaWYgKCF1cmxVdGlscy5pc09yaWdpbkVxdWFsKGUub3JpZ2luLCB0aGlzLm9yaWdpbikpIHtcblx0ICAgIGRlYnVnKCdub3Qgc2FtZSBvcmlnaW4nLCBlLm9yaWdpbiwgdGhpcy5vcmlnaW4pO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgdmFyIGlmcmFtZU1lc3NhZ2U7XG5cdCAgdHJ5IHtcblx0ICAgIGlmcmFtZU1lc3NhZ2UgPSBKU09OMy5wYXJzZShlLmRhdGEpO1xuXHQgIH0gY2F0Y2ggKGlnbm9yZWQpIHtcblx0ICAgIGRlYnVnKCdiYWQganNvbicsIGUuZGF0YSk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICBpZiAoaWZyYW1lTWVzc2FnZS53aW5kb3dJZCAhPT0gdGhpcy53aW5kb3dJZCkge1xuXHQgICAgZGVidWcoJ21pc21hdGNoZWQgd2luZG93IGlkJywgaWZyYW1lTWVzc2FnZS53aW5kb3dJZCwgdGhpcy53aW5kb3dJZCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICBzd2l0Y2ggKGlmcmFtZU1lc3NhZ2UudHlwZSkge1xuXHQgIGNhc2UgJ3MnOlxuXHQgICAgdGhpcy5pZnJhbWVPYmoubG9hZGVkKCk7XG5cdCAgICAvLyB3aW5kb3cgZ2xvYmFsIGRlcGVuZGVuY3lcblx0ICAgIHRoaXMucG9zdE1lc3NhZ2UoJ3MnLCBKU09OMy5zdHJpbmdpZnkoW1xuXHQgICAgICB2ZXJzaW9uXG5cdCAgICAsIHRoaXMudHJhbnNwb3J0XG5cdCAgICAsIHRoaXMudHJhbnNVcmxcblx0ICAgICwgdGhpcy5iYXNlVXJsXG5cdCAgICBdKSk7XG5cdCAgICBicmVhaztcblx0ICBjYXNlICd0Jzpcblx0ICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIGlmcmFtZU1lc3NhZ2UuZGF0YSk7XG5cdCAgICBicmVhaztcblx0ICBjYXNlICdjJzpcblx0ICAgIHZhciBjZGF0YTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGNkYXRhID0gSlNPTjMucGFyc2UoaWZyYW1lTWVzc2FnZS5kYXRhKTtcblx0ICAgIH0gY2F0Y2ggKGlnbm9yZWQpIHtcblx0ICAgICAgZGVidWcoJ2JhZCBqc29uJywgaWZyYW1lTWVzc2FnZS5kYXRhKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdGhpcy5lbWl0KCdjbG9zZScsIGNkYXRhWzBdLCBjZGF0YVsxXSk7XG5cdCAgICB0aGlzLmNsb3NlKCk7XG5cdCAgICBicmVhaztcblx0ICB9XG5cdH07XG5cdFxuXHRJZnJhbWVUcmFuc3BvcnQucHJvdG90eXBlLnBvc3RNZXNzYWdlID0gZnVuY3Rpb24odHlwZSwgZGF0YSkge1xuXHQgIGRlYnVnKCdwb3N0TWVzc2FnZScsIHR5cGUsIGRhdGEpO1xuXHQgIHRoaXMuaWZyYW1lT2JqLnBvc3QoSlNPTjMuc3RyaW5naWZ5KHtcblx0ICAgIHdpbmRvd0lkOiB0aGlzLndpbmRvd0lkXG5cdCAgLCB0eXBlOiB0eXBlXG5cdCAgLCBkYXRhOiBkYXRhIHx8ICcnXG5cdCAgfSksIHRoaXMub3JpZ2luKTtcblx0fTtcblx0XG5cdElmcmFtZVRyYW5zcG9ydC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcblx0ICBkZWJ1Zygnc2VuZCcsIG1lc3NhZ2UpO1xuXHQgIHRoaXMucG9zdE1lc3NhZ2UoJ20nLCBtZXNzYWdlKTtcblx0fTtcblx0XG5cdElmcmFtZVRyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIGlmcmFtZVV0aWxzLmlmcmFtZUVuYWJsZWQ7XG5cdH07XG5cdFxuXHRJZnJhbWVUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICdpZnJhbWUnO1xuXHRJZnJhbWVUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IElmcmFtZVRyYW5zcG9ydDtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKSlcblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIHVybFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KVxuXHQgICwgQnVmZmVyZWRTZW5kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKVxuXHQgICwgUG9sbGluZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpXG5cdCAgO1xuXHRcblx0dmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBkZWJ1ZyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoJ3NvY2tqcy1jbGllbnQ6c2VuZGVyLXJlY2VpdmVyJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNlbmRlclJlY2VpdmVyKHRyYW5zVXJsLCB1cmxTdWZmaXgsIHNlbmRlckZ1bmMsIFJlY2VpdmVyLCBBamF4T2JqZWN0KSB7XG5cdCAgdmFyIHBvbGxVcmwgPSB1cmxVdGlscy5hZGRQYXRoKHRyYW5zVXJsLCB1cmxTdWZmaXgpO1xuXHQgIGRlYnVnKHBvbGxVcmwpO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBCdWZmZXJlZFNlbmRlci5jYWxsKHRoaXMsIHRyYW5zVXJsLCBzZW5kZXJGdW5jKTtcblx0XG5cdCAgdGhpcy5wb2xsID0gbmV3IFBvbGxpbmcoUmVjZWl2ZXIsIHBvbGxVcmwsIEFqYXhPYmplY3QpO1xuXHQgIHRoaXMucG9sbC5vbignbWVzc2FnZScsIGZ1bmN0aW9uKG1zZykge1xuXHQgICAgZGVidWcoJ3BvbGwgbWVzc2FnZScsIG1zZyk7XG5cdCAgICBzZWxmLmVtaXQoJ21lc3NhZ2UnLCBtc2cpO1xuXHQgIH0pO1xuXHQgIHRoaXMucG9sbC5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uKGNvZGUsIHJlYXNvbikge1xuXHQgICAgZGVidWcoJ3BvbGwgY2xvc2UnLCBjb2RlLCByZWFzb24pO1xuXHQgICAgc2VsZi5wb2xsID0gbnVsbDtcblx0ICAgIHNlbGYuZW1pdCgnY2xvc2UnLCBjb2RlLCByZWFzb24pO1xuXHQgICAgc2VsZi5jbG9zZSgpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRpbmhlcml0cyhTZW5kZXJSZWNlaXZlciwgQnVmZmVyZWRTZW5kZXIpO1xuXHRcblx0U2VuZGVyUmVjZWl2ZXIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ2Nsb3NlJyk7XG5cdCAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICBpZiAodGhpcy5wb2xsKSB7XG5cdCAgICB0aGlzLnBvbGwuYWJvcnQoKTtcblx0ICAgIHRoaXMucG9sbCA9IG51bGw7XG5cdCAgfVxuXHQgIHRoaXMuc3RvcCgpO1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTZW5kZXJSZWNlaXZlcjtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKSlcblxuLyoqKi8gfSxcbi8qIDI5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCBBamF4QmFzZWRUcmFuc3BvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpXG5cdCAgLCBYaHJSZWNlaXZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpXG5cdCAgLCBYRFJPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KVxuXHQgIDtcblx0XG5cdC8vIEFjY29yZGluZyB0bzpcblx0Ly8gICBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE2NDE1MDcvZGV0ZWN0LWJyb3dzZXItc3VwcG9ydC1mb3ItY3Jvc3MtZG9tYWluLXhtbGh0dHByZXF1ZXN0c1xuXHQvLyAgIGh0dHA6Ly9oYWNrcy5tb3ppbGxhLm9yZy8yMDA5LzA3L2Nyb3NzLXNpdGUteG1saHR0cHJlcXVlc3Qtd2l0aC1jb3JzL1xuXHRcblx0ZnVuY3Rpb24gWGRyU3RyZWFtaW5nVHJhbnNwb3J0KHRyYW5zVXJsKSB7XG5cdCAgaWYgKCFYRFJPYmplY3QuZW5hYmxlZCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG5cdCAgfVxuXHQgIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL3hocl9zdHJlYW1pbmcnLCBYaHJSZWNlaXZlciwgWERST2JqZWN0KTtcblx0fVxuXHRcblx0aW5oZXJpdHMoWGRyU3RyZWFtaW5nVHJhbnNwb3J0LCBBamF4QmFzZWRUcmFuc3BvcnQpO1xuXHRcblx0WGRyU3RyZWFtaW5nVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbihpbmZvKSB7XG5cdCAgaWYgKGluZm8uY29va2llX25lZWRlZCB8fCBpbmZvLm51bGxPcmlnaW4pIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIFhEUk9iamVjdC5lbmFibGVkICYmIGluZm8uc2FtZVNjaGVtZTtcblx0fTtcblx0XG5cdFhkclN0cmVhbWluZ1RyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ3hkci1zdHJlYW1pbmcnO1xuXHRYZHJTdHJlYW1pbmdUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7IC8vIHByZWZsaWdodCwgYWpheFxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBYZHJTdHJlYW1pbmdUcmFuc3BvcnQ7XG5cblxuLyoqKi8gfSxcbi8qIDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCBBamF4QmFzZWRUcmFuc3BvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpXG5cdCAgLCBYaHJSZWNlaXZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpXG5cdCAgLCBYSFJDb3JzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMylcblx0ICAsIFhIUkxvY2FsT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KVxuXHQgIDtcblx0XG5cdGZ1bmN0aW9uIFhoclBvbGxpbmdUcmFuc3BvcnQodHJhbnNVcmwpIHtcblx0ICBpZiAoIVhIUkxvY2FsT2JqZWN0LmVuYWJsZWQgJiYgIVhIUkNvcnNPYmplY3QuZW5hYmxlZCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG5cdCAgfVxuXHQgIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL3hocicsIFhoclJlY2VpdmVyLCBYSFJDb3JzT2JqZWN0KTtcblx0fVxuXHRcblx0aW5oZXJpdHMoWGhyUG9sbGluZ1RyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblx0XG5cdFhoclBvbGxpbmdUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKGluZm8pIHtcblx0ICBpZiAoaW5mby5udWxsT3JpZ2luKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICBpZiAoWEhSTG9jYWxPYmplY3QuZW5hYmxlZCAmJiBpbmZvLnNhbWVPcmlnaW4pIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICByZXR1cm4gWEhSQ29yc09iamVjdC5lbmFibGVkO1xuXHR9O1xuXHRcblx0WGhyUG9sbGluZ1RyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ3hoci1wb2xsaW5nJztcblx0WGhyUG9sbGluZ1RyYW5zcG9ydC5yb3VuZFRyaXBzID0gMjsgLy8gcHJlZmxpZ2h0LCBhamF4XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFhoclBvbGxpbmdUcmFuc3BvcnQ7XG5cblxuLyoqKi8gfSxcbi8qIDMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9ICcxLjEuMCc7XG5cblxuLyoqKi8gfSxcbi8qIDMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVidWcgPSBkZWJ1Zztcblx0ZXhwb3J0cy53YXJuID0gd2Fybjtcblx0ZXhwb3J0cy5lcnJvciA9IGVycm9yO1xuXHRmdW5jdGlvbiBkZWJ1Zyhsb2cpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGNvbnNvbGUubG9nKGxvZyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdhcm4obG9nKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBjb25zb2xlLndhcm4obG9nKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZXJyb3IobG9nKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBjb25zb2xlLmVycm9yKGxvZyk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuc2V0Q29ubmVjdGVkID0gc2V0Q29ubmVjdGVkO1xuXHRleHBvcnRzLnNldERpc2Nvbm5lY3RlZCA9IHNldERpc2Nvbm5lY3RlZDtcblx0ZXhwb3J0cy5zZXRDb3VudHJ5Q2hhdCA9IHNldENvdW50cnlDaGF0O1xuXHRmdW5jdGlvbiBzZXRDb25uZWN0ZWQoaXNTdWNjZXNzLCBlcnJNc2cpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmIChlcnJNc2cgIT09IFwiXCIpIHtcblx0ICAgICAgICBhbGVydChlcnJNc2cpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdCcpLmRpc2FibGVkID0gaXNTdWNjZXNzO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXREaXNjb25uZWN0ZWQoaXNTdWNjZXNzLCBlcnJNc2cpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmIChlcnJNc2cgIT09IFwiXCIpIHtcblx0ICAgICAgICBhbGVydChlcnJNc2cpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzY29ubmVjdCcpLmRpc2FibGVkID0gaXNTdWNjZXNzO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRDb3VudHJ5Q2hhdChjb250ZW50KSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICB2YXIgY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWQnKTtcblx0ICAgIGNvbnNvbGUubG9nKFwiY29udGVudDpcIiArIGNvbnRlbnQpO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB0cmFuc3BvcnRMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpKHRyYW5zcG9ydExpc3QpO1xuXHRcblx0Ly8gVE9ETyBjYW4ndCBnZXQgcmlkIG9mIHRoaXMgdW50aWwgYWxsIHNlcnZlcnMgZG9cblx0aWYgKCdfc29ja2pzX29ubG9hZCcgaW4gZ2xvYmFsKSB7XG5cdCAgc2V0VGltZW91dChnbG9iYWwuX3NvY2tqc19vbmxvYWQsIDEpO1xuXHR9XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0KGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0XHRpZih0cnVlKVxuXHRcdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdFx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRcdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdFx0ZXhwb3J0c1tcIndlYnN0b21wXCJdID0gZmFjdG9yeSgpO1xuXHRcdGVsc2Vcblx0XHRcdHJvb3RbXCJ3ZWJzdG9tcFwiXSA9IGZhY3RvcnkoKTtcblx0fSkodGhpcywgZnVuY3Rpb24oKSB7XG5cdHJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG5cdC8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuXHQvKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cdFxuXHQvKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5cdC8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHRcblx0LyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHQvKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG5cdC8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXHRcblx0LyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdC8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG5cdC8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuXHQvKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG5cdC8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcblx0LyoqKioqKi8gXHRcdH07XG5cdFxuXHQvKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdC8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0XG5cdC8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdC8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblx0XG5cdC8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHQvKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuXHQvKioqKioqLyBcdH1cblx0XG5cdFxuXHQvKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5cdC8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblx0XG5cdC8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcblx0LyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXHRcblx0LyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuXHQvKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cdFxuXHQvKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuXHQvKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXHQvKioqKioqLyB9KVxuXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXHQvKioqKioqLyAoW1xuXHQvKiAwICovXG5cdC8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXHRcblx0XHQndXNlIHN0cmljdCc7XG5cdFxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHRcdCAgICB2YWx1ZTogdHJ1ZVxuXHRcdH0pO1xuXHRcblx0XHR2YXIgX2NsaWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHRcdHZhciBfY2xpZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsaWVudCk7XG5cdFxuXHRcdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0XHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0XHQvLyBUaGUgYHdlYnN0b21wYCBPYmplY3Rcblx0XHR2YXIgd2Vic3RvbXAgPSB7XG5cdFx0ICAgIFZFUlNJT05TOiBfdXRpbHMuVkVSU0lPTlMsXG5cdFx0ICAgIC8vIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBXZWJTb2NrZXQgY2xpZW50IHRoYXQgaXMgY29ubmVjdGVkIHRvXG5cdFx0ICAgIC8vIHRoZSBTVE9NUCBzZXJ2ZXIgbG9jYXRlZCBhdCB0aGUgdXJsLlxuXHRcdCAgICBjbGllbnQ6IGZ1bmN0aW9uIGNsaWVudCh1cmwpIHtcblx0XHQgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8geyBwcm90b2NvbHM6IF91dGlscy5WRVJTSU9OUy5zdXBwb3J0ZWRQcm90b2NvbHMoKSB9IDogYXJndW1lbnRzWzFdO1xuXHRcblx0XHQgICAgICAgIHZhciB3cyA9IG5ldyBXZWJTb2NrZXQodXJsLCBvcHRpb25zLnByb3RvY29scyk7XG5cdFx0ICAgICAgICByZXR1cm4gbmV3IF9jbGllbnQyLmRlZmF1bHQod3MsIG9wdGlvbnMpO1xuXHRcdCAgICB9LFxuXHRcdCAgICAvLyBUaGlzIG1ldGhvZCBpcyBhbiBhbHRlcm5hdGl2ZSB0byBgd2Vic3RvbXAuY2xpZW50KClgIHRvIGxldCB0aGUgdXNlclxuXHRcdCAgICAvLyBzcGVjaWZ5IHRoZSBXZWJTb2NrZXQgdG8gdXNlIChlaXRoZXIgYSBzdGFuZGFyZCBIVE1MNSBXZWJTb2NrZXQgb3Jcblx0XHQgICAgLy8gYSBzaW1pbGFyIG9iamVjdCkuXG5cdFx0ICAgIG92ZXI6IGZ1bmN0aW9uIG92ZXIoKSB7XG5cdFx0ICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHRcdCAgICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdFx0ICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoX2NsaWVudDIuZGVmYXVsdCwgW251bGxdLmNvbmNhdChhcmdzKSkpKCk7XG5cdFx0ICAgIH1cblx0XHR9O1xuXHRcblx0XHRleHBvcnRzLmRlZmF1bHQgPSB3ZWJzdG9tcDtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblx0XG5cdC8qKiovIH0sXG5cdC8qIDEgKi9cblx0LyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cdFxuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0ICAgIHZhbHVlOiB0cnVlXG5cdFx0fSk7XG5cdFxuXHRcdHZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblx0XG5cdFx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdFx0dmFyIF9mcmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRcdHZhciBfZnJhbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZnJhbWUpO1xuXHRcblx0XHR2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdFx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdFx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdFx0Ly8gU1RPTVAgQ2xpZW50IENsYXNzXG5cdFx0Ly9cblx0XHQvLyBBbGwgU1RPTVAgcHJvdG9jb2wgaXMgZXhwb3NlZCBhcyBtZXRob2RzIG9mIHRoaXMgY2xhc3MgKGBjb25uZWN0KClgLFxuXHRcdC8vIGBzZW5kKClgLCBldGMuKVxuXHRcblx0XHR2YXIgQ2xpZW50ID0gZnVuY3Rpb24gKCkge1xuXHRcdCAgICBmdW5jdGlvbiBDbGllbnQod3MpIHtcblx0XHQgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8geyBiaW5hcnk6IGZhbHNlLCBoZWFydGJlYXQ6IHsgb3V0Z29pbmc6IDEwMDAwLCBpbmNvbWluZzogMTAwMDAgfSwgZGVidWc6IHRydWUgfSA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdFx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2xpZW50KTtcblx0XG5cdFx0ICAgICAgICB0aGlzLndzID0gd3M7XG5cdFx0ICAgICAgICB0aGlzLndzLmJpbmFyeVR5cGUgPSAnYXJyYXlidWZmZXInO1xuXHRcdCAgICAgICAgdGhpcy5iaW5hcnkgPSBvcHRpb25zLmJpbmFyeTtcblx0XHQgICAgICAgIHRoaXMuaGFzRGVidWcgPSBvcHRpb25zLmRlYnVnO1xuXHRcdCAgICAgICAgLy8gdXNlZCB0byBpbmRleCBzdWJzY3JpYmVyc1xuXHRcdCAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcblx0XHQgICAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG5cdFx0ICAgICAgICAvLyBIZWFydGJlYXQgcHJvcGVydGllcyBvZiB0aGUgY2xpZW50XG5cdFx0ICAgICAgICAvLyBvdXRnb2luZzogc2VuZCBoZWFydGJlYXQgZXZlcnkgMTBzIGJ5IGRlZmF1bHQgKHZhbHVlIGlzIGluIG1zKVxuXHRcdCAgICAgICAgLy8gaW5jb21pbmc6IGV4cGVjdCB0byByZWNlaXZlIHNlcnZlciBoZWFydGJlYXQgYXQgbGVhc3QgZXZlcnkgMTBzIGJ5IGRlZmF1bHRcblx0XHQgICAgICAgIC8vIGZhbHN5IHZhbHVlIG1lYW5zIG5vIGhlYXJ0YmVhdCBoZW5jZSAwLDBcblx0XHQgICAgICAgIHRoaXMuaGVhcnRiZWF0ID0gb3B0aW9ucy5oZWFydGJlYXQgfHwgeyBvdXRnb2luZzogMCwgaW5jb21pbmc6IDAgfTtcblx0XHQgICAgICAgIC8vIG1heGltdW0gKldlYlNvY2tldCogZnJhbWUgc2l6ZSBzZW50IGJ5IHRoZSBjbGllbnQuIElmIHRoZSBTVE9NUCBmcmFtZVxuXHRcdCAgICAgICAgLy8gaXMgYmlnZ2VyIHRoYW4gdGhpcyB2YWx1ZSwgdGhlIFNUT01QIGZyYW1lIHdpbGwgYmUgc2VudCB1c2luZyBtdWx0aXBsZVxuXHRcdCAgICAgICAgLy8gV2ViU29ja2V0IGZyYW1lcyAoZGVmYXVsdCBpcyAxNktpQilcblx0XHQgICAgICAgIHRoaXMubWF4V2ViU29ja2V0RnJhbWVTaXplID0gMTYgKiAxMDI0O1xuXHRcdCAgICAgICAgLy8gc3Vic2NyaXB0aW9uIGNhbGxiYWNrcyBpbmRleGVkIGJ5IHN1YnNjcmliZXIncyBJRFxuXHRcdCAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0ge307XG5cdFx0ICAgICAgICB0aGlzLnBhcnRpYWxEYXRhID0gJyc7XG5cdFx0ICAgIH1cblx0XG5cdFx0ICAgIC8vIC8vLy8gRGVidWdnaW5nXG5cdFx0ICAgIC8vXG5cdFx0ICAgIC8vIEJ5IGRlZmF1bHQsIGRlYnVnIG1lc3NhZ2VzIGFyZSBsb2dnZWQgaW4gdGhlIHdpbmRvdydzIGNvbnNvbGUgaWYgaXQgaXMgZGVmaW5lZC5cblx0XHQgICAgLy8gVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZvciBldmVyeSBhY3R1YWwgdHJhbnNtaXNzaW9uIG9mIHRoZSBTVE9NUCBmcmFtZXMgb3ZlciB0aGVcblx0XHQgICAgLy8gV2ViU29ja2V0LlxuXHRcdCAgICAvL1xuXHRcdCAgICAvLyBJdCBpcyBwb3NzaWJsZSB0byBzZXQgYSBgZGVidWcobWVzc2FnZSlgIG1ldGhvZFxuXHRcdCAgICAvLyBvbiBhIGNsaWVudCBpbnN0YW5jZSB0byBoYW5kbGUgZGlmZmVyZW50bHkgdGhlIGRlYnVnIG1lc3NhZ2VzOlxuXHRcdCAgICAvL1xuXHRcdCAgICAvLyAgICAgY2xpZW50LmRlYnVnID0gZnVuY3Rpb24oc3RyKSB7XG5cdFx0ICAgIC8vICAgICAgICAgLy8gYXBwZW5kIHRoZSBkZWJ1ZyBsb2cgdG8gYSAjZGVidWcgZGl2XG5cdFx0ICAgIC8vICAgICAgICAgJChcIiNkZWJ1Z1wiKS5hcHBlbmQoc3RyICsgXCJcXG5cIik7XG5cdFx0ICAgIC8vICAgICB9O1xuXHRcblx0XG5cdFx0ICAgIF9jcmVhdGVDbGFzcyhDbGllbnQsIFt7XG5cdFx0ICAgICAgICBrZXk6ICdkZWJ1ZycsXG5cdFx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVidWcoKSB7XG5cdFx0ICAgICAgICAgICAgdmFyIF9jb25zb2xlO1xuXHRcblx0XHQgICAgICAgICAgICBpZiAodGhpcy5oYXNEZWJ1ZykgKF9jb25zb2xlID0gY29uc29sZSkubG9nLmFwcGx5KF9jb25zb2xlLCBhcmd1bWVudHMpO1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIC8vIFtDT05ORUNUIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI0NPTk5FQ1Rfb3JfU1RPTVBfRnJhbWUpXG5cdFx0ICAgICAgICAvL1xuXHRcdCAgICAgICAgLy8gVGhlIGBjb25uZWN0YCBtZXRob2QgYWNjZXB0cyBkaWZmZXJlbnQgbnVtYmVyIG9mIGFyZ3VtZW50cyBhbmQgdHlwZXM6XG5cdFx0ICAgICAgICAvL1xuXHRcdCAgICAgICAgLy8gKiBgY29ubmVjdChoZWFkZXJzLCBjb25uZWN0Q2FsbGJhY2spYFxuXHRcdCAgICAgICAgLy8gKiBgY29ubmVjdChoZWFkZXJzLCBjb25uZWN0Q2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spYFxuXHRcdCAgICAgICAgLy8gKiBgY29ubmVjdChsb2dpbiwgcGFzc2NvZGUsIGNvbm5lY3RDYWxsYmFjaylgXG5cdFx0ICAgICAgICAvLyAqIGBjb25uZWN0KGxvZ2luLCBwYXNzY29kZSwgY29ubmVjdENhbGxiYWNrLCBlcnJvckNhbGxiYWNrKWBcblx0XHQgICAgICAgIC8vICogYGNvbm5lY3QobG9naW4sIHBhc3Njb2RlLCBjb25uZWN0Q2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGhvc3QpYFxuXHRcdCAgICAgICAgLy9cblx0XHQgICAgICAgIC8vIFRoZSBlcnJvckNhbGxiYWNrIGlzIG9wdGlvbmFsIGFuZCB0aGUgMiBmaXJzdCBmb3JtcyBhbGxvdyB0byBwYXNzIG90aGVyXG5cdFx0ICAgICAgICAvLyBoZWFkZXJzIGluIGFkZGl0aW9uIHRvIGBjbGllbnRgLCBgcGFzc2NvZGVgIGFuZCBgaG9zdGAuXG5cdFxuXHRcdCAgICB9LCB7XG5cdFx0ICAgICAgICBrZXk6ICdjb25uZWN0Jyxcblx0XHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KCkge1xuXHRcdCAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHRcdCAgICAgICAgICAgIHZhciBfcGFyc2VDb25uZWN0MiA9IHRoaXMuX3BhcnNlQ29ubmVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcblx0XHQgICAgICAgICAgICB2YXIgX3BhcnNlQ29ubmVjdDMgPSBfc2xpY2VkVG9BcnJheShfcGFyc2VDb25uZWN0MiwgMyk7XG5cdFxuXHRcdCAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3BhcnNlQ29ubmVjdDNbMF07XG5cdFx0ICAgICAgICAgICAgdmFyIGNvbm5lY3RDYWxsYmFjayA9IF9wYXJzZUNvbm5lY3QzWzFdO1xuXHRcdCAgICAgICAgICAgIHZhciBlcnJvckNhbGxiYWNrID0gX3BhcnNlQ29ubmVjdDNbMl07XG5cdFxuXHRcdCAgICAgICAgICAgIHRoaXMuY29ubmVjdENhbGxiYWNrID0gY29ubmVjdENhbGxiYWNrO1xuXHRcdCAgICAgICAgICAgIHRoaXMuZGVidWcoJ09wZW5pbmcgV2ViIFNvY2tldC4uLicpO1xuXHRcdCAgICAgICAgICAgIHRoaXMud3Mub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2dCkge1xuXHRcdCAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGV2dC5kYXRhO1xuXHRcdCAgICAgICAgICAgICAgICBpZiAoZXZ0LmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgZGF0YSA9ICgwLCBfdXRpbHMudHlwZWRBcnJheVRvVW5pY29kZVN0cmluZykobmV3IFVpbnQ4QXJyYXkoZXZ0LmRhdGEpKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICBfdGhpcy5zZXJ2ZXJBY3Rpdml0eSA9IERhdGUubm93KCk7XG5cdFx0ICAgICAgICAgICAgICAgIC8vIGhlYXJ0YmVhdFxuXHRcdCAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gX3V0aWxzLkJZVEVTLkxGKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygnPDw8IFBPTkcnKTtcblx0XHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygnPDw8ICcgKyBkYXRhKTtcblx0XHQgICAgICAgICAgICAgICAgLy8gSGFuZGxlIFNUT01QIGZyYW1lcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXJcblx0XHQgICAgICAgICAgICAgICAgLy8gVGhlIHVubWFyc2hhbGwgZnVuY3Rpb24gcmV0dXJucyB0aGUgZnJhbWVzIHBhcnNlZCBhbmQgYW55IHJlbWFpbmluZ1xuXHRcdCAgICAgICAgICAgICAgICAvLyBkYXRhIGZyb20gcGFydGlhbCBmcmFtZXMuXG5cdFx0ICAgICAgICAgICAgICAgIHZhciB1bm1hcnNoYWxsZWREYXRhID0gX2ZyYW1lMi5kZWZhdWx0LnVubWFyc2hhbGwoX3RoaXMucGFydGlhbERhdGEgKyBkYXRhKTtcblx0XHQgICAgICAgICAgICAgICAgX3RoaXMucGFydGlhbERhdGEgPSB1bm1hcnNoYWxsZWREYXRhLnBhcnRpYWw7XG5cdFx0ICAgICAgICAgICAgICAgIHVubWFyc2hhbGxlZERhdGEuZnJhbWVzLmZvckVhY2goZnVuY3Rpb24gKGZyYW1lKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGZyYW1lLmNvbW1hbmQpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBbQ09OTkVDVEVEIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI0NPTk5FQ1RFRF9GcmFtZSlcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdDT05ORUNURUQnOlxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygnY29ubmVjdGVkIHRvIHNlcnZlciAnICsgZnJhbWUuaGVhZGVycy5zZXJ2ZXIpO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy52ZXJzaW9uID0gZnJhbWUuaGVhZGVycy52ZXJzaW9uO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fc2V0dXBIZWFydGJlYXQoZnJhbWUuaGVhZGVycyk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0Q2FsbGJhY2spIGNvbm5lY3RDYWxsYmFjayhmcmFtZSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtNRVNTQUdFIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI01FU1NBR0UpXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnTUVTU0FHRSc6XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBgb25yZWNlaXZlYCBjYWxsYmFjayBpcyByZWdpc3RlcmVkIHdoZW4gdGhlIGNsaWVudCBjYWxsc1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBgc3Vic2NyaWJlKClgLlxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyByZWdpc3RlcmVkIHN1YnNjcmlwdGlvbiBmb3IgdGhlIHJlY2VpdmVkIG1lc3NhZ2UsXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHVzZWQgdGhlIGRlZmF1bHQgYG9ucmVjZWl2ZWAgbWV0aG9kIHRoYXQgdGhlIGNsaWVudCBjYW4gc2V0LlxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHVzZWZ1bCBmb3Igc3Vic2NyaXB0aW9ucyB0aGF0IGFyZSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWRcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24gdGhlIGJyb3dzZXIgc2lkZSAoZS5nLiBbUmFiYml0TVEncyB0ZW1wb3Jhcnlcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcXVldWVzXShodHRwOi8vd3d3LnJhYmJpdG1xLmNvbS9zdG9tcC5odG1sKSkuXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBmcmFtZS5oZWFkZXJzLnN1YnNjcmlwdGlvbjtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9ucmVjZWl2ZSA9IF90aGlzLnN1YnNjcmlwdGlvbnNbc3Vic2NyaXB0aW9uXSB8fCBfdGhpcy5vbnJlY2VpdmU7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbnJlY2VpdmUpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuMiBkZWZpbmUgYWNrIGhlYWRlciBpZiBhY2sgaXMgc2V0IHRvIGNsaWVudFxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoaXMgaGVhZGVyIG11c3QgYmUgdXNlZCBmb3IgYWNrL25hY2tcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlSUQgPSBfdGhpcy52ZXJzaW9uID09PSBfdXRpbHMuVkVSU0lPTlMuVjFfMiAmJiBmcmFtZS5oZWFkZXJzLmFjayB8fCBmcmFtZS5oZWFkZXJzWydtZXNzYWdlLWlkJ107XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYGFjaygpYCBhbmQgYG5hY2soKWAgbWV0aG9kcyBkaXJlY3RseSB0byB0aGUgcmV0dXJuZWQgZnJhbWVcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHRoYXQgYSBzaW1wbGUgY2FsbCB0byBgbWVzc2FnZS5hY2soKWAgY2FuIGFja25vd2xlZGdlIHRoZSBtZXNzYWdlLlxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuYWNrID0gX3RoaXMuYWNrLmJpbmQoX3RoaXMsIG1lc3NhZ2VJRCwgc3Vic2NyaXB0aW9uKTtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLm5hY2sgPSBfdGhpcy5uYWNrLmJpbmQoX3RoaXMsIG1lc3NhZ2VJRCwgc3Vic2NyaXB0aW9uKTtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ucmVjZWl2ZShmcmFtZSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygnVW5oYW5kbGVkIHJlY2VpdmVkIE1FU1NBR0U6ICcgKyBmcmFtZSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gW1JFQ0VJUFQgRnJhbWVdKGh0dHA6Ly9zdG9tcC5naXRodWIuY29tL3N0b21wLXNwZWNpZmljYXRpb24tMS4xLmh0bWwjUkVDRUlQVClcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAvL1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjbGllbnQgaW5zdGFuY2UgY2FuIHNldCBpdHMgYG9ucmVjZWlwdGAgZmllbGQgdG8gYSBmdW5jdGlvbiB0YWtpbmdcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBhIGZyYW1lIGFyZ3VtZW50IHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiBhIHJlY2VpcHQgaXMgcmVjZWl2ZWQgZnJvbVxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXI6XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgLy9cblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgY2xpZW50Lm9ucmVjZWlwdCA9IGZ1bmN0aW9uKGZyYW1lKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgcmVjZWlwdElEID0gZnJhbWUuaGVhZGVyc1sncmVjZWlwdC1pZCddO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIC4uLlxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUkVDRUlQVCc6XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vbnJlY2VpcHQpIF90aGlzLm9ucmVjZWlwdChmcmFtZSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtFUlJPUiBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNFUlJPUilcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdFUlJPUic6XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSBlcnJvckNhbGxiYWNrKGZyYW1lKTtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVidWcoJ1VuaGFuZGxlZCBmcmFtZTogJyArIGZyYW1lKTtcblx0XHQgICAgICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgfSk7XG5cdFx0ICAgICAgICAgICAgfTtcblx0XHQgICAgICAgICAgICB0aGlzLndzLm9uY2xvc2UgPSBmdW5jdGlvbiAoZXYpIHtcblx0XHQgICAgICAgICAgICAgICAgX3RoaXMuZGVidWcoJ1dob29wcyEgTG9zdCBjb25uZWN0aW9uIHRvICcgKyBfdGhpcy53cy51cmwgKyAnOicsIGV2KTtcblx0XHQgICAgICAgICAgICAgICAgX3RoaXMuX2NsZWFuVXAoKTtcblx0XHQgICAgICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spIGVycm9yQ2FsbGJhY2soZXYpO1xuXHRcdCAgICAgICAgICAgIH07XG5cdFx0ICAgICAgICAgICAgdGhpcy53cy5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICAgICAgICAgIF90aGlzLmRlYnVnKCdXZWIgU29ja2V0IE9wZW5lZC4uLicpO1xuXHRcdCAgICAgICAgICAgICAgICBoZWFkZXJzWydhY2NlcHQtdmVyc2lvbiddID0gX3V0aWxzLlZFUlNJT05TLnN1cHBvcnRlZFZlcnNpb25zKCk7XG5cdFx0ICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2hlYXJ0LWJlYXQnXSA9IFtfdGhpcy5oZWFydGJlYXQub3V0Z29pbmcsIF90aGlzLmhlYXJ0YmVhdC5pbmNvbWluZ10uam9pbignLCcpO1xuXHRcdCAgICAgICAgICAgICAgICBfdGhpcy5fdHJhbnNtaXQoJ0NPTk5FQ1QnLCBoZWFkZXJzKTtcblx0XHQgICAgICAgICAgICB9O1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIC8vIFtESVNDT05ORUNUIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI0RJU0NPTk5FQ1QpXG5cdFxuXHRcdCAgICB9LCB7XG5cdFx0ICAgICAgICBrZXk6ICdkaXNjb25uZWN0Jyxcblx0XHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0KGRpc2Nvbm5lY3RDYWxsYmFjaykge1xuXHRcdCAgICAgICAgICAgIHZhciBoZWFkZXJzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG5cdFxuXHRcdCAgICAgICAgICAgIHRoaXMuX3RyYW5zbWl0KCdESVNDT05ORUNUJywgaGVhZGVycyk7XG5cdFx0ICAgICAgICAgICAgLy8gRGlzY2FyZCB0aGUgb25jbG9zZSBjYWxsYmFjayB0byBhdm9pZCBjYWxsaW5nIHRoZSBlcnJvckNhbGxiYWNrIHdoZW5cblx0XHQgICAgICAgICAgICAvLyB0aGUgY2xpZW50IGlzIHByb3Blcmx5IGRpc2Nvbm5lY3RlZC5cblx0XHQgICAgICAgICAgICB0aGlzLndzLm9uY2xvc2UgPSBudWxsO1xuXHRcdCAgICAgICAgICAgIHRoaXMud3MuY2xvc2UoKTtcblx0XHQgICAgICAgICAgICB0aGlzLl9jbGVhblVwKCk7XG5cdFx0ICAgICAgICAgICAgLy8gVE9ETzogd2hhdCdzIHRoZSBwb2ludCBvZiB0aGlzIGNhbGxiYWNrIGRpc2Nvbm5lY3QgaXMgbm90IGFzeW5jXG5cdFx0ICAgICAgICAgICAgaWYgKGRpc2Nvbm5lY3RDYWxsYmFjaykgZGlzY29ubmVjdENhbGxiYWNrKCk7XG5cdFx0ICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgLy8gW1NFTkQgRnJhbWVdKGh0dHA6Ly9zdG9tcC5naXRodWIuY29tL3N0b21wLXNwZWNpZmljYXRpb24tMS4xLmh0bWwjU0VORClcblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyAqIGBkZXN0aW5hdGlvbmAgaXMgTUFOREFUT1JZLlxuXHRcblx0XHQgICAgfSwge1xuXHRcdCAgICAgICAga2V5OiAnc2VuZCcsXG5cdFx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZChkZXN0aW5hdGlvbikge1xuXHRcdCAgICAgICAgICAgIHZhciBib2R5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdFx0ICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFx0ICAgICAgICAgICAgaGVhZGVycy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHRcdCAgICAgICAgICAgIHRoaXMuX3RyYW5zbWl0KCdTRU5EJywgaGVhZGVycywgYm9keSk7XG5cdFx0ICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgLy8gW0JFR0lOIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI0JFR0lOKVxuXHRcdCAgICAgICAgLy9cblx0XHQgICAgICAgIC8vIElmIG5vIHRyYW5zYWN0aW9uIElEIGlzIHBhc3NlZCwgb25lIHdpbGwgYmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5XG5cdFxuXHRcdCAgICB9LCB7XG5cdFx0ICAgICAgICBrZXk6ICdiZWdpbicsXG5cdFx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmVnaW4oKSB7XG5cdFx0ICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gJ3R4LScgKyB0aGlzLmNvdW50ZXIrKyA6IGFyZ3VtZW50c1swXTtcblx0XG5cdFx0ICAgICAgICAgICAgdGhpcy5fdHJhbnNtaXQoJ0JFR0lOJywgeyB0cmFuc2FjdGlvbjogdHJhbnNhY3Rpb24gfSk7XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0XHQgICAgICAgICAgICAgICAgaWQ6IHRyYW5zYWN0aW9uLFxuXHRcdCAgICAgICAgICAgICAgICBjb21taXQ6IHRoaXMuY29tbWl0LmJpbmQodGhpcywgdHJhbnNhY3Rpb24pLFxuXHRcdCAgICAgICAgICAgICAgICBhYm9ydDogdGhpcy5hYm9ydC5iaW5kKHRoaXMsIHRyYW5zYWN0aW9uKVxuXHRcdCAgICAgICAgICAgIH07XG5cdFx0ICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgLy8gW0NPTU1JVCBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNDT01NSVQpXG5cdFx0ICAgICAgICAvL1xuXHRcdCAgICAgICAgLy8gKiBgdHJhbnNhY3Rpb25gIGlzIE1BTkRBVE9SWS5cblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyBJdCBpcyBwcmVmZXJhYmxlIHRvIGNvbW1pdCBhIHRyYW5zYWN0aW9uIGJ5IGNhbGxpbmcgYGNvbW1pdCgpYCBkaXJlY3RseSBvblxuXHRcdCAgICAgICAgLy8gdGhlIG9iamVjdCByZXR1cm5lZCBieSBgY2xpZW50LmJlZ2luKClgOlxuXHRcdCAgICAgICAgLy9cblx0XHQgICAgICAgIC8vICAgICB2YXIgdHggPSBjbGllbnQuYmVnaW4odHhpZCk7XG5cdFx0ICAgICAgICAvLyAgICAgLi4uXG5cdFx0ICAgICAgICAvLyAgICAgdHguY29tbWl0KCk7XG5cdFxuXHRcdCAgICB9LCB7XG5cdFx0ICAgICAgICBrZXk6ICdjb21taXQnLFxuXHRcdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbW1pdCh0cmFuc2FjdGlvbikge1xuXHRcdCAgICAgICAgICAgIHRoaXMuX3RyYW5zbWl0KCdDT01NSVQnLCB7IHRyYW5zYWN0aW9uOiB0cmFuc2FjdGlvbiB9KTtcblx0XHQgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAvLyBbQUJPUlQgRnJhbWVdKGh0dHA6Ly9zdG9tcC5naXRodWIuY29tL3N0b21wLXNwZWNpZmljYXRpb24tMS4xLmh0bWwjQUJPUlQpXG5cdFx0ICAgICAgICAvL1xuXHRcdCAgICAgICAgLy8gKiBgdHJhbnNhY3Rpb25gIGlzIE1BTkRBVE9SWS5cblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyBJdCBpcyBwcmVmZXJhYmxlIHRvIGFib3J0IGEgdHJhbnNhY3Rpb24gYnkgY2FsbGluZyBgYWJvcnQoKWAgZGlyZWN0bHkgb25cblx0XHQgICAgICAgIC8vIHRoZSBvYmplY3QgcmV0dXJuZWQgYnkgYGNsaWVudC5iZWdpbigpYDpcblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyAgICAgdmFyIHR4ID0gY2xpZW50LmJlZ2luKHR4aWQpO1xuXHRcdCAgICAgICAgLy8gICAgIC4uLlxuXHRcdCAgICAgICAgLy8gICAgIHR4LmFib3J0KCk7XG5cdFxuXHRcdCAgICB9LCB7XG5cdFx0ICAgICAgICBrZXk6ICdhYm9ydCcsXG5cdFx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWJvcnQodHJhbnNhY3Rpb24pIHtcblx0XHQgICAgICAgICAgICB0aGlzLl90cmFuc21pdCgnQUJPUlQnLCB7IHRyYW5zYWN0aW9uOiB0cmFuc2FjdGlvbiB9KTtcblx0XHQgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAvLyBbQUNLIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI0FDSylcblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyAqIGBtZXNzYWdlSURgICYgYHN1YnNjcmlwdGlvbmAgYXJlIE1BTkRBVE9SWS5cblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyBJdCBpcyBwcmVmZXJhYmxlIHRvIGFja25vd2xlZGdlIGEgbWVzc2FnZSBieSBjYWxsaW5nIGBhY2soKWAgZGlyZWN0bHlcblx0XHQgICAgICAgIC8vIG9uIHRoZSBtZXNzYWdlIGhhbmRsZWQgYnkgYSBzdWJzY3JpcHRpb24gY2FsbGJhY2s6XG5cdFx0ICAgICAgICAvL1xuXHRcdCAgICAgICAgLy8gICAgIGNsaWVudC5zdWJzY3JpYmUoZGVzdGluYXRpb24sXG5cdFx0ICAgICAgICAvLyAgICAgICBmdW5jdGlvbihtZXNzYWdlKSB7XG5cdFx0ICAgICAgICAvLyAgICAgICAgIC8vIHByb2Nlc3MgdGhlIG1lc3NhZ2Vcblx0XHQgICAgICAgIC8vICAgICAgICAgLy8gYWNrbm93bGVkZ2UgaXRcblx0XHQgICAgICAgIC8vICAgICAgICAgbWVzc2FnZS5hY2soKTtcblx0XHQgICAgICAgIC8vICAgICAgIH0sXG5cdFx0ICAgICAgICAvLyAgICAgICB7J2Fjayc6ICdjbGllbnQnfVxuXHRcdCAgICAgICAgLy8gICAgICk7XG5cdFxuXHRcdCAgICB9LCB7XG5cdFx0ICAgICAgICBrZXk6ICdhY2snLFxuXHRcdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFjayhtZXNzYWdlSUQsIHN1YnNjcmlwdGlvbikge1xuXHRcdCAgICAgICAgICAgIHZhciBoZWFkZXJzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMl07XG5cdFxuXHRcdCAgICAgICAgICAgIC8vIDEuMiBjaGFuZ2UgaWQgaGVhZGVyIG5hbWUgZnJvbSBtZXNzYWdlLWlkIHRvIGlkXG5cdFx0ICAgICAgICAgICAgdmFyIGlkQXR0ciA9IHRoaXMudmVyc2lvbiA9PT0gX3V0aWxzLlZFUlNJT05TLlYxXzIgPyAnaWQnIDogJ21lc3NhZ2UtaWQnO1xuXHRcdCAgICAgICAgICAgIGhlYWRlcnNbaWRBdHRyXSA9IG1lc3NhZ2VJRDtcblx0XHQgICAgICAgICAgICBoZWFkZXJzLnN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjtcblx0XHQgICAgICAgICAgICB0aGlzLl90cmFuc21pdCgnQUNLJywgaGVhZGVycyk7XG5cdFx0ICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgLy8gW05BQ0sgRnJhbWVdKGh0dHA6Ly9zdG9tcC5naXRodWIuY29tL3N0b21wLXNwZWNpZmljYXRpb24tMS4xLmh0bWwjTkFDSylcblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyAqIGBtZXNzYWdlSURgICYgYHN1YnNjcmlwdGlvbmAgYXJlIE1BTkRBVE9SWS5cblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyBJdCBpcyBwcmVmZXJhYmxlIHRvIG5hY2sgYSBtZXNzYWdlIGJ5IGNhbGxpbmcgYG5hY2soKWAgZGlyZWN0bHkgb24gdGhlXG5cdFx0ICAgICAgICAvLyBtZXNzYWdlIGhhbmRsZWQgYnkgYSBzdWJzY3JpcHRpb24gY2FsbGJhY2s6XG5cdFx0ICAgICAgICAvL1xuXHRcdCAgICAgICAgLy8gICAgIGNsaWVudC5zdWJzY3JpYmUoZGVzdGluYXRpb24sXG5cdFx0ICAgICAgICAvLyAgICAgICBmdW5jdGlvbihtZXNzYWdlKSB7XG5cdFx0ICAgICAgICAvLyAgICAgICAgIC8vIHByb2Nlc3MgdGhlIG1lc3NhZ2Vcblx0XHQgICAgICAgIC8vICAgICAgICAgLy8gYW4gZXJyb3Igb2NjdXJzLCBuYWNrIGl0XG5cdFx0ICAgICAgICAvLyAgICAgICAgIG1lc3NhZ2UubmFjaygpO1xuXHRcdCAgICAgICAgLy8gICAgICAgfSxcblx0XHQgICAgICAgIC8vICAgICAgIHsnYWNrJzogJ2NsaWVudCd9XG5cdFx0ICAgICAgICAvLyAgICAgKTtcblx0XG5cdFx0ICAgIH0sIHtcblx0XHQgICAgICAgIGtleTogJ25hY2snLFxuXHRcdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5hY2sobWVzc2FnZUlELCBzdWJzY3JpcHRpb24pIHtcblx0XHQgICAgICAgICAgICB2YXIgaGVhZGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzJdO1xuXHRcblx0XHQgICAgICAgICAgICAvLyAxLjIgY2hhbmdlIGlkIGhlYWRlciBuYW1lIGZyb20gbWVzc2FnZS1pZCB0byBpZFxuXHRcdCAgICAgICAgICAgIHZhciBpZEF0dHIgPSB0aGlzLnZlcnNpb24gPT09IF91dGlscy5WRVJTSU9OUy5WMV8yID8gJ2lkJyA6ICdtZXNzYWdlLWlkJztcblx0XHQgICAgICAgICAgICBoZWFkZXJzW2lkQXR0cl0gPSBtZXNzYWdlSUQ7XG5cdFx0ICAgICAgICAgICAgaGVhZGVycy5zdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb247XG5cdFx0ICAgICAgICAgICAgdGhpcy5fdHJhbnNtaXQoJ05BQ0snLCBoZWFkZXJzKTtcblx0XHQgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAvLyBbU1VCU0NSSUJFIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI1NVQlNDUklCRSlcblx0XG5cdFx0ICAgIH0sIHtcblx0XHQgICAgICAgIGtleTogJ3N1YnNjcmliZScsXG5cdFx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3Vic2NyaWJlKGRlc3RpbmF0aW9uLCBjYWxsYmFjaykge1xuXHRcdCAgICAgICAgICAgIHZhciBoZWFkZXJzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMl07XG5cdFxuXHRcdCAgICAgICAgICAgIC8vIGZvciBjb252ZW5pZW5jZSBpZiB0aGUgYGlkYCBoZWFkZXIgaXMgbm90IHNldCwgd2UgY3JlYXRlIGEgbmV3IG9uZSBmb3IgdGhpcyBjbGllbnRcblx0XHQgICAgICAgICAgICAvLyB0aGF0IHdpbGwgYmUgcmV0dXJuZWQgdG8gYmUgYWJsZSB0byB1bnN1YnNjcmliZSB0aGlzIHN1YnNjcmlwdGlvblxuXHRcdCAgICAgICAgICAgIGlmICghaGVhZGVycy5pZCkgaGVhZGVycy5pZCA9ICdzdWItJyArIHRoaXMuY291bnRlcisrO1xuXHRcdCAgICAgICAgICAgIGhlYWRlcnMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcblx0XHQgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnNbaGVhZGVycy5pZF0gPSBjYWxsYmFjaztcblx0XHQgICAgICAgICAgICB0aGlzLl90cmFuc21pdCgnU1VCU0NSSUJFJywgaGVhZGVycyk7XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0XHQgICAgICAgICAgICAgICAgaWQ6IGhlYWRlcnMuaWQsXG5cdFx0ICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiB0aGlzLnVuc3Vic2NyaWJlLmJpbmQodGhpcywgaGVhZGVycy5pZClcblx0XHQgICAgICAgICAgICB9O1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIC8vIFtVTlNVQlNDUklCRSBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNVTlNVQlNDUklCRSlcblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyAqIGBpZGAgaXMgTUFOREFUT1JZLlxuXHRcdCAgICAgICAgLy9cblx0XHQgICAgICAgIC8vIEl0IGlzIHByZWZlcmFibGUgdG8gdW5zdWJzY3JpYmUgZnJvbSBhIHN1YnNjcmlwdGlvbiBieSBjYWxsaW5nXG5cdFx0ICAgICAgICAvLyBgdW5zdWJzY3JpYmUoKWAgZGlyZWN0bHkgb24gdGhlIG9iamVjdCByZXR1cm5lZCBieSBgY2xpZW50LnN1YnNjcmliZSgpYDpcblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IGNsaWVudC5zdWJzY3JpYmUoZGVzdGluYXRpb24sIG9ubWVzc2FnZSk7XG5cdFx0ICAgICAgICAvLyAgICAgLi4uXG5cdFx0ICAgICAgICAvLyAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKGhlYWRlcnMpO1xuXHRcblx0XHQgICAgfSwge1xuXHRcdCAgICAgICAga2V5OiAndW5zdWJzY3JpYmUnLFxuXHRcdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKGlkKSB7XG5cdFx0ICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblx0XG5cdFx0ICAgICAgICAgICAgZGVsZXRlIHRoaXMuc3Vic2NyaXB0aW9uc1tpZF07XG5cdFx0ICAgICAgICAgICAgaGVhZGVycy5pZCA9IGlkO1xuXHRcdCAgICAgICAgICAgIHRoaXMuX3RyYW5zbWl0KCdVTlNVQlNDUklCRScsIGhlYWRlcnMpO1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIC8vIENsZWFuIHVwIGNsaWVudCByZXNvdXJjZXMgd2hlbiBpdCBpcyBkaXNjb25uZWN0ZWQgb3IgdGhlIHNlcnZlciBkaWQgbm90XG5cdFx0ICAgICAgICAvLyBzZW5kIGhlYXJ0IGJlYXRzIGluIGEgdGltZWx5IGZhc2hpb25cblx0XG5cdFx0ICAgIH0sIHtcblx0XHQgICAgICAgIGtleTogJ19jbGVhblVwJyxcblx0XHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2xlYW5VcCgpIHtcblx0XHQgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuXHRcdCAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5waW5nZXIpO1xuXHRcdCAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb25nZXIpO1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIC8vIEJhc2UgbWV0aG9kIHRvIHRyYW5zbWl0IGFueSBzdG9tcCBmcmFtZVxuXHRcblx0XHQgICAgfSwge1xuXHRcdCAgICAgICAga2V5OiAnX3RyYW5zbWl0Jyxcblx0XHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdHJhbnNtaXQoY29tbWFuZCwgaGVhZGVycywgYm9keSkge1xuXHRcdCAgICAgICAgICAgIHZhciBvdXQgPSBfZnJhbWUyLmRlZmF1bHQubWFyc2hhbGwoY29tbWFuZCwgaGVhZGVycywgYm9keSk7XG5cdFx0ICAgICAgICAgICAgdGhpcy5kZWJ1ZygnPj4+ICcgKyBvdXQpO1xuXHRcdCAgICAgICAgICAgIHRoaXMuX3dzU2VuZChvdXQpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICB9LCB7XG5cdFx0ICAgICAgICBrZXk6ICdfd3NTZW5kJyxcblx0XHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfd3NTZW5kKGRhdGEpIHtcblx0XHQgICAgICAgICAgICBpZiAodGhpcy5iaW5hcnkpIGRhdGEgPSAoMCwgX3V0aWxzLnVuaWNvZGVTdHJpbmdUb1R5cGVkQXJyYXkpKGRhdGEpO1xuXHRcdCAgICAgICAgICAgIHRoaXMuZGVidWcoJz4+PiBsZW5ndGggJyArIGRhdGEubGVuZ3RoKTtcblx0XHQgICAgICAgICAgICAvLyBpZiBuZWNlc3NhcnksIHNwbGl0IHRoZSAqU1RPTVAqIGZyYW1lIHRvIHNlbmQgaXQgb24gbWFueSBzbWFsbGVyXG5cdFx0ICAgICAgICAgICAgLy8gKldlYlNvY2tldCogZnJhbWVzXG5cdFx0ICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcblx0XHQgICAgICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gdGhpcy5tYXhXZWJTb2NrZXRGcmFtZVNpemUpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIHRoaXMud3Muc2VuZChkYXRhLnNsaWNlKDAsIHRoaXMubWF4V2ViU29ja2V0RnJhbWVTaXplKSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5zbGljZSh0aGlzLm1heFdlYlNvY2tldEZyYW1lU2l6ZSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYnVnKCdyZW1haW5pbmcgPSAnICsgZGF0YS5sZW5ndGgpO1xuXHRcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud3Muc2VuZChkYXRhKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAvLyBIZWFydC1iZWF0IG5lZ290aWF0aW9uXG5cdFxuXHRcdCAgICB9LCB7XG5cdFx0ICAgICAgICBrZXk6ICdfc2V0dXBIZWFydGJlYXQnLFxuXHRcdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEhlYXJ0YmVhdChoZWFkZXJzKSB7XG5cdFx0ICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHRcdCAgICAgICAgICAgIGlmICh0aGlzLnZlcnNpb24gIT09IF91dGlscy5WRVJTSU9OUy5WMV8xICYmIHRoaXMudmVyc2lvbiAhPT0gX3V0aWxzLlZFUlNJT05TLlYxXzIpIHJldHVybjtcblx0XG5cdFx0ICAgICAgICAgICAgLy8gaGVhcnQtYmVhdCBoZWFkZXIgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGxvb2tzIGxpa2U6XG5cdFx0ICAgICAgICAgICAgLy9cblx0XHQgICAgICAgICAgICAvLyAgICAgaGVhcnQtYmVhdDogc3gsIHN5XG5cdFxuXHRcdCAgICAgICAgICAgIHZhciBfc3BsaXQkbWFwID0gKGhlYWRlcnNbJ2hlYXJ0LWJlYXQnXSB8fCAnMCwwJykuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKHYpIHtcblx0XHQgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHYsIDEwKTtcblx0XHQgICAgICAgICAgICB9KTtcblx0XG5cdFx0ICAgICAgICAgICAgdmFyIF9zcGxpdCRtYXAyID0gX3NsaWNlZFRvQXJyYXkoX3NwbGl0JG1hcCwgMik7XG5cdFxuXHRcdCAgICAgICAgICAgIHZhciBzZXJ2ZXJPdXRnb2luZyA9IF9zcGxpdCRtYXAyWzBdO1xuXHRcdCAgICAgICAgICAgIHZhciBzZXJ2ZXJJbmNvbWluZyA9IF9zcGxpdCRtYXAyWzFdO1xuXHRcblx0XG5cdFx0ICAgICAgICAgICAgaWYgKCEodGhpcy5oZWFydGJlYXQub3V0Z29pbmcgPT09IDAgfHwgc2VydmVySW5jb21pbmcgPT09IDApKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHZhciB0dGwgPSBNYXRoLm1heCh0aGlzLmhlYXJ0YmVhdC5vdXRnb2luZywgc2VydmVySW5jb21pbmcpO1xuXHRcdCAgICAgICAgICAgICAgICB0aGlzLmRlYnVnKCdzZW5kIFBJTkcgZXZlcnkgJyArIHR0bCArICdtcycpO1xuXHRcdCAgICAgICAgICAgICAgICB0aGlzLnBpbmdlciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIF90aGlzMi5fd3NTZW5kKF91dGlscy5CWVRFUy5MRik7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBfdGhpczIuZGVidWcoJz4+PiBQSU5HJyk7XG5cdFx0ICAgICAgICAgICAgICAgIH0sIHR0bCk7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcblx0XHQgICAgICAgICAgICBpZiAoISh0aGlzLmhlYXJ0YmVhdC5pbmNvbWluZyA9PT0gMCB8fCBzZXJ2ZXJPdXRnb2luZyA9PT0gMCkpIHtcblx0XHQgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgIHZhciB0dGwgPSBNYXRoLm1heChfdGhpczIuaGVhcnRiZWF0LmluY29taW5nLCBzZXJ2ZXJPdXRnb2luZyk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBfdGhpczIuZGVidWcoJ2NoZWNrIFBPTkcgZXZlcnkgJyArIHR0bCArICdtcycpO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnBvbmdlciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBEYXRlLm5vdygpIC0gX3RoaXMyLnNlcnZlckFjdGl2aXR5O1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHdhaXQgdHdpY2UgdGhlIFRUTCB0byBiZSBmbGV4aWJsZSBvbiB3aW5kb3cncyBzZXRJbnRlcnZhbCBjYWxsc1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSA+IHR0bCAqIDIpIHtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmRlYnVnKCdkaWQgbm90IHJlY2VpdmUgc2VydmVyIGFjdGl2aXR5IGZvciB0aGUgbGFzdCAnICsgZGVsdGEgKyAnbXMnKTtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLndzLmNsb3NlKCk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICAgICAgfSwgdHRsKTtcblx0XHQgICAgICAgICAgICAgICAgfSkoKTtcblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgLy8gcGFyc2UgdGhlIGFyZ3VtZW50cyBudW1iZXIgYW5kIHR5cGUgdG8gZmluZCB0aGUgaGVhZGVycywgY29ubmVjdENhbGxiYWNrIGFuZFxuXHRcdCAgICAgICAgLy8gKGV2ZW50dWFsbHkgdW5kZWZpbmVkKSBlcnJvckNhbGxiYWNrXG5cdFxuXHRcdCAgICB9LCB7XG5cdFx0ICAgICAgICBrZXk6ICdfcGFyc2VDb25uZWN0Jyxcblx0XHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcGFyc2VDb25uZWN0KCkge1xuXHRcdCAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge30sXG5cdFx0ICAgICAgICAgICAgICAgIGNvbm5lY3RDYWxsYmFjayA9IHZvaWQgMCxcblx0XHQgICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayA9IHZvaWQgMDtcblx0XG5cdFx0ICAgICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0XHQgICAgICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0XHQgICAgICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcblx0XHQgICAgICAgICAgICAgICAgY2FzZSAyOlxuXHRcdCAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IGFyZ3NbMF07XG5cdFx0ICAgICAgICAgICAgICAgICAgICBjb25uZWN0Q2FsbGJhY2sgPSBhcmdzWzFdO1xuXHRcblx0XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHRcdCAgICAgICAgICAgICAgICBjYXNlIDM6XG5cdFx0ICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1sxXSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IGFyZ3NbMF07XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdENhbGxiYWNrID0gYXJnc1sxXTtcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrID0gYXJnc1syXTtcblx0XHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5sb2dpbiA9IGFyZ3NbMF07XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5wYXNzY29kZSA9IGFyZ3NbMV07XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdENhbGxiYWNrID0gYXJnc1syXTtcblx0XHQgICAgICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHRcdCAgICAgICAgICAgICAgICBjYXNlIDQ6XG5cdFx0ICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLmxvZ2luID0gYXJnc1swXTtcblx0XHQgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMucGFzc2NvZGUgPSBhcmdzWzFdO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgY29ubmVjdENhbGxiYWNrID0gYXJnc1syXTtcblx0XHQgICAgICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2sgPSBhcmdzWzNdO1xuXHRcblx0XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHRcdCAgICAgICAgICAgICAgICBkZWZhdWx0OlxuXHRcdCAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5sb2dpbiA9IGFyZ3NbMF07XG5cdFx0ICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLnBhc3Njb2RlID0gYXJnc1sxXTtcblx0XHQgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RDYWxsYmFjayA9IGFyZ3NbMl07XG5cdFx0ICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrID0gYXJnc1szXTtcblx0XHQgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMuaG9zdCA9IGFyZ3NbNF07XG5cdFxuXHRcdCAgICAgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIFtoZWFkZXJzLCBjb25uZWN0Q2FsbGJhY2ssIGVycm9yQ2FsbGJhY2tdO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICB9XSk7XG5cdFxuXHRcdCAgICByZXR1cm4gQ2xpZW50O1xuXHRcdH0oKTtcblx0XG5cdFx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2xpZW50O1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXHRcblx0LyoqKi8gfSxcblx0LyogMiAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblx0XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHQgICAgdmFsdWU6IHRydWVcblx0XHR9KTtcblx0XG5cdFx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdFx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHRcdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRcdC8vIFtTVE9NUCBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNTVE9NUF9GcmFtZXMpIENsYXNzXG5cdFxuXHRcdHZhciBGcmFtZSA9IGZ1bmN0aW9uICgpIHtcblx0XG5cdFx0ICAgIC8vIEZyYW1lIGNvbnN0cnVjdG9yXG5cdFxuXHRcdCAgICBmdW5jdGlvbiBGcmFtZShjb21tYW5kKSB7XG5cdFx0ICAgICAgICB2YXIgaGVhZGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xuXHRcdCAgICAgICAgdmFyIGJvZHkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1syXTtcblx0XG5cdFx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRnJhbWUpO1xuXHRcblx0XHQgICAgICAgIHRoaXMuY29tbWFuZCA9IGNvbW1hbmQ7XG5cdFx0ICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuXHRcdCAgICAgICAgdGhpcy5ib2R5ID0gYm9keTtcblx0XHQgICAgfVxuXHRcblx0XHQgICAgLy8gUHJvdmlkZXMgYSB0ZXh0dWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmcmFtZVxuXHRcdCAgICAvLyBzdWl0YWJsZSB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXJcblx0XG5cdFxuXHRcdCAgICBfY3JlYXRlQ2xhc3MoRnJhbWUsIFt7XG5cdFx0ICAgICAgICBrZXk6ICd0b1N0cmluZycsXG5cdFx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0ICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdFx0ICAgICAgICAgICAgdmFyIGxpbmVzID0gW3RoaXMuY29tbWFuZF0sXG5cdFx0ICAgICAgICAgICAgICAgIHNraXBDb250ZW50TGVuZ3RoID0gdGhpcy5oZWFkZXJzWydjb250ZW50LWxlbmd0aCddID09PSBmYWxzZTtcblx0XHQgICAgICAgICAgICBpZiAoc2tpcENvbnRlbnRMZW5ndGgpIGRlbGV0ZSB0aGlzLmhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ107XG5cdFxuXHRcdCAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuXHRcdCAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfdGhpcy5oZWFkZXJzW25hbWVdO1xuXHRcdCAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKG5hbWUgKyAnOicgKyB2YWx1ZSk7XG5cdFx0ICAgICAgICAgICAgfSk7XG5cdFxuXHRcdCAgICAgICAgICAgIGlmICh0aGlzLmJvZHkgJiYgIXNraXBDb250ZW50TGVuZ3RoKSB7XG5cdFx0ICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goJ2NvbnRlbnQtbGVuZ3RoOicgKyAoMCwgX3V0aWxzLnNpemVPZlVURjgpKHRoaXMuYm9keSkpO1xuXHRcdCAgICAgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAgICAgbGluZXMucHVzaChfdXRpbHMuQllURVMuTEYgKyB0aGlzLmJvZHkpO1xuXHRcblx0XHQgICAgICAgICAgICByZXR1cm4gbGluZXMuam9pbihfdXRpbHMuQllURVMuTEYpO1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIC8vIFVubWFyc2hhbGwgYSBzaW5nbGUgU1RPTVAgZnJhbWUgZnJvbSBhIGBkYXRhYCBzdHJpbmdcblx0XG5cdFx0ICAgIH1dLCBbe1xuXHRcdCAgICAgICAga2V5OiAndW5tYXJzaGFsbFNpbmdsZScsXG5cdFx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdW5tYXJzaGFsbFNpbmdsZShkYXRhKSB7XG5cdFx0ICAgICAgICAgICAgLy8gc2VhcmNoIGZvciAyIGNvbnNlY3V0aXZlcyBMRiBieXRlIHRvIHNwbGl0IHRoZSBjb21tYW5kXG5cdFx0ICAgICAgICAgICAgLy8gYW5kIGhlYWRlcnMgZnJvbSB0aGUgYm9keVxuXHRcdCAgICAgICAgICAgIHZhciBkaXZpZGVyID0gZGF0YS5zZWFyY2gobmV3IFJlZ0V4cChfdXRpbHMuQllURVMuTEYgKyBfdXRpbHMuQllURVMuTEYpKSxcblx0XHQgICAgICAgICAgICAgICAgaGVhZGVyTGluZXMgPSBkYXRhLnN1YnN0cmluZygwLCBkaXZpZGVyKS5zcGxpdChfdXRpbHMuQllURVMuTEYpLFxuXHRcdCAgICAgICAgICAgICAgICBjb21tYW5kID0gaGVhZGVyTGluZXMuc2hpZnQoKSxcblx0XHQgICAgICAgICAgICAgICAgaGVhZGVycyA9IHt9LFxuXHRcdCAgICAgICAgICAgICAgICBib2R5ID0gJycsXG5cdFxuXHRcdCAgICAgICAgICAgIC8vIHNraXAgdGhlIDIgTEYgYnl0ZXMgdGhhdCBkaXZpZGVzIHRoZSBoZWFkZXJzIGZyb20gdGhlIGJvZHlcblx0XHQgICAgICAgICAgICBib2R5SW5kZXggPSBkaXZpZGVyICsgMjtcblx0XHQgICAgICAgICAgICAvLyBQYXJzZSBoZWFkZXJzIGluIHJldmVyc2Ugb3JkZXIgc28gdGhhdCBmb3IgcmVwZWF0ZWQgaGVhZGVycywgdGhlIDFzdFxuXHRcdCAgICAgICAgICAgIC8vIHZhbHVlIGlzIHVzZWRcblx0XHQgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG5cdFx0ICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG5cdFx0ICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXHRcblx0XHQgICAgICAgICAgICB0cnkge1xuXHRcdCAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBoZWFkZXJMaW5lcy5yZXZlcnNlKClbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB2YXIgbGluZSA9IF9zdGVwLnZhbHVlO1xuXHRcblx0XHQgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBsaW5lLmluZGV4T2YoJzonKTtcblx0XHQgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbKDAsIF91dGlscy50cmltKShsaW5lLnN1YnN0cmluZygwLCBpZHgpKV0gPSAoMCwgX3V0aWxzLnRyaW0pKGxpbmUuc3Vic3RyaW5nKGlkeCArIDEpKTtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICAvLyBQYXJzZSBib2R5XG5cdFx0ICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciBjb250ZW50LWxlbmd0aCBvciB0b3BwaW5nIGF0IHRoZSBmaXJzdCBOVUxMIGJ5dGUgZm91bmQuXG5cdFx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdFx0ICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcblx0XHQgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG5cdFx0ICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0XHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0XHQgICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuXHRcdCAgICAgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG5cdFx0ICAgICAgICAgICAgICAgICAgICB9XG5cdFx0ICAgICAgICAgICAgICAgIH1cblx0XHQgICAgICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgICAgIGlmIChoZWFkZXJzWydjb250ZW50LWxlbmd0aCddKSB7XG5cdFx0ICAgICAgICAgICAgICAgIHZhciBsZW4gPSBwYXJzZUludChoZWFkZXJzWydjb250ZW50LWxlbmd0aCddLCAxMCk7XG5cdFx0ICAgICAgICAgICAgICAgIGJvZHkgPSAoJycgKyBkYXRhKS5zdWJzdHJpbmcoYm9keUluZGV4LCBib2R5SW5kZXggKyBsZW4pO1xuXHRcdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICAgIHZhciBjaHIgPSBudWxsO1xuXHRcdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gYm9keUluZGV4OyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgY2hyID0gZGF0YS5jaGFyQXQoaSk7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBpZiAoY2hyID09PSBfdXRpbHMuQllURVMuTlVMTCkgYnJlYWs7XG5cdFx0ICAgICAgICAgICAgICAgICAgICBib2R5ICs9IGNocjtcblx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBGcmFtZShjb21tYW5kLCBoZWFkZXJzLCBib2R5KTtcblx0XHQgICAgICAgIH1cblx0XG5cdFx0ICAgICAgICAvLyBTcGxpdCB0aGUgZGF0YSBiZWZvcmUgdW5tYXJzaGFsbGluZyBldmVyeSBzaW5nbGUgU1RPTVAgZnJhbWUuXG5cdFx0ICAgICAgICAvLyBXZWIgc29ja2V0IHNlcnZlcnMgY2FuIHNlbmQgbXVsdGlwbGUgZnJhbWVzIGluIGEgc2luZ2xlIHdlYnNvY2tldCBtZXNzYWdlLlxuXHRcdCAgICAgICAgLy8gSWYgdGhlIG1lc3NhZ2Ugc2l6ZSBleGNlZWRzIHRoZSB3ZWJzb2NrZXQgbWVzc2FnZSBzaXplLCB0aGVuIGEgc2luZ2xlXG5cdFx0ICAgICAgICAvLyBmcmFtZSBjYW4gYmUgZnJhZ21lbnRlZCBhY3Jvc3MgbXVsdGlwbGUgbWVzc2FnZXMuXG5cdFx0ICAgICAgICAvL1xuXHRcdCAgICAgICAgLy8gYGRhdGFzYCBpcyBhIHN0cmluZy5cblx0XHQgICAgICAgIC8vXG5cdFx0ICAgICAgICAvLyByZXR1cm5zIGFuICphcnJheSogb2YgRnJhbWUgb2JqZWN0c1xuXHRcblx0XHQgICAgfSwge1xuXHRcdCAgICAgICAga2V5OiAndW5tYXJzaGFsbCcsXG5cdFx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdW5tYXJzaGFsbChkYXRhcykge1xuXHRcdCAgICAgICAgICAgIC8vIHNwbGl0IGFuZCB1bm1hcnNoYWxsICptdWx0aXBsZSBTVE9NUCBmcmFtZXMqIGNvbnRhaW5lZCBpbiBhICpzaW5nbGUgV2ViU29ja2V0IGZyYW1lKi5cblx0XHQgICAgICAgICAgICAvLyBUaGUgZGF0YSBpcyBzcGxpdCB3aGVuIGEgTlVMTCBieXRlIChmb2xsb3dlZCBieSB6ZXJvIG9yIG1hbnkgTEYgYnl0ZXMpIGlzIGZvdW5kXG5cdFx0ICAgICAgICAgICAgdmFyIGZyYW1lcyA9IGRhdGFzLnNwbGl0KG5ldyBSZWdFeHAoX3V0aWxzLkJZVEVTLk5VTEwgKyBfdXRpbHMuQllURVMuTEYgKyAnKicpKSxcblx0XHQgICAgICAgICAgICAgICAgZmlyc3RGcmFtZXMgPSBmcmFtZXMuc2xpY2UoMCwgLTEpLFxuXHRcdCAgICAgICAgICAgICAgICBsYXN0RnJhbWUgPSBmcmFtZXMuc2xpY2UoLTEpWzBdLFxuXHRcdCAgICAgICAgICAgICAgICByID0ge1xuXHRcdCAgICAgICAgICAgICAgICBmcmFtZXM6IGZpcnN0RnJhbWVzLm1hcChmdW5jdGlvbiAoZikge1xuXHRcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZyYW1lLnVubWFyc2hhbGxTaW5nbGUoZik7XG5cdFx0ICAgICAgICAgICAgICAgIH0pLFxuXHRcdCAgICAgICAgICAgICAgICBwYXJ0aWFsOiAnJ1xuXHRcdCAgICAgICAgICAgIH07XG5cdFxuXHRcdCAgICAgICAgICAgIC8vIElmIHRoaXMgY29udGFpbnMgYSBmaW5hbCBmdWxsIG1lc3NhZ2Ugb3IganVzdCBhIGFja25vd2xlZGdlbWVudCBvZiBhIFBJTkdcblx0XHQgICAgICAgICAgICAvLyB3aXRob3V0IGFueSBvdGhlciBjb250ZW50LCBwcm9jZXNzIHRoaXMgZnJhbWUsIG90aGVyd2lzZSByZXR1cm4gdGhlXG5cdFx0ICAgICAgICAgICAgLy8gY29udGVudHMgb2YgdGhlIGJ1ZmZlciB0byB0aGUgY2FsbGVyLlxuXHRcdCAgICAgICAgICAgIGlmIChsYXN0RnJhbWUgPT09IF91dGlscy5CWVRFUy5MRiB8fCBsYXN0RnJhbWUuc2VhcmNoKFJlZ0V4cChfdXRpbHMuQllURVMuTlVMTCArIF91dGlscy5CWVRFUy5MRiArICcqJCcpKSAhPT0gLTEpIHtcblx0XHQgICAgICAgICAgICAgICAgci5mcmFtZXMucHVzaChGcmFtZS51bm1hcnNoYWxsU2luZ2xlKGxhc3RGcmFtZSkpO1xuXHRcdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdFx0ICAgICAgICAgICAgICAgIHIucGFydGlhbCA9IGxhc3RGcmFtZTtcblx0XHQgICAgICAgICAgICB9XG5cdFxuXHRcdCAgICAgICAgICAgIHJldHVybiByO1xuXHRcdCAgICAgICAgfVxuXHRcblx0XHQgICAgICAgIC8vIE1hcnNoYWxsIGEgU3RvbXAgZnJhbWVcblx0XG5cdFx0ICAgIH0sIHtcblx0XHQgICAgICAgIGtleTogJ21hcnNoYWxsJyxcblx0XHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtYXJzaGFsbChjb21tYW5kLCBoZWFkZXJzLCBib2R5KSB7XG5cdFx0ICAgICAgICAgICAgdmFyIGZyYW1lID0gbmV3IEZyYW1lKGNvbW1hbmQsIGhlYWRlcnMsIGJvZHkpO1xuXHRcdCAgICAgICAgICAgIHJldHVybiBmcmFtZS50b1N0cmluZygpICsgX3V0aWxzLkJZVEVTLk5VTEw7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgIH1dKTtcblx0XG5cdFx0ICAgIHJldHVybiBGcmFtZTtcblx0XHR9KCk7XG5cdFxuXHRcdGV4cG9ydHMuZGVmYXVsdCA9IEZyYW1lO1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXHRcblx0LyoqKi8gfSxcblx0LyogMyAqL1xuXHQvKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblx0XG5cdFx0J3VzZSBzdHJpY3QnO1xuXHRcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHQgICAgdmFsdWU6IHRydWVcblx0XHR9KTtcblx0XHRleHBvcnRzLnVuaWNvZGVTdHJpbmdUb1R5cGVkQXJyYXkgPSB1bmljb2RlU3RyaW5nVG9UeXBlZEFycmF5O1xuXHRcdGV4cG9ydHMudHlwZWRBcnJheVRvVW5pY29kZVN0cmluZyA9IHR5cGVkQXJyYXlUb1VuaWNvZGVTdHJpbmc7XG5cdFx0ZXhwb3J0cy5zaXplT2ZVVEY4ID0gc2l6ZU9mVVRGODtcblx0XG5cdFx0ZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cdFxuXHRcdHZhciBWRVJTSU9OUyA9IGV4cG9ydHMuVkVSU0lPTlMgPSB7XG5cdFx0ICAgIFYxXzA6ICcxLjAnLFxuXHRcdCAgICBWMV8xOiAnMS4xJyxcblx0XHQgICAgVjFfMjogJzEuMicsXG5cdFx0ICAgIC8vIFZlcnNpb25zIG9mIFNUT01QIHNwZWNpZmljYXRpb25zIHN1cHBvcnRlZFxuXHRcdCAgICBzdXBwb3J0ZWRWZXJzaW9uczogZnVuY3Rpb24gc3VwcG9ydGVkVmVyc2lvbnMoKSB7XG5cdFx0ICAgICAgICByZXR1cm4gJzEuMiwxLjEsMS4wJztcblx0XHQgICAgfSxcblx0XHQgICAgc3VwcG9ydGVkUHJvdG9jb2xzOiBmdW5jdGlvbiBzdXBwb3J0ZWRQcm90b2NvbHMoKSB7XG5cdFx0ICAgICAgICByZXR1cm4gWyd2MTAuc3RvbXAnLCAndjExLnN0b21wJywgJ3YxMi5zdG9tcCddO1xuXHRcdCAgICB9XG5cdFx0fTtcblx0XG5cdFx0Ly8gRGVmaW5lIGNvbnN0YW50cyBmb3IgYnl0ZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBjb2RlLlxuXHRcdHZhciBCWVRFUyA9IGV4cG9ydHMuQllURVMgPSB7XG5cdFx0ICAgIC8vIExJTkVGRUVEIGJ5dGUgKG9jdGV0IDEwKVxuXHRcdCAgICBMRjogJ1xceDBBJyxcblx0XHQgICAgLy8gTlVMTCBieXRlIChvY3RldCAwKVxuXHRcdCAgICBOVUxMOiAnXFx4MDAnXG5cdFx0fTtcblx0XG5cdFx0Ly8gdXRpbGl0eSBmdW5jdGlvbiB0byB0cmltIGFueSB3aGl0ZXNwYWNlIGJlZm9yZSBhbmQgYWZ0ZXIgYSBzdHJpbmdcblx0XHR2YXIgdHJpbSA9IGV4cG9ydHMudHJpbSA9IGZ1bmN0aW9uIHRyaW0oc3RyKSB7XG5cdFx0ICAgIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xuXHRcdH07XG5cdFxuXHRcdC8vIGZyb20gaHR0cHM6Ly9jb29sYWo4Ni5jb20vYXJ0aWNsZXMvdW5pY29kZS1zdHJpbmctdG8tYS11dGYtOC10eXBlZC1hcnJheS1idWZmZXItaW4tamF2YXNjcmlwdC9cblx0XHRmdW5jdGlvbiB1bmljb2RlU3RyaW5nVG9UeXBlZEFycmF5KHMpIHtcblx0XHQgICAgdmFyIGVzY3N0ciA9IGVuY29kZVVSSUNvbXBvbmVudChzKTtcblx0XHQgICAgdmFyIGJpbnN0ciA9IGVzY3N0ci5yZXBsYWNlKC8lKFswLTlBLUZdezJ9KS9nLCBmdW5jdGlvbiAobWF0Y2gsIHAxKSB7XG5cdFx0ICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgnMHgnICsgcDEpO1xuXHRcdCAgICB9KTtcblx0XHQgICAgdmFyIGFyciA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChiaW5zdHIsIGZ1bmN0aW9uIChjKSB7XG5cdFx0ICAgICAgICByZXR1cm4gYy5jaGFyQ29kZUF0KDApO1xuXHRcdCAgICB9KTtcblx0XHQgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGFycik7XG5cdFx0fVxuXHRcblx0XHQvLyBmcm9tIGh0dHBzOi8vY29vbGFqODYuY29tL2FydGljbGVzL3VuaWNvZGUtc3RyaW5nLXRvLWEtdXRmLTgtdHlwZWQtYXJyYXktYnVmZmVyLWluLWphdmFzY3JpcHQvXG5cdFx0ZnVuY3Rpb24gdHlwZWRBcnJheVRvVW5pY29kZVN0cmluZyh1YSkge1xuXHRcdCAgICB2YXIgYmluc3RyID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIF90b0NvbnN1bWFibGVBcnJheSh1YSkpO1xuXHRcdCAgICB2YXIgZXNjc3RyID0gYmluc3RyLnJlcGxhY2UoLyguKS9nLCBmdW5jdGlvbiAobSwgcCkge1xuXHRcdCAgICAgICAgdmFyIGNvZGUgPSBwLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cdFx0ICAgICAgICBpZiAoY29kZS5sZW5ndGggPCAyKSB7XG5cdFx0ICAgICAgICAgICAgY29kZSA9ICcwJyArIGNvZGU7XG5cdFx0ICAgICAgICB9XG5cdFx0ICAgICAgICByZXR1cm4gJyUnICsgY29kZTtcblx0XHQgICAgfSk7XG5cdFx0ICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjc3RyKTtcblx0XHR9XG5cdFxuXHRcdC8vIENvbXB1dGUgdGhlIHNpemUgb2YgYSBVVEYtOCBzdHJpbmcgYnkgY291bnRpbmcgaXRzIG51bWJlciBvZiBieXRlc1xuXHRcdC8vIChhbmQgbm90IHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBjb21wb3NpbmcgdGhlIHN0cmluZylcblx0XHRmdW5jdGlvbiBzaXplT2ZVVEY4KHMpIHtcblx0XHQgICAgaWYgKCFzKSByZXR1cm4gMDtcblx0XHQgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzKS5tYXRjaCgvJS4ufC4vZykubGVuZ3RoO1xuXHRcdH1cblx0XG5cdC8qKiovIH1cblx0LyoqKioqKi8gXSlcblx0fSk7XG5cdDtcblxuLyoqKi8gfSxcbi8qIDM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3NvY2tqc0NsaWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0dmFyIF9zb2NranNDbGllbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc29ja2pzQ2xpZW50KTtcblx0XG5cdHZhciBfd2Vic3RvbXBDbGllbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdHZhciBfd2Vic3RvbXBDbGllbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2Vic3RvbXBDbGllbnQpO1xuXHRcblx0dmFyIF92aWV3ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdFxuXHR2YXIgdmlldyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF92aWV3KTtcblx0XG5cdHZhciBfbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHR2YXIgbG9nID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2xvZyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIENoYXQoKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICB2YXIgU09DS0VUX0RFU1QgPSAnaHR0cHM6Ly8xOTIuMTY4LjExLjEwNi9kZW1vJztcblx0ICAgIHZhciBDSEFOTkVMX0NPVU5UUlkgPSBcIi9jaGFubmVsL2NvdW50cnlcIjtcblx0ICAgIHZhciBTRU5EX0NPVU5UUlkgPSBcIi9jaGF0L2NvdW50cnlcIjtcblx0ICAgIHZhciBDT1VOVFJZX0lEID0gMTtcblx0XG5cdCAgICB0aGlzLmNsaWVudCA9IG51bGw7XG5cdCAgICB0aGlzLmNvbm5lY3QgPSBmdW5jdGlvbiBfY29ubmVjdChjYWxsYmFjaykge1xuXHQgICAgICAgIHZhciBzb2NrZXQgPSBuZXcgX3NvY2tqc0NsaWVudDIuZGVmYXVsdChTT0NLRVRfREVTVCk7XG5cdCAgICAgICAgdGhpcy5jbGllbnQgPSBfd2Vic3RvbXBDbGllbnQyLmRlZmF1bHQub3Zlcihzb2NrZXQpO1xuXHQgICAgICAgIHRoaXMuY2xpZW50LmNvbm5lY3Qoe30sIGZ1bmN0aW9uIF9jb25uZWN0Q2FsbGJhY2soZnJhbWUpIHtcblx0ICAgICAgICAgICAgdmlldy5zZXRDb25uZWN0ZWQodHJ1ZSwgXCJcIik7XG5cdCAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkNvbm5lY3RlZCBPSy5cIiArIGZyYW1lKTtcblx0ICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0sIGZ1bmN0aW9uIF9lcnJvckNhbGxiYWNrKGV2KSB7XG5cdCAgICAgICAgICAgIHZhciBlcnIgPSBKU09OLnN0cmluZ2lmeShldik7XG5cdCAgICAgICAgICAgIHZpZXcuc2V0Q29ubmVjdGVkKGZhbHNlLCBlcnIpO1xuXHQgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb25uZWN0ZWQgRXJyb3IuXCIgKyBlcnIpO1xuXHQgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHRoaXMuZGlzY29ubmVjdCA9IGZ1bmN0aW9uIF9kaXNjb25uZWN0KCkge1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5jbGllbnQgIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgdGhpcy5jbGllbnQuZGlzY29ubmVjdCgpO1xuXHQgICAgICAgICAgICB0aGlzLnN1YnNjcmliZXMgPSBbXTtcblx0ICAgICAgICAgICAgdmlldy5zZXREaXNjb25uZWN0ZWQodHJ1ZSwgXCJcIik7XG5cdCAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkRpc2Nvbm5lY3RlZC5cIik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmlldy5zZXREaXNjb25uZWN0ZWQoZmFsc2UsIFwiTnVsbCBjbGllbnQuXCIpO1xuXHQgICAgICAgICAgICBsb2cuZXJyb3IoXCJOdWxsIGNsaWVudC5cIik7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHRoaXMuY291bnRyeUNoYXQgPSBmdW5jdGlvbiBfY291bnRyeUNoYXQoKSB7XG5cdCAgICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblx0XG5cdCAgICAgICAgdmFyIF9yZWYkdGltZSA9IF9yZWYudGltZTtcblx0ICAgICAgICB2YXIgdGltZSA9IF9yZWYkdGltZSA9PT0gdW5kZWZpbmVkID8gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoKSA6IF9yZWYkdGltZTtcblx0ICAgICAgICB2YXIgX3JlZiR1c2VyID0gX3JlZi51c2VyO1xuXHQgICAgICAgIHZhciB1c2VyID0gX3JlZiR1c2VyID09PSB1bmRlZmluZWQgPyBcIkFub3ltb3VzXCIgOiBfcmVmJHVzZXI7XG5cdCAgICAgICAgdmFyIF9yZWYkY29udGVudCA9IF9yZWYuY29udGVudDtcblx0ICAgICAgICB2YXIgY29udGVudCA9IF9yZWYkY29udGVudCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IF9yZWYkY29udGVudDtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuY2xpZW50ID09PSBudWxsIHx8ICF0aGlzLmNsaWVudC5jb25uZWN0ZWQpIHtcblx0ICAgICAgICAgICAgbG9nLndhcm4oXCJOb3QgY29ubmVjdGVkLlwiKTtcblx0ICAgICAgICAgICAgdmlldy5zZXRDb3VudHJ5Q2hhdChcIiEhIUVSUk9SISEhTm90IGNvbm5lY3RlZFwiKTtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jbGllbnQuc3Vic2NyaXB0aW9uc1tDT1VOVFJZX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIk5vdCBzdWJzY3JpYmUgY291bnRyeSBjaGFubmVsIHlldC5cIik7XG5cdCAgICAgICAgICAgIHRoaXMuY2xpZW50LnN1YnNjcmliZShDSEFOTkVMX0NPVU5UUlksIGZ1bmN0aW9uIF9jb3VudHJ5U3Vic2NyaWJlKGZyYW1lKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoZnJhbWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcoXCJzdWJzY3JpYmU6XCIgKyBKU09OLnN0cmluZ2lmeShmcmFtZSkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LCB7IGlkOiBDT1VOVFJZX0lEIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoY29udGVudCAhPT0gXCJcIikge1xuXHQgICAgICAgICAgICB0aGlzLmNsaWVudC5zZW5kKFNFTkRfQ09VTlRSWSwgY29udGVudCwge30pO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdH1cblx0dmFyIGNoYXQgPSBuZXcgQ2hhdCgpO1xuXHRcblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIHZhciBlbnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRlcicpO1xuXHQgICAgaWYgKGVudGVyKSB7XG5cdCAgICAgICAgZW50ZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIF9vbkVudGVyKGUpIHtcblx0ICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcblx0ICAgICAgICAgICAgICAgIGNoYXQuY291bnRyeUNoYXQoeyBjb250ZW50OiBlLnRhcmdldC52YWx1ZSB9KTtcblx0ICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjb25uZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nvbm5lY3QnKTtcblx0ICAgIGlmIChjb25uZWN0KSB7XG5cdCAgICAgICAgY29ubmVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIF9vbkNsaWNrQ29ubmVjdChlKSB7XG5cdCAgICAgICAgICAgIGlmICghZS50YXJnZXQuZGlzYWJsZWQpIHtcblx0ICAgICAgICAgICAgICAgIGNoYXQuY29ubmVjdCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRpc2Nvbm5lY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzY29ubmVjdCcpO1xuXHQgICAgaWYgKGRpc2Nvbm5lY3QpIHtcblx0ICAgICAgICBkaXNjb25uZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gX29uQ2xpY2tEaXNjb25uZWN0KGUpIHtcblx0ICAgICAgICAgICAgaWYgKCFlLnRhcmdldC5kaXNhYmxlZCkge1xuXHQgICAgICAgICAgICAgICAgY2hhdC5kaXNjb25uZWN0KCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgaW5pdCk7XG5cbi8qKiovIH0sXG4vKiAzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdC8qKlxuXHQgKiBUaGlzIGlzIHRoZSBjb21tb24gbG9naWMgZm9yIGJvdGggdGhlIE5vZGUuanMgYW5kIHdlYiBicm93c2VyXG5cdCAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG5cdCAqXG5cdCAqIEV4cG9zZSBgZGVidWcoKWAgYXMgdGhlIG1vZHVsZS5cblx0ICovXG5cdFxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBkZWJ1Zztcblx0ZXhwb3J0cy5jb2VyY2UgPSBjb2VyY2U7XG5cdGV4cG9ydHMuZGlzYWJsZSA9IGRpc2FibGU7XG5cdGV4cG9ydHMuZW5hYmxlID0gZW5hYmxlO1xuXHRleHBvcnRzLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRleHBvcnRzLmh1bWFuaXplID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cdFxuXHQvKipcblx0ICogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCAqL1xuXHRcblx0ZXhwb3J0cy5uYW1lcyA9IFtdO1xuXHRleHBvcnRzLnNraXBzID0gW107XG5cdFxuXHQvKipcblx0ICogTWFwIG9mIHNwZWNpYWwgXCIlblwiIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyBcImZvcm1hdFwiIGFyZ3VtZW50LlxuXHQgKlxuXHQgKiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlcmNhc2VkIGxldHRlciwgaS5lLiBcIm5cIi5cblx0ICovXG5cdFxuXHRleHBvcnRzLmZvcm1hdHRlcnMgPSB7fTtcblx0XG5cdC8qKlxuXHQgKiBQcmV2aW91c2x5IGFzc2lnbmVkIGNvbG9yLlxuXHQgKi9cblx0XG5cdHZhciBwcmV2Q29sb3IgPSAwO1xuXHRcblx0LyoqXG5cdCAqIFByZXZpb3VzIGxvZyB0aW1lc3RhbXAuXG5cdCAqL1xuXHRcblx0dmFyIHByZXZUaW1lO1xuXHRcblx0LyoqXG5cdCAqIFNlbGVjdCBhIGNvbG9yLlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9XG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNlbGVjdENvbG9yKCkge1xuXHQgIHJldHVybiBleHBvcnRzLmNvbG9yc1twcmV2Q29sb3IrKyAlIGV4cG9ydHMuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XG5cdCAgLy8gZGVmaW5lIHRoZSBgZGlzYWJsZWRgIHZlcnNpb25cblx0ICBmdW5jdGlvbiBkaXNhYmxlZCgpIHtcblx0ICB9XG5cdCAgZGlzYWJsZWQuZW5hYmxlZCA9IGZhbHNlO1xuXHRcblx0ICAvLyBkZWZpbmUgdGhlIGBlbmFibGVkYCB2ZXJzaW9uXG5cdCAgZnVuY3Rpb24gZW5hYmxlZCgpIHtcblx0XG5cdCAgICB2YXIgc2VsZiA9IGVuYWJsZWQ7XG5cdFxuXHQgICAgLy8gc2V0IGBkaWZmYCB0aW1lc3RhbXBcblx0ICAgIHZhciBjdXJyID0gK25ldyBEYXRlKCk7XG5cdCAgICB2YXIgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO1xuXHQgICAgc2VsZi5kaWZmID0gbXM7XG5cdCAgICBzZWxmLnByZXYgPSBwcmV2VGltZTtcblx0ICAgIHNlbGYuY3VyciA9IGN1cnI7XG5cdCAgICBwcmV2VGltZSA9IGN1cnI7XG5cdFxuXHQgICAgLy8gYWRkIHRoZSBgY29sb3JgIGlmIG5vdCBzZXRcblx0ICAgIGlmIChudWxsID09IHNlbGYudXNlQ29sb3JzKSBzZWxmLnVzZUNvbG9ycyA9IGV4cG9ydHMudXNlQ29sb3JzKCk7XG5cdCAgICBpZiAobnVsbCA9PSBzZWxmLmNvbG9yICYmIHNlbGYudXNlQ29sb3JzKSBzZWxmLmNvbG9yID0gc2VsZWN0Q29sb3IoKTtcblx0XG5cdCAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdFxuXHQgICAgYXJnc1swXSA9IGV4cG9ydHMuY29lcmNlKGFyZ3NbMF0pO1xuXHRcblx0ICAgIGlmICgnc3RyaW5nJyAhPT0gdHlwZW9mIGFyZ3NbMF0pIHtcblx0ICAgICAgLy8gYW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJW9cblx0ICAgICAgYXJncyA9IFsnJW8nXS5jb25jYXQoYXJncyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcblx0ICAgIHZhciBpbmRleCA9IDA7XG5cdCAgICBhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXolXSkvZywgZnVuY3Rpb24obWF0Y2gsIGZvcm1hdCkge1xuXHQgICAgICAvLyBpZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG5cdCAgICAgIGlmIChtYXRjaCA9PT0gJyUlJykgcmV0dXJuIG1hdGNoO1xuXHQgICAgICBpbmRleCsrO1xuXHQgICAgICB2YXIgZm9ybWF0dGVyID0gZXhwb3J0cy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG5cdCAgICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZm9ybWF0dGVyKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IGFyZ3NbaW5kZXhdO1xuXHQgICAgICAgIG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblx0XG5cdCAgICAgICAgLy8gbm93IHdlIG5lZWQgdG8gcmVtb3ZlIGBhcmdzW2luZGV4XWAgc2luY2UgaXQncyBpbmxpbmVkIGluIHRoZSBgZm9ybWF0YFxuXHQgICAgICAgIGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICBpbmRleC0tO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBtYXRjaDtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZXhwb3J0cy5mb3JtYXRBcmdzKSB7XG5cdCAgICAgIGFyZ3MgPSBleHBvcnRzLmZvcm1hdEFyZ3MuYXBwbHkoc2VsZiwgYXJncyk7XG5cdCAgICB9XG5cdCAgICB2YXIgbG9nRm4gPSBlbmFibGVkLmxvZyB8fCBleHBvcnRzLmxvZyB8fCBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuXHQgICAgbG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cdCAgfVxuXHQgIGVuYWJsZWQuZW5hYmxlZCA9IHRydWU7XG5cdFxuXHQgIHZhciBmbiA9IGV4cG9ydHMuZW5hYmxlZChuYW1lc3BhY2UpID8gZW5hYmxlZCA6IGRpc2FibGVkO1xuXHRcblx0ICBmbi5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG5cdFxuXHQgIHJldHVybiBmbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0ICogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHQgIGV4cG9ydHMuc2F2ZShuYW1lc3BhY2VzKTtcblx0XG5cdCAgdmFyIHNwbGl0ID0gKG5hbWVzcGFjZXMgfHwgJycpLnNwbGl0KC9bXFxzLF0rLyk7XG5cdCAgdmFyIGxlbiA9IHNwbGl0Lmxlbmd0aDtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgaWYgKCFzcGxpdFtpXSkgY29udGludWU7IC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG5cdCAgICBuYW1lc3BhY2VzID0gc3BsaXRbaV0ucmVwbGFjZSgvXFwqL2csICcuKj8nKTtcblx0ICAgIGlmIChuYW1lc3BhY2VzWzBdID09PSAnLScpIHtcblx0ICAgICAgZXhwb3J0cy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGV4cG9ydHMubmFtZXMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWVzcGFjZXMgKyAnJCcpKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEaXNhYmxlIGRlYnVnIG91dHB1dC5cblx0ICpcblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHQgIGV4cG9ydHMuZW5hYmxlKCcnKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBlbmFibGVkKG5hbWUpIHtcblx0ICB2YXIgaSwgbGVuO1xuXHQgIGZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMuc2tpcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGlmIChleHBvcnRzLnNraXBzW2ldLnRlc3QobmFtZSkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKGkgPSAwLCBsZW4gPSBleHBvcnRzLm5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBpZiAoZXhwb3J0cy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb2VyY2UgYHZhbGAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuXHQgKiBAcmV0dXJuIHtNaXhlZH1cblx0ICogQGFwaSBwcml2YXRlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuXHQgIGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikgcmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogSGVscGVycy5cblx0ICovXG5cdFxuXHR2YXIgcyA9IDEwMDA7XG5cdHZhciBtID0gcyAqIDYwO1xuXHR2YXIgaCA9IG0gKiA2MDtcblx0dmFyIGQgPSBoICogMjQ7XG5cdHZhciB5ID0gZCAqIDM2NS4yNTtcblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuXHQgKlxuXHQgKiBPcHRpb25zOlxuXHQgKlxuXHQgKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbCwgb3B0aW9ucyl7XG5cdCAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiB2YWwpIHJldHVybiBwYXJzZSh2YWwpO1xuXHQgIHJldHVybiBvcHRpb25zLmxvbmdcblx0ICAgID8gbG9uZyh2YWwpXG5cdCAgICA6IHNob3J0KHZhbCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge051bWJlcn1cblx0ICogQGFwaSBwcml2YXRlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG5cdCAgc3RyID0gJycgKyBzdHI7XG5cdCAgaWYgKHN0ci5sZW5ndGggPiAxMDAwMCkgcmV0dXJuO1xuXHQgIHZhciBtYXRjaCA9IC9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoc3RyKTtcblx0ICBpZiAoIW1hdGNoKSByZXR1cm47XG5cdCAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcblx0ICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuXHQgIHN3aXRjaCAodHlwZSkge1xuXHQgICAgY2FzZSAneWVhcnMnOlxuXHQgICAgY2FzZSAneWVhcic6XG5cdCAgICBjYXNlICd5cnMnOlxuXHQgICAgY2FzZSAneXInOlxuXHQgICAgY2FzZSAneSc6XG5cdCAgICAgIHJldHVybiBuICogeTtcblx0ICAgIGNhc2UgJ2RheXMnOlxuXHQgICAgY2FzZSAnZGF5Jzpcblx0ICAgIGNhc2UgJ2QnOlxuXHQgICAgICByZXR1cm4gbiAqIGQ7XG5cdCAgICBjYXNlICdob3Vycyc6XG5cdCAgICBjYXNlICdob3VyJzpcblx0ICAgIGNhc2UgJ2hycyc6XG5cdCAgICBjYXNlICdocic6XG5cdCAgICBjYXNlICdoJzpcblx0ICAgICAgcmV0dXJuIG4gKiBoO1xuXHQgICAgY2FzZSAnbWludXRlcyc6XG5cdCAgICBjYXNlICdtaW51dGUnOlxuXHQgICAgY2FzZSAnbWlucyc6XG5cdCAgICBjYXNlICdtaW4nOlxuXHQgICAgY2FzZSAnbSc6XG5cdCAgICAgIHJldHVybiBuICogbTtcblx0ICAgIGNhc2UgJ3NlY29uZHMnOlxuXHQgICAgY2FzZSAnc2Vjb25kJzpcblx0ICAgIGNhc2UgJ3NlY3MnOlxuXHQgICAgY2FzZSAnc2VjJzpcblx0ICAgIGNhc2UgJ3MnOlxuXHQgICAgICByZXR1cm4gbiAqIHM7XG5cdCAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuXHQgICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuXHQgICAgY2FzZSAnbXNlY3MnOlxuXHQgICAgY2FzZSAnbXNlYyc6XG5cdCAgICBjYXNlICdtcyc6XG5cdCAgICAgIHJldHVybiBuO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG1zXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICogQGFwaSBwcml2YXRlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2hvcnQobXMpIHtcblx0ICBpZiAobXMgPj0gZCkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcblx0ICBpZiAobXMgPj0gaCkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcblx0ICBpZiAobXMgPj0gbSkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcblx0ICBpZiAobXMgPj0gcykgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcblx0ICByZXR1cm4gbXMgKyAnbXMnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqIEBhcGkgcHJpdmF0ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxvbmcobXMpIHtcblx0ICByZXR1cm4gcGx1cmFsKG1zLCBkLCAnZGF5Jylcblx0ICAgIHx8IHBsdXJhbChtcywgaCwgJ2hvdXInKVxuXHQgICAgfHwgcGx1cmFsKG1zLCBtLCAnbWludXRlJylcblx0ICAgIHx8IHBsdXJhbChtcywgcywgJ3NlY29uZCcpXG5cdCAgICB8fCBtcyArICcgbXMnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGx1cmFsKG1zLCBuLCBuYW1lKSB7XG5cdCAgaWYgKG1zIDwgbikgcmV0dXJuO1xuXHQgIGlmIChtcyA8IG4gKiAxLjUpIHJldHVybiBNYXRoLmZsb29yKG1zIC8gbikgKyAnICcgKyBuYW1lO1xuXHQgIHJldHVybiBNYXRoLmNlaWwobXMgLyBuKSArICcgJyArIG5hbWUgKyAncyc7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIFNpbXBsZSBxdWVyeSBzdHJpbmcgcGFyc2VyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcXVlcnkgVGhlIHF1ZXJ5IHN0cmluZyB0aGF0IG5lZWRzIHRvIGJlIHBhcnNlZC5cblx0ICogQHJldHVybnMge09iamVjdH1cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdGZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5KSB7XG5cdCAgdmFyIHBhcnNlciA9IC8oW149PyZdKyk9KFteJl0qKS9nXG5cdCAgICAsIHJlc3VsdCA9IHt9XG5cdCAgICAsIHBhcnQ7XG5cdFxuXHQgIC8vXG5cdCAgLy8gTGl0dGxlIG5pZnR5IHBhcnNpbmcgaGFjaywgbGV2ZXJhZ2UgdGhlIGZhY3QgdGhhdCBSZWdFeHAuZXhlYyBpbmNyZW1lbnRzXG5cdCAgLy8gdGhlIGxhc3RJbmRleCBwcm9wZXJ0eSBzbyB3ZSBjYW4gY29udGludWUgZXhlY3V0aW5nIHRoaXMgbG9vcCB1bnRpbCB3ZSd2ZVxuXHQgIC8vIHBhcnNlZCBhbGwgcmVzdWx0cy5cblx0ICAvL1xuXHQgIGZvciAoO1xuXHQgICAgcGFydCA9IHBhcnNlci5leGVjKHF1ZXJ5KTtcblx0ICAgIHJlc3VsdFtkZWNvZGVVUklDb21wb25lbnQocGFydFsxXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRbMl0pXG5cdCAgKTtcblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRyYW5zZm9ybSBhIHF1ZXJ5IHN0cmluZyB0byBhbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmogT2JqZWN0IHRoYXQgc2hvdWxkIGJlIHRyYW5zZm9ybWVkLlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJlZml4IE9wdGlvbmFsIHByZWZpeC5cblx0ICogQHJldHVybnMge1N0cmluZ31cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdGZ1bmN0aW9uIHF1ZXJ5c3RyaW5naWZ5KG9iaiwgcHJlZml4KSB7XG5cdCAgcHJlZml4ID0gcHJlZml4IHx8ICcnO1xuXHRcblx0ICB2YXIgcGFpcnMgPSBbXTtcblx0XG5cdCAgLy9cblx0ICAvLyBPcHRpb25hbGx5IHByZWZpeCB3aXRoIGEgJz8nIGlmIG5lZWRlZFxuXHQgIC8vXG5cdCAgaWYgKCdzdHJpbmcnICE9PSB0eXBlb2YgcHJlZml4KSBwcmVmaXggPSAnPyc7XG5cdFxuXHQgIGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0ICAgIGlmIChoYXMuY2FsbChvYmosIGtleSkpIHtcblx0ICAgICAgcGFpcnMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArJz0nKyBlbmNvZGVVUklDb21wb25lbnQob2JqW2tleV0pKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBwYWlycy5sZW5ndGggPyBwcmVmaXggKyBwYWlycy5qb2luKCcmJykgOiAnJztcblx0fVxuXHRcblx0Ly9cblx0Ly8gRXhwb3NlIHRoZSBtb2R1bGUuXG5cdC8vXG5cdGV4cG9ydHMuc3RyaW5naWZ5ID0gcXVlcnlzdHJpbmdpZnk7XG5cdGV4cG9ydHMucGFyc2UgPSBxdWVyeXN0cmluZztcblxuXG4vKioqLyB9LFxuLyogNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB3ZSdyZSByZXF1aXJlZCB0byBhZGQgYSBwb3J0IG51bWJlci5cblx0ICpcblx0ICogQHNlZSBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RlZmF1bHQtcG9ydFxuXHQgKiBAcGFyYW0ge051bWJlcnxTdHJpbmd9IHBvcnQgUG9ydCBudW1iZXIgd2UgbmVlZCB0byBjaGVja1xuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvdG9jb2wgUHJvdG9jb2wgd2UgbmVlZCB0byBjaGVjayBhZ2FpbnN0LlxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSXMgaXQgYSBkZWZhdWx0IHBvcnQgZm9yIHRoZSBnaXZlbiBwcm90b2NvbFxuXHQgKiBAYXBpIHByaXZhdGVcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVxdWlyZWQocG9ydCwgcHJvdG9jb2wpIHtcblx0ICBwcm90b2NvbCA9IHByb3RvY29sLnNwbGl0KCc6JylbMF07XG5cdCAgcG9ydCA9ICtwb3J0O1xuXHRcblx0ICBpZiAoIXBvcnQpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgc3dpdGNoIChwcm90b2NvbCkge1xuXHQgICAgY2FzZSAnaHR0cCc6XG5cdCAgICBjYXNlICd3cyc6XG5cdCAgICByZXR1cm4gcG9ydCAhPT0gODA7XG5cdFxuXHQgICAgY2FzZSAnaHR0cHMnOlxuXHQgICAgY2FzZSAnd3NzJzpcblx0ICAgIHJldHVybiBwb3J0ICE9PSA0NDM7XG5cdFxuXHQgICAgY2FzZSAnZnRwJzpcblx0ICAgIHJldHVybiBwb3J0ICE9PSAyMTtcblx0XG5cdCAgICBjYXNlICdnb3BoZXInOlxuXHQgICAgcmV0dXJuIHBvcnQgIT09IDcwO1xuXHRcblx0ICAgIGNhc2UgJ2ZpbGUnOlxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHBvcnQgIT09IDA7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCBFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpXG5cdCAgO1xuXHRcblx0ZnVuY3Rpb24gQ2xvc2VFdmVudCgpIHtcblx0ICBFdmVudC5jYWxsKHRoaXMpO1xuXHQgIHRoaXMuaW5pdEV2ZW50KCdjbG9zZScsIGZhbHNlLCBmYWxzZSk7XG5cdCAgdGhpcy53YXNDbGVhbiA9IGZhbHNlO1xuXHQgIHRoaXMuY29kZSA9IDA7XG5cdCAgdGhpcy5yZWFzb24gPSAnJztcblx0fVxuXHRcblx0aW5oZXJpdHMoQ2xvc2VFdmVudCwgRXZlbnQpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDbG9zZUV2ZW50O1xuXG5cbi8qKiovIH0sXG4vKiA0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVxuXHQgICwgRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KVxuXHQgIDtcblx0XG5cdGZ1bmN0aW9uIFRyYW5zcG9ydE1lc3NhZ2VFdmVudChkYXRhKSB7XG5cdCAgRXZlbnQuY2FsbCh0aGlzKTtcblx0ICB0aGlzLmluaXRFdmVudCgnbWVzc2FnZScsIGZhbHNlLCBmYWxzZSk7XG5cdCAgdGhpcy5kYXRhID0gZGF0YTtcblx0fVxuXHRcblx0aW5oZXJpdHMoVHJhbnNwb3J0TWVzc2FnZUV2ZW50LCBFdmVudCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFRyYW5zcG9ydE1lc3NhZ2VFdmVudDtcblxuXG4vKioqLyB9LFxuLyogNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBKU09OMyA9IF9fd2VicGFja19yZXF1aXJlX18oNSlcblx0ICAsIGlmcmFtZVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSlcblx0ICA7XG5cdFxuXHRmdW5jdGlvbiBGYWNhZGVKUyh0cmFuc3BvcnQpIHtcblx0ICB0aGlzLl90cmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG5cdCAgdHJhbnNwb3J0Lm9uKCdtZXNzYWdlJywgdGhpcy5fdHJhbnNwb3J0TWVzc2FnZS5iaW5kKHRoaXMpKTtcblx0ICB0cmFuc3BvcnQub24oJ2Nsb3NlJywgdGhpcy5fdHJhbnNwb3J0Q2xvc2UuYmluZCh0aGlzKSk7XG5cdH1cblx0XG5cdEZhY2FkZUpTLnByb3RvdHlwZS5fdHJhbnNwb3J0Q2xvc2UgPSBmdW5jdGlvbihjb2RlLCByZWFzb24pIHtcblx0ICBpZnJhbWVVdGlscy5wb3N0TWVzc2FnZSgnYycsIEpTT04zLnN0cmluZ2lmeShbY29kZSwgcmVhc29uXSkpO1xuXHR9O1xuXHRGYWNhZGVKUy5wcm90b3R5cGUuX3RyYW5zcG9ydE1lc3NhZ2UgPSBmdW5jdGlvbihmcmFtZSkge1xuXHQgIGlmcmFtZVV0aWxzLnBvc3RNZXNzYWdlKCd0JywgZnJhbWUpO1xuXHR9O1xuXHRGYWNhZGVKUy5wcm90b3R5cGUuX3NlbmQgPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgdGhpcy5fdHJhbnNwb3J0LnNlbmQoZGF0YSk7XG5cdH07XG5cdEZhY2FkZUpTLnByb3RvdHlwZS5fY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0ICB0aGlzLl90cmFuc3BvcnQuY2xvc2UoKTtcblx0ICB0aGlzLl90cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEZhY2FkZUpTO1xuXG5cbi8qKiovIH0sXG4vKiA0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXJsVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdCAgLCBldmVudFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KVxuXHQgICwgSlNPTjMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgLCBGYWNhZGVKUyA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpXG5cdCAgLCBJbmZvSWZyYW1lUmVjZWl2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKVxuXHQgICwgaWZyYW1lVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKVxuXHQgICwgbG9jID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMilcblx0ICA7XG5cdFxuXHR2YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIGRlYnVnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgnc29ja2pzLWNsaWVudDppZnJhbWUtYm9vdHN0cmFwJyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oU29ja0pTLCBhdmFpbGFibGVUcmFuc3BvcnRzKSB7XG5cdCAgdmFyIHRyYW5zcG9ydE1hcCA9IHt9O1xuXHQgIGF2YWlsYWJsZVRyYW5zcG9ydHMuZm9yRWFjaChmdW5jdGlvbihhdCkge1xuXHQgICAgaWYgKGF0LmZhY2FkZVRyYW5zcG9ydCkge1xuXHQgICAgICB0cmFuc3BvcnRNYXBbYXQuZmFjYWRlVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWVdID0gYXQuZmFjYWRlVHJhbnNwb3J0O1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICAvLyBoYXJkLWNvZGVkIGZvciB0aGUgaW5mbyBpZnJhbWVcblx0ICAvLyBUT0RPIHNlZSBpZiB3ZSBjYW4gbWFrZSB0aGlzIG1vcmUgZHluYW1pY1xuXHQgIHRyYW5zcG9ydE1hcFtJbmZvSWZyYW1lUmVjZWl2ZXIudHJhbnNwb3J0TmFtZV0gPSBJbmZvSWZyYW1lUmVjZWl2ZXI7XG5cdCAgdmFyIHBhcmVudE9yaWdpbjtcblx0XG5cdCAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG5cdCAgU29ja0pTLmJvb3RzdHJhcF9pZnJhbWUgPSBmdW5jdGlvbigpIHtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG5cdCAgICB2YXIgZmFjYWRlO1xuXHQgICAgaWZyYW1lVXRpbHMuY3VycmVudFdpbmRvd0lkID0gbG9jLmhhc2guc2xpY2UoMSk7XG5cdCAgICB2YXIgb25NZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuXHQgICAgICBpZiAoZS5zb3VyY2UgIT09IHBhcmVudCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodHlwZW9mIHBhcmVudE9yaWdpbiA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICBwYXJlbnRPcmlnaW4gPSBlLm9yaWdpbjtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoZS5vcmlnaW4gIT09IHBhcmVudE9yaWdpbikge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGlmcmFtZU1lc3NhZ2U7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgaWZyYW1lTWVzc2FnZSA9IEpTT04zLnBhcnNlKGUuZGF0YSk7XG5cdCAgICAgIH0gY2F0Y2ggKGlnbm9yZWQpIHtcblx0ICAgICAgICBkZWJ1ZygnYmFkIGpzb24nLCBlLmRhdGEpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGlmcmFtZU1lc3NhZ2Uud2luZG93SWQgIT09IGlmcmFtZVV0aWxzLmN1cnJlbnRXaW5kb3dJZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBzd2l0Y2ggKGlmcmFtZU1lc3NhZ2UudHlwZSkge1xuXHQgICAgICBjYXNlICdzJzpcblx0ICAgICAgICB2YXIgcDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcCA9IEpTT04zLnBhcnNlKGlmcmFtZU1lc3NhZ2UuZGF0YSk7XG5cdCAgICAgICAgfSBjYXRjaCAoaWdub3JlZCkge1xuXHQgICAgICAgICAgZGVidWcoJ2JhZCBqc29uJywgaWZyYW1lTWVzc2FnZS5kYXRhKTtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgdmVyc2lvbiA9IHBbMF07XG5cdCAgICAgICAgdmFyIHRyYW5zcG9ydCA9IHBbMV07XG5cdCAgICAgICAgdmFyIHRyYW5zVXJsID0gcFsyXTtcblx0ICAgICAgICB2YXIgYmFzZVVybCA9IHBbM107XG5cdCAgICAgICAgZGVidWcodmVyc2lvbiwgdHJhbnNwb3J0LCB0cmFuc1VybCwgYmFzZVVybCk7XG5cdCAgICAgICAgLy8gY2hhbmdlIHRoaXMgdG8gc2VtdmVyIGxvZ2ljXG5cdCAgICAgICAgaWYgKHZlcnNpb24gIT09IFNvY2tKUy52ZXJzaW9uKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29tcGF0aWJsZSBTb2NrSlMhIE1haW4gc2l0ZSB1c2VzOicgK1xuXHQgICAgICAgICAgICAgICAgICAgICcgXCInICsgdmVyc2lvbiArICdcIiwgdGhlIGlmcmFtZTonICtcblx0ICAgICAgICAgICAgICAgICAgICAnIFwiJyArIFNvY2tKUy52ZXJzaW9uICsgJ1wiLicpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKCF1cmxVdGlscy5pc09yaWdpbkVxdWFsKHRyYW5zVXJsLCBsb2MuaHJlZikgfHxcblx0ICAgICAgICAgICAgIXVybFV0aWxzLmlzT3JpZ2luRXF1YWwoYmFzZVVybCwgbG9jLmhyZWYpKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhblxcJ3QgY29ubmVjdCB0byBkaWZmZXJlbnQgZG9tYWluIGZyb20gd2l0aGluIGFuICcgK1xuXHQgICAgICAgICAgICAgICAgICAgICdpZnJhbWUuICgnICsgbG9jLmhyZWYgKyAnLCAnICsgdHJhbnNVcmwgKyAnLCAnICsgYmFzZVVybCArICcpJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGZhY2FkZSA9IG5ldyBGYWNhZGVKUyhuZXcgdHJhbnNwb3J0TWFwW3RyYW5zcG9ydF0odHJhbnNVcmwsIGJhc2VVcmwpKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnbSc6XG5cdCAgICAgICAgZmFjYWRlLl9zZW5kKGlmcmFtZU1lc3NhZ2UuZGF0YSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ2MnOlxuXHQgICAgICAgIGlmIChmYWNhZGUpIHtcblx0ICAgICAgICAgIGZhY2FkZS5fY2xvc2UoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZmFjYWRlID0gbnVsbDtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBldmVudFV0aWxzLmF0dGFjaEV2ZW50KCdtZXNzYWdlJywgb25NZXNzYWdlKTtcblx0XG5cdCAgICAvLyBTdGFydFxuXHQgICAgaWZyYW1lVXRpbHMucG9zdE1lc3NhZ2UoJ3MnKTtcblx0ICB9O1xuXHR9O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMikpKVxuXG4vKioqLyB9LFxuLyogNDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgRXZlbnRFbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKS5FdmVudEVtaXR0ZXJcblx0ICAsIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVxuXHQgICwgSlNPTjMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgLCB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNilcblx0ICAsIElmcmFtZVRyYW5zcG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpXG5cdCAgLCBJbmZvUmVjZWl2ZXJJZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKVxuXHQgIDtcblx0XG5cdHZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgZGVidWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCdzb2NranMtY2xpZW50OmluZm8taWZyYW1lJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEluZm9JZnJhbWUoYmFzZVVybCwgdXJsKSB7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXHRcblx0ICB2YXIgZ28gPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBpZnIgPSBzZWxmLmlmciA9IG5ldyBJZnJhbWVUcmFuc3BvcnQoSW5mb1JlY2VpdmVySWZyYW1lLnRyYW5zcG9ydE5hbWUsIHVybCwgYmFzZVVybCk7XG5cdFxuXHQgICAgaWZyLm9uY2UoJ21lc3NhZ2UnLCBmdW5jdGlvbihtc2cpIHtcblx0ICAgICAgaWYgKG1zZykge1xuXHQgICAgICAgIHZhciBkO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBkID0gSlNPTjMucGFyc2UobXNnKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBkZWJ1ZygnYmFkIGpzb24nLCBtc2cpO1xuXHQgICAgICAgICAgc2VsZi5lbWl0KCdmaW5pc2gnKTtcblx0ICAgICAgICAgIHNlbGYuY2xvc2UoKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBpbmZvID0gZFswXSwgcnR0ID0gZFsxXTtcblx0ICAgICAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIGluZm8sIHJ0dCk7XG5cdCAgICAgIH1cblx0ICAgICAgc2VsZi5jbG9zZSgpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgaWZyLm9uY2UoJ2Nsb3NlJywgZnVuY3Rpb24oKSB7XG5cdCAgICAgIHNlbGYuZW1pdCgnZmluaXNoJyk7XG5cdCAgICAgIHNlbGYuY2xvc2UoKTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIC8vIFRPRE8gdGhpcyBzZWVtcyB0aGUgc2FtZSBhcyB0aGUgJ25lZWRCb2R5JyBmcm9tIHRyYW5zcG9ydHNcblx0ICBpZiAoIWdsb2JhbC5kb2N1bWVudC5ib2R5KSB7XG5cdCAgICB1dGlscy5hdHRhY2hFdmVudCgnbG9hZCcsIGdvKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZ28oKTtcblx0ICB9XG5cdH1cblx0XG5cdGluaGVyaXRzKEluZm9JZnJhbWUsIEV2ZW50RW1pdHRlcik7XG5cdFxuXHRJbmZvSWZyYW1lLmVuYWJsZWQgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gSWZyYW1lVHJhbnNwb3J0LmVuYWJsZWQoKTtcblx0fTtcblx0XG5cdEluZm9JZnJhbWUucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgaWYgKHRoaXMuaWZyKSB7XG5cdCAgICB0aGlzLmlmci5jbG9zZSgpO1xuXHQgIH1cblx0ICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgIHRoaXMuaWZyID0gbnVsbDtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gSW5mb0lmcmFtZTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDQ2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBFdmVudEVtaXR0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLkV2ZW50RW1pdHRlclxuXHQgICwgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCB1cmxVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNClcblx0ICAsIFhEUiA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpXG5cdCAgLCBYSFJDb3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMylcblx0ICAsIFhIUkxvY2FsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KVxuXHQgICwgWEhSRmFrZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpXG5cdCAgLCBJbmZvSWZyYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSlcblx0ICAsIEluZm9BamF4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMClcblx0ICA7XG5cdFxuXHR2YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIGRlYnVnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgnc29ja2pzLWNsaWVudDppbmZvLXJlY2VpdmVyJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEluZm9SZWNlaXZlcihiYXNlVXJsLCB1cmxJbmZvKSB7XG5cdCAgZGVidWcoYmFzZVVybCk7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXHRcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgc2VsZi5kb1hocihiYXNlVXJsLCB1cmxJbmZvKTtcblx0ICB9LCAwKTtcblx0fVxuXHRcblx0aW5oZXJpdHMoSW5mb1JlY2VpdmVyLCBFdmVudEVtaXR0ZXIpO1xuXHRcblx0Ly8gVE9ETyB0aGlzIGlzIGN1cnJlbnRseSBpZ25vcmluZyB0aGUgbGlzdCBvZiBhdmFpbGFibGUgdHJhbnNwb3J0cyBhbmQgdGhlIHdoaXRlbGlzdFxuXHRcblx0SW5mb1JlY2VpdmVyLl9nZXRSZWNlaXZlciA9IGZ1bmN0aW9uKGJhc2VVcmwsIHVybCwgdXJsSW5mbykge1xuXHQgIC8vIGRldGVybWluZSBtZXRob2Qgb2YgQ09SUyBzdXBwb3J0IChpZiBuZWVkZWQpXG5cdCAgaWYgKHVybEluZm8uc2FtZU9yaWdpbikge1xuXHQgICAgcmV0dXJuIG5ldyBJbmZvQWpheCh1cmwsIFhIUkxvY2FsKTtcblx0ICB9XG5cdCAgaWYgKFhIUkNvcnMuZW5hYmxlZCkge1xuXHQgICAgcmV0dXJuIG5ldyBJbmZvQWpheCh1cmwsIFhIUkNvcnMpO1xuXHQgIH1cblx0ICBpZiAoWERSLmVuYWJsZWQgJiYgdXJsSW5mby5zYW1lU2NoZW1lKSB7XG5cdCAgICByZXR1cm4gbmV3IEluZm9BamF4KHVybCwgWERSKTtcblx0ICB9XG5cdCAgaWYgKEluZm9JZnJhbWUuZW5hYmxlZCgpKSB7XG5cdCAgICByZXR1cm4gbmV3IEluZm9JZnJhbWUoYmFzZVVybCwgdXJsKTtcblx0ICB9XG5cdCAgcmV0dXJuIG5ldyBJbmZvQWpheCh1cmwsIFhIUkZha2UpO1xuXHR9O1xuXHRcblx0SW5mb1JlY2VpdmVyLnByb3RvdHlwZS5kb1hociA9IGZ1bmN0aW9uKGJhc2VVcmwsIHVybEluZm8pIHtcblx0ICB2YXIgc2VsZiA9IHRoaXNcblx0ICAgICwgdXJsID0gdXJsVXRpbHMuYWRkUGF0aChiYXNlVXJsLCAnL2luZm8nKVxuXHQgICAgO1xuXHQgIGRlYnVnKCdkb1hocicsIHVybCk7XG5cdFxuXHQgIHRoaXMueG8gPSBJbmZvUmVjZWl2ZXIuX2dldFJlY2VpdmVyKGJhc2VVcmwsIHVybCwgdXJsSW5mbyk7XG5cdFxuXHQgIHRoaXMudGltZW91dFJlZiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICBkZWJ1ZygndGltZW91dCcpO1xuXHQgICAgc2VsZi5fY2xlYW51cChmYWxzZSk7XG5cdCAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcpO1xuXHQgIH0sIEluZm9SZWNlaXZlci50aW1lb3V0KTtcblx0XG5cdCAgdGhpcy54by5vbmNlKCdmaW5pc2gnLCBmdW5jdGlvbihpbmZvLCBydHQpIHtcblx0ICAgIGRlYnVnKCdmaW5pc2gnLCBpbmZvLCBydHQpO1xuXHQgICAgc2VsZi5fY2xlYW51cCh0cnVlKTtcblx0ICAgIHNlbGYuZW1pdCgnZmluaXNoJywgaW5mbywgcnR0KTtcblx0ICB9KTtcblx0fTtcblx0XG5cdEluZm9SZWNlaXZlci5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbih3YXNDbGVhbikge1xuXHQgIGRlYnVnKCdfY2xlYW51cCcpO1xuXHQgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRSZWYpO1xuXHQgIHRoaXMudGltZW91dFJlZiA9IG51bGw7XG5cdCAgaWYgKCF3YXNDbGVhbiAmJiB0aGlzLnhvKSB7XG5cdCAgICB0aGlzLnhvLmNsb3NlKCk7XG5cdCAgfVxuXHQgIHRoaXMueG8gPSBudWxsO1xuXHR9O1xuXHRcblx0SW5mb1JlY2VpdmVyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuXHQgIGRlYnVnKCdjbG9zZScpO1xuXHQgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdCAgdGhpcy5fY2xlYW51cChmYWxzZSk7XG5cdH07XG5cdFxuXHRJbmZvUmVjZWl2ZXIudGltZW91dCA9IDgwMDA7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEluZm9SZWNlaXZlcjtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKSlcblxuLyoqKi8gfSxcbi8qIDQ3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2VzcywgZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdFxuXHR2YXIgVVJMID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOClcblx0ICAsIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVxuXHQgICwgSlNPTjMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgLCByYW5kb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpXG5cdCAgLCBlc2NhcGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKVxuXHQgICwgdXJsVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdCAgLCBldmVudFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KVxuXHQgICwgdHJhbnNwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSlcblx0ICAsIG9iamVjdFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNylcblx0ICAsIGJyb3dzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKVxuXHQgICwgbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NClcblx0ICAsIEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNClcblx0ICAsIEV2ZW50VGFyZ2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSlcblx0ICAsIGxvYyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpXG5cdCAgLCBDbG9zZUV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSlcblx0ICAsIFRyYW5zcG9ydE1lc3NhZ2VFdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpXG5cdCAgLCBJbmZvUmVjZWl2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgIDtcblx0XG5cdHZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgZGVidWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCdzb2NranMtY2xpZW50Om1haW4nKTtcblx0fVxuXHRcblx0dmFyIHRyYW5zcG9ydHM7XG5cdFxuXHQvLyBmb2xsb3cgY29uc3RydWN0b3Igc3RlcHMgZGVmaW5lZCBhdCBodHRwOi8vZGV2LnczLm9yZy9odG1sNS93ZWJzb2NrZXRzLyN0aGUtd2Vic29ja2V0LWludGVyZmFjZVxuXHRmdW5jdGlvbiBTb2NrSlModXJsLCBwcm90b2NvbHMsIG9wdGlvbnMpIHtcblx0ICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU29ja0pTKSkge1xuXHQgICAgcmV0dXJuIG5ldyBTb2NrSlModXJsLCBwcm90b2NvbHMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdTb2NrSlM6IDEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudFwiKTtcblx0ICB9XG5cdCAgRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblx0XG5cdCAgdGhpcy5yZWFkeVN0YXRlID0gU29ja0pTLkNPTk5FQ1RJTkc7XG5cdCAgdGhpcy5leHRlbnNpb25zID0gJyc7XG5cdCAgdGhpcy5wcm90b2NvbCA9ICcnO1xuXHRcblx0ICAvLyBub24tc3RhbmRhcmQgZXh0ZW5zaW9uXG5cdCAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgaWYgKG9wdGlvbnMucHJvdG9jb2xzX3doaXRlbGlzdCkge1xuXHQgICAgbG9nLndhcm4oXCIncHJvdG9jb2xzX3doaXRlbGlzdCcgaXMgREVQUkVDQVRFRC4gVXNlICd0cmFuc3BvcnRzJyBpbnN0ZWFkLlwiKTtcblx0ICB9XG5cdCAgdGhpcy5fdHJhbnNwb3J0c1doaXRlbGlzdCA9IG9wdGlvbnMudHJhbnNwb3J0cztcblx0ICB0aGlzLl90cmFuc3BvcnRPcHRpb25zID0gb3B0aW9ucy50cmFuc3BvcnRPcHRpb25zIHx8IHt9O1xuXHRcblx0ICB2YXIgc2Vzc2lvbklkID0gb3B0aW9ucy5zZXNzaW9uSWQgfHwgODtcblx0ICBpZiAodHlwZW9mIHNlc3Npb25JZCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhpcy5fZ2VuZXJhdGVTZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2Ygc2Vzc2lvbklkID09PSAnbnVtYmVyJykge1xuXHQgICAgdGhpcy5fZ2VuZXJhdGVTZXNzaW9uSWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHJhbmRvbS5zdHJpbmcoc2Vzc2lvbklkKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0lmIHNlc3Npb25JZCBpcyB1c2VkIGluIHRoZSBvcHRpb25zLCBpdCBuZWVkcyB0byBiZSBhIG51bWJlciBvciBhIGZ1bmN0aW9uLicpO1xuXHQgIH1cblx0XG5cdCAgdGhpcy5fc2VydmVyID0gb3B0aW9ucy5zZXJ2ZXIgfHwgcmFuZG9tLm51bWJlclN0cmluZygxMDAwKTtcblx0XG5cdCAgLy8gU3RlcCAxIG9mIFdTIHNwZWMgLSBwYXJzZSBhbmQgdmFsaWRhdGUgdGhlIHVybC4gSXNzdWUgIzhcblx0ICB2YXIgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwpO1xuXHQgIGlmICghcGFyc2VkVXJsLmhvc3QgfHwgIXBhcnNlZFVybC5wcm90b2NvbCkge1xuXHQgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVGhlIFVSTCAnXCIgKyB1cmwgKyBcIicgaXMgaW52YWxpZFwiKTtcblx0ICB9IGVsc2UgaWYgKHBhcnNlZFVybC5oYXNoKSB7XG5cdCAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1RoZSBVUkwgbXVzdCBub3QgY29udGFpbiBhIGZyYWdtZW50Jyk7XG5cdCAgfSBlbHNlIGlmIChwYXJzZWRVcmwucHJvdG9jb2wgIT09ICdodHRwOicgJiYgcGFyc2VkVXJsLnByb3RvY29sICE9PSAnaHR0cHM6Jykge1xuXHQgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVGhlIFVSTCdzIHNjaGVtZSBtdXN0IGJlIGVpdGhlciAnaHR0cDonIG9yICdodHRwczonLiAnXCIgKyBwYXJzZWRVcmwucHJvdG9jb2wgKyBcIicgaXMgbm90IGFsbG93ZWQuXCIpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHNlY3VyZSA9IHBhcnNlZFVybC5wcm90b2NvbCA9PT0gJ2h0dHBzOic7XG5cdCAgLy8gU3RlcCAyIC0gZG9uJ3QgYWxsb3cgc2VjdXJlIG9yaWdpbiB3aXRoIGFuIGluc2VjdXJlIHByb3RvY29sXG5cdCAgaWYgKGxvYy5wcm90b2NvbCA9PT0gJ2h0dHBzJyAmJiAhc2VjdXJlKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlY3VyaXR5RXJyb3I6IEFuIGluc2VjdXJlIFNvY2tKUyBjb25uZWN0aW9uIG1heSBub3QgYmUgaW5pdGlhdGVkIGZyb20gYSBwYWdlIGxvYWRlZCBvdmVyIEhUVFBTJyk7XG5cdCAgfVxuXHRcblx0ICAvLyBTdGVwIDMgLSBjaGVjayBwb3J0IGFjY2VzcyAtIG5vIG5lZWQgaGVyZVxuXHQgIC8vIFN0ZXAgNCAtIHBhcnNlIHByb3RvY29scyBhcmd1bWVudFxuXHQgIGlmICghcHJvdG9jb2xzKSB7XG5cdCAgICBwcm90b2NvbHMgPSBbXTtcblx0ICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHByb3RvY29scykpIHtcblx0ICAgIHByb3RvY29scyA9IFtwcm90b2NvbHNdO1xuXHQgIH1cblx0XG5cdCAgLy8gU3RlcCA1IC0gY2hlY2sgcHJvdG9jb2xzIGFyZ3VtZW50XG5cdCAgdmFyIHNvcnRlZFByb3RvY29scyA9IHByb3RvY29scy5zb3J0KCk7XG5cdCAgc29ydGVkUHJvdG9jb2xzLmZvckVhY2goZnVuY3Rpb24ocHJvdG8sIGkpIHtcblx0ICAgIGlmICghcHJvdG8pIHtcblx0ICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVGhlIHByb3RvY29scyBlbnRyeSAnXCIgKyBwcm90byArIFwiJyBpcyBpbnZhbGlkLlwiKTtcblx0ICAgIH1cblx0ICAgIGlmIChpIDwgKHNvcnRlZFByb3RvY29scy5sZW5ndGggLSAxKSAmJiBwcm90byA9PT0gc29ydGVkUHJvdG9jb2xzW2kgKyAxXSkge1xuXHQgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUaGUgcHJvdG9jb2xzIGVudHJ5ICdcIiArIHByb3RvICsgXCInIGlzIGR1cGxpY2F0ZWQuXCIpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICAvLyBTdGVwIDYgLSBjb252ZXJ0IG9yaWdpblxuXHQgIHZhciBvID0gdXJsVXRpbHMuZ2V0T3JpZ2luKGxvYy5ocmVmKTtcblx0ICB0aGlzLl9vcmlnaW4gPSBvID8gby50b0xvd2VyQ2FzZSgpIDogbnVsbDtcblx0XG5cdCAgLy8gcmVtb3ZlIHRoZSB0cmFpbGluZyBzbGFzaFxuXHQgIHBhcnNlZFVybC5zZXQoJ3BhdGhuYW1lJywgcGFyc2VkVXJsLnBhdGhuYW1lLnJlcGxhY2UoL1xcLyskLywgJycpKTtcblx0XG5cdCAgLy8gc3RvcmUgdGhlIHNhbml0aXplZCB1cmxcblx0ICB0aGlzLnVybCA9IHBhcnNlZFVybC5ocmVmO1xuXHQgIGRlYnVnKCd1c2luZyB1cmwnLCB0aGlzLnVybCk7XG5cdFxuXHQgIC8vIFN0ZXAgNyAtIHN0YXJ0IGNvbm5lY3Rpb24gaW4gYmFja2dyb3VuZFxuXHQgIC8vIG9idGFpbiBzZXJ2ZXIgaW5mb1xuXHQgIC8vIGh0dHA6Ly9zb2NranMuZ2l0aHViLmlvL3NvY2tqcy1wcm90b2NvbC9zb2NranMtcHJvdG9jb2wtMC4zLjMuaHRtbCNzZWN0aW9uLTI2XG5cdCAgdGhpcy5fdXJsSW5mbyA9IHtcblx0ICAgIG51bGxPcmlnaW46ICFicm93c2VyLmhhc0RvbWFpbigpXG5cdCAgLCBzYW1lT3JpZ2luOiB1cmxVdGlscy5pc09yaWdpbkVxdWFsKHRoaXMudXJsLCBsb2MuaHJlZilcblx0ICAsIHNhbWVTY2hlbWU6IHVybFV0aWxzLmlzU2NoZW1lRXF1YWwodGhpcy51cmwsIGxvYy5ocmVmKVxuXHQgIH07XG5cdFxuXHQgIHRoaXMuX2lyID0gbmV3IEluZm9SZWNlaXZlcih0aGlzLnVybCwgdGhpcy5fdXJsSW5mbyk7XG5cdCAgdGhpcy5faXIub25jZSgnZmluaXNoJywgdGhpcy5fcmVjZWl2ZUluZm8uYmluZCh0aGlzKSk7XG5cdH1cblx0XG5cdGluaGVyaXRzKFNvY2tKUywgRXZlbnRUYXJnZXQpO1xuXHRcblx0ZnVuY3Rpb24gdXNlclNldENvZGUoY29kZSkge1xuXHQgIHJldHVybiBjb2RlID09PSAxMDAwIHx8IChjb2RlID49IDMwMDAgJiYgY29kZSA8PSA0OTk5KTtcblx0fVxuXHRcblx0U29ja0pTLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKGNvZGUsIHJlYXNvbikge1xuXHQgIC8vIFN0ZXAgMVxuXHQgIGlmIChjb2RlICYmICF1c2VyU2V0Q29kZShjb2RlKSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkQWNjZXNzRXJyb3I6IEludmFsaWQgY29kZScpO1xuXHQgIH1cblx0ICAvLyBTdGVwIDIuNCBzdGF0ZXMgdGhlIG1heCBpcyAxMjMgYnl0ZXMsIGJ1dCB3ZSBhcmUganVzdCBjaGVja2luZyBsZW5ndGhcblx0ICBpZiAocmVhc29uICYmIHJlYXNvbi5sZW5ndGggPiAxMjMpIHtcblx0ICAgIHRocm93IG5ldyBTeW50YXhFcnJvcigncmVhc29uIGFyZ3VtZW50IGhhcyBhbiBpbnZhbGlkIGxlbmd0aCcpO1xuXHQgIH1cblx0XG5cdCAgLy8gU3RlcCAzLjFcblx0ICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBTb2NrSlMuQ0xPU0lORyB8fCB0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DTE9TRUQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIC8vIFRPRE8gbG9vayBhdCBkb2NzIHRvIGRldGVybWluZSBob3cgdG8gc2V0IHRoaXNcblx0ICB2YXIgd2FzQ2xlYW4gPSB0cnVlO1xuXHQgIHRoaXMuX2Nsb3NlKGNvZGUgfHwgMTAwMCwgcmVhc29uIHx8ICdOb3JtYWwgY2xvc3VyZScsIHdhc0NsZWFuKTtcblx0fTtcblx0XG5cdFNvY2tKUy5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAvLyAjMTMgLSBjb252ZXJ0IGFueXRoaW5nIG5vbi1zdHJpbmcgdG8gc3RyaW5nXG5cdCAgLy8gVE9ETyB0aGlzIGN1cnJlbnRseSB0dXJucyBvYmplY3RzIGludG8gW29iamVjdCBPYmplY3RdXG5cdCAgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJykge1xuXHQgICAgZGF0YSA9ICcnICsgZGF0YTtcblx0ICB9XG5cdCAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gU29ja0pTLkNPTk5FQ1RJTkcpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZFN0YXRlRXJyb3I6IFRoZSBjb25uZWN0aW9uIGhhcyBub3QgYmVlbiBlc3RhYmxpc2hlZCB5ZXQnKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gU29ja0pTLk9QRU4pIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdGhpcy5fdHJhbnNwb3J0LnNlbmQoZXNjYXBlLnF1b3RlKGRhdGEpKTtcblx0fTtcblx0XG5cdFNvY2tKUy52ZXJzaW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdFxuXHRTb2NrSlMuQ09OTkVDVElORyA9IDA7XG5cdFNvY2tKUy5PUEVOID0gMTtcblx0U29ja0pTLkNMT1NJTkcgPSAyO1xuXHRTb2NrSlMuQ0xPU0VEID0gMztcblx0XG5cdFNvY2tKUy5wcm90b3R5cGUuX3JlY2VpdmVJbmZvID0gZnVuY3Rpb24oaW5mbywgcnR0KSB7XG5cdCAgZGVidWcoJ19yZWNlaXZlSW5mbycsIHJ0dCk7XG5cdCAgdGhpcy5faXIgPSBudWxsO1xuXHQgIGlmICghaW5mbykge1xuXHQgICAgdGhpcy5fY2xvc2UoMTAwMiwgJ0Nhbm5vdCBjb25uZWN0IHRvIHNlcnZlcicpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgLy8gZXN0YWJsaXNoIGEgcm91bmQtdHJpcCB0aW1lb3V0IChSVE8pIGJhc2VkIG9uIHRoZVxuXHQgIC8vIHJvdW5kLXRyaXAgdGltZSAoUlRUKVxuXHQgIHRoaXMuX3J0byA9IHRoaXMuY291bnRSVE8ocnR0KTtcblx0ICAvLyBhbGxvdyBzZXJ2ZXIgdG8gb3ZlcnJpZGUgdXJsIHVzZWQgZm9yIHRoZSBhY3R1YWwgdHJhbnNwb3J0XG5cdCAgdGhpcy5fdHJhbnNVcmwgPSBpbmZvLmJhc2VfdXJsID8gaW5mby5iYXNlX3VybCA6IHRoaXMudXJsO1xuXHQgIGluZm8gPSBvYmplY3RVdGlscy5leHRlbmQoaW5mbywgdGhpcy5fdXJsSW5mbyk7XG5cdCAgZGVidWcoJ2luZm8nLCBpbmZvKTtcblx0ICAvLyBkZXRlcm1pbmUgbGlzdCBvZiBkZXNpcmVkIGFuZCBzdXBwb3J0ZWQgdHJhbnNwb3J0c1xuXHQgIHZhciBlbmFibGVkVHJhbnNwb3J0cyA9IHRyYW5zcG9ydHMuZmlsdGVyVG9FbmFibGVkKHRoaXMuX3RyYW5zcG9ydHNXaGl0ZWxpc3QsIGluZm8pO1xuXHQgIHRoaXMuX3RyYW5zcG9ydHMgPSBlbmFibGVkVHJhbnNwb3J0cy5tYWluO1xuXHQgIGRlYnVnKHRoaXMuX3RyYW5zcG9ydHMubGVuZ3RoICsgJyBlbmFibGVkIHRyYW5zcG9ydHMnKTtcblx0XG5cdCAgdGhpcy5fY29ubmVjdCgpO1xuXHR9O1xuXHRcblx0U29ja0pTLnByb3RvdHlwZS5fY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuXHQgIGZvciAodmFyIFRyYW5zcG9ydCA9IHRoaXMuX3RyYW5zcG9ydHMuc2hpZnQoKTsgVHJhbnNwb3J0OyBUcmFuc3BvcnQgPSB0aGlzLl90cmFuc3BvcnRzLnNoaWZ0KCkpIHtcblx0ICAgIGRlYnVnKCdhdHRlbXB0JywgVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUpO1xuXHQgICAgaWYgKFRyYW5zcG9ydC5uZWVkQm9keSkge1xuXHQgICAgICBpZiAoIWdsb2JhbC5kb2N1bWVudC5ib2R5IHx8XG5cdCAgICAgICAgICAodHlwZW9mIGdsb2JhbC5kb2N1bWVudC5yZWFkeVN0YXRlICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICAgICAgICBnbG9iYWwuZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ2NvbXBsZXRlJyAmJlxuXHQgICAgICAgICAgICBnbG9iYWwuZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ2ludGVyYWN0aXZlJykpIHtcblx0ICAgICAgICBkZWJ1Zygnd2FpdGluZyBmb3IgYm9keScpO1xuXHQgICAgICAgIHRoaXMuX3RyYW5zcG9ydHMudW5zaGlmdChUcmFuc3BvcnQpO1xuXHQgICAgICAgIGV2ZW50VXRpbHMuYXR0YWNoRXZlbnQoJ2xvYWQnLCB0aGlzLl9jb25uZWN0LmJpbmQodGhpcykpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGNhbGN1bGF0ZSB0aW1lb3V0IGJhc2VkIG9uIFJUTyBhbmQgcm91bmQgdHJpcHMuIERlZmF1bHQgdG8gNXNcblx0ICAgIHZhciB0aW1lb3V0TXMgPSAodGhpcy5fcnRvICogVHJhbnNwb3J0LnJvdW5kVHJpcHMpIHx8IDUwMDA7XG5cdCAgICB0aGlzLl90cmFuc3BvcnRUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuX3RyYW5zcG9ydFRpbWVvdXQuYmluZCh0aGlzKSwgdGltZW91dE1zKTtcblx0ICAgIGRlYnVnKCd1c2luZyB0aW1lb3V0JywgdGltZW91dE1zKTtcblx0XG5cdCAgICB2YXIgdHJhbnNwb3J0VXJsID0gdXJsVXRpbHMuYWRkUGF0aCh0aGlzLl90cmFuc1VybCwgJy8nICsgdGhpcy5fc2VydmVyICsgJy8nICsgdGhpcy5fZ2VuZXJhdGVTZXNzaW9uSWQoKSk7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuX3RyYW5zcG9ydE9wdGlvbnNbVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWVdO1xuXHQgICAgZGVidWcoJ3RyYW5zcG9ydCB1cmwnLCB0cmFuc3BvcnRVcmwpO1xuXHQgICAgdmFyIHRyYW5zcG9ydE9iaiA9IG5ldyBUcmFuc3BvcnQodHJhbnNwb3J0VXJsLCB0aGlzLl90cmFuc1VybCwgb3B0aW9ucyk7XG5cdCAgICB0cmFuc3BvcnRPYmoub24oJ21lc3NhZ2UnLCB0aGlzLl90cmFuc3BvcnRNZXNzYWdlLmJpbmQodGhpcykpO1xuXHQgICAgdHJhbnNwb3J0T2JqLm9uY2UoJ2Nsb3NlJywgdGhpcy5fdHJhbnNwb3J0Q2xvc2UuYmluZCh0aGlzKSk7XG5cdCAgICB0cmFuc3BvcnRPYmoudHJhbnNwb3J0TmFtZSA9IFRyYW5zcG9ydC50cmFuc3BvcnROYW1lO1xuXHQgICAgdGhpcy5fdHJhbnNwb3J0ID0gdHJhbnNwb3J0T2JqO1xuXHRcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdGhpcy5fY2xvc2UoMjAwMCwgJ0FsbCB0cmFuc3BvcnRzIGZhaWxlZCcsIGZhbHNlKTtcblx0fTtcblx0XG5cdFNvY2tKUy5wcm90b3R5cGUuX3RyYW5zcG9ydFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcblx0ICBkZWJ1ZygnX3RyYW5zcG9ydFRpbWVvdXQnKTtcblx0ICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBTb2NrSlMuQ09OTkVDVElORykge1xuXHQgICAgdGhpcy5fdHJhbnNwb3J0Q2xvc2UoMjAwNywgJ1RyYW5zcG9ydCB0aW1lZCBvdXQnKTtcblx0ICB9XG5cdH07XG5cdFxuXHRTb2NrSlMucHJvdG90eXBlLl90cmFuc3BvcnRNZXNzYWdlID0gZnVuY3Rpb24obXNnKSB7XG5cdCAgZGVidWcoJ190cmFuc3BvcnRNZXNzYWdlJywgbXNnKTtcblx0ICB2YXIgc2VsZiA9IHRoaXNcblx0ICAgICwgdHlwZSA9IG1zZy5zbGljZSgwLCAxKVxuXHQgICAgLCBjb250ZW50ID0gbXNnLnNsaWNlKDEpXG5cdCAgICAsIHBheWxvYWRcblx0ICAgIDtcblx0XG5cdCAgLy8gZmlyc3QgY2hlY2sgZm9yIG1lc3NhZ2VzIHRoYXQgZG9uJ3QgbmVlZCBhIHBheWxvYWRcblx0ICBzd2l0Y2ggKHR5cGUpIHtcblx0ICAgIGNhc2UgJ28nOlxuXHQgICAgICB0aGlzLl9vcGVuKCk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIGNhc2UgJ2gnOlxuXHQgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdoZWFydGJlYXQnKSk7XG5cdCAgICAgIGRlYnVnKCdoZWFydGJlYXQnLCB0aGlzLnRyYW5zcG9ydCk7XG5cdCAgICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIGlmIChjb250ZW50KSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBwYXlsb2FkID0gSlNPTjMucGFyc2UoY29udGVudCk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIGRlYnVnKCdiYWQganNvbicsIGNvbnRlbnQpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgZGVidWcoJ2VtcHR5IHBheWxvYWQnLCBjb250ZW50KTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIHN3aXRjaCAodHlwZSkge1xuXHQgICAgY2FzZSAnYSc6XG5cdCAgICAgIGlmIChBcnJheS5pc0FycmF5KHBheWxvYWQpKSB7XG5cdCAgICAgICAgcGF5bG9hZC5mb3JFYWNoKGZ1bmN0aW9uKHApIHtcblx0ICAgICAgICAgIGRlYnVnKCdtZXNzYWdlJywgc2VsZi50cmFuc3BvcnQsIHApO1xuXHQgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KG5ldyBUcmFuc3BvcnRNZXNzYWdlRXZlbnQocCkpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnbSc6XG5cdCAgICAgIGRlYnVnKCdtZXNzYWdlJywgdGhpcy50cmFuc3BvcnQsIHBheWxvYWQpO1xuXHQgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFRyYW5zcG9ydE1lc3NhZ2VFdmVudChwYXlsb2FkKSk7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnYyc6XG5cdCAgICAgIGlmIChBcnJheS5pc0FycmF5KHBheWxvYWQpICYmIHBheWxvYWQubGVuZ3RoID09PSAyKSB7XG5cdCAgICAgICAgdGhpcy5fY2xvc2UocGF5bG9hZFswXSwgcGF5bG9hZFsxXSwgdHJ1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWs7XG5cdCAgfVxuXHR9O1xuXHRcblx0U29ja0pTLnByb3RvdHlwZS5fdHJhbnNwb3J0Q2xvc2UgPSBmdW5jdGlvbihjb2RlLCByZWFzb24pIHtcblx0ICBkZWJ1ZygnX3RyYW5zcG9ydENsb3NlJywgdGhpcy50cmFuc3BvcnQsIGNvZGUsIHJlYXNvbik7XG5cdCAgaWYgKHRoaXMuX3RyYW5zcG9ydCkge1xuXHQgICAgdGhpcy5fdHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgICAgdGhpcy5fdHJhbnNwb3J0ID0gbnVsbDtcblx0ICAgIHRoaXMudHJhbnNwb3J0ID0gbnVsbDtcblx0ICB9XG5cdFxuXHQgIGlmICghdXNlclNldENvZGUoY29kZSkgJiYgY29kZSAhPT0gMjAwMCAmJiB0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DT05ORUNUSU5HKSB7XG5cdCAgICB0aGlzLl9jb25uZWN0KCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICB0aGlzLl9jbG9zZShjb2RlLCByZWFzb24pO1xuXHR9O1xuXHRcblx0U29ja0pTLnByb3RvdHlwZS5fb3BlbiA9IGZ1bmN0aW9uKCkge1xuXHQgIGRlYnVnKCdfb3BlbicsIHRoaXMuX3RyYW5zcG9ydC50cmFuc3BvcnROYW1lLCB0aGlzLnJlYWR5U3RhdGUpO1xuXHQgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DT05ORUNUSU5HKSB7XG5cdCAgICBpZiAodGhpcy5fdHJhbnNwb3J0VGltZW91dElkKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90cmFuc3BvcnRUaW1lb3V0SWQpO1xuXHQgICAgICB0aGlzLl90cmFuc3BvcnRUaW1lb3V0SWQgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdGhpcy5yZWFkeVN0YXRlID0gU29ja0pTLk9QRU47XG5cdCAgICB0aGlzLnRyYW5zcG9ydCA9IHRoaXMuX3RyYW5zcG9ydC50cmFuc3BvcnROYW1lO1xuXHQgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnb3BlbicpKTtcblx0ICAgIGRlYnVnKCdjb25uZWN0ZWQnLCB0aGlzLnRyYW5zcG9ydCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIFRoZSBzZXJ2ZXIgbWlnaHQgaGF2ZSBiZWVuIHJlc3RhcnRlZCwgYW5kIGxvc3QgdHJhY2sgb2Ygb3VyXG5cdCAgICAvLyBjb25uZWN0aW9uLlxuXHQgICAgdGhpcy5fY2xvc2UoMTAwNiwgJ1NlcnZlciBsb3N0IHNlc3Npb24nKTtcblx0ICB9XG5cdH07XG5cdFxuXHRTb2NrSlMucHJvdG90eXBlLl9jbG9zZSA9IGZ1bmN0aW9uKGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pIHtcblx0ICBkZWJ1ZygnX2Nsb3NlJywgdGhpcy50cmFuc3BvcnQsIGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4sIHRoaXMucmVhZHlTdGF0ZSk7XG5cdCAgdmFyIGZvcmNlRmFpbCA9IGZhbHNlO1xuXHRcblx0ICBpZiAodGhpcy5faXIpIHtcblx0ICAgIGZvcmNlRmFpbCA9IHRydWU7XG5cdCAgICB0aGlzLl9pci5jbG9zZSgpO1xuXHQgICAgdGhpcy5faXIgPSBudWxsO1xuXHQgIH1cblx0ICBpZiAodGhpcy5fdHJhbnNwb3J0KSB7XG5cdCAgICB0aGlzLl90cmFuc3BvcnQuY2xvc2UoKTtcblx0ICAgIHRoaXMuX3RyYW5zcG9ydCA9IG51bGw7XG5cdCAgICB0aGlzLnRyYW5zcG9ydCA9IG51bGw7XG5cdCAgfVxuXHRcblx0ICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBTb2NrSlMuQ0xPU0VEKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yOiBTb2NrSlMgaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQnKTtcblx0ICB9XG5cdFxuXHQgIHRoaXMucmVhZHlTdGF0ZSA9IFNvY2tKUy5DTE9TSU5HO1xuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICB0aGlzLnJlYWR5U3RhdGUgPSBTb2NrSlMuQ0xPU0VEO1xuXHRcblx0ICAgIGlmIChmb3JjZUZhaWwpIHtcblx0ICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnZXJyb3InKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGUgPSBuZXcgQ2xvc2VFdmVudCgnY2xvc2UnKTtcblx0ICAgIGUud2FzQ2xlYW4gPSB3YXNDbGVhbiB8fCBmYWxzZTtcblx0ICAgIGUuY29kZSA9IGNvZGUgfHwgMTAwMDtcblx0ICAgIGUucmVhc29uID0gcmVhc29uO1xuXHRcblx0ICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlKTtcblx0ICAgIHRoaXMub25tZXNzYWdlID0gdGhpcy5vbmNsb3NlID0gdGhpcy5vbmVycm9yID0gbnVsbDtcblx0ICAgIGRlYnVnKCdkaXNjb25uZWN0ZWQnKTtcblx0ICB9LmJpbmQodGhpcyksIDApO1xuXHR9O1xuXHRcblx0Ly8gU2VlOiBodHRwOi8vd3d3LmVyZy5hYmRuLmFjLnVrL35nZXJyaXQvZGNjcC9ub3Rlcy9jY2lkMi9ydG9fZXN0aW1hdG9yL1xuXHQvLyBhbmQgUkZDIDI5ODguXG5cdFNvY2tKUy5wcm90b3R5cGUuY291bnRSVE8gPSBmdW5jdGlvbihydHQpIHtcblx0ICAvLyBJbiBhIGxvY2FsIGVudmlyb25tZW50LCB3aGVuIHVzaW5nIElFOC85IGFuZCB0aGUgYGpzb25wLXBvbGxpbmdgXG5cdCAgLy8gdHJhbnNwb3J0IHRoZSB0aW1lIG5lZWRlZCB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uICh0aGUgdGltZSB0aGF0IHBhc3Ncblx0ICAvLyBmcm9tIHRoZSBvcGVuaW5nIG9mIHRoZSB0cmFuc3BvcnQgdG8gdGhlIGNhbGwgb2YgYF9kaXNwYXRjaE9wZW5gKSBpc1xuXHQgIC8vIGFyb3VuZCAyMDBtc2VjICh0aGUgbG93ZXIgYm91bmQgdXNlZCBpbiB0aGUgYXJ0aWNsZSBhYm92ZSkgYW5kIHRoaXNcblx0ICAvLyBjYXVzZXMgc3B1cmlvdXMgdGltZW91dHMuIEZvciB0aGlzIHJlYXNvbiB3ZSBjYWxjdWxhdGUgYSB2YWx1ZSBzbGlnaHRseVxuXHQgIC8vIGxhcmdlciB0aGFuIHRoYXQgdXNlZCBpbiB0aGUgYXJ0aWNsZS5cblx0ICBpZiAocnR0ID4gMTAwKSB7XG5cdCAgICByZXR1cm4gNCAqIHJ0dDsgLy8gcnRvID4gNDAwbXNlY1xuXHQgIH1cblx0ICByZXR1cm4gMzAwICsgcnR0OyAvLyAzMDBtc2VjIDwgcnRvIDw9IDQwMG1zZWNcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXZhaWxhYmxlVHJhbnNwb3J0cykge1xuXHQgIHRyYW5zcG9ydHMgPSB0cmFuc3BvcnQoYXZhaWxhYmxlVHJhbnNwb3J0cyk7XG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg0NCkoU29ja0pTLCBhdmFpbGFibGVUcmFuc3BvcnRzKTtcblx0ICByZXR1cm4gU29ja0pTO1xuXHR9O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMiksIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIGVzbGludC1kaXNhYmxlICovXG5cdC8qIGpzY3M6IGRpc2FibGUgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gcHVsbGVkIHNwZWNpZmljIHNoaW1zIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltXG5cdFxuXHR2YXIgQXJyYXlQcm90b3R5cGUgPSBBcnJheS5wcm90b3R5cGU7XG5cdHZhciBPYmplY3RQcm90b3R5cGUgPSBPYmplY3QucHJvdG90eXBlO1xuXHR2YXIgRnVuY3Rpb25Qcm90b3R5cGUgPSBGdW5jdGlvbi5wcm90b3R5cGU7XG5cdHZhciBTdHJpbmdQcm90b3R5cGUgPSBTdHJpbmcucHJvdG90eXBlO1xuXHR2YXIgYXJyYXlfc2xpY2UgPSBBcnJheVByb3RvdHlwZS5zbGljZTtcblx0XG5cdHZhciBfdG9TdHJpbmcgPSBPYmplY3RQcm90b3R5cGUudG9TdHJpbmc7XG5cdHZhciBpc0Z1bmN0aW9uID0gZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgcmV0dXJuIE9iamVjdFByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG5cdH07XG5cdHZhciBpc0FycmF5ID0gZnVuY3Rpb24gaXNBcnJheShvYmopIHtcblx0ICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuXHR9O1xuXHR2YXIgaXNTdHJpbmcgPSBmdW5jdGlvbiBpc1N0cmluZyhvYmopIHtcblx0ICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBTdHJpbmddJztcblx0fTtcblx0XG5cdHZhciBzdXBwb3J0c0Rlc2NyaXB0b3JzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3gnLCB7fSk7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9IGNhdGNoIChlKSB7IC8qIHRoaXMgaXMgRVMzICovXG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHR9KCkpO1xuXHRcblx0Ly8gRGVmaW5lIGNvbmZpZ3VyYWJsZSwgd3JpdGFibGUgYW5kIG5vbi1lbnVtZXJhYmxlIHByb3BzXG5cdC8vIGlmIHRoZXkgZG9uJ3QgZXhpc3QuXG5cdHZhciBkZWZpbmVQcm9wZXJ0eTtcblx0aWYgKHN1cHBvcnRzRGVzY3JpcHRvcnMpIHtcblx0ICAgIGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgbWV0aG9kLCBmb3JjZUFzc2lnbikge1xuXHQgICAgICAgIGlmICghZm9yY2VBc3NpZ24gJiYgKG5hbWUgaW4gb2JqZWN0KSkgeyByZXR1cm47IH1cblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBuYW1lLCB7XG5cdCAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICB2YWx1ZTogbWV0aG9kXG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHR9IGVsc2Uge1xuXHQgICAgZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lLCBtZXRob2QsIGZvcmNlQXNzaWduKSB7XG5cdCAgICAgICAgaWYgKCFmb3JjZUFzc2lnbiAmJiAobmFtZSBpbiBvYmplY3QpKSB7IHJldHVybjsgfVxuXHQgICAgICAgIG9iamVjdFtuYW1lXSA9IG1ldGhvZDtcblx0ICAgIH07XG5cdH1cblx0dmFyIGRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAob2JqZWN0LCBtYXAsIGZvcmNlQXNzaWduKSB7XG5cdCAgICBmb3IgKHZhciBuYW1lIGluIG1hcCkge1xuXHQgICAgICAgIGlmIChPYmplY3RQcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtYXAsIG5hbWUpKSB7XG5cdCAgICAgICAgICBkZWZpbmVQcm9wZXJ0eShvYmplY3QsIG5hbWUsIG1hcFtuYW1lXSwgZm9yY2VBc3NpZ24pO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fTtcblx0XG5cdHZhciB0b09iamVjdCA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICBpZiAobyA9PSBudWxsKSB7IC8vIHRoaXMgbWF0Y2hlcyBib3RoIG51bGwgYW5kIHVuZGVmaW5lZFxuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW4ndCBjb252ZXJ0IFwiICsgbyArICcgdG8gb2JqZWN0Jyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gT2JqZWN0KG8pO1xuXHR9O1xuXHRcblx0Ly9cblx0Ly8gVXRpbFxuXHQvLyA9PT09PT1cblx0Ly9cblx0XG5cdC8vIEVTNSA5LjRcblx0Ly8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4OS40XG5cdC8vIGh0dHA6Ly9qc3BlcmYuY29tL3RvLWludGVnZXJcblx0XG5cdGZ1bmN0aW9uIHRvSW50ZWdlcihudW0pIHtcblx0ICAgIHZhciBuID0gK251bTtcblx0ICAgIGlmIChuICE9PSBuKSB7IC8vIGlzTmFOXG5cdCAgICAgICAgbiA9IDA7XG5cdCAgICB9IGVsc2UgaWYgKG4gIT09IDAgJiYgbiAhPT0gKDEgLyAwKSAmJiBuICE9PSAtKDEgLyAwKSkge1xuXHQgICAgICAgIG4gPSAobiA+IDAgfHwgLTEpICogTWF0aC5mbG9vcihNYXRoLmFicyhuKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gVG9VaW50MzIoeCkge1xuXHQgICAgcmV0dXJuIHggPj4+IDA7XG5cdH1cblx0XG5cdC8vXG5cdC8vIEZ1bmN0aW9uXG5cdC8vID09PT09PT09XG5cdC8vXG5cdFxuXHQvLyBFUy01IDE1LjMuNC41XG5cdC8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjMuNC41XG5cdFxuXHRmdW5jdGlvbiBFbXB0eSgpIHt9XG5cdFxuXHRkZWZpbmVQcm9wZXJ0aWVzKEZ1bmN0aW9uUHJvdG90eXBlLCB7XG5cdCAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKHRoYXQpIHsgLy8gLmxlbmd0aCBpcyAxXG5cdCAgICAgICAgLy8gMS4gTGV0IFRhcmdldCBiZSB0aGUgdGhpcyB2YWx1ZS5cblx0ICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcztcblx0ICAgICAgICAvLyAyLiBJZiBJc0NhbGxhYmxlKFRhcmdldCkgaXMgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cblx0ICAgICAgICBpZiAoIWlzRnVuY3Rpb24odGFyZ2V0KSkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBjYWxsZWQgb24gaW5jb21wYXRpYmxlICcgKyB0YXJnZXQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyAzLiBMZXQgQSBiZSBhIG5ldyAocG9zc2libHkgZW1wdHkpIGludGVybmFsIGxpc3Qgb2YgYWxsIG9mIHRoZVxuXHQgICAgICAgIC8vICAgYXJndW1lbnQgdmFsdWVzIHByb3ZpZGVkIGFmdGVyIHRoaXNBcmcgKGFyZzEsIGFyZzIgZXRjKSwgaW4gb3JkZXIuXG5cdCAgICAgICAgLy8gWFhYIHNsaWNlZEFyZ3Mgd2lsbCBzdGFuZCBpbiBmb3IgXCJBXCIgaWYgdXNlZFxuXHQgICAgICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOyAvLyBmb3Igbm9ybWFsIGNhbGxcblx0ICAgICAgICAvLyA0LiBMZXQgRiBiZSBhIG5ldyBuYXRpdmUgRUNNQVNjcmlwdCBvYmplY3QuXG5cdCAgICAgICAgLy8gMTEuIFNldCB0aGUgW1tQcm90b3R5cGVdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIHRvIHRoZSBzdGFuZGFyZFxuXHQgICAgICAgIC8vICAgYnVpbHQtaW4gRnVuY3Rpb24gcHJvdG90eXBlIG9iamVjdCBhcyBzcGVjaWZpZWQgaW4gMTUuMy4zLjEuXG5cdCAgICAgICAgLy8gMTIuIFNldCB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cblx0ICAgICAgICAvLyAgIDE1LjMuNC41LjEuXG5cdCAgICAgICAgLy8gMTMuIFNldCB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIGFzIGRlc2NyaWJlZCBpblxuXHQgICAgICAgIC8vICAgMTUuMy40LjUuMi5cblx0ICAgICAgICAvLyAxNC4gU2V0IHRoZSBbW0hhc0luc3RhbmNlXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cblx0ICAgICAgICAvLyAgIDE1LjMuNC41LjMuXG5cdCAgICAgICAgdmFyIGJpbmRlciA9IGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgYm91bmQpIHtcblx0ICAgICAgICAgICAgICAgIC8vIDE1LjMuNC41LjIgW1tDb25zdHJ1Y3RdXVxuXHQgICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBtZXRob2Qgb2YgYSBmdW5jdGlvbiBvYmplY3QsXG5cdCAgICAgICAgICAgICAgICAvLyBGIHRoYXQgd2FzIGNyZWF0ZWQgdXNpbmcgdGhlIGJpbmQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuXHQgICAgICAgICAgICAgICAgLy8gbGlzdCBvZiBhcmd1bWVudHMgRXh0cmFBcmdzLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcblx0ICAgICAgICAgICAgICAgIC8vIDEuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV1cblx0ICAgICAgICAgICAgICAgIC8vICAgaW50ZXJuYWwgcHJvcGVydHkuXG5cdCAgICAgICAgICAgICAgICAvLyAyLiBJZiB0YXJnZXQgaGFzIG5vIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgbWV0aG9kLCBhXG5cdCAgICAgICAgICAgICAgICAvLyAgIFR5cGVFcnJvciBleGNlcHRpb24gaXMgdGhyb3duLlxuXHQgICAgICAgICAgICAgICAgLy8gMy4gTGV0IGJvdW5kQXJncyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRBcmdzXV0gaW50ZXJuYWxcblx0ICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG5cdCAgICAgICAgICAgICAgICAvLyA0LiBMZXQgYXJncyBiZSBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZVxuXHQgICAgICAgICAgICAgICAgLy8gICBsaXN0IGJvdW5kQXJncyBpbiB0aGUgc2FtZSBvcmRlciBmb2xsb3dlZCBieSB0aGUgc2FtZVxuXHQgICAgICAgICAgICAgICAgLy8gICB2YWx1ZXMgYXMgdGhlIGxpc3QgRXh0cmFBcmdzIGluIHRoZSBzYW1lIG9yZGVyLlxuXHQgICAgICAgICAgICAgICAgLy8gNS4gUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbFxuXHQgICAgICAgICAgICAgICAgLy8gICBtZXRob2Qgb2YgdGFyZ2V0IHByb3ZpZGluZyBhcmdzIGFzIHRoZSBhcmd1bWVudHMuXG5cdFxuXHQgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRhcmdldC5hcHBseShcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLFxuXHQgICAgICAgICAgICAgICAgICAgIGFyZ3MuY29uY2F0KGFycmF5X3NsaWNlLmNhbGwoYXJndW1lbnRzKSlcblx0ICAgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgICAgICBpZiAoT2JqZWN0KHJlc3VsdCkgPT09IHJlc3VsdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcblx0XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAvLyAxNS4zLjQuNS4xIFtbQ2FsbF1dXG5cdCAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2Qgb2YgYSBmdW5jdGlvbiBvYmplY3QsIEYsXG5cdCAgICAgICAgICAgICAgICAvLyB3aGljaCB3YXMgY3JlYXRlZCB1c2luZyB0aGUgYmluZCBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhXG5cdCAgICAgICAgICAgICAgICAvLyB0aGlzIHZhbHVlIGFuZCBhIGxpc3Qgb2YgYXJndW1lbnRzIEV4dHJhQXJncywgdGhlIGZvbGxvd2luZ1xuXHQgICAgICAgICAgICAgICAgLy8gc3RlcHMgYXJlIHRha2VuOlxuXHQgICAgICAgICAgICAgICAgLy8gMS4gTGV0IGJvdW5kQXJncyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRBcmdzXV0gaW50ZXJuYWxcblx0ICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG5cdCAgICAgICAgICAgICAgICAvLyAyLiBMZXQgYm91bmRUaGlzIGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tCb3VuZFRoaXNdXSBpbnRlcm5hbFxuXHQgICAgICAgICAgICAgICAgLy8gICBwcm9wZXJ0eS5cblx0ICAgICAgICAgICAgICAgIC8vIDMuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV0gaW50ZXJuYWxcblx0ICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG5cdCAgICAgICAgICAgICAgICAvLyA0LiBMZXQgYXJncyBiZSBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZVxuXHQgICAgICAgICAgICAgICAgLy8gICBsaXN0IGJvdW5kQXJncyBpbiB0aGUgc2FtZSBvcmRlciBmb2xsb3dlZCBieSB0aGUgc2FtZVxuXHQgICAgICAgICAgICAgICAgLy8gICB2YWx1ZXMgYXMgdGhlIGxpc3QgRXh0cmFBcmdzIGluIHRoZSBzYW1lIG9yZGVyLlxuXHQgICAgICAgICAgICAgICAgLy8gNS4gUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgbWV0aG9kXG5cdCAgICAgICAgICAgICAgICAvLyAgIG9mIHRhcmdldCBwcm92aWRpbmcgYm91bmRUaGlzIGFzIHRoZSB0aGlzIHZhbHVlIGFuZFxuXHQgICAgICAgICAgICAgICAgLy8gICBwcm92aWRpbmcgYXJncyBhcyB0aGUgYXJndW1lbnRzLlxuXHRcblx0ICAgICAgICAgICAgICAgIC8vIGVxdWl2OiB0YXJnZXQuY2FsbCh0aGlzLCAuLi5ib3VuZEFyZ3MsIC4uLmFyZ3MpXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0LmFwcGx5KFxuXHQgICAgICAgICAgICAgICAgICAgIHRoYXQsXG5cdCAgICAgICAgICAgICAgICAgICAgYXJncy5jb25jYXQoYXJyYXlfc2xpY2UuY2FsbChhcmd1bWVudHMpKVxuXHQgICAgICAgICAgICAgICAgKTtcblx0XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgLy8gMTUuIElmIHRoZSBbW0NsYXNzXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgVGFyZ2V0IGlzIFwiRnVuY3Rpb25cIiwgdGhlblxuXHQgICAgICAgIC8vICAgICBhLiBMZXQgTCBiZSB0aGUgbGVuZ3RoIHByb3BlcnR5IG9mIFRhcmdldCBtaW51cyB0aGUgbGVuZ3RoIG9mIEEuXG5cdCAgICAgICAgLy8gICAgIGIuIFNldCB0aGUgbGVuZ3RoIG93biBwcm9wZXJ0eSBvZiBGIHRvIGVpdGhlciAwIG9yIEwsIHdoaWNoZXZlciBpc1xuXHQgICAgICAgIC8vICAgICAgIGxhcmdlci5cblx0ICAgICAgICAvLyAxNi4gRWxzZSBzZXQgdGhlIGxlbmd0aCBvd24gcHJvcGVydHkgb2YgRiB0byAwLlxuXHRcblx0ICAgICAgICB2YXIgYm91bmRMZW5ndGggPSBNYXRoLm1heCgwLCB0YXJnZXQubGVuZ3RoIC0gYXJncy5sZW5ndGgpO1xuXHRcblx0ICAgICAgICAvLyAxNy4gU2V0IHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBsZW5ndGggb3duIHByb3BlcnR5IG9mIEYgdG8gdGhlIHZhbHVlc1xuXHQgICAgICAgIC8vICAgc3BlY2lmaWVkIGluIDE1LjMuNS4xLlxuXHQgICAgICAgIHZhciBib3VuZEFyZ3MgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvdW5kTGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYm91bmRBcmdzLnB1c2goJyQnICsgaSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBYWFggQnVpbGQgYSBkeW5hbWljIGZ1bmN0aW9uIHdpdGggZGVzaXJlZCBhbW91bnQgb2YgYXJndW1lbnRzIGlzIHRoZSBvbmx5XG5cdCAgICAgICAgLy8gd2F5IHRvIHNldCB0aGUgbGVuZ3RoIHByb3BlcnR5IG9mIGEgZnVuY3Rpb24uXG5cdCAgICAgICAgLy8gSW4gZW52aXJvbm1lbnRzIHdoZXJlIENvbnRlbnQgU2VjdXJpdHkgUG9saWNpZXMgZW5hYmxlZCAoQ2hyb21lIGV4dGVuc2lvbnMsXG5cdCAgICAgICAgLy8gZm9yIGV4LikgYWxsIHVzZSBvZiBldmFsIG9yIEZ1bmN0aW9uIGNvc3RydWN0b3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblx0ICAgICAgICAvLyBIb3dldmVyIGluIGFsbCBvZiB0aGVzZSBlbnZpcm9ubWVudHMgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgZXhpc3RzXG5cdCAgICAgICAgLy8gYW5kIHNvIHRoaXMgY29kZSB3aWxsIG5ldmVyIGJlIGV4ZWN1dGVkLlxuXHQgICAgICAgIHZhciBib3VuZCA9IEZ1bmN0aW9uKCdiaW5kZXInLCAncmV0dXJuIGZ1bmN0aW9uICgnICsgYm91bmRBcmdzLmpvaW4oJywnKSArICcpeyByZXR1cm4gYmluZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0nKShiaW5kZXIpO1xuXHRcblx0ICAgICAgICBpZiAodGFyZ2V0LnByb3RvdHlwZSkge1xuXHQgICAgICAgICAgICBFbXB0eS5wcm90b3R5cGUgPSB0YXJnZXQucHJvdG90eXBlO1xuXHQgICAgICAgICAgICBib3VuZC5wcm90b3R5cGUgPSBuZXcgRW1wdHkoKTtcblx0ICAgICAgICAgICAgLy8gQ2xlYW4gdXAgZGFuZ2xpbmcgcmVmZXJlbmNlcy5cblx0ICAgICAgICAgICAgRW1wdHkucHJvdG90eXBlID0gbnVsbDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIFRPRE9cblx0ICAgICAgICAvLyAxOC4gU2V0IHRoZSBbW0V4dGVuc2libGVdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIHRvIHRydWUuXG5cdFxuXHQgICAgICAgIC8vIFRPRE9cblx0ICAgICAgICAvLyAxOS4gTGV0IHRocm93ZXIgYmUgdGhlIFtbVGhyb3dUeXBlRXJyb3JdXSBmdW5jdGlvbiBPYmplY3QgKDEzLjIuMykuXG5cdCAgICAgICAgLy8gMjAuIENhbGwgdGhlIFtbRGVmaW5lT3duUHJvcGVydHldXSBpbnRlcm5hbCBtZXRob2Qgb2YgRiB3aXRoXG5cdCAgICAgICAgLy8gICBhcmd1bWVudHMgXCJjYWxsZXJcIiwgUHJvcGVydHlEZXNjcmlwdG9yIHtbW0dldF1dOiB0aHJvd2VyLCBbW1NldF1dOlxuXHQgICAgICAgIC8vICAgdGhyb3dlciwgW1tFbnVtZXJhYmxlXV06IGZhbHNlLCBbW0NvbmZpZ3VyYWJsZV1dOiBmYWxzZX0sIGFuZFxuXHQgICAgICAgIC8vICAgZmFsc2UuXG5cdCAgICAgICAgLy8gMjEuIENhbGwgdGhlIFtbRGVmaW5lT3duUHJvcGVydHldXSBpbnRlcm5hbCBtZXRob2Qgb2YgRiB3aXRoXG5cdCAgICAgICAgLy8gICBhcmd1bWVudHMgXCJhcmd1bWVudHNcIiwgUHJvcGVydHlEZXNjcmlwdG9yIHtbW0dldF1dOiB0aHJvd2VyLFxuXHQgICAgICAgIC8vICAgW1tTZXRdXTogdGhyb3dlciwgW1tFbnVtZXJhYmxlXV06IGZhbHNlLCBbW0NvbmZpZ3VyYWJsZV1dOiBmYWxzZX0sXG5cdCAgICAgICAgLy8gICBhbmQgZmFsc2UuXG5cdFxuXHQgICAgICAgIC8vIFRPRE9cblx0ICAgICAgICAvLyBOT1RFIEZ1bmN0aW9uIG9iamVjdHMgY3JlYXRlZCB1c2luZyBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBkbyBub3Rcblx0ICAgICAgICAvLyBoYXZlIGEgcHJvdG90eXBlIHByb3BlcnR5IG9yIHRoZSBbW0NvZGVdXSwgW1tGb3JtYWxQYXJhbWV0ZXJzXV0sIGFuZFxuXHQgICAgICAgIC8vIFtbU2NvcGVdXSBpbnRlcm5hbCBwcm9wZXJ0aWVzLlxuXHQgICAgICAgIC8vIFhYWCBjYW4ndCBkZWxldGUgcHJvdG90eXBlIGluIHB1cmUtanMuXG5cdFxuXHQgICAgICAgIC8vIDIyLiBSZXR1cm4gRi5cblx0ICAgICAgICByZXR1cm4gYm91bmQ7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0Ly9cblx0Ly8gQXJyYXlcblx0Ly8gPT09PT1cblx0Ly9cblx0XG5cdC8vIEVTNSAxNS40LjMuMlxuXHQvLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjMuMlxuXHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pc0FycmF5XG5cdGRlZmluZVByb3BlcnRpZXMoQXJyYXksIHsgaXNBcnJheTogaXNBcnJheSB9KTtcblx0XG5cdFxuXHR2YXIgYm94ZWRTdHJpbmcgPSBPYmplY3QoJ2EnKTtcblx0dmFyIHNwbGl0U3RyaW5nID0gYm94ZWRTdHJpbmdbMF0gIT09ICdhJyB8fCAhKDAgaW4gYm94ZWRTdHJpbmcpO1xuXHRcblx0dmFyIHByb3Blcmx5Qm94ZXNDb250ZXh0ID0gZnVuY3Rpb24gcHJvcGVybHlCb3hlZChtZXRob2QpIHtcblx0ICAgIC8vIENoZWNrIG5vZGUgMC42LjIxIGJ1ZyB3aGVyZSB0aGlyZCBwYXJhbWV0ZXIgaXMgbm90IGJveGVkXG5cdCAgICB2YXIgcHJvcGVybHlCb3hlc05vblN0cmljdCA9IHRydWU7XG5cdCAgICB2YXIgcHJvcGVybHlCb3hlc1N0cmljdCA9IHRydWU7XG5cdCAgICBpZiAobWV0aG9kKSB7XG5cdCAgICAgICAgbWV0aG9kLmNhbGwoJ2ZvbycsIGZ1bmN0aW9uIChfLCBfXywgY29udGV4dCkge1xuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnKSB7IHByb3Blcmx5Qm94ZXNOb25TdHJpY3QgPSBmYWxzZTsgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBtZXRob2QuY2FsbChbMV0sIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXHQgICAgICAgICAgICBwcm9wZXJseUJveGVzU3RyaWN0ID0gdHlwZW9mIHRoaXMgPT09ICdzdHJpbmcnO1xuXHQgICAgICAgIH0sICd4Jyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gISFtZXRob2QgJiYgcHJvcGVybHlCb3hlc05vblN0cmljdCAmJiBwcm9wZXJseUJveGVzU3RyaWN0O1xuXHR9O1xuXHRcblx0ZGVmaW5lUHJvcGVydGllcyhBcnJheVByb3RvdHlwZSwge1xuXHQgICAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChmdW4gLyosIHRoaXNwKi8pIHtcblx0ICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksXG5cdCAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBpc1N0cmluZyh0aGlzKSA/IHRoaXMuc3BsaXQoJycpIDogb2JqZWN0LFxuXHQgICAgICAgICAgICB0aGlzcCA9IGFyZ3VtZW50c1sxXSxcblx0ICAgICAgICAgICAgaSA9IC0xLFxuXHQgICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMDtcblx0XG5cdCAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cblx0ICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuKSkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7IC8vIFRPRE8gbWVzc2FnZVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgd2hpbGUgKCsraSA8IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBpZiAoaSBpbiBzZWxmKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBJbnZva2UgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGggY2FsbCwgcGFzc2luZyBhcmd1bWVudHM6XG5cdCAgICAgICAgICAgICAgICAvLyBjb250ZXh0LCBwcm9wZXJ0eSB2YWx1ZSwgcHJvcGVydHkga2V5LCB0aGlzQXJnIG9iamVjdFxuXHQgICAgICAgICAgICAgICAgLy8gY29udGV4dFxuXHQgICAgICAgICAgICAgICAgZnVuLmNhbGwodGhpc3AsIHNlbGZbaV0sIGksIG9iamVjdCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH0sICFwcm9wZXJseUJveGVzQ29udGV4dChBcnJheVByb3RvdHlwZS5mb3JFYWNoKSk7XG5cdFxuXHQvLyBFUzUgMTUuNC40LjE0XG5cdC8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xNFxuXHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pbmRleE9mXG5cdHZhciBoYXNGaXJlZm94MkluZGV4T2ZCdWcgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiAmJiBbMCwgMV0uaW5kZXhPZigxLCAyKSAhPT0gLTE7XG5cdGRlZmluZVByb3BlcnRpZXMoQXJyYXlQcm90b3R5cGUsIHtcblx0ICAgIGluZGV4T2Y6IGZ1bmN0aW9uIGluZGV4T2Yoc291Z2h0IC8qLCBmcm9tSW5kZXggKi8gKSB7XG5cdCAgICAgICAgdmFyIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBpc1N0cmluZyh0aGlzKSA/IHRoaXMuc3BsaXQoJycpIDogdG9PYmplY3QodGhpcyksXG5cdCAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwO1xuXHRcblx0ICAgICAgICBpZiAoIWxlbmd0aCkge1xuXHQgICAgICAgICAgICByZXR1cm4gLTE7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgICAgIGkgPSB0b0ludGVnZXIoYXJndW1lbnRzWzFdKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIGhhbmRsZSBuZWdhdGl2ZSBpbmRpY2VzXG5cdCAgICAgICAgaSA9IGkgPj0gMCA/IGkgOiBNYXRoLm1heCgwLCBsZW5ndGggKyBpKTtcblx0ICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGlmIChpIGluIHNlbGYgJiYgc2VsZltpXSA9PT0gc291Z2h0KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gaTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gLTE7XG5cdCAgICB9XG5cdH0sIGhhc0ZpcmVmb3gySW5kZXhPZkJ1Zyk7XG5cdFxuXHQvL1xuXHQvLyBTdHJpbmdcblx0Ly8gPT09PT09XG5cdC8vXG5cdFxuXHQvLyBFUzUgMTUuNS40LjE0XG5cdC8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjUuNC4xNFxuXHRcblx0Ly8gW2J1Z2ZpeCwgSUUgbHQgOSwgZmlyZWZveCA0LCBLb25xdWVyb3IsIE9wZXJhLCBvYnNjdXJlIGJyb3dzZXJzXVxuXHQvLyBNYW55IGJyb3dzZXJzIGRvIG5vdCBzcGxpdCBwcm9wZXJseSB3aXRoIHJlZ3VsYXIgZXhwcmVzc2lvbnMgb3IgdGhleVxuXHQvLyBkbyBub3QgcGVyZm9ybSB0aGUgc3BsaXQgY29ycmVjdGx5IHVuZGVyIG9ic2N1cmUgY29uZGl0aW9ucy5cblx0Ly8gU2VlIGh0dHA6Ly9ibG9nLnN0ZXZlbmxldml0aGFuLmNvbS9hcmNoaXZlcy9jcm9zcy1icm93c2VyLXNwbGl0XG5cdC8vIEkndmUgdGVzdGVkIGluIG1hbnkgYnJvd3NlcnMgYW5kIHRoaXMgc2VlbXMgdG8gY292ZXIgdGhlIGRldmlhbnQgb25lczpcblx0Ly8gICAgJ2FiJy5zcGxpdCgvKD86YWIpKi8pIHNob3VsZCBiZSBbXCJcIiwgXCJcIl0sIG5vdCBbXCJcIl1cblx0Ly8gICAgJy4nLnNwbGl0KC8oLj8pKC4/KS8pIHNob3VsZCBiZSBbXCJcIiwgXCIuXCIsIFwiXCIsIFwiXCJdLCBub3QgW1wiXCIsIFwiXCJdXG5cdC8vICAgICd0ZXNzdCcuc3BsaXQoLyhzKSovKSBzaG91bGQgYmUgW1widFwiLCB1bmRlZmluZWQsIFwiZVwiLCBcInNcIiwgXCJ0XCJdLCBub3Rcblx0Ly8gICAgICAgW3VuZGVmaW5lZCwgXCJ0XCIsIHVuZGVmaW5lZCwgXCJlXCIsIC4uLl1cblx0Ly8gICAgJycuc3BsaXQoLy4/Lykgc2hvdWxkIGJlIFtdLCBub3QgW1wiXCJdXG5cdC8vICAgICcuJy5zcGxpdCgvKCkoKS8pIHNob3VsZCBiZSBbXCIuXCJdLCBub3QgW1wiXCIsIFwiXCIsIFwiLlwiXVxuXHRcblx0dmFyIHN0cmluZ19zcGxpdCA9IFN0cmluZ1Byb3RvdHlwZS5zcGxpdDtcblx0aWYgKFxuXHQgICAgJ2FiJy5zcGxpdCgvKD86YWIpKi8pLmxlbmd0aCAhPT0gMiB8fFxuXHQgICAgJy4nLnNwbGl0KC8oLj8pKC4/KS8pLmxlbmd0aCAhPT0gNCB8fFxuXHQgICAgJ3Rlc3N0Jy5zcGxpdCgvKHMpKi8pWzFdID09PSAndCcgfHxcblx0ICAgICd0ZXN0Jy5zcGxpdCgvKD86KS8sIC0xKS5sZW5ndGggIT09IDQgfHxcblx0ICAgICcnLnNwbGl0KC8uPy8pLmxlbmd0aCB8fFxuXHQgICAgJy4nLnNwbGl0KC8oKSgpLykubGVuZ3RoID4gMVxuXHQpIHtcblx0ICAgIChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGNvbXBsaWFudEV4ZWNOcGNnID0gLygpPz8vLmV4ZWMoJycpWzFdID09PSB2b2lkIDA7IC8vIE5QQ0c6IG5vbnBhcnRpY2lwYXRpbmcgY2FwdHVyaW5nIGdyb3VwXG5cdFxuXHQgICAgICAgIFN0cmluZ1Byb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIChzZXBhcmF0b3IsIGxpbWl0KSB7XG5cdCAgICAgICAgICAgIHZhciBzdHJpbmcgPSB0aGlzO1xuXHQgICAgICAgICAgICBpZiAoc2VwYXJhdG9yID09PSB2b2lkIDAgJiYgbGltaXQgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBbXTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgLy8gSWYgYHNlcGFyYXRvcmAgaXMgbm90IGEgcmVnZXgsIHVzZSBuYXRpdmUgc3BsaXRcblx0ICAgICAgICAgICAgaWYgKF90b1N0cmluZy5jYWxsKHNlcGFyYXRvcikgIT09ICdbb2JqZWN0IFJlZ0V4cF0nKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nX3NwbGl0LmNhbGwodGhpcywgc2VwYXJhdG9yLCBsaW1pdCk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHZhciBvdXRwdXQgPSBbXSxcblx0ICAgICAgICAgICAgICAgIGZsYWdzID0gKHNlcGFyYXRvci5pZ25vcmVDYXNlID8gJ2knIDogJycpICtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5tdWx0aWxpbmUgID8gJ20nIDogJycpICtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5leHRlbmRlZCAgID8gJ3gnIDogJycpICsgLy8gUHJvcG9zZWQgZm9yIEVTNlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLnN0aWNreSAgICAgPyAneScgOiAnJyksIC8vIEZpcmVmb3ggMytcblx0ICAgICAgICAgICAgICAgIGxhc3RMYXN0SW5kZXggPSAwLFxuXHQgICAgICAgICAgICAgICAgLy8gTWFrZSBgZ2xvYmFsYCBhbmQgYXZvaWQgYGxhc3RJbmRleGAgaXNzdWVzIGJ5IHdvcmtpbmcgd2l0aCBhIGNvcHlcblx0ICAgICAgICAgICAgICAgIHNlcGFyYXRvcjIsIG1hdGNoLCBsYXN0SW5kZXgsIGxhc3RMZW5ndGg7XG5cdCAgICAgICAgICAgIHNlcGFyYXRvciA9IG5ldyBSZWdFeHAoc2VwYXJhdG9yLnNvdXJjZSwgZmxhZ3MgKyAnZycpO1xuXHQgICAgICAgICAgICBzdHJpbmcgKz0gJyc7IC8vIFR5cGUtY29udmVydFxuXHQgICAgICAgICAgICBpZiAoIWNvbXBsaWFudEV4ZWNOcGNnKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBEb2Vzbid0IG5lZWQgZmxhZ3MgZ3ksIGJ1dCB0aGV5IGRvbid0IGh1cnRcblx0ICAgICAgICAgICAgICAgIHNlcGFyYXRvcjIgPSBuZXcgUmVnRXhwKCdeJyArIHNlcGFyYXRvci5zb3VyY2UgKyAnJCg/IVxcXFxzKScsIGZsYWdzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAvKiBWYWx1ZXMgZm9yIGBsaW1pdGAsIHBlciB0aGUgc3BlYzpcblx0ICAgICAgICAgICAgICogSWYgdW5kZWZpbmVkOiA0Mjk0OTY3Mjk1IC8vIE1hdGgucG93KDIsIDMyKSAtIDFcblx0ICAgICAgICAgICAgICogSWYgMCwgSW5maW5pdHksIG9yIE5hTjogMFxuXHQgICAgICAgICAgICAgKiBJZiBwb3NpdGl2ZSBudW1iZXI6IGxpbWl0ID0gTWF0aC5mbG9vcihsaW1pdCk7IGlmIChsaW1pdCA+IDQyOTQ5NjcyOTUpIGxpbWl0IC09IDQyOTQ5NjcyOTY7XG5cdCAgICAgICAgICAgICAqIElmIG5lZ2F0aXZlIG51bWJlcjogNDI5NDk2NzI5NiAtIE1hdGguZmxvb3IoTWF0aC5hYnMobGltaXQpKVxuXHQgICAgICAgICAgICAgKiBJZiBvdGhlcjogVHlwZS1jb252ZXJ0LCB0aGVuIHVzZSB0aGUgYWJvdmUgcnVsZXNcblx0ICAgICAgICAgICAgICovXG5cdCAgICAgICAgICAgIGxpbWl0ID0gbGltaXQgPT09IHZvaWQgMCA/XG5cdCAgICAgICAgICAgICAgICAtMSA+Pj4gMCA6IC8vIE1hdGgucG93KDIsIDMyKSAtIDFcblx0ICAgICAgICAgICAgICAgIFRvVWludDMyKGxpbWl0KTtcblx0ICAgICAgICAgICAgd2hpbGUgKG1hdGNoID0gc2VwYXJhdG9yLmV4ZWMoc3RyaW5nKSkge1xuXHQgICAgICAgICAgICAgICAgLy8gYHNlcGFyYXRvci5sYXN0SW5kZXhgIGlzIG5vdCByZWxpYWJsZSBjcm9zcy1icm93c2VyXG5cdCAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgIGlmIChsYXN0SW5kZXggPiBsYXN0TGFzdEluZGV4KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgsIG1hdGNoLmluZGV4KSk7XG5cdCAgICAgICAgICAgICAgICAgICAgLy8gRml4IGJyb3dzZXJzIHdob3NlIGBleGVjYCBtZXRob2RzIGRvbid0IGNvbnNpc3RlbnRseSByZXR1cm4gYHVuZGVmaW5lZGAgZm9yXG5cdCAgICAgICAgICAgICAgICAgICAgLy8gbm9ucGFydGljaXBhdGluZyBjYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFjb21wbGlhbnRFeGVjTnBjZyAmJiBtYXRjaC5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzBdLnJlcGxhY2Uoc2VwYXJhdG9yMiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMjsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXSA9PT0gdm9pZCAwKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoW2ldID0gdm9pZCAwO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaC5sZW5ndGggPiAxICYmIG1hdGNoLmluZGV4IDwgc3RyaW5nLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBBcnJheVByb3RvdHlwZS5wdXNoLmFwcGx5KG91dHB1dCwgbWF0Y2guc2xpY2UoMSkpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBsYXN0TGVuZ3RoID0gbWF0Y2hbMF0ubGVuZ3RoO1xuXHQgICAgICAgICAgICAgICAgICAgIGxhc3RMYXN0SW5kZXggPSBsYXN0SW5kZXg7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPj0gbGltaXQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgaWYgKHNlcGFyYXRvci5sYXN0SW5kZXggPT09IG1hdGNoLmluZGV4KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2VwYXJhdG9yLmxhc3RJbmRleCsrOyAvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wXG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGxhc3RMYXN0SW5kZXggPT09IHN0cmluZy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChsYXN0TGVuZ3RoIHx8ICFzZXBhcmF0b3IudGVzdCgnJykpIHtcblx0ICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaCgnJyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChzdHJpbmcuc2xpY2UobGFzdExhc3RJbmRleCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBvdXRwdXQubGVuZ3RoID4gbGltaXQgPyBvdXRwdXQuc2xpY2UoMCwgbGltaXQpIDogb3V0cHV0O1xuXHQgICAgICAgIH07XG5cdCAgICB9KCkpO1xuXHRcblx0Ly8gW2J1Z2ZpeCwgY2hyb21lXVxuXHQvLyBJZiBzZXBhcmF0b3IgaXMgdW5kZWZpbmVkLCB0aGVuIHRoZSByZXN1bHQgYXJyYXkgY29udGFpbnMganVzdCBvbmUgU3RyaW5nLFxuXHQvLyB3aGljaCBpcyB0aGUgdGhpcyB2YWx1ZSAoY29udmVydGVkIHRvIGEgU3RyaW5nKS4gSWYgbGltaXQgaXMgbm90IHVuZGVmaW5lZCxcblx0Ly8gdGhlbiB0aGUgb3V0cHV0IGFycmF5IGlzIHRydW5jYXRlZCBzbyB0aGF0IGl0IGNvbnRhaW5zIG5vIG1vcmUgdGhhbiBsaW1pdFxuXHQvLyBlbGVtZW50cy5cblx0Ly8gXCIwXCIuc3BsaXQodW5kZWZpbmVkLCAwKSAtPiBbXVxuXHR9IGVsc2UgaWYgKCcwJy5zcGxpdCh2b2lkIDAsIDApLmxlbmd0aCkge1xuXHQgICAgU3RyaW5nUHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQoc2VwYXJhdG9yLCBsaW1pdCkge1xuXHQgICAgICAgIGlmIChzZXBhcmF0b3IgPT09IHZvaWQgMCAmJiBsaW1pdCA9PT0gMCkgeyByZXR1cm4gW107IH1cblx0ICAgICAgICByZXR1cm4gc3RyaW5nX3NwbGl0LmNhbGwodGhpcywgc2VwYXJhdG9yLCBsaW1pdCk7XG5cdCAgICB9O1xuXHR9XG5cdFxuXHQvLyBFUzUgMTUuNS40LjIwXG5cdC8vIHdoaXRlc3BhY2UgZnJvbTogaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS41LjQuMjBcblx0dmFyIHdzID0gJ1xceDA5XFx4MEFcXHgwQlxceDBDXFx4MERcXHgyMFxceEEwXFx1MTY4MFxcdTE4MEVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzJyArXG5cdCAgICAnXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwQVxcdTIwMkZcXHUyMDVGXFx1MzAwMFxcdTIwMjgnICtcblx0ICAgICdcXHUyMDI5XFx1RkVGRic7XG5cdHZhciB6ZXJvV2lkdGggPSAnXFx1MjAwYic7XG5cdHZhciB3c1JlZ2V4Q2hhcnMgPSAnWycgKyB3cyArICddJztcblx0dmFyIHRyaW1CZWdpblJlZ2V4cCA9IG5ldyBSZWdFeHAoJ14nICsgd3NSZWdleENoYXJzICsgd3NSZWdleENoYXJzICsgJyonKTtcblx0dmFyIHRyaW1FbmRSZWdleHAgPSBuZXcgUmVnRXhwKHdzUmVnZXhDaGFycyArIHdzUmVnZXhDaGFycyArICcqJCcpO1xuXHR2YXIgaGFzVHJpbVdoaXRlc3BhY2VCdWcgPSBTdHJpbmdQcm90b3R5cGUudHJpbSAmJiAod3MudHJpbSgpIHx8ICF6ZXJvV2lkdGgudHJpbSgpKTtcblx0ZGVmaW5lUHJvcGVydGllcyhTdHJpbmdQcm90b3R5cGUsIHtcblx0ICAgIC8vIGh0dHA6Ly9ibG9nLnN0ZXZlbmxldml0aGFuLmNvbS9hcmNoaXZlcy9mYXN0ZXItdHJpbS1qYXZhc2NyaXB0XG5cdCAgICAvLyBodHRwOi8vcGVyZmVjdGlvbmtpbGxzLmNvbS93aGl0ZXNwYWNlLWRldmlhdGlvbnMvXG5cdCAgICB0cmltOiBmdW5jdGlvbiB0cmltKCkge1xuXHQgICAgICAgIGlmICh0aGlzID09PSB2b2lkIDAgfHwgdGhpcyA9PT0gbnVsbCkge1xuXHQgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FuJ3QgY29udmVydCBcIiArIHRoaXMgKyAnIHRvIG9iamVjdCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gU3RyaW5nKHRoaXMpLnJlcGxhY2UodHJpbUJlZ2luUmVnZXhwLCAnJykucmVwbGFjZSh0cmltRW5kUmVnZXhwLCAnJyk7XG5cdCAgICB9XG5cdH0sIGhhc1RyaW1XaGl0ZXNwYWNlQnVnKTtcblx0XG5cdC8vIEVDTUEtMjYyLCAzcmQgQi4yLjNcblx0Ly8gTm90IGFuIEVDTUFTY3JpcHQgc3RhbmRhcmQsIGFsdGhvdWdoIEVDTUFTY3JpcHQgM3JkIEVkaXRpb24gaGFzIGFcblx0Ly8gbm9uLW5vcm1hdGl2ZSBzZWN0aW9uIHN1Z2dlc3RpbmcgdW5pZm9ybSBzZW1hbnRpY3MgYW5kIGl0IHNob3VsZCBiZVxuXHQvLyBub3JtYWxpemVkIGFjcm9zcyBhbGwgYnJvd3NlcnNcblx0Ly8gW2J1Z2ZpeCwgSUUgbHQgOV0gSUUgPCA5IHN1YnN0cigpIHdpdGggbmVnYXRpdmUgdmFsdWUgbm90IHdvcmtpbmcgaW4gSUVcblx0dmFyIHN0cmluZ19zdWJzdHIgPSBTdHJpbmdQcm90b3R5cGUuc3Vic3RyO1xuXHR2YXIgaGFzTmVnYXRpdmVTdWJzdHJCdWcgPSAnJy5zdWJzdHIgJiYgJzBiJy5zdWJzdHIoLTEpICE9PSAnYic7XG5cdGRlZmluZVByb3BlcnRpZXMoU3RyaW5nUHJvdG90eXBlLCB7XG5cdCAgICBzdWJzdHI6IGZ1bmN0aW9uIHN1YnN0cihzdGFydCwgbGVuZ3RoKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0cmluZ19zdWJzdHIuY2FsbChcblx0ICAgICAgICAgICAgdGhpcyxcblx0ICAgICAgICAgICAgc3RhcnQgPCAwID8gKChzdGFydCA9IHRoaXMubGVuZ3RoICsgc3RhcnQpIDwgMCA/IDAgOiBzdGFydCkgOiBzdGFydCxcblx0ICAgICAgICAgICAgbGVuZ3RoXG5cdCAgICAgICAgKTtcblx0ICAgIH1cblx0fSwgaGFzTmVnYXRpdmVTdWJzdHJCdWcpO1xuXG5cbi8qKiovIH0sXG4vKiA0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBbXG5cdCAgLy8gc3RyZWFtaW5nIHRyYW5zcG9ydHNcblx0ICBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KVxuXHQsIF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdCwgX193ZWJwYWNrX3JlcXVpcmVfXygyOSlcblx0LCBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KVxuXHQsIF9fd2VicGFja19yZXF1aXJlX18oMTUpKF9fd2VicGFja19yZXF1aXJlX18oMjUpKVxuXHRcblx0ICAvLyBwb2xsaW5nIHRyYW5zcG9ydHNcblx0LCBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KVxuXHQsIF9fd2VicGFja19yZXF1aXJlX18oMTUpKF9fd2VicGFja19yZXF1aXJlX18oMjYpKVxuXHQsIF9fd2VicGFja19yZXF1aXJlX18oMzApXG5cdCwgX193ZWJwYWNrX3JlcXVpcmVfXyg2MClcblx0LCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KShfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSlcblx0LCBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKVxuXHRdO1xuXG5cbi8qKiovIH0sXG4vKiA1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge21vZHVsZS5leHBvcnRzID0gZ2xvYmFsLldlYlNvY2tldCB8fCBnbG9iYWwuTW96V2ViU29ja2V0O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBUaGUgc2ltcGxlc3QgYW5kIG1vc3Qgcm9idXN0IHRyYW5zcG9ydCwgdXNpbmcgdGhlIHdlbGwta25vdyBjcm9zc1xuXHQvLyBkb21haW4gaGFjayAtIEpTT05QLiBUaGlzIHRyYW5zcG9ydCBpcyBxdWl0ZSBpbmVmZmljaWVudCAtIG9uZVxuXHQvLyBtZXNzYWdlIGNvdWxkIHVzZSB1cCB0byBvbmUgaHR0cCByZXF1ZXN0LiBCdXQgYXQgbGVhc3QgaXQgd29ya3MgYWxtb3N0XG5cdC8vIGV2ZXJ5d2hlcmUuXG5cdC8vIEtub3duIGxpbWl0YXRpb25zOlxuXHQvLyAgIG8geW91IHdpbGwgZ2V0IGEgc3Bpbm5pbmcgY3Vyc29yXG5cdC8vICAgbyBmb3IgS29ucXVlcm9yIGEgZHVtYiB0aW1lciBpcyBuZWVkZWQgdG8gZGV0ZWN0IGVycm9yc1xuXHRcblx0dmFyIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVxuXHQgICwgU2VuZGVyUmVjZWl2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KVxuXHQgICwgSnNvbnBSZWNlaXZlciA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpXG5cdCAgLCBqc29ucFNlbmRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpXG5cdCAgO1xuXHRcblx0ZnVuY3Rpb24gSnNvblBUcmFuc3BvcnQodHJhbnNVcmwpIHtcblx0ICBpZiAoIUpzb25QVHJhbnNwb3J0LmVuYWJsZWQoKSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG5cdCAgfVxuXHQgIFNlbmRlclJlY2VpdmVyLmNhbGwodGhpcywgdHJhbnNVcmwsICcvanNvbnAnLCBqc29ucFNlbmRlciwgSnNvbnBSZWNlaXZlcik7XG5cdH1cblx0XG5cdGluaGVyaXRzKEpzb25QVHJhbnNwb3J0LCBTZW5kZXJSZWNlaXZlcik7XG5cdFxuXHRKc29uUFRyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuICEhZ2xvYmFsLmRvY3VtZW50O1xuXHR9O1xuXHRcblx0SnNvblBUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICdqc29ucC1wb2xsaW5nJztcblx0SnNvblBUcmFuc3BvcnQucm91bmRUcmlwcyA9IDE7XG5cdEpzb25QVHJhbnNwb3J0Lm5lZWRCb2R5ID0gdHJ1ZTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gSnNvblBUcmFuc3BvcnQ7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiA1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCBFdmVudEVtaXR0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLkV2ZW50RW1pdHRlclxuXHQgIDtcblx0XG5cdHZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgZGVidWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCdzb2NranMtY2xpZW50OmJ1ZmZlcmVkLXNlbmRlcicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBCdWZmZXJlZFNlbmRlcih1cmwsIHNlbmRlcikge1xuXHQgIGRlYnVnKHVybCk7XG5cdCAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cdCAgdGhpcy5zZW5kQnVmZmVyID0gW107XG5cdCAgdGhpcy5zZW5kZXIgPSBzZW5kZXI7XG5cdCAgdGhpcy51cmwgPSB1cmw7XG5cdH1cblx0XG5cdGluaGVyaXRzKEJ1ZmZlcmVkU2VuZGVyLCBFdmVudEVtaXR0ZXIpO1xuXHRcblx0QnVmZmVyZWRTZW5kZXIucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG5cdCAgZGVidWcoJ3NlbmQnLCBtZXNzYWdlKTtcblx0ICB0aGlzLnNlbmRCdWZmZXIucHVzaChtZXNzYWdlKTtcblx0ICBpZiAoIXRoaXMuc2VuZFN0b3ApIHtcblx0ICAgIHRoaXMuc2VuZFNjaGVkdWxlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gRm9yIHBvbGxpbmcgdHJhbnNwb3J0cyBpbiBhIHNpdHVhdGlvbiB3aGVuIGluIHRoZSBtZXNzYWdlIGNhbGxiYWNrLFxuXHQvLyBuZXcgbWVzc2FnZSBpcyBiZWluZyBzZW5kLiBJZiB0aGUgc2VuZGluZyBjb25uZWN0aW9uIHdhcyBzdGFydGVkXG5cdC8vIGJlZm9yZSByZWNlaXZpbmcgb25lLCBpdCBpcyBwb3NzaWJsZSB0byBzYXR1cmF0ZSB0aGUgbmV0d29yayBhbmRcblx0Ly8gdGltZW91dCBkdWUgdG8gdGhlIGxhY2sgb2YgcmVjZWl2aW5nIHNvY2tldC4gVG8gYXZvaWQgdGhhdCB3ZSBkZWxheVxuXHQvLyBzZW5kaW5nIG1lc3NhZ2VzIGJ5IHNvbWUgc21hbGwgdGltZSwgaW4gb3JkZXIgdG8gbGV0IHJlY2VpdmluZ1xuXHQvLyBjb25uZWN0aW9uIGJlIHN0YXJ0ZWQgYmVmb3JlaGFuZC4gVGhpcyBpcyBvbmx5IGEgaGFsZm1lYXN1cmUgYW5kXG5cdC8vIGRvZXMgbm90IGZpeCB0aGUgYmlnIHByb2JsZW0sIGJ1dCBpdCBkb2VzIG1ha2UgdGhlIHRlc3RzIGdvIG1vcmVcblx0Ly8gc3RhYmxlIG9uIHNsb3cgbmV0d29ya3MuXG5cdEJ1ZmZlcmVkU2VuZGVyLnByb3RvdHlwZS5zZW5kU2NoZWR1bGVXYWl0ID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ3NlbmRTY2hlZHVsZVdhaXQnKTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIHRyZWY7XG5cdCAgdGhpcy5zZW5kU3RvcCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgZGVidWcoJ3NlbmRTdG9wJyk7XG5cdCAgICBzZWxmLnNlbmRTdG9wID0gbnVsbDtcblx0ICAgIGNsZWFyVGltZW91dCh0cmVmKTtcblx0ICB9O1xuXHQgIHRyZWYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgZGVidWcoJ3RpbWVvdXQnKTtcblx0ICAgIHNlbGYuc2VuZFN0b3AgPSBudWxsO1xuXHQgICAgc2VsZi5zZW5kU2NoZWR1bGUoKTtcblx0ICB9LCAyNSk7XG5cdH07XG5cdFxuXHRCdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuc2VuZFNjaGVkdWxlID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ3NlbmRTY2hlZHVsZScsIHRoaXMuc2VuZEJ1ZmZlci5sZW5ndGgpO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBpZiAodGhpcy5zZW5kQnVmZmVyLmxlbmd0aCA+IDApIHtcblx0ICAgIHZhciBwYXlsb2FkID0gJ1snICsgdGhpcy5zZW5kQnVmZmVyLmpvaW4oJywnKSArICddJztcblx0ICAgIHRoaXMuc2VuZFN0b3AgPSB0aGlzLnNlbmRlcih0aGlzLnVybCwgcGF5bG9hZCwgZnVuY3Rpb24oZXJyKSB7XG5cdCAgICAgIHNlbGYuc2VuZFN0b3AgPSBudWxsO1xuXHQgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgZGVidWcoJ2Vycm9yJywgZXJyKTtcblx0ICAgICAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgZXJyLmNvZGUgfHwgMTAwNiwgJ1NlbmRpbmcgZXJyb3I6ICcgKyBlcnIpO1xuXHQgICAgICAgIHNlbGYuX2NsZWFudXAoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZWxmLnNlbmRTY2hlZHVsZVdhaXQoKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICB0aGlzLnNlbmRCdWZmZXIgPSBbXTtcblx0ICB9XG5cdH07XG5cdFxuXHRCdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcblx0ICBkZWJ1ZygnX2NsZWFudXAnKTtcblx0ICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHR9O1xuXHRcblx0QnVmZmVyZWRTZW5kZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcblx0ICBkZWJ1Zygnc3RvcCcpO1xuXHQgIHRoaXMuX2NsZWFudXAoKTtcblx0ICBpZiAodGhpcy5zZW5kU3RvcCkge1xuXHQgICAgdGhpcy5zZW5kU3RvcCgpO1xuXHQgICAgdGhpcy5zZW5kU3RvcCA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBCdWZmZXJlZFNlbmRlcjtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKSlcblxuLyoqKi8gfSxcbi8qIDUzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIEV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMykuRXZlbnRFbWl0dGVyXG5cdCAgO1xuXHRcblx0dmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBkZWJ1ZyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoJ3NvY2tqcy1jbGllbnQ6cG9sbGluZycpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBQb2xsaW5nKFJlY2VpdmVyLCByZWNlaXZlVXJsLCBBamF4T2JqZWN0KSB7XG5cdCAgZGVidWcocmVjZWl2ZVVybCk7XG5cdCAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cdCAgdGhpcy5SZWNlaXZlciA9IFJlY2VpdmVyO1xuXHQgIHRoaXMucmVjZWl2ZVVybCA9IHJlY2VpdmVVcmw7XG5cdCAgdGhpcy5BamF4T2JqZWN0ID0gQWpheE9iamVjdDtcblx0ICB0aGlzLl9zY2hlZHVsZVJlY2VpdmVyKCk7XG5cdH1cblx0XG5cdGluaGVyaXRzKFBvbGxpbmcsIEV2ZW50RW1pdHRlcik7XG5cdFxuXHRQb2xsaW5nLnByb3RvdHlwZS5fc2NoZWR1bGVSZWNlaXZlciA9IGZ1bmN0aW9uKCkge1xuXHQgIGRlYnVnKCdfc2NoZWR1bGVSZWNlaXZlcicpO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgcG9sbCA9IHRoaXMucG9sbCA9IG5ldyB0aGlzLlJlY2VpdmVyKHRoaXMucmVjZWl2ZVVybCwgdGhpcy5BamF4T2JqZWN0KTtcblx0XG5cdCAgcG9sbC5vbignbWVzc2FnZScsIGZ1bmN0aW9uKG1zZykge1xuXHQgICAgZGVidWcoJ21lc3NhZ2UnLCBtc2cpO1xuXHQgICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgbXNnKTtcblx0ICB9KTtcblx0XG5cdCAgcG9sbC5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uKGNvZGUsIHJlYXNvbikge1xuXHQgICAgZGVidWcoJ2Nsb3NlJywgY29kZSwgcmVhc29uLCBzZWxmLnBvbGxJc0Nsb3NpbmcpO1xuXHQgICAgc2VsZi5wb2xsID0gcG9sbCA9IG51bGw7XG5cdFxuXHQgICAgaWYgKCFzZWxmLnBvbGxJc0Nsb3NpbmcpIHtcblx0ICAgICAgaWYgKHJlYXNvbiA9PT0gJ25ldHdvcmsnKSB7XG5cdCAgICAgICAgc2VsZi5fc2NoZWR1bGVSZWNlaXZlcigpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNlbGYuZW1pdCgnY2xvc2UnLCBjb2RlIHx8IDEwMDYsIHJlYXNvbik7XG5cdCAgICAgICAgc2VsZi5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0UG9sbGluZy5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbigpIHtcblx0ICBkZWJ1ZygnYWJvcnQnKTtcblx0ICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgIHRoaXMucG9sbElzQ2xvc2luZyA9IHRydWU7XG5cdCAgaWYgKHRoaXMucG9sbCkge1xuXHQgICAgdGhpcy5wb2xsLmFib3J0KCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBQb2xsaW5nO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMikpKVxuXG4vKioqLyB9LFxuLyogNTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVxuXHQgICwgRXZlbnRFbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKS5FdmVudEVtaXR0ZXJcblx0ICAsIEV2ZW50U291cmNlRHJpdmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNClcblx0ICA7XG5cdFxuXHR2YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIGRlYnVnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgnc29ja2pzLWNsaWVudDpyZWNlaXZlcjpldmVudHNvdXJjZScpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBFdmVudFNvdXJjZVJlY2VpdmVyKHVybCkge1xuXHQgIGRlYnVnKHVybCk7XG5cdCAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cdFxuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgZXMgPSB0aGlzLmVzID0gbmV3IEV2ZW50U291cmNlRHJpdmVyKHVybCk7XG5cdCAgZXMub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuXHQgICAgZGVidWcoJ21lc3NhZ2UnLCBlLmRhdGEpO1xuXHQgICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgZGVjb2RlVVJJKGUuZGF0YSkpO1xuXHQgIH07XG5cdCAgZXMub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcblx0ICAgIGRlYnVnKCdlcnJvcicsIGVzLnJlYWR5U3RhdGUsIGUpO1xuXHQgICAgLy8gRVMgb24gcmVjb25uZWN0aW9uIGhhcyByZWFkeVN0YXRlID0gMCBvciAxLlxuXHQgICAgLy8gb24gbmV0d29yayBlcnJvciBpdCdzIENMT1NFRCA9IDJcblx0ICAgIHZhciByZWFzb24gPSAoZXMucmVhZHlTdGF0ZSAhPT0gMiA/ICduZXR3b3JrJyA6ICdwZXJtYW5lbnQnKTtcblx0ICAgIHNlbGYuX2NsZWFudXAoKTtcblx0ICAgIHNlbGYuX2Nsb3NlKHJlYXNvbik7XG5cdCAgfTtcblx0fVxuXHRcblx0aW5oZXJpdHMoRXZlbnRTb3VyY2VSZWNlaXZlciwgRXZlbnRFbWl0dGVyKTtcblx0XG5cdEV2ZW50U291cmNlUmVjZWl2ZXIucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ2Fib3J0Jyk7XG5cdCAgdGhpcy5fY2xlYW51cCgpO1xuXHQgIHRoaXMuX2Nsb3NlKCd1c2VyJyk7XG5cdH07XG5cdFxuXHRFdmVudFNvdXJjZVJlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuXHQgIGRlYnVnKCdjbGVhbnVwJyk7XG5cdCAgdmFyIGVzID0gdGhpcy5lcztcblx0ICBpZiAoZXMpIHtcblx0ICAgIGVzLm9ubWVzc2FnZSA9IGVzLm9uZXJyb3IgPSBudWxsO1xuXHQgICAgZXMuY2xvc2UoKTtcblx0ICAgIHRoaXMuZXMgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdEV2ZW50U291cmNlUmVjZWl2ZXIucHJvdG90eXBlLl9jbG9zZSA9IGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgIGRlYnVnKCdjbG9zZScsIHJlYXNvbik7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIC8vIFNhZmFyaSBhbmQgY2hyb21lIDwgMTUgY3Jhc2ggaWYgd2UgY2xvc2Ugd2luZG93IGJlZm9yZVxuXHQgIC8vIHdhaXRpbmcgZm9yIEVTIGNsZWFudXAuIFNlZTpcblx0ICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9ODkxNTVcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgc2VsZi5lbWl0KCdjbG9zZScsIG51bGwsIHJlYXNvbik7XG5cdCAgICBzZWxmLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgIH0sIDIwMCk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEV2ZW50U291cmNlUmVjZWl2ZXI7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygyKSkpXG5cbi8qKiovIH0sXG4vKiA1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIGdsb2JhbCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIGlmcmFtZVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSlcblx0ICAsIHVybFV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KVxuXHQgICwgRXZlbnRFbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKS5FdmVudEVtaXR0ZXJcblx0ICAsIHJhbmRvbSA9IF9fd2VicGFja19yZXF1aXJlX18oOClcblx0ICA7XG5cdFxuXHR2YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIGRlYnVnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgnc29ja2pzLWNsaWVudDpyZWNlaXZlcjpodG1sZmlsZScpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBIdG1sZmlsZVJlY2VpdmVyKHVybCkge1xuXHQgIGRlYnVnKHVybCk7XG5cdCAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIGlmcmFtZVV0aWxzLnBvbGx1dGVHbG9iYWxOYW1lc3BhY2UoKTtcblx0XG5cdCAgdGhpcy5pZCA9ICdhJyArIHJhbmRvbS5zdHJpbmcoNik7XG5cdCAgdXJsID0gdXJsVXRpbHMuYWRkUXVlcnkodXJsLCAnYz0nICsgZGVjb2RlVVJJQ29tcG9uZW50KGlmcmFtZVV0aWxzLldQcmVmaXggKyAnLicgKyB0aGlzLmlkKSk7XG5cdFxuXHQgIGRlYnVnKCd1c2luZyBodG1sZmlsZScsIEh0bWxmaWxlUmVjZWl2ZXIuaHRtbGZpbGVFbmFibGVkKTtcblx0ICB2YXIgY29uc3RydWN0RnVuYyA9IEh0bWxmaWxlUmVjZWl2ZXIuaHRtbGZpbGVFbmFibGVkID9cblx0ICAgICAgaWZyYW1lVXRpbHMuY3JlYXRlSHRtbGZpbGUgOiBpZnJhbWVVdGlscy5jcmVhdGVJZnJhbWU7XG5cdFxuXHQgIGdsb2JhbFtpZnJhbWVVdGlscy5XUHJlZml4XVt0aGlzLmlkXSA9IHtcblx0ICAgIHN0YXJ0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgZGVidWcoJ3N0YXJ0Jyk7XG5cdCAgICAgIHNlbGYuaWZyYW1lT2JqLmxvYWRlZCgpO1xuXHQgICAgfVxuXHQgICwgbWVzc2FnZTogZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkZWJ1ZygnbWVzc2FnZScsIGRhdGEpO1xuXHQgICAgICBzZWxmLmVtaXQoJ21lc3NhZ2UnLCBkYXRhKTtcblx0ICAgIH1cblx0ICAsIHN0b3A6IGZ1bmN0aW9uKCkge1xuXHQgICAgICBkZWJ1Zygnc3RvcCcpO1xuXHQgICAgICBzZWxmLl9jbGVhbnVwKCk7XG5cdCAgICAgIHNlbGYuX2Nsb3NlKCduZXR3b3JrJyk7XG5cdCAgICB9XG5cdCAgfTtcblx0ICB0aGlzLmlmcmFtZU9iaiA9IGNvbnN0cnVjdEZ1bmModXJsLCBmdW5jdGlvbigpIHtcblx0ICAgIGRlYnVnKCdjYWxsYmFjaycpO1xuXHQgICAgc2VsZi5fY2xlYW51cCgpO1xuXHQgICAgc2VsZi5fY2xvc2UoJ3Blcm1hbmVudCcpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRpbmhlcml0cyhIdG1sZmlsZVJlY2VpdmVyLCBFdmVudEVtaXR0ZXIpO1xuXHRcblx0SHRtbGZpbGVSZWNlaXZlci5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbigpIHtcblx0ICBkZWJ1ZygnYWJvcnQnKTtcblx0ICB0aGlzLl9jbGVhbnVwKCk7XG5cdCAgdGhpcy5fY2xvc2UoJ3VzZXInKTtcblx0fTtcblx0XG5cdEh0bWxmaWxlUmVjZWl2ZXIucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ19jbGVhbnVwJyk7XG5cdCAgaWYgKHRoaXMuaWZyYW1lT2JqKSB7XG5cdCAgICB0aGlzLmlmcmFtZU9iai5jbGVhbnVwKCk7XG5cdCAgICB0aGlzLmlmcmFtZU9iaiA9IG51bGw7XG5cdCAgfVxuXHQgIGRlbGV0ZSBnbG9iYWxbaWZyYW1lVXRpbHMuV1ByZWZpeF1bdGhpcy5pZF07XG5cdH07XG5cdFxuXHRIdG1sZmlsZVJlY2VpdmVyLnByb3RvdHlwZS5fY2xvc2UgPSBmdW5jdGlvbihyZWFzb24pIHtcblx0ICBkZWJ1ZygnX2Nsb3NlJywgcmVhc29uKTtcblx0ICB0aGlzLmVtaXQoJ2Nsb3NlJywgbnVsbCwgcmVhc29uKTtcblx0ICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHR9O1xuXHRcblx0SHRtbGZpbGVSZWNlaXZlci5odG1sZmlsZUVuYWJsZWQgPSBmYWxzZTtcblx0XG5cdC8vIG9iZnVzY2F0ZSB0byBhdm9pZCBmaXJld2FsbHNcblx0dmFyIGF4byA9IFsnQWN0aXZlJ10uY29uY2F0KCdPYmplY3QnKS5qb2luKCdYJyk7XG5cdGlmIChheG8gaW4gZ2xvYmFsKSB7XG5cdCAgdHJ5IHtcblx0ICAgIEh0bWxmaWxlUmVjZWl2ZXIuaHRtbGZpbGVFbmFibGVkID0gISFuZXcgZ2xvYmFsW2F4b10oJ2h0bWxmaWxlJyk7XG5cdCAgfSBjYXRjaCAoeCkge1xuXHQgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuXHQgIH1cblx0fVxuXHRcblx0SHRtbGZpbGVSZWNlaXZlci5lbmFibGVkID0gSHRtbGZpbGVSZWNlaXZlci5odG1sZmlsZUVuYWJsZWQgfHwgaWZyYW1lVXRpbHMuaWZyYW1lRW5hYmxlZDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gSHRtbGZpbGVSZWNlaXZlcjtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2VzcywgZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSlcblx0ICAsIHJhbmRvbSA9IF9fd2VicGFja19yZXF1aXJlX18oOClcblx0ICAsIGJyb3dzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKVxuXHQgICwgdXJsVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdCAgLCBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIEV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMykuRXZlbnRFbWl0dGVyXG5cdCAgO1xuXHRcblx0dmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBkZWJ1ZyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoJ3NvY2tqcy1jbGllbnQ6cmVjZWl2ZXI6anNvbnAnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gSnNvbnBSZWNlaXZlcih1cmwpIHtcblx0ICBkZWJ1Zyh1cmwpO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblx0XG5cdCAgdXRpbHMucG9sbHV0ZUdsb2JhbE5hbWVzcGFjZSgpO1xuXHRcblx0ICB0aGlzLmlkID0gJ2EnICsgcmFuZG9tLnN0cmluZyg2KTtcblx0ICB2YXIgdXJsV2l0aElkID0gdXJsVXRpbHMuYWRkUXVlcnkodXJsLCAnYz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHV0aWxzLldQcmVmaXggKyAnLicgKyB0aGlzLmlkKSk7XG5cdFxuXHQgIGdsb2JhbFt1dGlscy5XUHJlZml4XVt0aGlzLmlkXSA9IHRoaXMuX2NhbGxiYWNrLmJpbmQodGhpcyk7XG5cdCAgdGhpcy5fY3JlYXRlU2NyaXB0KHVybFdpdGhJZCk7XG5cdFxuXHQgIC8vIEZhbGxiYWNrIG1vc3RseSBmb3IgS29ucXVlcm9yIC0gc3R1cGlkIHRpbWVyLCAzNSBzZWNvbmRzIHNoYWxsIGJlIHBsZW50eS5cblx0ICB0aGlzLnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICBkZWJ1ZygndGltZW91dCcpO1xuXHQgICAgc2VsZi5fYWJvcnQobmV3IEVycm9yKCdKU09OUCBzY3JpcHQgbG9hZGVkIGFibm9ybWFsbHkgKHRpbWVvdXQpJykpO1xuXHQgIH0sIEpzb25wUmVjZWl2ZXIudGltZW91dCk7XG5cdH1cblx0XG5cdGluaGVyaXRzKEpzb25wUmVjZWl2ZXIsIEV2ZW50RW1pdHRlcik7XG5cdFxuXHRKc29ucFJlY2VpdmVyLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuXHQgIGRlYnVnKCdhYm9ydCcpO1xuXHQgIGlmIChnbG9iYWxbdXRpbHMuV1ByZWZpeF1bdGhpcy5pZF0pIHtcblx0ICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ0pTT05QIHVzZXIgYWJvcnRlZCByZWFkJyk7XG5cdCAgICBlcnIuY29kZSA9IDEwMDA7XG5cdCAgICB0aGlzLl9hYm9ydChlcnIpO1xuXHQgIH1cblx0fTtcblx0XG5cdEpzb25wUmVjZWl2ZXIudGltZW91dCA9IDM1MDAwO1xuXHRKc29ucFJlY2VpdmVyLnNjcmlwdEVycm9yVGltZW91dCA9IDEwMDA7XG5cdFxuXHRKc29ucFJlY2VpdmVyLnByb3RvdHlwZS5fY2FsbGJhY2sgPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgZGVidWcoJ19jYWxsYmFjaycsIGRhdGEpO1xuXHQgIHRoaXMuX2NsZWFudXAoKTtcblx0XG5cdCAgaWYgKHRoaXMuYWJvcnRpbmcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIGlmIChkYXRhKSB7XG5cdCAgICBkZWJ1ZygnbWVzc2FnZScsIGRhdGEpO1xuXHQgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgZGF0YSk7XG5cdCAgfVxuXHQgIHRoaXMuZW1pdCgnY2xvc2UnLCBudWxsLCAnbmV0d29yaycpO1xuXHQgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdH07XG5cdFxuXHRKc29ucFJlY2VpdmVyLnByb3RvdHlwZS5fYWJvcnQgPSBmdW5jdGlvbihlcnIpIHtcblx0ICBkZWJ1ZygnX2Fib3J0JywgZXJyKTtcblx0ICB0aGlzLl9jbGVhbnVwKCk7XG5cdCAgdGhpcy5hYm9ydGluZyA9IHRydWU7XG5cdCAgdGhpcy5lbWl0KCdjbG9zZScsIGVyci5jb2RlLCBlcnIubWVzc2FnZSk7XG5cdCAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0fTtcblx0XG5cdEpzb25wUmVjZWl2ZXIucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ19jbGVhbnVwJyk7XG5cdCAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKTtcblx0ICBpZiAodGhpcy5zY3JpcHQyKSB7XG5cdCAgICB0aGlzLnNjcmlwdDIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNjcmlwdDIpO1xuXHQgICAgdGhpcy5zY3JpcHQyID0gbnVsbDtcblx0ICB9XG5cdCAgaWYgKHRoaXMuc2NyaXB0KSB7XG5cdCAgICB2YXIgc2NyaXB0ID0gdGhpcy5zY3JpcHQ7XG5cdCAgICAvLyBVbmZvcnR1bmF0ZWx5LCB5b3UgY2FuJ3QgcmVhbGx5IGFib3J0IHNjcmlwdCBsb2FkaW5nIG9mXG5cdCAgICAvLyB0aGUgc2NyaXB0LlxuXHQgICAgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0ICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBzY3JpcHQub25lcnJvciA9XG5cdCAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IHNjcmlwdC5vbmNsaWNrID0gbnVsbDtcblx0ICAgIHRoaXMuc2NyaXB0ID0gbnVsbDtcblx0ICB9XG5cdCAgZGVsZXRlIGdsb2JhbFt1dGlscy5XUHJlZml4XVt0aGlzLmlkXTtcblx0fTtcblx0XG5cdEpzb25wUmVjZWl2ZXIucHJvdG90eXBlLl9zY3JpcHRFcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgIGRlYnVnKCdfc2NyaXB0RXJyb3InKTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgaWYgKHRoaXMuZXJyb3JUaW1lcikge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgdGhpcy5lcnJvclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgIGlmICghc2VsZi5sb2FkZWRPa2F5KSB7XG5cdCAgICAgIHNlbGYuX2Fib3J0KG5ldyBFcnJvcignSlNPTlAgc2NyaXB0IGxvYWRlZCBhYm5vcm1hbGx5IChvbmVycm9yKScpKTtcblx0ICAgIH1cblx0ICB9LCBKc29ucFJlY2VpdmVyLnNjcmlwdEVycm9yVGltZW91dCk7XG5cdH07XG5cdFxuXHRKc29ucFJlY2VpdmVyLnByb3RvdHlwZS5fY3JlYXRlU2NyaXB0ID0gZnVuY3Rpb24odXJsKSB7XG5cdCAgZGVidWcoJ19jcmVhdGVTY3JpcHQnLCB1cmwpO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgc2NyaXB0ID0gdGhpcy5zY3JpcHQgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdCAgdmFyIHNjcmlwdDI7ICAvLyBPcGVyYSBzeW5jaHJvbm91cyBsb2FkIHRyaWNrLlxuXHRcblx0ICBzY3JpcHQuaWQgPSAnYScgKyByYW5kb20uc3RyaW5nKDgpO1xuXHQgIHNjcmlwdC5zcmMgPSB1cmw7XG5cdCAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0Jztcblx0ICBzY3JpcHQuY2hhcnNldCA9ICdVVEYtOCc7XG5cdCAgc2NyaXB0Lm9uZXJyb3IgPSB0aGlzLl9zY3JpcHRFcnJvci5iaW5kKHRoaXMpO1xuXHQgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgIGRlYnVnKCdvbmxvYWQnKTtcblx0ICAgIHNlbGYuX2Fib3J0KG5ldyBFcnJvcignSlNPTlAgc2NyaXB0IGxvYWRlZCBhYm5vcm1hbGx5IChvbmxvYWQpJykpO1xuXHQgIH07XG5cdFxuXHQgIC8vIElFOSBmaXJlcyAnZXJyb3InIGV2ZW50IGFmdGVyIG9ucmVhZHlzdGF0ZWNoYW5nZSBvciBiZWZvcmUsIGluIHJhbmRvbSBvcmRlci5cblx0ICAvLyBVc2UgbG9hZGVkT2theSB0byBkZXRlcm1pbmUgaWYgYWN0dWFsbHkgZXJyb3JlZFxuXHQgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcblx0ICAgIGRlYnVnKCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBzY3JpcHQucmVhZHlTdGF0ZSk7XG5cdCAgICBpZiAoL2xvYWRlZHxjbG9zZWQvLnRlc3Qoc2NyaXB0LnJlYWR5U3RhdGUpKSB7XG5cdCAgICAgIGlmIChzY3JpcHQgJiYgc2NyaXB0Lmh0bWxGb3IgJiYgc2NyaXB0Lm9uY2xpY2spIHtcblx0ICAgICAgICBzZWxmLmxvYWRlZE9rYXkgPSB0cnVlO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAvLyBJbiBJRSwgYWN0dWFsbHkgZXhlY3V0ZSB0aGUgc2NyaXB0LlxuXHQgICAgICAgICAgc2NyaXB0Lm9uY2xpY2soKTtcblx0ICAgICAgICB9IGNhdGNoICh4KSB7XG5cdCAgICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChzY3JpcHQpIHtcblx0ICAgICAgICBzZWxmLl9hYm9ydChuZXcgRXJyb3IoJ0pTT05QIHNjcmlwdCBsb2FkZWQgYWJub3JtYWxseSAob25yZWFkeXN0YXRlY2hhbmdlKScpKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdCAgLy8gSUU6IGV2ZW50L2h0bWxGb3Ivb25jbGljayB0cmljay5cblx0ICAvLyBPbmUgY2FuJ3QgcmVseSBvbiBwcm9wZXIgb3JkZXIgZm9yIG9ucmVhZHlzdGF0ZWNoYW5nZS4gSW4gb3JkZXIgdG9cblx0ICAvLyBtYWtlIHN1cmUsIHNldCBhICdodG1sRm9yJyBhbmQgJ2V2ZW50JyBwcm9wZXJ0aWVzLCBzbyB0aGF0XG5cdCAgLy8gc2NyaXB0IGNvZGUgd2lsbCBiZSBpbnN0YWxsZWQgYXMgJ29uY2xpY2snIGhhbmRsZXIgZm9yIHRoZVxuXHQgIC8vIHNjcmlwdCBvYmplY3QuIExhdGVyLCBvbnJlYWR5c3RhdGVjaGFuZ2UsIG1hbnVhbGx5IGV4ZWN1dGUgdGhpc1xuXHQgIC8vIGNvZGUuIEZGIGFuZCBDaHJvbWUgZG9lc24ndCB3b3JrIHdpdGggJ2V2ZW50JyBhbmQgJ2h0bWxGb3InXG5cdCAgLy8gc2V0LiBGb3IgcmVmZXJlbmNlIHNlZTpcblx0ICAvLyAgIGh0dHA6Ly9qYXVib3VyZy5uZXQvMjAxMC8wNy9sb2FkaW5nLXNjcmlwdC1hcy1vbmNsaWNrLWhhbmRsZXItb2YuaHRtbFxuXHQgIC8vIEFsc28sIHJlYWQgb24gdGhhdCBhYm91dCBzY3JpcHQgb3JkZXJpbmc6XG5cdCAgLy8gICBodHRwOi8vd2lraS53aGF0d2cub3JnL3dpa2kvRHluYW1pY19TY3JpcHRfRXhlY3V0aW9uX09yZGVyXG5cdCAgaWYgKHR5cGVvZiBzY3JpcHQuYXN5bmMgPT09ICd1bmRlZmluZWQnICYmIGdsb2JhbC5kb2N1bWVudC5hdHRhY2hFdmVudCkge1xuXHQgICAgLy8gQWNjb3JkaW5nIHRvIG1vemlsbGEgZG9jcywgaW4gcmVjZW50IGJyb3dzZXJzIHNjcmlwdC5hc3luYyBkZWZhdWx0c1xuXHQgICAgLy8gdG8gJ3RydWUnLCBzbyB3ZSBtYXkgdXNlIGl0IHRvIGRldGVjdCBhIGdvb2QgYnJvd3Nlcjpcblx0ICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0hUTUwvRWxlbWVudC9zY3JpcHRcblx0ICAgIGlmICghYnJvd3Nlci5pc09wZXJhKCkpIHtcblx0ICAgICAgLy8gTmFpdmVseSBhc3N1bWUgd2UncmUgaW4gSUVcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBzY3JpcHQuaHRtbEZvciA9IHNjcmlwdC5pZDtcblx0ICAgICAgICBzY3JpcHQuZXZlbnQgPSAnb25jbGljayc7XG5cdCAgICAgIH0gY2F0Y2ggKHgpIHtcblx0ICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG5cdCAgICAgIH1cblx0ICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIE9wZXJhLCBzZWNvbmQgc3luYyBzY3JpcHQgaGFja1xuXHQgICAgICBzY3JpcHQyID0gdGhpcy5zY3JpcHQyID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHQgICAgICBzY3JpcHQyLnRleHQgPSBcInRyeXt2YXIgYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdcIiArIHNjcmlwdC5pZCArIFwiJyk7IGlmKGEpYS5vbmVycm9yKCk7fWNhdGNoKHgpe307XCI7XG5cdCAgICAgIHNjcmlwdC5hc3luYyA9IHNjcmlwdDIuYXN5bmMgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBzY3JpcHQuYXN5bmMgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuXHQgIH1cblx0XG5cdCAgdmFyIGhlYWQgPSBnbG9iYWwuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcblx0ICBoZWFkLmluc2VydEJlZm9yZShzY3JpcHQsIGhlYWQuZmlyc3RDaGlsZCk7XG5cdCAgaWYgKHNjcmlwdDIpIHtcblx0ICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHNjcmlwdDIsIGhlYWQuZmlyc3RDaGlsZCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBKc29ucFJlY2VpdmVyO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMiksIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgcmFuZG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KVxuXHQgICwgdXJsVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdCAgO1xuXHRcblx0dmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBkZWJ1ZyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoJ3NvY2tqcy1jbGllbnQ6c2VuZGVyOmpzb25wJyk7XG5cdH1cblx0XG5cdHZhciBmb3JtLCBhcmVhO1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlSWZyYW1lKGlkKSB7XG5cdCAgZGVidWcoJ2NyZWF0ZUlmcmFtZScsIGlkKTtcblx0ICB0cnkge1xuXHQgICAgLy8gaWU2IGR5bmFtaWMgaWZyYW1lcyB3aXRoIHRhcmdldD1cIlwiIHN1cHBvcnQgKHRoYW5rcyBDaHJpcyBMYW1iYWNoZXIpXG5cdCAgICByZXR1cm4gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJzxpZnJhbWUgbmFtZT1cIicgKyBpZCArICdcIj4nKTtcblx0ICB9IGNhdGNoICh4KSB7XG5cdCAgICB2YXIgaWZyYW1lID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXHQgICAgaWZyYW1lLm5hbWUgPSBpZDtcblx0ICAgIHJldHVybiBpZnJhbWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVGb3JtKCkge1xuXHQgIGRlYnVnKCdjcmVhdGVGb3JtJyk7XG5cdCAgZm9ybSA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG5cdCAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHQgIGZvcm0uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXHQgIGZvcm0ubWV0aG9kID0gJ1BPU1QnO1xuXHQgIGZvcm0uZW5jdHlwZSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xuXHQgIGZvcm0uYWNjZXB0Q2hhcnNldCA9ICdVVEYtOCc7XG5cdFxuXHQgIGFyZWEgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcblx0ICBhcmVhLm5hbWUgPSAnZCc7XG5cdCAgZm9ybS5hcHBlbmRDaGlsZChhcmVhKTtcblx0XG5cdCAgZ2xvYmFsLmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXJsLCBwYXlsb2FkLCBjYWxsYmFjaykge1xuXHQgIGRlYnVnKHVybCwgcGF5bG9hZCk7XG5cdCAgaWYgKCFmb3JtKSB7XG5cdCAgICBjcmVhdGVGb3JtKCk7XG5cdCAgfVxuXHQgIHZhciBpZCA9ICdhJyArIHJhbmRvbS5zdHJpbmcoOCk7XG5cdCAgZm9ybS50YXJnZXQgPSBpZDtcblx0ICBmb3JtLmFjdGlvbiA9IHVybFV0aWxzLmFkZFF1ZXJ5KHVybFV0aWxzLmFkZFBhdGgodXJsLCAnL2pzb25wX3NlbmQnKSwgJ2k9JyArIGlkKTtcblx0XG5cdCAgdmFyIGlmcmFtZSA9IGNyZWF0ZUlmcmFtZShpZCk7XG5cdCAgaWZyYW1lLmlkID0gaWQ7XG5cdCAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdCAgZm9ybS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuXHRcblx0ICB0cnkge1xuXHQgICAgYXJlYS52YWx1ZSA9IHBheWxvYWQ7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgLy8gc2VyaW91c2x5IGJyb2tlbiBicm93c2VycyBnZXQgaGVyZVxuXHQgIH1cblx0ICBmb3JtLnN1Ym1pdCgpO1xuXHRcblx0ICB2YXIgY29tcGxldGVkID0gZnVuY3Rpb24oZXJyKSB7XG5cdCAgICBkZWJ1ZygnY29tcGxldGVkJywgaWQsIGVycik7XG5cdCAgICBpZiAoIWlmcmFtZS5vbmVycm9yKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGlmcmFtZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBpZnJhbWUub25lcnJvciA9IGlmcmFtZS5vbmxvYWQgPSBudWxsO1xuXHQgICAgLy8gT3BlcmEgbWluaSBkb2Vzbid0IGxpa2UgaWYgd2UgR0MgaWZyYW1lXG5cdCAgICAvLyBpbW1lZGlhdGVseSwgdGh1cyB0aGlzIHRpbWVvdXQuXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICBkZWJ1ZygnY2xlYW5pbmcgdXAnLCBpZCk7XG5cdCAgICAgIGlmcmFtZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG5cdCAgICAgIGlmcmFtZSA9IG51bGw7XG5cdCAgICB9LCA1MDApO1xuXHQgICAgYXJlYS52YWx1ZSA9ICcnO1xuXHQgICAgLy8gSXQgaXMgbm90IHBvc3NpYmxlIHRvIGRldGVjdCBpZiB0aGUgaWZyYW1lIHN1Y2NlZWRlZCBvclxuXHQgICAgLy8gZmFpbGVkIHRvIHN1Ym1pdCBvdXIgZm9ybS5cblx0ICAgIGNhbGxiYWNrKGVycik7XG5cdCAgfTtcblx0ICBpZnJhbWUub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgZGVidWcoJ29uZXJyb3InLCBpZCk7XG5cdCAgICBjb21wbGV0ZWQoKTtcblx0ICB9O1xuXHQgIGlmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgIGRlYnVnKCdvbmxvYWQnLCBpZCk7XG5cdCAgICBjb21wbGV0ZWQoKTtcblx0ICB9O1xuXHQgIGlmcmFtZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbihlKSB7XG5cdCAgICBkZWJ1Zygnb25yZWFkeXN0YXRlY2hhbmdlJywgaWQsIGlmcmFtZS5yZWFkeVN0YXRlLCBlKTtcblx0ICAgIGlmIChpZnJhbWUucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuXHQgICAgICBjb21wbGV0ZWQoKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIGRlYnVnKCdhYm9ydGVkJywgaWQpO1xuXHQgICAgY29tcGxldGVkKG5ldyBFcnJvcignQWJvcnRlZCcpKTtcblx0ICB9O1xuXHR9O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMiksIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBFdmVudEVtaXR0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLkV2ZW50RW1pdHRlclxuXHQgICwgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgO1xuXHRcblx0ZnVuY3Rpb24gWEhSRmFrZSgvKiBtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cyAqLykge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblx0XG5cdCAgdGhpcy50byA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIDIwMCwgJ3t9Jyk7XG5cdCAgfSwgWEhSRmFrZS50aW1lb3V0KTtcblx0fVxuXHRcblx0aW5oZXJpdHMoWEhSRmFrZSwgRXZlbnRFbWl0dGVyKTtcblx0XG5cdFhIUkZha2UucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG5cdCAgY2xlYXJUaW1lb3V0KHRoaXMudG8pO1xuXHR9O1xuXHRcblx0WEhSRmFrZS50aW1lb3V0ID0gMjAwMDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gWEhSRmFrZTtcblxuXG4vKioqLyB9LFxuLyogNTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KVxuXHQgICwgdXJsVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpXG5cdCAgLCBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIEV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMykuRXZlbnRFbWl0dGVyXG5cdCAgLCBXZWJzb2NrZXREcml2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHQgIDtcblx0XG5cdHZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgZGVidWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCdzb2NranMtY2xpZW50OndlYnNvY2tldCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBXZWJTb2NrZXRUcmFuc3BvcnQodHJhbnNVcmwsIGlnbm9yZSwgb3B0aW9ucykge1xuXHQgIGlmICghV2ViU29ja2V0VHJhbnNwb3J0LmVuYWJsZWQoKSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG5cdCAgfVxuXHRcblx0ICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblx0ICBkZWJ1ZygnY29uc3RydWN0b3InLCB0cmFuc1VybCk7XG5cdFxuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgdXJsID0gdXJsVXRpbHMuYWRkUGF0aCh0cmFuc1VybCwgJy93ZWJzb2NrZXQnKTtcblx0ICBpZiAodXJsLnNsaWNlKDAsIDUpID09PSAnaHR0cHMnKSB7XG5cdCAgICB1cmwgPSAnd3NzJyArIHVybC5zbGljZSg1KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdXJsID0gJ3dzJyArIHVybC5zbGljZSg0KTtcblx0ICB9XG5cdCAgdGhpcy51cmwgPSB1cmw7XG5cdFxuXHQgIHRoaXMud3MgPSBuZXcgV2Vic29ja2V0RHJpdmVyKHRoaXMudXJsLCB1bmRlZmluZWQsIG9wdGlvbnMpO1xuXHQgIHRoaXMud3Mub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuXHQgICAgZGVidWcoJ21lc3NhZ2UgZXZlbnQnLCBlLmRhdGEpO1xuXHQgICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgZS5kYXRhKTtcblx0ICB9O1xuXHQgIC8vIEZpcmVmb3ggaGFzIGFuIGludGVyZXN0aW5nIGJ1Zy4gSWYgYSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBpc1xuXHQgIC8vIGNyZWF0ZWQgYWZ0ZXIgb251bmxvYWQsIGl0IHN0YXlzIGFsaXZlIGV2ZW4gd2hlbiB1c2VyXG5cdCAgLy8gbmF2aWdhdGVzIGF3YXkgZnJvbSB0aGUgcGFnZS4gSW4gc3VjaCBzaXR1YXRpb24gbGV0J3MgbGllIC1cblx0ICAvLyBsZXQncyBub3Qgb3BlbiB0aGUgd3MgY29ubmVjdGlvbiBhdCBhbGwuIFNlZTpcblx0ICAvLyBodHRwczovL2dpdGh1Yi5jb20vc29ja2pzL3NvY2tqcy1jbGllbnQvaXNzdWVzLzI4XG5cdCAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk2MDg1XG5cdCAgdGhpcy51bmxvYWRSZWYgPSB1dGlscy51bmxvYWRBZGQoZnVuY3Rpb24oKSB7XG5cdCAgICBkZWJ1ZygndW5sb2FkJyk7XG5cdCAgICBzZWxmLndzLmNsb3NlKCk7XG5cdCAgfSk7XG5cdCAgdGhpcy53cy5vbmNsb3NlID0gZnVuY3Rpb24oZSkge1xuXHQgICAgZGVidWcoJ2Nsb3NlIGV2ZW50JywgZS5jb2RlLCBlLnJlYXNvbik7XG5cdCAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgZS5jb2RlLCBlLnJlYXNvbik7XG5cdCAgICBzZWxmLl9jbGVhbnVwKCk7XG5cdCAgfTtcblx0ICB0aGlzLndzLm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XG5cdCAgICBkZWJ1ZygnZXJyb3IgZXZlbnQnLCBlKTtcblx0ICAgIHNlbGYuZW1pdCgnY2xvc2UnLCAxMDA2LCAnV2ViU29ja2V0IGNvbm5lY3Rpb24gYnJva2VuJyk7XG5cdCAgICBzZWxmLl9jbGVhbnVwKCk7XG5cdCAgfTtcblx0fVxuXHRcblx0aW5oZXJpdHMoV2ViU29ja2V0VHJhbnNwb3J0LCBFdmVudEVtaXR0ZXIpO1xuXHRcblx0V2ViU29ja2V0VHJhbnNwb3J0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuXHQgIHZhciBtc2cgPSAnWycgKyBkYXRhICsgJ10nO1xuXHQgIGRlYnVnKCdzZW5kJywgbXNnKTtcblx0ICB0aGlzLndzLnNlbmQobXNnKTtcblx0fTtcblx0XG5cdFdlYlNvY2tldFRyYW5zcG9ydC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcblx0ICBkZWJ1ZygnY2xvc2UnKTtcblx0ICBpZiAodGhpcy53cykge1xuXHQgICAgdGhpcy53cy5jbG9zZSgpO1xuXHQgIH1cblx0ICB0aGlzLl9jbGVhbnVwKCk7XG5cdH07XG5cdFxuXHRXZWJTb2NrZXRUcmFuc3BvcnQucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oKSB7XG5cdCAgZGVidWcoJ19jbGVhbnVwJyk7XG5cdCAgdmFyIHdzID0gdGhpcy53cztcblx0ICBpZiAod3MpIHtcblx0ICAgIHdzLm9ubWVzc2FnZSA9IHdzLm9uY2xvc2UgPSB3cy5vbmVycm9yID0gbnVsbDtcblx0ICB9XG5cdCAgdXRpbHMudW5sb2FkRGVsKHRoaXMudW5sb2FkUmVmKTtcblx0ICB0aGlzLnVubG9hZFJlZiA9IHRoaXMud3MgPSBudWxsO1xuXHQgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdH07XG5cdFxuXHRXZWJTb2NrZXRUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuXHQgIGRlYnVnKCdlbmFibGVkJyk7XG5cdCAgcmV0dXJuICEhV2Vic29ja2V0RHJpdmVyO1xuXHR9O1xuXHRXZWJTb2NrZXRUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICd3ZWJzb2NrZXQnO1xuXHRcblx0Ly8gSW4gdGhlb3J5LCB3cyBzaG91bGQgcmVxdWlyZSAxIHJvdW5kIHRyaXAuIEJ1dCBpbiBjaHJvbWUsIHRoaXMgaXNcblx0Ly8gbm90IHZlcnkgc3RhYmxlIG92ZXIgU1NMLiBNb3N0IGxpa2VseSBhIHdzIGNvbm5lY3Rpb24gcmVxdWlyZXMgYVxuXHQvLyBzZXBhcmF0ZSBTU0wgY29ubmVjdGlvbiwgaW4gd2hpY2ggY2FzZSAyIHJvdW5kIHRyaXBzIGFyZSBhblxuXHQvLyBhYnNvbHV0ZSBtaW51bXVtLlxuXHRXZWJTb2NrZXRUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFdlYlNvY2tldFRyYW5zcG9ydDtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKSlcblxuLyoqKi8gfSxcbi8qIDYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApXG5cdCAgLCBBamF4QmFzZWRUcmFuc3BvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpXG5cdCAgLCBYZHJTdHJlYW1pbmdUcmFuc3BvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KVxuXHQgICwgWGhyUmVjZWl2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKVxuXHQgICwgWERST2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNilcblx0ICA7XG5cdFxuXHRmdW5jdGlvbiBYZHJQb2xsaW5nVHJhbnNwb3J0KHRyYW5zVXJsKSB7XG5cdCAgaWYgKCFYRFJPYmplY3QuZW5hYmxlZCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG5cdCAgfVxuXHQgIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL3hocicsIFhoclJlY2VpdmVyLCBYRFJPYmplY3QpO1xuXHR9XG5cdFxuXHRpbmhlcml0cyhYZHJQb2xsaW5nVHJhbnNwb3J0LCBBamF4QmFzZWRUcmFuc3BvcnQpO1xuXHRcblx0WGRyUG9sbGluZ1RyYW5zcG9ydC5lbmFibGVkID0gWGRyU3RyZWFtaW5nVHJhbnNwb3J0LmVuYWJsZWQ7XG5cdFhkclBvbGxpbmdUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICd4ZHItcG9sbGluZyc7XG5cdFhkclBvbGxpbmdUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7IC8vIHByZWZsaWdodCwgYWpheFxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBYZHJQb2xsaW5nVHJhbnNwb3J0O1xuXG5cbi8qKiovIH0sXG4vKiA2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMClcblx0ICAsIEFqYXhCYXNlZFRyYW5zcG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oNylcblx0ICAsIFhoclJlY2VpdmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMilcblx0ICAsIFhIUkNvcnNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKVxuXHQgICwgWEhSTG9jYWxPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpXG5cdCAgLCBicm93c2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMClcblx0ICA7XG5cdFxuXHRmdW5jdGlvbiBYaHJTdHJlYW1pbmdUcmFuc3BvcnQodHJhbnNVcmwpIHtcblx0ICBpZiAoIVhIUkxvY2FsT2JqZWN0LmVuYWJsZWQgJiYgIVhIUkNvcnNPYmplY3QuZW5hYmxlZCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG5cdCAgfVxuXHQgIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL3hocl9zdHJlYW1pbmcnLCBYaHJSZWNlaXZlciwgWEhSQ29yc09iamVjdCk7XG5cdH1cblx0XG5cdGluaGVyaXRzKFhoclN0cmVhbWluZ1RyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblx0XG5cdFhoclN0cmVhbWluZ1RyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oaW5mbykge1xuXHQgIGlmIChpbmZvLm51bGxPcmlnaW4pIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgLy8gT3BlcmEgZG9lc24ndCBzdXBwb3J0IHhoci1zdHJlYW1pbmcgIzYwXG5cdCAgLy8gQnV0IGl0IG1pZ2h0IGJlIGFibGUgdG8gIzkyXG5cdCAgaWYgKGJyb3dzZXIuaXNPcGVyYSgpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gWEhSQ29yc09iamVjdC5lbmFibGVkO1xuXHR9O1xuXHRcblx0WGhyU3RyZWFtaW5nVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUgPSAneGhyLXN0cmVhbWluZyc7XG5cdFhoclN0cmVhbWluZ1RyYW5zcG9ydC5yb3VuZFRyaXBzID0gMjsgLy8gcHJlZmxpZ2h0LCBhamF4XG5cdFxuXHQvLyBTYWZhcmkgZ2V0cyBjb25mdXNlZCB3aGVuIGEgc3RyZWFtaW5nIGFqYXggcmVxdWVzdCBpcyBzdGFydGVkXG5cdC8vIGJlZm9yZSBvbmxvYWQuIFRoaXMgY2F1c2VzIHRoZSBsb2FkIGluZGljYXRvciB0byBzcGluIGluZGVmaW5ldGVseS5cblx0Ly8gT25seSByZXF1aXJlIGJvZHkgd2hlbiB1c2VkIGluIGEgYnJvd3NlclxuXHRYaHJTdHJlYW1pbmdUcmFuc3BvcnQubmVlZEJvZHkgPSAhIWdsb2JhbC5kb2N1bWVudDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gWGhyU3RyZWFtaW5nVHJhbnNwb3J0O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHRpZiAoZ2xvYmFsLmNyeXB0byAmJiBnbG9iYWwuY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuXHQgIG1vZHVsZS5leHBvcnRzLnJhbmRvbUJ5dGVzID0gZnVuY3Rpb24obGVuZ3RoKSB7XG5cdCAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuXHQgICAgZ2xvYmFsLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYnl0ZXMpO1xuXHQgICAgcmV0dXJuIGJ5dGVzO1xuXHQgIH07XG5cdH0gZWxzZSB7XG5cdCAgbW9kdWxlLmV4cG9ydHMucmFuZG9tQnl0ZXMgPSBmdW5jdGlvbihsZW5ndGgpIHtcblx0ICAgIHZhciBieXRlcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICBieXRlc1tpXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1Nik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYnl0ZXM7XG5cdCAgfTtcblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBKU09OMyA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHQvLyBTb21lIGV4dHJhIGNoYXJhY3RlcnMgdGhhdCBDaHJvbWUgZ2V0cyB3cm9uZywgYW5kIHN1YnN0aXR1dGVzIHdpdGhcblx0Ly8gc29tZXRoaW5nIGVsc2Ugb24gdGhlIHdpcmUuXG5cdHZhciBleHRyYUVzY2FwYWJsZSA9IC9bXFx4MDAtXFx4MWZcXHVkODAwLVxcdWRmZmZcXHVmZmZlXFx1ZmZmZlxcdTAzMDAtXFx1MDMzM1xcdTAzM2QtXFx1MDM0NlxcdTAzNGEtXFx1MDM0Y1xcdTAzNTAtXFx1MDM1MlxcdTAzNTctXFx1MDM1OFxcdTAzNWMtXFx1MDM2MlxcdTAzNzRcXHUwMzdlXFx1MDM4N1xcdTA1OTEtXFx1MDVhZlxcdTA1YzRcXHUwNjEwLVxcdTA2MTdcXHUwNjUzLVxcdTA2NTRcXHUwNjU3LVxcdTA2NWJcXHUwNjVkLVxcdTA2NWVcXHUwNmRmLVxcdTA2ZTJcXHUwNmViLVxcdTA2ZWNcXHUwNzMwXFx1MDczMi1cXHUwNzMzXFx1MDczNS1cXHUwNzM2XFx1MDczYVxcdTA3M2RcXHUwNzNmLVxcdTA3NDFcXHUwNzQzXFx1MDc0NVxcdTA3NDdcXHUwN2ViLVxcdTA3ZjFcXHUwOTUxXFx1MDk1OC1cXHUwOTVmXFx1MDlkYy1cXHUwOWRkXFx1MDlkZlxcdTBhMzNcXHUwYTM2XFx1MGE1OS1cXHUwYTViXFx1MGE1ZVxcdTBiNWMtXFx1MGI1ZFxcdTBlMzgtXFx1MGUzOVxcdTBmNDNcXHUwZjRkXFx1MGY1MlxcdTBmNTdcXHUwZjVjXFx1MGY2OVxcdTBmNzItXFx1MGY3NlxcdTBmNzhcXHUwZjgwLVxcdTBmODNcXHUwZjkzXFx1MGY5ZFxcdTBmYTJcXHUwZmE3XFx1MGZhY1xcdTBmYjlcXHUxOTM5LVxcdTE5M2FcXHUxYTE3XFx1MWI2YlxcdTFjZGEtXFx1MWNkYlxcdTFkYzAtXFx1MWRjZlxcdTFkZmNcXHUxZGZlXFx1MWY3MVxcdTFmNzNcXHUxZjc1XFx1MWY3N1xcdTFmNzlcXHUxZjdiXFx1MWY3ZFxcdTFmYmJcXHUxZmJlXFx1MWZjOVxcdTFmY2JcXHUxZmQzXFx1MWZkYlxcdTFmZTNcXHUxZmViXFx1MWZlZS1cXHUxZmVmXFx1MWZmOVxcdTFmZmJcXHUxZmZkXFx1MjAwMC1cXHUyMDAxXFx1MjBkMC1cXHUyMGQxXFx1MjBkNC1cXHUyMGQ3XFx1MjBlNy1cXHUyMGU5XFx1MjEyNlxcdTIxMmEtXFx1MjEyYlxcdTIzMjktXFx1MjMyYVxcdTJhZGNcXHUzMDJiLVxcdTMwMmNcXHVhYWIyLVxcdWFhYjNcXHVmOTAwLVxcdWZhMGRcXHVmYTEwXFx1ZmExMlxcdWZhMTUtXFx1ZmExZVxcdWZhMjBcXHVmYTIyXFx1ZmEyNS1cXHVmYTI2XFx1ZmEyYS1cXHVmYTJkXFx1ZmEzMC1cXHVmYTZkXFx1ZmE3MC1cXHVmYWQ5XFx1ZmIxZFxcdWZiMWZcXHVmYjJhLVxcdWZiMzZcXHVmYjM4LVxcdWZiM2NcXHVmYjNlXFx1ZmI0MC1cXHVmYjQxXFx1ZmI0My1cXHVmYjQ0XFx1ZmI0Ni1cXHVmYjRlXFx1ZmZmMC1cXHVmZmZmXS9nXG5cdCAgLCBleHRyYUxvb2t1cDtcblx0XG5cdC8vIFRoaXMgbWF5IGJlIHF1aXRlIHNsb3csIHNvIGxldCdzIGRlbGF5IHVudGlsIHVzZXIgYWN0dWFsbHkgdXNlcyBiYWRcblx0Ly8gY2hhcmFjdGVycy5cblx0dmFyIHVucm9sbExvb2t1cCA9IGZ1bmN0aW9uKGVzY2FwYWJsZSkge1xuXHQgIHZhciBpO1xuXHQgIHZhciB1bnJvbGxlZCA9IHt9O1xuXHQgIHZhciBjID0gW107XG5cdCAgZm9yIChpID0gMDsgaSA8IDY1NTM2OyBpKyspIHtcblx0ICAgIGMucHVzaCggU3RyaW5nLmZyb21DaGFyQ29kZShpKSApO1xuXHQgIH1cblx0ICBlc2NhcGFibGUubGFzdEluZGV4ID0gMDtcblx0ICBjLmpvaW4oJycpLnJlcGxhY2UoZXNjYXBhYmxlLCBmdW5jdGlvbihhKSB7XG5cdCAgICB1bnJvbGxlZFsgYSBdID0gJ1xcXFx1JyArICgnMDAwMCcgKyBhLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7XG5cdCAgICByZXR1cm4gJyc7XG5cdCAgfSk7XG5cdCAgZXNjYXBhYmxlLmxhc3RJbmRleCA9IDA7XG5cdCAgcmV0dXJuIHVucm9sbGVkO1xuXHR9O1xuXHRcblx0Ly8gUXVvdGUgc3RyaW5nLCBhbHNvIHRha2luZyBjYXJlIG9mIHVuaWNvZGUgY2hhcmFjdGVycyB0aGF0IGJyb3dzZXJzXG5cdC8vIG9mdGVuIGJyZWFrLiBFc3BlY2lhbGx5LCB0YWtlIGNhcmUgb2YgdW5pY29kZSBzdXJyb2dhdGVzOlxuXHQvLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01hcHBpbmdfb2ZfVW5pY29kZV9jaGFyYWN0ZXJzI1N1cnJvZ2F0ZXNcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgcXVvdGU6IGZ1bmN0aW9uKHN0cmluZykge1xuXHQgICAgdmFyIHF1b3RlZCA9IEpTT04zLnN0cmluZ2lmeShzdHJpbmcpO1xuXHRcblx0ICAgIC8vIEluIG1vc3QgY2FzZXMgdGhpcyBzaG91bGQgYmUgdmVyeSBmYXN0IGFuZCBnb29kIGVub3VnaC5cblx0ICAgIGV4dHJhRXNjYXBhYmxlLmxhc3RJbmRleCA9IDA7XG5cdCAgICBpZiAoIWV4dHJhRXNjYXBhYmxlLnRlc3QocXVvdGVkKSkge1xuXHQgICAgICByZXR1cm4gcXVvdGVkO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghZXh0cmFMb29rdXApIHtcblx0ICAgICAgZXh0cmFMb29rdXAgPSB1bnJvbGxMb29rdXAoZXh0cmFFc2NhcGFibGUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBxdW90ZWQucmVwbGFjZShleHRyYUVzY2FwYWJsZSwgZnVuY3Rpb24oYSkge1xuXHQgICAgICByZXR1cm4gZXh0cmFMb29rdXBbYV07XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGxvZ09iamVjdCA9IHt9O1xuXHRbJ2xvZycsICdkZWJ1ZycsICd3YXJuJ10uZm9yRWFjaChmdW5jdGlvbiAobGV2ZWwpIHtcblx0ICB2YXIgbGV2ZWxFeGlzdHM7XG5cdFxuXHQgIHRyeSB7XG5cdCAgICBsZXZlbEV4aXN0cyA9IGdsb2JhbC5jb25zb2xlICYmIGdsb2JhbC5jb25zb2xlW2xldmVsXSAmJiBnbG9iYWwuY29uc29sZVtsZXZlbF0uYXBwbHk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICAvLyBkbyBub3RoaW5nXG5cdCAgfVxuXHRcblx0ICBsb2dPYmplY3RbbGV2ZWxdID0gbGV2ZWxFeGlzdHMgPyBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gZ2xvYmFsLmNvbnNvbGVbbGV2ZWxdLmFwcGx5KGdsb2JhbC5jb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgIH0gOiAobGV2ZWwgPT09ICdsb2cnID8gZnVuY3Rpb24gKCkge30gOiBsb2dPYmplY3QubG9nKTtcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxvZ09iamVjdDtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgZGVidWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCdzb2NranMtY2xpZW50OnV0aWxzOnRyYW5zcG9ydCcpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGF2YWlsYWJsZVRyYW5zcG9ydHMpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgZmlsdGVyVG9FbmFibGVkOiBmdW5jdGlvbih0cmFuc3BvcnRzV2hpdGVsaXN0LCBpbmZvKSB7XG5cdCAgICAgIHZhciB0cmFuc3BvcnRzID0ge1xuXHQgICAgICAgIG1haW46IFtdXG5cdCAgICAgICwgZmFjYWRlOiBbXVxuXHQgICAgICB9O1xuXHQgICAgICBpZiAoIXRyYW5zcG9ydHNXaGl0ZWxpc3QpIHtcblx0ICAgICAgICB0cmFuc3BvcnRzV2hpdGVsaXN0ID0gW107XG5cdCAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRyYW5zcG9ydHNXaGl0ZWxpc3QgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgdHJhbnNwb3J0c1doaXRlbGlzdCA9IFt0cmFuc3BvcnRzV2hpdGVsaXN0XTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgYXZhaWxhYmxlVHJhbnNwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zKSB7XG5cdCAgICAgICAgaWYgKCF0cmFucykge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRyYW5zLnRyYW5zcG9ydE5hbWUgPT09ICd3ZWJzb2NrZXQnICYmIGluZm8ud2Vic29ja2V0ID09PSBmYWxzZSkge1xuXHQgICAgICAgICAgZGVidWcoJ2Rpc2FibGVkIGZyb20gc2VydmVyJywgJ3dlYnNvY2tldCcpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRyYW5zcG9ydHNXaGl0ZWxpc3QubGVuZ3RoICYmXG5cdCAgICAgICAgICAgIHRyYW5zcG9ydHNXaGl0ZWxpc3QuaW5kZXhPZih0cmFucy50cmFuc3BvcnROYW1lKSA9PT0gLTEpIHtcblx0ICAgICAgICAgIGRlYnVnKCdub3QgaW4gd2hpdGVsaXN0JywgdHJhbnMudHJhbnNwb3J0TmFtZSk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodHJhbnMuZW5hYmxlZChpbmZvKSkge1xuXHQgICAgICAgICAgZGVidWcoJ2VuYWJsZWQnLCB0cmFucy50cmFuc3BvcnROYW1lKTtcblx0ICAgICAgICAgIHRyYW5zcG9ydHMubWFpbi5wdXNoKHRyYW5zKTtcblx0ICAgICAgICAgIGlmICh0cmFucy5mYWNhZGVUcmFuc3BvcnQpIHtcblx0ICAgICAgICAgICAgdHJhbnNwb3J0cy5mYWNhZGUucHVzaCh0cmFucy5mYWNhZGVUcmFuc3BvcnQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBkZWJ1ZygnZGlzYWJsZWQnLCB0cmFucy50cmFuc3BvcnROYW1lKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gdHJhbnNwb3J0cztcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMikpKVxuXG4vKioqLyB9LFxuLyogNjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgc2xhc2hlcyA9IC9eW0EtWmEtel1bQS1aYS16MC05Ky0uXSo6XFwvXFwvLztcblx0XG5cdC8qKlxuXHQgKiBUaGVzZSBwcm9wZXJ0aWVzIHNob3VsZCBub3QgYmUgY29waWVkIG9yIGluaGVyaXRlZCBmcm9tLiBUaGlzIGlzIG9ubHkgbmVlZGVkXG5cdCAqIGZvciBhbGwgbm9uIGJsb2IgVVJMJ3MgYXMgYSBibG9iIFVSTCBkb2VzIG5vdCBpbmNsdWRlIGEgaGFzaCwgb25seSB0aGVcblx0ICogb3JpZ2luLlxuXHQgKlxuXHQgKiBAdHlwZSB7T2JqZWN0fVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dmFyIGlnbm9yZSA9IHsgaGFzaDogMSwgcXVlcnk6IDEgfVxuXHQgICwgVVJMO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBsb2NhdGlvbiBvYmplY3QgZGlmZmVycyB3aGVuIHlvdXIgY29kZSBpcyBsb2FkZWQgdGhyb3VnaCBhIG5vcm1hbCBwYWdlLFxuXHQgKiBXb3JrZXIgb3IgdGhyb3VnaCBhIHdvcmtlciB1c2luZyBhIGJsb2IuIEFuZCB3aXRoIHRoZSBibG9iYmxlIGJlZ2lucyB0aGVcblx0ICogdHJvdWJsZSBhcyB0aGUgbG9jYXRpb24gb2JqZWN0IHdpbGwgY29udGFpbiB0aGUgVVJMIG9mIHRoZSBibG9iLCBub3QgdGhlXG5cdCAqIGxvY2F0aW9uIG9mIHRoZSBwYWdlIHdoZXJlIG91ciBjb2RlIGlzIGxvYWRlZCBpbi4gVGhlIGFjdHVhbCBvcmlnaW4gaXNcblx0ICogZW5jb2RlZCBpbiB0aGUgYHBhdGhuYW1lYCBzbyB3ZSBjYW4gdGhhbmtmdWxseSBnZW5lcmF0ZSBhIGdvb2QgXCJkZWZhdWx0XCJcblx0ICogbG9jYXRpb24gZnJvbSBpdCBzbyB3ZSBjYW4gZ2VuZXJhdGUgcHJvcGVyIHJlbGF0aXZlIFVSTCdzIGFnYWluLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGxvYyBPcHRpb25hbCBkZWZhdWx0IGxvY2F0aW9uIG9iamVjdC5cblx0ICogQHJldHVybnMge09iamVjdH0gbG9sY2F0aW9uIG9iamVjdC5cblx0ICogQGFwaSBwdWJsaWNcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbG9sY2F0aW9uKGxvYykge1xuXHQgIGxvYyA9IGxvYyB8fCBnbG9iYWwubG9jYXRpb24gfHwge307XG5cdCAgVVJMID0gVVJMIHx8IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0ICB2YXIgZmluYWxkZXN0aW5hdGlvbiA9IHt9XG5cdCAgICAsIHR5cGUgPSB0eXBlb2YgbG9jXG5cdCAgICAsIGtleTtcblx0XG5cdCAgaWYgKCdibG9iOicgPT09IGxvYy5wcm90b2NvbCkge1xuXHQgICAgZmluYWxkZXN0aW5hdGlvbiA9IG5ldyBVUkwodW5lc2NhcGUobG9jLnBhdGhuYW1lKSwge30pO1xuXHQgIH0gZWxzZSBpZiAoJ3N0cmluZycgPT09IHR5cGUpIHtcblx0ICAgIGZpbmFsZGVzdGluYXRpb24gPSBuZXcgVVJMKGxvYywge30pO1xuXHQgICAgZm9yIChrZXkgaW4gaWdub3JlKSBkZWxldGUgZmluYWxkZXN0aW5hdGlvbltrZXldO1xuXHQgIH0gZWxzZSBpZiAoJ29iamVjdCcgPT09IHR5cGUpIHtcblx0ICAgIGZvciAoa2V5IGluIGxvYykge1xuXHQgICAgICBpZiAoa2V5IGluIGlnbm9yZSkgY29udGludWU7XG5cdCAgICAgIGZpbmFsZGVzdGluYXRpb25ba2V5XSA9IGxvY1trZXldO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChmaW5hbGRlc3RpbmF0aW9uLnNsYXNoZXMgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBmaW5hbGRlc3RpbmF0aW9uLnNsYXNoZXMgPSBzbGFzaGVzLnRlc3QobG9jLmhyZWYpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZpbmFsZGVzdGluYXRpb247XG5cdH07XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiA2NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKF9fd2VicGFja19hbWRfb3B0aW9uc19fKSB7bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcclxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIHt9KSlcblxuLyoqKi8gfSxcbi8qIDY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdFx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XHJcblx0XHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XHJcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcclxuXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZS5sOyB9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImlkXCIsIHtcclxuXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZS5pOyB9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBtb2R1bGU7XHJcblx0fVxyXG5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogY2hhdC5taW4uanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMzYpO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgMTlkOTY4ZTUzYjUxZGNkOTg4OGJcbiAqKi8iLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgd2ViIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgYGRlYnVnKClgLlxuICpcbiAqIEV4cG9zZSBgZGVidWcoKWAgYXMgdGhlIG1vZHVsZS5cbiAqL1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2RlYnVnJyk7XG5leHBvcnRzLmxvZyA9IGxvZztcbmV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG5leHBvcnRzLnNhdmUgPSBzYXZlO1xuZXhwb3J0cy5sb2FkID0gbG9hZDtcbmV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO1xuZXhwb3J0cy5zdG9yYWdlID0gJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIGNocm9tZVxuICAgICAgICAgICAgICAgJiYgJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIGNocm9tZS5zdG9yYWdlXG4gICAgICAgICAgICAgICAgICA/IGNocm9tZS5zdG9yYWdlLmxvY2FsXG4gICAgICAgICAgICAgICAgICA6IGxvY2Fsc3RvcmFnZSgpO1xuXG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFtcbiAgJ2xpZ2h0c2VhZ3JlZW4nLFxuICAnZm9yZXN0Z3JlZW4nLFxuICAnZ29sZGVucm9kJyxcbiAgJ2RvZGdlcmJsdWUnLFxuICAnZGFya29yY2hpZCcsXG4gICdjcmltc29uJ1xuXTtcblxuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuXG5mdW5jdGlvbiB1c2VDb2xvcnMoKSB7XG4gIC8vIGlzIHdlYmtpdD8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY0NTk2MDYvMzc2NzczXG4gIHJldHVybiAoJ1dlYmtpdEFwcGVhcmFuY2UnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSkgfHxcbiAgICAvLyBpcyBmaXJlYnVnPyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zOTgxMjAvMzc2NzczXG4gICAgKHdpbmRvdy5jb25zb2xlICYmIChjb25zb2xlLmZpcmVidWcgfHwgKGNvbnNvbGUuZXhjZXB0aW9uICYmIGNvbnNvbGUudGFibGUpKSkgfHxcbiAgICAvLyBpcyBmaXJlZm94ID49IHYzMT9cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcbiAgICAobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykgJiYgcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgPj0gMzEpO1xufVxuXG4vKipcbiAqIE1hcCAlaiB0byBgSlNPTi5zdHJpbmdpZnkoKWAsIHNpbmNlIG5vIFdlYiBJbnNwZWN0b3JzIGRvIHRoYXQgYnkgZGVmYXVsdC5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uKHYpIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xufTtcblxuXG4vKipcbiAqIENvbG9yaXplIGxvZyBhcmd1bWVudHMgaWYgZW5hYmxlZC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGZvcm1hdEFyZ3MoKSB7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgdXNlQ29sb3JzID0gdGhpcy51c2VDb2xvcnM7XG5cbiAgYXJnc1swXSA9ICh1c2VDb2xvcnMgPyAnJWMnIDogJycpXG4gICAgKyB0aGlzLm5hbWVzcGFjZVxuICAgICsgKHVzZUNvbG9ycyA/ICcgJWMnIDogJyAnKVxuICAgICsgYXJnc1swXVxuICAgICsgKHVzZUNvbG9ycyA/ICclYyAnIDogJyAnKVxuICAgICsgJysnICsgZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpO1xuXG4gIGlmICghdXNlQ29sb3JzKSByZXR1cm4gYXJncztcblxuICB2YXIgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG4gIGFyZ3MgPSBbYXJnc1swXSwgYywgJ2NvbG9yOiBpbmhlcml0J10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MsIDEpKTtcblxuICAvLyB0aGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuICAvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG4gIC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuICB2YXIgaW5kZXggPSAwO1xuICB2YXIgbGFzdEMgPSAwO1xuICBhcmdzWzBdLnJlcGxhY2UoLyVbYS16JV0vZywgZnVuY3Rpb24obWF0Y2gpIHtcbiAgICBpZiAoJyUlJyA9PT0gbWF0Y2gpIHJldHVybjtcbiAgICBpbmRleCsrO1xuICAgIGlmICgnJWMnID09PSBtYXRjaCkge1xuICAgICAgLy8gd2Ugb25seSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgKmxhc3QqICVjXG4gICAgICAvLyAodGhlIHVzZXIgbWF5IGhhdmUgcHJvdmlkZWQgdGhlaXIgb3duKVxuICAgICAgbGFzdEMgPSBpbmRleDtcbiAgICB9XG4gIH0pO1xuXG4gIGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbiAgcmV0dXJuIGFyZ3M7XG59XG5cbi8qKlxuICogSW52b2tlcyBgY29uc29sZS5sb2coKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmxvZ2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gbG9nKCkge1xuICAvLyB0aGlzIGhhY2tlcnkgaXMgcmVxdWlyZWQgZm9yIElFOC85LCB3aGVyZVxuICAvLyB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbiBkb2Vzbid0IGhhdmUgJ2FwcGx5J1xuICByZXR1cm4gJ29iamVjdCcgPT09IHR5cGVvZiBjb25zb2xlXG4gICAgJiYgY29uc29sZS5sb2dcbiAgICAmJiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjb25zb2xlLmxvZywgY29uc29sZSwgYXJndW1lbnRzKTtcbn1cblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKSB7XG4gIHRyeSB7XG4gICAgaWYgKG51bGwgPT0gbmFtZXNwYWNlcykge1xuICAgICAgZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4cG9ydHMuc3RvcmFnZS5kZWJ1ZyA9IG5hbWVzcGFjZXM7XG4gICAgfVxuICB9IGNhdGNoKGUpIHt9XG59XG5cbi8qKlxuICogTG9hZCBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfSByZXR1cm5zIHRoZSBwcmV2aW91c2x5IHBlcnNpc3RlZCBkZWJ1ZyBtb2Rlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9hZCgpIHtcbiAgdmFyIHI7XG4gIHRyeSB7XG4gICAgciA9IGV4cG9ydHMuc3RvcmFnZS5kZWJ1ZztcbiAgfSBjYXRjaChlKSB7fVxuICByZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBFbmFibGUgbmFtZXNwYWNlcyBsaXN0ZWQgaW4gYGxvY2FsU3RvcmFnZS5kZWJ1Z2AgaW5pdGlhbGx5LlxuICovXG5cbmV4cG9ydHMuZW5hYmxlKGxvYWQoKSk7XG5cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCl7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gIH0gY2F0Y2ggKGUpIHt9XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9kZWJ1Zy9icm93c2VyLmpzXG4gKiogbW9kdWxlIGlkID0gMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9wcm9jZXNzL2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBFdmVudFRhcmdldCA9IHJlcXVpcmUoJy4vZXZlbnR0YXJnZXQnKVxuICA7XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcbn1cblxuaW5oZXJpdHMoRXZlbnRFbWl0dGVyLCBFdmVudFRhcmdldCk7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodHlwZSkge1xuICAgIGRlbGV0ZSB0aGlzLl9saXN0ZW5lcnNbdHlwZV07XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICAgICwgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHNlbGYucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMub24odHlwZSwgZyk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHR5cGUgPSBhcmd1bWVudHNbMF07XG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbdHlwZV07XG4gIGlmICghbGlzdGVuZXJzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGVxdWl2YWxlbnQgb2YgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICB2YXIgYXJncyA9IG5ldyBBcnJheShsIC0gMSk7XG4gIGZvciAodmFyIGFpID0gMTsgYWkgPCBsOyBhaSsrKSB7XG4gICAgYXJnc1thaSAtIDFdID0gYXJndW1lbnRzW2FpXTtcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBFdmVudFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBFdmVudFRhcmdldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcblxubW9kdWxlLmV4cG9ydHMuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvZXZlbnQvZW1pdHRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFVSTCA9IHJlcXVpcmUoJ3VybC1wYXJzZScpO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OnV0aWxzOnVybCcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0T3JpZ2luOiBmdW5jdGlvbih1cmwpIHtcbiAgICBpZiAoIXVybCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHAgPSBuZXcgVVJMKHVybCk7XG4gICAgaWYgKHAucHJvdG9jb2wgPT09ICdmaWxlOicpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBwb3J0ID0gcC5wb3J0O1xuICAgIGlmICghcG9ydCkge1xuICAgICAgcG9ydCA9IChwLnByb3RvY29sID09PSAnaHR0cHM6JykgPyAnNDQzJyA6ICc4MCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHAucHJvdG9jb2wgKyAnLy8nICsgcC5ob3N0bmFtZSArICc6JyArIHBvcnQ7XG4gIH1cblxuLCBpc09yaWdpbkVxdWFsOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHJlcyA9IHRoaXMuZ2V0T3JpZ2luKGEpID09PSB0aGlzLmdldE9yaWdpbihiKTtcbiAgICBkZWJ1Zygnc2FtZScsIGEsIGIsIHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4sIGlzU2NoZW1lRXF1YWw6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gKGEuc3BsaXQoJzonKVswXSA9PT0gYi5zcGxpdCgnOicpWzBdKTtcbiAgfVxuXG4sIGFkZFBhdGg6IGZ1bmN0aW9uICh1cmwsIHBhdGgpIHtcbiAgICB2YXIgcXMgPSB1cmwuc3BsaXQoJz8nKTtcbiAgICByZXR1cm4gcXNbMF0gKyBwYXRoICsgKHFzWzFdID8gJz8nICsgcXNbMV0gOiAnJyk7XG4gIH1cblxuLCBhZGRRdWVyeTogZnVuY3Rpb24gKHVybCwgcSkge1xuICAgIHJldHVybiB1cmwgKyAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAoJz8nICsgcSkgOiAoJyYnICsgcSkpO1xuICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdXRpbHMvdXJsLmpzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohIEpTT04gdjMuMy4yIHwgaHR0cDovL2Jlc3RpZWpzLmdpdGh1Yi5pby9qc29uMyB8IENvcHlyaWdodCAyMDEyLTIwMTQsIEtpdCBDYW1icmlkZ2UgfCBodHRwOi8va2l0Lm1pdC1saWNlbnNlLm9yZyAqL1xuOyhmdW5jdGlvbiAoKSB7XG4gIC8vIERldGVjdCB0aGUgYGRlZmluZWAgZnVuY3Rpb24gZXhwb3NlZCBieSBhc3luY2hyb25vdXMgbW9kdWxlIGxvYWRlcnMuIFRoZVxuICAvLyBzdHJpY3QgYGRlZmluZWAgY2hlY2sgaXMgbmVjZXNzYXJ5IGZvciBjb21wYXRpYmlsaXR5IHdpdGggYHIuanNgLlxuICB2YXIgaXNMb2FkZXIgPSB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZDtcblxuICAvLyBBIHNldCBvZiB0eXBlcyB1c2VkIHRvIGRpc3Rpbmd1aXNoIG9iamVjdHMgZnJvbSBwcmltaXRpdmVzLlxuICB2YXIgb2JqZWN0VHlwZXMgPSB7XG4gICAgXCJmdW5jdGlvblwiOiB0cnVlLFxuICAgIFwib2JqZWN0XCI6IHRydWVcbiAgfTtcblxuICAvLyBEZXRlY3QgdGhlIGBleHBvcnRzYCBvYmplY3QgZXhwb3NlZCBieSBDb21tb25KUyBpbXBsZW1lbnRhdGlvbnMuXG4gIHZhciBmcmVlRXhwb3J0cyA9IG9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cbiAgLy8gVXNlIHRoZSBgZ2xvYmFsYCBvYmplY3QgZXhwb3NlZCBieSBOb2RlIChpbmNsdWRpbmcgQnJvd3NlcmlmeSB2aWFcbiAgLy8gYGluc2VydC1tb2R1bGUtZ2xvYmFsc2ApLCBOYXJ3aGFsLCBhbmQgUmluZ28gYXMgdGhlIGRlZmF1bHQgY29udGV4dCxcbiAgLy8gYW5kIHRoZSBgd2luZG93YCBvYmplY3QgaW4gYnJvd3NlcnMuIFJoaW5vIGV4cG9ydHMgYSBgZ2xvYmFsYCBmdW5jdGlvblxuICAvLyBpbnN0ZWFkLlxuICB2YXIgcm9vdCA9IG9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdyB8fCB0aGlzLFxuICAgICAgZnJlZUdsb2JhbCA9IGZyZWVFeHBvcnRzICYmIG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIHR5cGVvZiBnbG9iYWwgPT0gXCJvYmplY3RcIiAmJiBnbG9iYWw7XG5cbiAgaWYgKGZyZWVHbG9iYWwgJiYgKGZyZWVHbG9iYWxbXCJnbG9iYWxcIl0gPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbFtcIndpbmRvd1wiXSA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsW1wic2VsZlwiXSA9PT0gZnJlZUdsb2JhbCkpIHtcbiAgICByb290ID0gZnJlZUdsb2JhbDtcbiAgfVxuXG4gIC8vIFB1YmxpYzogSW5pdGlhbGl6ZXMgSlNPTiAzIHVzaW5nIHRoZSBnaXZlbiBgY29udGV4dGAgb2JqZWN0LCBhdHRhY2hpbmcgdGhlXG4gIC8vIGBzdHJpbmdpZnlgIGFuZCBgcGFyc2VgIGZ1bmN0aW9ucyB0byB0aGUgc3BlY2lmaWVkIGBleHBvcnRzYCBvYmplY3QuXG4gIGZ1bmN0aW9uIHJ1bkluQ29udGV4dChjb250ZXh0LCBleHBvcnRzKSB7XG4gICAgY29udGV4dCB8fCAoY29udGV4dCA9IHJvb3RbXCJPYmplY3RcIl0oKSk7XG4gICAgZXhwb3J0cyB8fCAoZXhwb3J0cyA9IHJvb3RbXCJPYmplY3RcIl0oKSk7XG5cbiAgICAvLyBOYXRpdmUgY29uc3RydWN0b3IgYWxpYXNlcy5cbiAgICB2YXIgTnVtYmVyID0gY29udGV4dFtcIk51bWJlclwiXSB8fCByb290W1wiTnVtYmVyXCJdLFxuICAgICAgICBTdHJpbmcgPSBjb250ZXh0W1wiU3RyaW5nXCJdIHx8IHJvb3RbXCJTdHJpbmdcIl0sXG4gICAgICAgIE9iamVjdCA9IGNvbnRleHRbXCJPYmplY3RcIl0gfHwgcm9vdFtcIk9iamVjdFwiXSxcbiAgICAgICAgRGF0ZSA9IGNvbnRleHRbXCJEYXRlXCJdIHx8IHJvb3RbXCJEYXRlXCJdLFxuICAgICAgICBTeW50YXhFcnJvciA9IGNvbnRleHRbXCJTeW50YXhFcnJvclwiXSB8fCByb290W1wiU3ludGF4RXJyb3JcIl0sXG4gICAgICAgIFR5cGVFcnJvciA9IGNvbnRleHRbXCJUeXBlRXJyb3JcIl0gfHwgcm9vdFtcIlR5cGVFcnJvclwiXSxcbiAgICAgICAgTWF0aCA9IGNvbnRleHRbXCJNYXRoXCJdIHx8IHJvb3RbXCJNYXRoXCJdLFxuICAgICAgICBuYXRpdmVKU09OID0gY29udGV4dFtcIkpTT05cIl0gfHwgcm9vdFtcIkpTT05cIl07XG5cbiAgICAvLyBEZWxlZ2F0ZSB0byB0aGUgbmF0aXZlIGBzdHJpbmdpZnlgIGFuZCBgcGFyc2VgIGltcGxlbWVudGF0aW9ucy5cbiAgICBpZiAodHlwZW9mIG5hdGl2ZUpTT04gPT0gXCJvYmplY3RcIiAmJiBuYXRpdmVKU09OKSB7XG4gICAgICBleHBvcnRzLnN0cmluZ2lmeSA9IG5hdGl2ZUpTT04uc3RyaW5naWZ5O1xuICAgICAgZXhwb3J0cy5wYXJzZSA9IG5hdGl2ZUpTT04ucGFyc2U7XG4gICAgfVxuXG4gICAgLy8gQ29udmVuaWVuY2UgYWxpYXNlcy5cbiAgICB2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlLFxuICAgICAgICBnZXRDbGFzcyA9IG9iamVjdFByb3RvLnRvU3RyaW5nLFxuICAgICAgICBpc1Byb3BlcnR5LCBmb3JFYWNoLCB1bmRlZjtcblxuICAgIC8vIFRlc3QgdGhlIGBEYXRlI2dldFVUQypgIG1ldGhvZHMuIEJhc2VkIG9uIHdvcmsgYnkgQFlhZmZsZS5cbiAgICB2YXIgaXNFeHRlbmRlZCA9IG5ldyBEYXRlKC0zNTA5ODI3MzM0NTczMjkyKTtcbiAgICB0cnkge1xuICAgICAgLy8gVGhlIGBnZXRVVENGdWxsWWVhcmAsIGBNb250aGAsIGFuZCBgRGF0ZWAgbWV0aG9kcyByZXR1cm4gbm9uc2Vuc2ljYWxcbiAgICAgIC8vIHJlc3VsdHMgZm9yIGNlcnRhaW4gZGF0ZXMgaW4gT3BlcmEgPj0gMTAuNTMuXG4gICAgICBpc0V4dGVuZGVkID0gaXNFeHRlbmRlZC5nZXRVVENGdWxsWWVhcigpID09IC0xMDkyNTIgJiYgaXNFeHRlbmRlZC5nZXRVVENNb250aCgpID09PSAwICYmIGlzRXh0ZW5kZWQuZ2V0VVRDRGF0ZSgpID09PSAxICYmXG4gICAgICAgIC8vIFNhZmFyaSA8IDIuMC4yIHN0b3JlcyB0aGUgaW50ZXJuYWwgbWlsbGlzZWNvbmQgdGltZSB2YWx1ZSBjb3JyZWN0bHksXG4gICAgICAgIC8vIGJ1dCBjbGlwcyB0aGUgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBkYXRlIG1ldGhvZHMgdG8gdGhlIHJhbmdlIG9mXG4gICAgICAgIC8vIHNpZ25lZCAzMi1iaXQgaW50ZWdlcnMgKFstMiAqKiAzMSwgMiAqKiAzMSAtIDFdKS5cbiAgICAgICAgaXNFeHRlbmRlZC5nZXRVVENIb3VycygpID09IDEwICYmIGlzRXh0ZW5kZWQuZ2V0VVRDTWludXRlcygpID09IDM3ICYmIGlzRXh0ZW5kZWQuZ2V0VVRDU2Vjb25kcygpID09IDYgJiYgaXNFeHRlbmRlZC5nZXRVVENNaWxsaXNlY29uZHMoKSA9PSA3MDg7XG4gICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuXG4gICAgLy8gSW50ZXJuYWw6IERldGVybWluZXMgd2hldGhlciB0aGUgbmF0aXZlIGBKU09OLnN0cmluZ2lmeWAgYW5kIGBwYXJzZWBcbiAgICAvLyBpbXBsZW1lbnRhdGlvbnMgYXJlIHNwZWMtY29tcGxpYW50LiBCYXNlZCBvbiB3b3JrIGJ5IEtlbiBTbnlkZXIuXG4gICAgZnVuY3Rpb24gaGFzKG5hbWUpIHtcbiAgICAgIGlmIChoYXNbbmFtZV0gIT09IHVuZGVmKSB7XG4gICAgICAgIC8vIFJldHVybiBjYWNoZWQgZmVhdHVyZSB0ZXN0IHJlc3VsdC5cbiAgICAgICAgcmV0dXJuIGhhc1tuYW1lXTtcbiAgICAgIH1cbiAgICAgIHZhciBpc1N1cHBvcnRlZDtcbiAgICAgIGlmIChuYW1lID09IFwiYnVnLXN0cmluZy1jaGFyLWluZGV4XCIpIHtcbiAgICAgICAgLy8gSUUgPD0gNyBkb2Vzbid0IHN1cHBvcnQgYWNjZXNzaW5nIHN0cmluZyBjaGFyYWN0ZXJzIHVzaW5nIHNxdWFyZVxuICAgICAgICAvLyBicmFja2V0IG5vdGF0aW9uLiBJRSA4IG9ubHkgc3VwcG9ydHMgdGhpcyBmb3IgcHJpbWl0aXZlcy5cbiAgICAgICAgaXNTdXBwb3J0ZWQgPSBcImFcIlswXSAhPSBcImFcIjtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSBcImpzb25cIikge1xuICAgICAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciBib3RoIGBKU09OLnN0cmluZ2lmeWAgYW5kIGBKU09OLnBhcnNlYCBhcmVcbiAgICAgICAgLy8gc3VwcG9ydGVkLlxuICAgICAgICBpc1N1cHBvcnRlZCA9IGhhcyhcImpzb24tc3RyaW5naWZ5XCIpICYmIGhhcyhcImpzb24tcGFyc2VcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdmFsdWUsIHNlcmlhbGl6ZWQgPSAne1wiYVwiOlsxLHRydWUsZmFsc2UsbnVsbCxcIlxcXFx1MDAwMFxcXFxiXFxcXG5cXFxcZlxcXFxyXFxcXHRcIl19JztcbiAgICAgICAgLy8gVGVzdCBgSlNPTi5zdHJpbmdpZnlgLlxuICAgICAgICBpZiAobmFtZSA9PSBcImpzb24tc3RyaW5naWZ5XCIpIHtcbiAgICAgICAgICB2YXIgc3RyaW5naWZ5ID0gZXhwb3J0cy5zdHJpbmdpZnksIHN0cmluZ2lmeVN1cHBvcnRlZCA9IHR5cGVvZiBzdHJpbmdpZnkgPT0gXCJmdW5jdGlvblwiICYmIGlzRXh0ZW5kZWQ7XG4gICAgICAgICAgaWYgKHN0cmluZ2lmeVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgLy8gQSB0ZXN0IGZ1bmN0aW9uIG9iamVjdCB3aXRoIGEgY3VzdG9tIGB0b0pTT05gIG1ldGhvZC5cbiAgICAgICAgICAgICh2YWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9KS50b0pTT04gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHN0cmluZ2lmeVN1cHBvcnRlZCA9XG4gICAgICAgICAgICAgICAgLy8gRmlyZWZveCAzLjFiMSBhbmQgYjIgc2VyaWFsaXplIHN0cmluZywgbnVtYmVyLCBhbmQgYm9vbGVhblxuICAgICAgICAgICAgICAgIC8vIHByaW1pdGl2ZXMgYXMgb2JqZWN0IGxpdGVyYWxzLlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeSgwKSA9PT0gXCIwXCIgJiZcbiAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgYjIsIGFuZCBKU09OIDIgc2VyaWFsaXplIHdyYXBwZWQgcHJpbWl0aXZlcyBhcyBvYmplY3RcbiAgICAgICAgICAgICAgICAvLyBsaXRlcmFscy5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkobmV3IE51bWJlcigpKSA9PT0gXCIwXCIgJiZcbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkobmV3IFN0cmluZygpKSA9PSAnXCJcIicgJiZcbiAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgMiB0aHJvdyBhbiBlcnJvciBpZiB0aGUgdmFsdWUgaXMgYG51bGxgLCBgdW5kZWZpbmVkYCwgb3JcbiAgICAgICAgICAgICAgICAvLyBkb2VzIG5vdCBkZWZpbmUgYSBjYW5vbmljYWwgSlNPTiByZXByZXNlbnRhdGlvbiAodGhpcyBhcHBsaWVzIHRvXG4gICAgICAgICAgICAgICAgLy8gb2JqZWN0cyB3aXRoIGB0b0pTT05gIHByb3BlcnRpZXMgYXMgd2VsbCwgKnVubGVzcyogdGhleSBhcmUgbmVzdGVkXG4gICAgICAgICAgICAgICAgLy8gd2l0aGluIGFuIG9iamVjdCBvciBhcnJheSkuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KGdldENsYXNzKSA9PT0gdW5kZWYgJiZcbiAgICAgICAgICAgICAgICAvLyBJRSA4IHNlcmlhbGl6ZXMgYHVuZGVmaW5lZGAgYXMgYFwidW5kZWZpbmVkXCJgLiBTYWZhcmkgPD0gNS4xLjcgYW5kXG4gICAgICAgICAgICAgICAgLy8gRkYgMy4xYjMgcGFzcyB0aGlzIHRlc3QuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KHVuZGVmKSA9PT0gdW5kZWYgJiZcbiAgICAgICAgICAgICAgICAvLyBTYWZhcmkgPD0gNS4xLjcgYW5kIEZGIDMuMWIzIHRocm93IGBFcnJvcmBzIGFuZCBgVHlwZUVycm9yYHMsXG4gICAgICAgICAgICAgICAgLy8gcmVzcGVjdGl2ZWx5LCBpZiB0aGUgdmFsdWUgaXMgb21pdHRlZCBlbnRpcmVseS5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoKSA9PT0gdW5kZWYgJiZcbiAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgMiB0aHJvdyBhbiBlcnJvciBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgbm90IGEgbnVtYmVyLFxuICAgICAgICAgICAgICAgIC8vIHN0cmluZywgYXJyYXksIG9iamVjdCwgQm9vbGVhbiwgb3IgYG51bGxgIGxpdGVyYWwuIFRoaXMgYXBwbGllcyB0b1xuICAgICAgICAgICAgICAgIC8vIG9iamVjdHMgd2l0aCBjdXN0b20gYHRvSlNPTmAgbWV0aG9kcyBhcyB3ZWxsLCB1bmxlc3MgdGhleSBhcmUgbmVzdGVkXG4gICAgICAgICAgICAgICAgLy8gaW5zaWRlIG9iamVjdCBvciBhcnJheSBsaXRlcmFscy4gWVVJIDMuMC4wYjEgaWdub3JlcyBjdXN0b20gYHRvSlNPTmBcbiAgICAgICAgICAgICAgICAvLyBtZXRob2RzIGVudGlyZWx5LlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeSh2YWx1ZSkgPT09IFwiMVwiICYmXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KFt2YWx1ZV0pID09IFwiWzFdXCIgJiZcbiAgICAgICAgICAgICAgICAvLyBQcm90b3R5cGUgPD0gMS42LjEgc2VyaWFsaXplcyBgW3VuZGVmaW5lZF1gIGFzIGBcIltdXCJgIGluc3RlYWQgb2ZcbiAgICAgICAgICAgICAgICAvLyBgXCJbbnVsbF1cImAuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KFt1bmRlZl0pID09IFwiW251bGxdXCIgJiZcbiAgICAgICAgICAgICAgICAvLyBZVUkgMy4wLjBiMSBmYWlscyB0byBzZXJpYWxpemUgYG51bGxgIGxpdGVyYWxzLlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeShudWxsKSA9PSBcIm51bGxcIiAmJlxuICAgICAgICAgICAgICAgIC8vIEZGIDMuMWIxLCAyIGhhbHRzIHNlcmlhbGl6YXRpb24gaWYgYW4gYXJyYXkgY29udGFpbnMgYSBmdW5jdGlvbjpcbiAgICAgICAgICAgICAgICAvLyBgWzEsIHRydWUsIGdldENsYXNzLCAxXWAgc2VyaWFsaXplcyBhcyBcIlsxLHRydWUsXSxcIi4gRkYgMy4xYjNcbiAgICAgICAgICAgICAgICAvLyBlbGlkZXMgbm9uLUpTT04gdmFsdWVzIGZyb20gb2JqZWN0cyBhbmQgYXJyYXlzLCB1bmxlc3MgdGhleVxuICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjdXN0b20gYHRvSlNPTmAgbWV0aG9kcy5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoW3VuZGVmLCBnZXRDbGFzcywgbnVsbF0pID09IFwiW251bGwsbnVsbCxudWxsXVwiICYmXG4gICAgICAgICAgICAgICAgLy8gU2ltcGxlIHNlcmlhbGl6YXRpb24gdGVzdC4gRkYgMy4xYjEgdXNlcyBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZXNcbiAgICAgICAgICAgICAgICAvLyB3aGVyZSBjaGFyYWN0ZXIgZXNjYXBlIGNvZGVzIGFyZSBleHBlY3RlZCAoZS5nLiwgYFxcYmAgPT4gYFxcdTAwMDhgKS5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoeyBcImFcIjogW3ZhbHVlLCB0cnVlLCBmYWxzZSwgbnVsbCwgXCJcXHgwMFxcYlxcblxcZlxcclxcdFwiXSB9KSA9PSBzZXJpYWxpemVkICYmXG4gICAgICAgICAgICAgICAgLy8gRkYgMy4xYjEgYW5kIGIyIGlnbm9yZSB0aGUgYGZpbHRlcmAgYW5kIGB3aWR0aGAgYXJndW1lbnRzLlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeShudWxsLCB2YWx1ZSkgPT09IFwiMVwiICYmXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KFsxLCAyXSwgbnVsbCwgMSkgPT0gXCJbXFxuIDEsXFxuIDJcXG5dXCIgJiZcbiAgICAgICAgICAgICAgICAvLyBKU09OIDIsIFByb3RvdHlwZSA8PSAxLjcsIGFuZCBvbGRlciBXZWJLaXQgYnVpbGRzIGluY29ycmVjdGx5XG4gICAgICAgICAgICAgICAgLy8gc2VyaWFsaXplIGV4dGVuZGVkIHllYXJzLlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeShuZXcgRGF0ZSgtOC42NGUxNSkpID09ICdcIi0yNzE4MjEtMDQtMjBUMDA6MDA6MDAuMDAwWlwiJyAmJlxuICAgICAgICAgICAgICAgIC8vIFRoZSBtaWxsaXNlY29uZHMgYXJlIG9wdGlvbmFsIGluIEVTIDUsIGJ1dCByZXF1aXJlZCBpbiA1LjEuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBEYXRlKDguNjRlMTUpKSA9PSAnXCIrMjc1NzYwLTA5LTEzVDAwOjAwOjAwLjAwMFpcIicgJiZcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IDw9IDExLjAgaW5jb3JyZWN0bHkgc2VyaWFsaXplcyB5ZWFycyBwcmlvciB0byAwIGFzIG5lZ2F0aXZlXG4gICAgICAgICAgICAgICAgLy8gZm91ci1kaWdpdCB5ZWFycyBpbnN0ZWFkIG9mIHNpeC1kaWdpdCB5ZWFycy4gQ3JlZGl0czogQFlhZmZsZS5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkobmV3IERhdGUoLTYyMTk4NzU1MmU1KSkgPT0gJ1wiLTAwMDAwMS0wMS0wMVQwMDowMDowMC4wMDBaXCInICYmXG4gICAgICAgICAgICAgICAgLy8gU2FmYXJpIDw9IDUuMS41IGFuZCBPcGVyYSA+PSAxMC41MyBpbmNvcnJlY3RseSBzZXJpYWxpemUgbWlsbGlzZWNvbmRcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZXMgbGVzcyB0aGFuIDEwMDAuIENyZWRpdHM6IEBZYWZmbGUuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBEYXRlKC0xKSkgPT0gJ1wiMTk2OS0xMi0zMVQyMzo1OTo1OS45OTlaXCInO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgIHN0cmluZ2lmeVN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpc1N1cHBvcnRlZCA9IHN0cmluZ2lmeVN1cHBvcnRlZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUZXN0IGBKU09OLnBhcnNlYC5cbiAgICAgICAgaWYgKG5hbWUgPT0gXCJqc29uLXBhcnNlXCIpIHtcbiAgICAgICAgICB2YXIgcGFyc2UgPSBleHBvcnRzLnBhcnNlO1xuICAgICAgICAgIGlmICh0eXBlb2YgcGFyc2UgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgYjIgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYSBiYXJlIGxpdGVyYWwgaXMgcHJvdmlkZWQuXG4gICAgICAgICAgICAgIC8vIENvbmZvcm1pbmcgaW1wbGVtZW50YXRpb25zIHNob3VsZCBhbHNvIGNvZXJjZSB0aGUgaW5pdGlhbCBhcmd1bWVudCB0b1xuICAgICAgICAgICAgICAvLyBhIHN0cmluZyBwcmlvciB0byBwYXJzaW5nLlxuICAgICAgICAgICAgICBpZiAocGFyc2UoXCIwXCIpID09PSAwICYmICFwYXJzZShmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgcGFyc2luZyB0ZXN0LlxuICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyc2Uoc2VyaWFsaXplZCk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcnNlU3VwcG9ydGVkID0gdmFsdWVbXCJhXCJdLmxlbmd0aCA9PSA1ICYmIHZhbHVlW1wiYVwiXVswXSA9PT0gMTtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaSA8PSA1LjEuMiBhbmQgRkYgMy4xYjEgYWxsb3cgdW5lc2NhcGVkIHRhYnMgaW4gc3RyaW5ncy5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSAhcGFyc2UoJ1wiXFx0XCInKTtcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge31cbiAgICAgICAgICAgICAgICAgIGlmIChwYXJzZVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEZGIDQuMCBhbmQgNC4wLjEgYWxsb3cgbGVhZGluZyBgK2Agc2lnbnMgYW5kIGxlYWRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAvLyBkZWNpbWFsIHBvaW50cy4gRkYgNC4wLCA0LjAuMSwgYW5kIElFIDktMTAgYWxzbyBhbGxvd1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGNlcnRhaW4gb2N0YWwgbGl0ZXJhbHMuXG4gICAgICAgICAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSBwYXJzZShcIjAxXCIpICE9PSAxO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHt9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAocGFyc2VTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBGRiA0LjAsIDQuMC4xLCBhbmQgUmhpbm8gMS43UjMtUjQgYWxsb3cgdHJhaWxpbmcgZGVjaW1hbFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHBvaW50cy4gVGhlc2UgZW52aXJvbm1lbnRzLCBhbG9uZyB3aXRoIEZGIDMuMWIxIGFuZCAyLFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFsc28gYWxsb3cgdHJhaWxpbmcgY29tbWFzIGluIEpTT04gb2JqZWN0cyBhbmQgYXJyYXlzLlxuICAgICAgICAgICAgICAgICAgICAgIHBhcnNlU3VwcG9ydGVkID0gcGFyc2UoXCIxLlwiKSAhPT0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgIHBhcnNlU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzU3VwcG9ydGVkID0gcGFyc2VTdXBwb3J0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNbbmFtZV0gPSAhIWlzU3VwcG9ydGVkO1xuICAgIH1cblxuICAgIGlmICghaGFzKFwianNvblwiKSkge1xuICAgICAgLy8gQ29tbW9uIGBbW0NsYXNzXV1gIG5hbWUgYWxpYXNlcy5cbiAgICAgIHZhciBmdW5jdGlvbkNsYXNzID0gXCJbb2JqZWN0IEZ1bmN0aW9uXVwiLFxuICAgICAgICAgIGRhdGVDbGFzcyA9IFwiW29iamVjdCBEYXRlXVwiLFxuICAgICAgICAgIG51bWJlckNsYXNzID0gXCJbb2JqZWN0IE51bWJlcl1cIixcbiAgICAgICAgICBzdHJpbmdDbGFzcyA9IFwiW29iamVjdCBTdHJpbmddXCIsXG4gICAgICAgICAgYXJyYXlDbGFzcyA9IFwiW29iamVjdCBBcnJheV1cIixcbiAgICAgICAgICBib29sZWFuQ2xhc3MgPSBcIltvYmplY3QgQm9vbGVhbl1cIjtcblxuICAgICAgLy8gRGV0ZWN0IGluY29tcGxldGUgc3VwcG9ydCBmb3IgYWNjZXNzaW5nIHN0cmluZyBjaGFyYWN0ZXJzIGJ5IGluZGV4LlxuICAgICAgdmFyIGNoYXJJbmRleEJ1Z2d5ID0gaGFzKFwiYnVnLXN0cmluZy1jaGFyLWluZGV4XCIpO1xuXG4gICAgICAvLyBEZWZpbmUgYWRkaXRpb25hbCB1dGlsaXR5IG1ldGhvZHMgaWYgdGhlIGBEYXRlYCBtZXRob2RzIGFyZSBidWdneS5cbiAgICAgIGlmICghaXNFeHRlbmRlZCkge1xuICAgICAgICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xuICAgICAgICAvLyBBIG1hcHBpbmcgYmV0d2VlbiB0aGUgbW9udGhzIG9mIHRoZSB5ZWFyIGFuZCB0aGUgbnVtYmVyIG9mIGRheXMgYmV0d2VlblxuICAgICAgICAvLyBKYW51YXJ5IDFzdCBhbmQgdGhlIGZpcnN0IG9mIHRoZSByZXNwZWN0aXZlIG1vbnRoLlxuICAgICAgICB2YXIgTW9udGhzID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcbiAgICAgICAgLy8gSW50ZXJuYWw6IENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiBkYXlzIGJldHdlZW4gdGhlIFVuaXggZXBvY2ggYW5kIHRoZVxuICAgICAgICAvLyBmaXJzdCBkYXkgb2YgdGhlIGdpdmVuIG1vbnRoLlxuICAgICAgICB2YXIgZ2V0RGF5ID0gZnVuY3Rpb24gKHllYXIsIG1vbnRoKSB7XG4gICAgICAgICAgcmV0dXJuIE1vbnRoc1ttb250aF0gKyAzNjUgKiAoeWVhciAtIDE5NzApICsgZmxvb3IoKHllYXIgLSAxOTY5ICsgKG1vbnRoID0gKyhtb250aCA+IDEpKSkgLyA0KSAtIGZsb29yKCh5ZWFyIC0gMTkwMSArIG1vbnRoKSAvIDEwMCkgKyBmbG9vcigoeWVhciAtIDE2MDEgKyBtb250aCkgLyA0MDApO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBJbnRlcm5hbDogRGV0ZXJtaW5lcyBpZiBhIHByb3BlcnR5IGlzIGEgZGlyZWN0IHByb3BlcnR5IG9mIHRoZSBnaXZlblxuICAgICAgLy8gb2JqZWN0LiBEZWxlZ2F0ZXMgdG8gdGhlIG5hdGl2ZSBgT2JqZWN0I2hhc093blByb3BlcnR5YCBtZXRob2QuXG4gICAgICBpZiAoIShpc1Byb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHkpKSB7XG4gICAgICAgIGlzUHJvcGVydHkgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICB2YXIgbWVtYmVycyA9IHt9LCBjb25zdHJ1Y3RvcjtcbiAgICAgICAgICBpZiAoKG1lbWJlcnMuX19wcm90b19fID0gbnVsbCwgbWVtYmVycy5fX3Byb3RvX18gPSB7XG4gICAgICAgICAgICAvLyBUaGUgKnByb3RvKiBwcm9wZXJ0eSBjYW5ub3QgYmUgc2V0IG11bHRpcGxlIHRpbWVzIGluIHJlY2VudFxuICAgICAgICAgICAgLy8gdmVyc2lvbnMgb2YgRmlyZWZveCBhbmQgU2VhTW9ua2V5LlxuICAgICAgICAgICAgXCJ0b1N0cmluZ1wiOiAxXG4gICAgICAgICAgfSwgbWVtYmVycykudG9TdHJpbmcgIT0gZ2V0Q2xhc3MpIHtcbiAgICAgICAgICAgIC8vIFNhZmFyaSA8PSAyLjAuMyBkb2Vzbid0IGltcGxlbWVudCBgT2JqZWN0I2hhc093blByb3BlcnR5YCwgYnV0XG4gICAgICAgICAgICAvLyBzdXBwb3J0cyB0aGUgbXV0YWJsZSAqcHJvdG8qIHByb3BlcnR5LlxuICAgICAgICAgICAgaXNQcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAvLyBDYXB0dXJlIGFuZCBicmVhayB0aGUgb2JqZWN0J3MgcHJvdG90eXBlIGNoYWluIChzZWUgc2VjdGlvbiA4LjYuMlxuICAgICAgICAgICAgICAvLyBvZiB0aGUgRVMgNS4xIHNwZWMpLiBUaGUgcGFyZW50aGVzaXplZCBleHByZXNzaW9uIHByZXZlbnRzIGFuXG4gICAgICAgICAgICAgIC8vIHVuc2FmZSB0cmFuc2Zvcm1hdGlvbiBieSB0aGUgQ2xvc3VyZSBDb21waWxlci5cbiAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsID0gdGhpcy5fX3Byb3RvX18sIHJlc3VsdCA9IHByb3BlcnR5IGluICh0aGlzLl9fcHJvdG9fXyA9IG51bGwsIHRoaXMpO1xuICAgICAgICAgICAgICAvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBwcm90b3R5cGUgY2hhaW4uXG4gICAgICAgICAgICAgIHRoaXMuX19wcm90b19fID0gb3JpZ2luYWw7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDYXB0dXJlIGEgcmVmZXJlbmNlIHRvIHRoZSB0b3AtbGV2ZWwgYE9iamVjdGAgY29uc3RydWN0b3IuXG4gICAgICAgICAgICBjb25zdHJ1Y3RvciA9IG1lbWJlcnMuY29uc3RydWN0b3I7XG4gICAgICAgICAgICAvLyBVc2UgdGhlIGBjb25zdHJ1Y3RvcmAgcHJvcGVydHkgdG8gc2ltdWxhdGUgYE9iamVjdCNoYXNPd25Qcm9wZXJ0eWAgaW5cbiAgICAgICAgICAgIC8vIG90aGVyIGVudmlyb25tZW50cy5cbiAgICAgICAgICAgIGlzUHJvcGVydHkgPSBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgdmFyIHBhcmVudCA9ICh0aGlzLmNvbnN0cnVjdG9yIHx8IGNvbnN0cnVjdG9yKS5wcm90b3R5cGU7XG4gICAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eSBpbiB0aGlzICYmICEocHJvcGVydHkgaW4gcGFyZW50ICYmIHRoaXNbcHJvcGVydHldID09PSBwYXJlbnRbcHJvcGVydHldKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lbWJlcnMgPSBudWxsO1xuICAgICAgICAgIHJldHVybiBpc1Byb3BlcnR5LmNhbGwodGhpcywgcHJvcGVydHkpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBJbnRlcm5hbDogTm9ybWFsaXplcyB0aGUgYGZvci4uLmluYCBpdGVyYXRpb24gYWxnb3JpdGhtIGFjcm9zc1xuICAgICAgLy8gZW52aXJvbm1lbnRzLiBFYWNoIGVudW1lcmF0ZWQga2V5IGlzIHlpZWxkZWQgdG8gYSBgY2FsbGJhY2tgIGZ1bmN0aW9uLlxuICAgICAgZm9yRWFjaCA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBzaXplID0gMCwgUHJvcGVydGllcywgbWVtYmVycywgcHJvcGVydHk7XG5cbiAgICAgICAgLy8gVGVzdHMgZm9yIGJ1Z3MgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQncyBgZm9yLi4uaW5gIGFsZ29yaXRobS4gVGhlXG4gICAgICAgIC8vIGB2YWx1ZU9mYCBwcm9wZXJ0eSBpbmhlcml0cyB0aGUgbm9uLWVudW1lcmFibGUgZmxhZyBmcm9tXG4gICAgICAgIC8vIGBPYmplY3QucHJvdG90eXBlYCBpbiBvbGRlciB2ZXJzaW9ucyBvZiBJRSwgTmV0c2NhcGUsIGFuZCBNb3ppbGxhLlxuICAgICAgICAoUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLnZhbHVlT2YgPSAwO1xuICAgICAgICB9KS5wcm90b3R5cGUudmFsdWVPZiA9IDA7XG5cbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBgUHJvcGVydGllc2AgY2xhc3MuXG4gICAgICAgIG1lbWJlcnMgPSBuZXcgUHJvcGVydGllcygpO1xuICAgICAgICBmb3IgKHByb3BlcnR5IGluIG1lbWJlcnMpIHtcbiAgICAgICAgICAvLyBJZ25vcmUgYWxsIHByb3BlcnRpZXMgaW5oZXJpdGVkIGZyb20gYE9iamVjdC5wcm90b3R5cGVgLlxuICAgICAgICAgIGlmIChpc1Byb3BlcnR5LmNhbGwobWVtYmVycywgcHJvcGVydHkpKSB7XG4gICAgICAgICAgICBzaXplKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFByb3BlcnRpZXMgPSBtZW1iZXJzID0gbnVsbDtcblxuICAgICAgICAvLyBOb3JtYWxpemUgdGhlIGl0ZXJhdGlvbiBhbGdvcml0aG0uXG4gICAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICAgIC8vIEEgbGlzdCBvZiBub24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGluaGVyaXRlZCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC5cbiAgICAgICAgICBtZW1iZXJzID0gW1widmFsdWVPZlwiLCBcInRvU3RyaW5nXCIsIFwidG9Mb2NhbGVTdHJpbmdcIiwgXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLCBcImlzUHJvdG90eXBlT2ZcIiwgXCJoYXNPd25Qcm9wZXJ0eVwiLCBcImNvbnN0cnVjdG9yXCJdO1xuICAgICAgICAgIC8vIElFIDw9IDgsIE1vemlsbGEgMS4wLCBhbmQgTmV0c2NhcGUgNi4yIGlnbm9yZSBzaGFkb3dlZCBub24tZW51bWVyYWJsZVxuICAgICAgICAgIC8vIHByb3BlcnRpZXMuXG4gICAgICAgICAgZm9yRWFjaCA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgaXNGdW5jdGlvbiA9IGdldENsYXNzLmNhbGwob2JqZWN0KSA9PSBmdW5jdGlvbkNsYXNzLCBwcm9wZXJ0eSwgbGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGhhc1Byb3BlcnR5ID0gIWlzRnVuY3Rpb24gJiYgdHlwZW9mIG9iamVjdC5jb25zdHJ1Y3RvciAhPSBcImZ1bmN0aW9uXCIgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIG9iamVjdC5oYXNPd25Qcm9wZXJ0eV0gJiYgb2JqZWN0Lmhhc093blByb3BlcnR5IHx8IGlzUHJvcGVydHk7XG4gICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAvLyBHZWNrbyA8PSAxLjAgZW51bWVyYXRlcyB0aGUgYHByb3RvdHlwZWAgcHJvcGVydHkgb2YgZnVuY3Rpb25zIHVuZGVyXG4gICAgICAgICAgICAgIC8vIGNlcnRhaW4gY29uZGl0aW9uczsgSUUgZG9lcyBub3QuXG4gICAgICAgICAgICAgIGlmICghKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gXCJwcm90b3R5cGVcIikgJiYgaGFzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFudWFsbHkgaW52b2tlIHRoZSBjYWxsYmFjayBmb3IgZWFjaCBub24tZW51bWVyYWJsZSBwcm9wZXJ0eS5cbiAgICAgICAgICAgIGZvciAobGVuZ3RoID0gbWVtYmVycy5sZW5ndGg7IHByb3BlcnR5ID0gbWVtYmVyc1stLWxlbmd0aF07IGhhc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkgJiYgY2FsbGJhY2socHJvcGVydHkpKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKHNpemUgPT0gMikge1xuICAgICAgICAgIC8vIFNhZmFyaSA8PSAyLjAuNCBlbnVtZXJhdGVzIHNoYWRvd2VkIHByb3BlcnRpZXMgdHdpY2UuXG4gICAgICAgICAgZm9yRWFjaCA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBzZXQgb2YgaXRlcmF0ZWQgcHJvcGVydGllcy5cbiAgICAgICAgICAgIHZhciBtZW1iZXJzID0ge30sIGlzRnVuY3Rpb24gPSBnZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcywgcHJvcGVydHk7XG4gICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAvLyBTdG9yZSBlYWNoIHByb3BlcnR5IG5hbWUgdG8gcHJldmVudCBkb3VibGUgZW51bWVyYXRpb24uIFRoZVxuICAgICAgICAgICAgICAvLyBgcHJvdG90eXBlYCBwcm9wZXJ0eSBvZiBmdW5jdGlvbnMgaXMgbm90IGVudW1lcmF0ZWQgZHVlIHRvIGNyb3NzLVxuICAgICAgICAgICAgICAvLyBlbnZpcm9ubWVudCBpbmNvbnNpc3RlbmNpZXMuXG4gICAgICAgICAgICAgIGlmICghKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gXCJwcm90b3R5cGVcIikgJiYgIWlzUHJvcGVydHkuY2FsbChtZW1iZXJzLCBwcm9wZXJ0eSkgJiYgKG1lbWJlcnNbcHJvcGVydHldID0gMSkgJiYgaXNQcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2socHJvcGVydHkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBObyBidWdzIGRldGVjdGVkOyB1c2UgdGhlIHN0YW5kYXJkIGBmb3IuLi5pbmAgYWxnb3JpdGhtLlxuICAgICAgICAgIGZvckVhY2ggPSBmdW5jdGlvbiAob2JqZWN0LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIGlzRnVuY3Rpb24gPSBnZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcywgcHJvcGVydHksIGlzQ29uc3RydWN0b3I7XG4gICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICBpZiAoIShpc0Z1bmN0aW9uICYmIHByb3BlcnR5ID09IFwicHJvdG90eXBlXCIpICYmIGlzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSAmJiAhKGlzQ29uc3RydWN0b3IgPSBwcm9wZXJ0eSA9PT0gXCJjb25zdHJ1Y3RvclwiKSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFudWFsbHkgaW52b2tlIHRoZSBjYWxsYmFjayBmb3IgdGhlIGBjb25zdHJ1Y3RvcmAgcHJvcGVydHkgZHVlIHRvXG4gICAgICAgICAgICAvLyBjcm9zcy1lbnZpcm9ubWVudCBpbmNvbnNpc3RlbmNpZXMuXG4gICAgICAgICAgICBpZiAoaXNDb25zdHJ1Y3RvciB8fCBpc1Byb3BlcnR5LmNhbGwob2JqZWN0LCAocHJvcGVydHkgPSBcImNvbnN0cnVjdG9yXCIpKSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayhwcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9yRWFjaChvYmplY3QsIGNhbGxiYWNrKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFB1YmxpYzogU2VyaWFsaXplcyBhIEphdmFTY3JpcHQgYHZhbHVlYCBhcyBhIEpTT04gc3RyaW5nLiBUaGUgb3B0aW9uYWxcbiAgICAgIC8vIGBmaWx0ZXJgIGFyZ3VtZW50IG1heSBzcGVjaWZ5IGVpdGhlciBhIGZ1bmN0aW9uIHRoYXQgYWx0ZXJzIGhvdyBvYmplY3QgYW5kXG4gICAgICAvLyBhcnJheSBtZW1iZXJzIGFyZSBzZXJpYWxpemVkLCBvciBhbiBhcnJheSBvZiBzdHJpbmdzIGFuZCBudW1iZXJzIHRoYXRcbiAgICAgIC8vIGluZGljYXRlcyB3aGljaCBwcm9wZXJ0aWVzIHNob3VsZCBiZSBzZXJpYWxpemVkLiBUaGUgb3B0aW9uYWwgYHdpZHRoYFxuICAgICAgLy8gYXJndW1lbnQgbWF5IGJlIGVpdGhlciBhIHN0cmluZyBvciBudW1iZXIgdGhhdCBzcGVjaWZpZXMgdGhlIGluZGVudGF0aW9uXG4gICAgICAvLyBsZXZlbCBvZiB0aGUgb3V0cHV0LlxuICAgICAgaWYgKCFoYXMoXCJqc29uLXN0cmluZ2lmeVwiKSkge1xuICAgICAgICAvLyBJbnRlcm5hbDogQSBtYXAgb2YgY29udHJvbCBjaGFyYWN0ZXJzIGFuZCB0aGVpciBlc2NhcGVkIGVxdWl2YWxlbnRzLlxuICAgICAgICB2YXIgRXNjYXBlcyA9IHtcbiAgICAgICAgICA5MjogXCJcXFxcXFxcXFwiLFxuICAgICAgICAgIDM0OiAnXFxcXFwiJyxcbiAgICAgICAgICA4OiBcIlxcXFxiXCIsXG4gICAgICAgICAgMTI6IFwiXFxcXGZcIixcbiAgICAgICAgICAxMDogXCJcXFxcblwiLFxuICAgICAgICAgIDEzOiBcIlxcXFxyXCIsXG4gICAgICAgICAgOTogXCJcXFxcdFwiXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW50ZXJuYWw6IENvbnZlcnRzIGB2YWx1ZWAgaW50byBhIHplcm8tcGFkZGVkIHN0cmluZyBzdWNoIHRoYXQgaXRzXG4gICAgICAgIC8vIGxlbmd0aCBpcyBhdCBsZWFzdCBlcXVhbCB0byBgd2lkdGhgLiBUaGUgYHdpZHRoYCBtdXN0IGJlIDw9IDYuXG4gICAgICAgIHZhciBsZWFkaW5nWmVyb2VzID0gXCIwMDAwMDBcIjtcbiAgICAgICAgdmFyIHRvUGFkZGVkU3RyaW5nID0gZnVuY3Rpb24gKHdpZHRoLCB2YWx1ZSkge1xuICAgICAgICAgIC8vIFRoZSBgfHwgMGAgZXhwcmVzc2lvbiBpcyBuZWNlc3NhcnkgdG8gd29yayBhcm91bmQgYSBidWcgaW5cbiAgICAgICAgICAvLyBPcGVyYSA8PSA3LjU0dTIgd2hlcmUgYDAgPT0gLTBgLCBidXQgYFN0cmluZygtMCkgIT09IFwiMFwiYC5cbiAgICAgICAgICByZXR1cm4gKGxlYWRpbmdaZXJvZXMgKyAodmFsdWUgfHwgMCkpLnNsaWNlKC13aWR0aCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW50ZXJuYWw6IERvdWJsZS1xdW90ZXMgYSBzdHJpbmcgYHZhbHVlYCwgcmVwbGFjaW5nIGFsbCBBU0NJSSBjb250cm9sXG4gICAgICAgIC8vIGNoYXJhY3RlcnMgKGNoYXJhY3RlcnMgd2l0aCBjb2RlIHVuaXQgdmFsdWVzIGJldHdlZW4gMCBhbmQgMzEpIHdpdGhcbiAgICAgICAgLy8gdGhlaXIgZXNjYXBlZCBlcXVpdmFsZW50cy4gVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAgICAgICAgLy8gYFF1b3RlKHZhbHVlKWAgb3BlcmF0aW9uIGRlZmluZWQgaW4gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMy5cbiAgICAgICAgdmFyIHVuaWNvZGVQcmVmaXggPSBcIlxcXFx1MDBcIjtcbiAgICAgICAgdmFyIHF1b3RlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9ICdcIicsIGluZGV4ID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoLCB1c2VDaGFySW5kZXggPSAhY2hhckluZGV4QnVnZ3kgfHwgbGVuZ3RoID4gMTA7XG4gICAgICAgICAgdmFyIHN5bWJvbHMgPSB1c2VDaGFySW5kZXggJiYgKGNoYXJJbmRleEJ1Z2d5ID8gdmFsdWUuc3BsaXQoXCJcIikgOiB2YWx1ZSk7XG4gICAgICAgICAgZm9yICg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgY2hhckNvZGUgPSB2YWx1ZS5jaGFyQ29kZUF0KGluZGV4KTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBjaGFyYWN0ZXIgaXMgYSBjb250cm9sIGNoYXJhY3RlciwgYXBwZW5kIGl0cyBVbmljb2RlIG9yXG4gICAgICAgICAgICAvLyBzaG9ydGhhbmQgZXNjYXBlIHNlcXVlbmNlOyBvdGhlcndpc2UsIGFwcGVuZCB0aGUgY2hhcmFjdGVyIGFzLWlzLlxuICAgICAgICAgICAgc3dpdGNoIChjaGFyQ29kZSkge1xuICAgICAgICAgICAgICBjYXNlIDg6IGNhc2UgOTogY2FzZSAxMDogY2FzZSAxMjogY2FzZSAxMzogY2FzZSAzNDogY2FzZSA5MjpcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gRXNjYXBlc1tjaGFyQ29kZV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlIDwgMzIpIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSB1bmljb2RlUHJlZml4ICsgdG9QYWRkZWRTdHJpbmcoMiwgY2hhckNvZGUudG9TdHJpbmcoMTYpKTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gdXNlQ2hhckluZGV4ID8gc3ltYm9sc1tpbmRleF0gOiB2YWx1ZS5jaGFyQXQoaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0ICsgJ1wiJztcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogUmVjdXJzaXZlbHkgc2VyaWFsaXplcyBhbiBvYmplY3QuIEltcGxlbWVudHMgdGhlXG4gICAgICAgIC8vIGBTdHIoa2V5LCBob2xkZXIpYCwgYEpPKHZhbHVlKWAsIGFuZCBgSkEodmFsdWUpYCBvcGVyYXRpb25zLlxuICAgICAgICB2YXIgc2VyaWFsaXplID0gZnVuY3Rpb24gKHByb3BlcnR5LCBvYmplY3QsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCB3aGl0ZXNwYWNlLCBpbmRlbnRhdGlvbiwgc3RhY2spIHtcbiAgICAgICAgICB2YXIgdmFsdWUsIGNsYXNzTmFtZSwgeWVhciwgbW9udGgsIGRhdGUsIHRpbWUsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBtaWxsaXNlY29uZHMsIHJlc3VsdHMsIGVsZW1lbnQsIGluZGV4LCBsZW5ndGgsIHByZWZpeCwgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBOZWNlc3NhcnkgZm9yIGhvc3Qgb2JqZWN0IHN1cHBvcnQuXG4gICAgICAgICAgICB2YWx1ZSA9IG9iamVjdFtwcm9wZXJ0eV07XG4gICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7fVxuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIiAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gZ2V0Q2xhc3MuY2FsbCh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoY2xhc3NOYW1lID09IGRhdGVDbGFzcyAmJiAhaXNQcm9wZXJ0eS5jYWxsKHZhbHVlLCBcInRvSlNPTlwiKSkge1xuICAgICAgICAgICAgICBpZiAodmFsdWUgPiAtMSAvIDAgJiYgdmFsdWUgPCAxIC8gMCkge1xuICAgICAgICAgICAgICAgIC8vIERhdGVzIGFyZSBzZXJpYWxpemVkIGFjY29yZGluZyB0byB0aGUgYERhdGUjdG9KU09OYCBtZXRob2RcbiAgICAgICAgICAgICAgICAvLyBzcGVjaWZpZWQgaW4gRVMgNS4xIHNlY3Rpb24gMTUuOS41LjQ0LiBTZWUgc2VjdGlvbiAxNS45LjEuMTVcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhlIElTTyA4NjAxIGRhdGUgdGltZSBzdHJpbmcgZm9ybWF0LlxuICAgICAgICAgICAgICAgIGlmIChnZXREYXkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIE1hbnVhbGx5IGNvbXB1dGUgdGhlIHllYXIsIG1vbnRoLCBkYXRlLCBob3VycywgbWludXRlcyxcbiAgICAgICAgICAgICAgICAgIC8vIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgaWYgdGhlIGBnZXRVVEMqYCBtZXRob2RzIGFyZVxuICAgICAgICAgICAgICAgICAgLy8gYnVnZ3kuIEFkYXB0ZWQgZnJvbSBAWWFmZmxlJ3MgYGRhdGUtc2hpbWAgcHJvamVjdC5cbiAgICAgICAgICAgICAgICAgIGRhdGUgPSBmbG9vcih2YWx1ZSAvIDg2NGU1KTtcbiAgICAgICAgICAgICAgICAgIGZvciAoeWVhciA9IGZsb29yKGRhdGUgLyAzNjUuMjQyNSkgKyAxOTcwIC0gMTsgZ2V0RGF5KHllYXIgKyAxLCAwKSA8PSBkYXRlOyB5ZWFyKyspO1xuICAgICAgICAgICAgICAgICAgZm9yIChtb250aCA9IGZsb29yKChkYXRlIC0gZ2V0RGF5KHllYXIsIDApKSAvIDMwLjQyKTsgZ2V0RGF5KHllYXIsIG1vbnRoICsgMSkgPD0gZGF0ZTsgbW9udGgrKyk7XG4gICAgICAgICAgICAgICAgICBkYXRlID0gMSArIGRhdGUgLSBnZXREYXkoeWVhciwgbW9udGgpO1xuICAgICAgICAgICAgICAgICAgLy8gVGhlIGB0aW1lYCB2YWx1ZSBzcGVjaWZpZXMgdGhlIHRpbWUgd2l0aGluIHRoZSBkYXkgKHNlZSBFU1xuICAgICAgICAgICAgICAgICAgLy8gNS4xIHNlY3Rpb24gMTUuOS4xLjIpLiBUaGUgZm9ybXVsYSBgKEEgJSBCICsgQikgJSBCYCBpcyB1c2VkXG4gICAgICAgICAgICAgICAgICAvLyB0byBjb21wdXRlIGBBIG1vZHVsbyBCYCwgYXMgdGhlIGAlYCBvcGVyYXRvciBkb2VzIG5vdFxuICAgICAgICAgICAgICAgICAgLy8gY29ycmVzcG9uZCB0byB0aGUgYG1vZHVsb2Agb3BlcmF0aW9uIGZvciBuZWdhdGl2ZSBudW1iZXJzLlxuICAgICAgICAgICAgICAgICAgdGltZSA9ICh2YWx1ZSAlIDg2NGU1ICsgODY0ZTUpICUgODY0ZTU7XG4gICAgICAgICAgICAgICAgICAvLyBUaGUgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgYXJlIG9idGFpbmVkIGJ5XG4gICAgICAgICAgICAgICAgICAvLyBkZWNvbXBvc2luZyB0aGUgdGltZSB3aXRoaW4gdGhlIGRheS4gU2VlIHNlY3Rpb24gMTUuOS4xLjEwLlxuICAgICAgICAgICAgICAgICAgaG91cnMgPSBmbG9vcih0aW1lIC8gMzZlNSkgJSAyNDtcbiAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBmbG9vcih0aW1lIC8gNmU0KSAlIDYwO1xuICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IGZsb29yKHRpbWUgLyAxZTMpICUgNjA7XG4gICAgICAgICAgICAgICAgICBtaWxsaXNlY29uZHMgPSB0aW1lICUgMWUzO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB5ZWFyID0gdmFsdWUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICAgIG1vbnRoID0gdmFsdWUuZ2V0VVRDTW9udGgoKTtcbiAgICAgICAgICAgICAgICAgIGRhdGUgPSB2YWx1ZS5nZXRVVENEYXRlKCk7XG4gICAgICAgICAgICAgICAgICBob3VycyA9IHZhbHVlLmdldFVUQ0hvdXJzKCk7XG4gICAgICAgICAgICAgICAgICBtaW51dGVzID0gdmFsdWUuZ2V0VVRDTWludXRlcygpO1xuICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IHZhbHVlLmdldFVUQ1NlY29uZHMoKTtcbiAgICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kcyA9IHZhbHVlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZXJpYWxpemUgZXh0ZW5kZWQgeWVhcnMgY29ycmVjdGx5LlxuICAgICAgICAgICAgICAgIHZhbHVlID0gKHllYXIgPD0gMCB8fCB5ZWFyID49IDFlNCA/ICh5ZWFyIDwgMCA/IFwiLVwiIDogXCIrXCIpICsgdG9QYWRkZWRTdHJpbmcoNiwgeWVhciA8IDAgPyAteWVhciA6IHllYXIpIDogdG9QYWRkZWRTdHJpbmcoNCwgeWVhcikpICtcbiAgICAgICAgICAgICAgICAgIFwiLVwiICsgdG9QYWRkZWRTdHJpbmcoMiwgbW9udGggKyAxKSArIFwiLVwiICsgdG9QYWRkZWRTdHJpbmcoMiwgZGF0ZSkgK1xuICAgICAgICAgICAgICAgICAgLy8gTW9udGhzLCBkYXRlcywgaG91cnMsIG1pbnV0ZXMsIGFuZCBzZWNvbmRzIHNob3VsZCBoYXZlIHR3b1xuICAgICAgICAgICAgICAgICAgLy8gZGlnaXRzOyBtaWxsaXNlY29uZHMgc2hvdWxkIGhhdmUgdGhyZWUuXG4gICAgICAgICAgICAgICAgICBcIlRcIiArIHRvUGFkZGVkU3RyaW5nKDIsIGhvdXJzKSArIFwiOlwiICsgdG9QYWRkZWRTdHJpbmcoMiwgbWludXRlcykgKyBcIjpcIiArIHRvUGFkZGVkU3RyaW5nKDIsIHNlY29uZHMpICtcbiAgICAgICAgICAgICAgICAgIC8vIE1pbGxpc2Vjb25kcyBhcmUgb3B0aW9uYWwgaW4gRVMgNS4wLCBidXQgcmVxdWlyZWQgaW4gNS4xLlxuICAgICAgICAgICAgICAgICAgXCIuXCIgKyB0b1BhZGRlZFN0cmluZygzLCBtaWxsaXNlY29uZHMpICsgXCJaXCI7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZS50b0pTT04gPT0gXCJmdW5jdGlvblwiICYmICgoY2xhc3NOYW1lICE9IG51bWJlckNsYXNzICYmIGNsYXNzTmFtZSAhPSBzdHJpbmdDbGFzcyAmJiBjbGFzc05hbWUgIT0gYXJyYXlDbGFzcykgfHwgaXNQcm9wZXJ0eS5jYWxsKHZhbHVlLCBcInRvSlNPTlwiKSkpIHtcbiAgICAgICAgICAgICAgLy8gUHJvdG90eXBlIDw9IDEuNi4xIGFkZHMgbm9uLXN0YW5kYXJkIGB0b0pTT05gIG1ldGhvZHMgdG8gdGhlXG4gICAgICAgICAgICAgIC8vIGBOdW1iZXJgLCBgU3RyaW5nYCwgYERhdGVgLCBhbmQgYEFycmF5YCBwcm90b3R5cGVzLiBKU09OIDNcbiAgICAgICAgICAgICAgLy8gaWdub3JlcyBhbGwgYHRvSlNPTmAgbWV0aG9kcyBvbiB0aGVzZSBvYmplY3RzIHVubGVzcyB0aGV5IGFyZVxuICAgICAgICAgICAgICAvLyBkZWZpbmVkIGRpcmVjdGx5IG9uIGFuIGluc3RhbmNlLlxuICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvSlNPTihwcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgLy8gSWYgYSByZXBsYWNlbWVudCBmdW5jdGlvbiB3YXMgcHJvdmlkZWQsIGNhbGwgaXQgdG8gb2J0YWluIHRoZSB2YWx1ZVxuICAgICAgICAgICAgLy8gZm9yIHNlcmlhbGl6YXRpb24uXG4gICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmNhbGwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBcIm51bGxcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2xhc3NOYW1lID0gZ2V0Q2xhc3MuY2FsbCh2YWx1ZSk7XG4gICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSBib29sZWFuQ2xhc3MpIHtcbiAgICAgICAgICAgIC8vIEJvb2xlYW5zIGFyZSByZXByZXNlbnRlZCBsaXRlcmFsbHkuXG4gICAgICAgICAgICByZXR1cm4gXCJcIiArIHZhbHVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IG51bWJlckNsYXNzKSB7XG4gICAgICAgICAgICAvLyBKU09OIG51bWJlcnMgbXVzdCBiZSBmaW5pdGUuIGBJbmZpbml0eWAgYW5kIGBOYU5gIGFyZSBzZXJpYWxpemVkIGFzXG4gICAgICAgICAgICAvLyBgXCJudWxsXCJgLlxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlID4gLTEgLyAwICYmIHZhbHVlIDwgMSAvIDAgPyBcIlwiICsgdmFsdWUgOiBcIm51bGxcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZSA9PSBzdHJpbmdDbGFzcykge1xuICAgICAgICAgICAgLy8gU3RyaW5ncyBhcmUgZG91YmxlLXF1b3RlZCBhbmQgZXNjYXBlZC5cbiAgICAgICAgICAgIHJldHVybiBxdW90ZShcIlwiICsgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBSZWN1cnNpdmVseSBzZXJpYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzLlxuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGN5Y2xpYyBzdHJ1Y3R1cmVzLiBUaGlzIGlzIGEgbGluZWFyIHNlYXJjaDsgcGVyZm9ybWFuY2VcbiAgICAgICAgICAgIC8vIGlzIGludmVyc2VseSBwcm9wb3J0aW9uYWwgdG8gdGhlIG51bWJlciBvZiB1bmlxdWUgbmVzdGVkIG9iamVjdHMuXG4gICAgICAgICAgICBmb3IgKGxlbmd0aCA9IHN0YWNrLmxlbmd0aDsgbGVuZ3RoLS07KSB7XG4gICAgICAgICAgICAgIGlmIChzdGFja1tsZW5ndGhdID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIEN5Y2xpYyBzdHJ1Y3R1cmVzIGNhbm5vdCBiZSBzZXJpYWxpemVkIGJ5IGBKU09OLnN0cmluZ2lmeWAuXG4gICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgb2JqZWN0IHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICAgICAgICAgIHN0YWNrLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgY3VycmVudCBpbmRlbnRhdGlvbiBsZXZlbCBhbmQgaW5kZW50IG9uZSBhZGRpdGlvbmFsIGxldmVsLlxuICAgICAgICAgICAgcHJlZml4ID0gaW5kZW50YXRpb247XG4gICAgICAgICAgICBpbmRlbnRhdGlvbiArPSB3aGl0ZXNwYWNlO1xuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzKSB7XG4gICAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHNlcmlhbGl6ZSBhcnJheSBlbGVtZW50cy5cbiAgICAgICAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gc2VyaWFsaXplKGluZGV4LCB2YWx1ZSwgY2FsbGJhY2ssIHByb3BlcnRpZXMsIHdoaXRlc3BhY2UsIGluZGVudGF0aW9uLCBzdGFjayk7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGVsZW1lbnQgPT09IHVuZGVmID8gXCJudWxsXCIgOiBlbGVtZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRzLmxlbmd0aCA/ICh3aGl0ZXNwYWNlID8gXCJbXFxuXCIgKyBpbmRlbnRhdGlvbiArIHJlc3VsdHMuam9pbihcIixcXG5cIiArIGluZGVudGF0aW9uKSArIFwiXFxuXCIgKyBwcmVmaXggKyBcIl1cIiA6IChcIltcIiArIHJlc3VsdHMuam9pbihcIixcIikgKyBcIl1cIikpIDogXCJbXVwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgc2VyaWFsaXplIG9iamVjdCBtZW1iZXJzLiBNZW1iZXJzIGFyZSBzZWxlY3RlZCBmcm9tXG4gICAgICAgICAgICAgIC8vIGVpdGhlciBhIHVzZXItc3BlY2lmaWVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMsIG9yIHRoZSBvYmplY3RcbiAgICAgICAgICAgICAgLy8gaXRzZWxmLlxuICAgICAgICAgICAgICBmb3JFYWNoKHByb3BlcnRpZXMgfHwgdmFsdWUsIGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gc2VyaWFsaXplKHByb3BlcnR5LCB2YWx1ZSwgY2FsbGJhY2ssIHByb3BlcnRpZXMsIHdoaXRlc3BhY2UsIGluZGVudGF0aW9uLCBzdGFjayk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IHVuZGVmKSB7XG4gICAgICAgICAgICAgICAgICAvLyBBY2NvcmRpbmcgdG8gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMzogXCJJZiBgZ2FwYCB7d2hpdGVzcGFjZX1cbiAgICAgICAgICAgICAgICAgIC8vIGlzIG5vdCB0aGUgZW1wdHkgc3RyaW5nLCBsZXQgYG1lbWJlcmAge3F1b3RlKHByb3BlcnR5KSArIFwiOlwifVxuICAgICAgICAgICAgICAgICAgLy8gYmUgdGhlIGNvbmNhdGVuYXRpb24gb2YgYG1lbWJlcmAgYW5kIHRoZSBgc3BhY2VgIGNoYXJhY3Rlci5cIlxuICAgICAgICAgICAgICAgICAgLy8gVGhlIFwiYHNwYWNlYCBjaGFyYWN0ZXJcIiByZWZlcnMgdG8gdGhlIGxpdGVyYWwgc3BhY2VcbiAgICAgICAgICAgICAgICAgIC8vIGNoYXJhY3Rlciwgbm90IHRoZSBgc3BhY2VgIHt3aWR0aH0gYXJndW1lbnQgcHJvdmlkZWQgdG9cbiAgICAgICAgICAgICAgICAgIC8vIGBKU09OLnN0cmluZ2lmeWAuXG4gICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gocXVvdGUocHJvcGVydHkpICsgXCI6XCIgKyAod2hpdGVzcGFjZSA/IFwiIFwiIDogXCJcIikgKyBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRzLmxlbmd0aCA/ICh3aGl0ZXNwYWNlID8gXCJ7XFxuXCIgKyBpbmRlbnRhdGlvbiArIHJlc3VsdHMuam9pbihcIixcXG5cIiArIGluZGVudGF0aW9uKSArIFwiXFxuXCIgKyBwcmVmaXggKyBcIn1cIiA6IChcIntcIiArIHJlc3VsdHMuam9pbihcIixcIikgKyBcIn1cIikpIDogXCJ7fVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBvYmplY3QgZnJvbSB0aGUgdHJhdmVyc2VkIG9iamVjdCBzdGFjay5cbiAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUHVibGljOiBgSlNPTi5zdHJpbmdpZnlgLiBTZWUgRVMgNS4xIHNlY3Rpb24gMTUuMTIuMy5cbiAgICAgICAgZXhwb3J0cy5zdHJpbmdpZnkgPSBmdW5jdGlvbiAoc291cmNlLCBmaWx0ZXIsIHdpZHRoKSB7XG4gICAgICAgICAgdmFyIHdoaXRlc3BhY2UsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCBjbGFzc05hbWU7XG4gICAgICAgICAgaWYgKG9iamVjdFR5cGVzW3R5cGVvZiBmaWx0ZXJdICYmIGZpbHRlcikge1xuICAgICAgICAgICAgaWYgKChjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKGZpbHRlcikpID09IGZ1bmN0aW9uQ2xhc3MpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmaWx0ZXI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzKSB7XG4gICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIHByb3BlcnR5IG5hbWVzIGFycmF5IGludG8gYSBtYWtlc2hpZnQgc2V0LlxuICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMCwgbGVuZ3RoID0gZmlsdGVyLmxlbmd0aCwgdmFsdWU7IGluZGV4IDwgbGVuZ3RoOyB2YWx1ZSA9IGZpbHRlcltpbmRleCsrXSwgKChjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHZhbHVlKSksIGNsYXNzTmFtZSA9PSBzdHJpbmdDbGFzcyB8fCBjbGFzc05hbWUgPT0gbnVtYmVyQ2xhc3MpICYmIChwcm9wZXJ0aWVzW3ZhbHVlXSA9IDEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHdpZHRoKSB7XG4gICAgICAgICAgICBpZiAoKGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwod2lkdGgpKSA9PSBudW1iZXJDbGFzcykge1xuICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBgd2lkdGhgIHRvIGFuIGludGVnZXIgYW5kIGNyZWF0ZSBhIHN0cmluZyBjb250YWluaW5nXG4gICAgICAgICAgICAgIC8vIGB3aWR0aGAgbnVtYmVyIG9mIHNwYWNlIGNoYXJhY3RlcnMuXG4gICAgICAgICAgICAgIGlmICgod2lkdGggLT0gd2lkdGggJSAxKSA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHdoaXRlc3BhY2UgPSBcIlwiLCB3aWR0aCA+IDEwICYmICh3aWR0aCA9IDEwKTsgd2hpdGVzcGFjZS5sZW5ndGggPCB3aWR0aDsgd2hpdGVzcGFjZSArPSBcIiBcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzKSB7XG4gICAgICAgICAgICAgIHdoaXRlc3BhY2UgPSB3aWR0aC5sZW5ndGggPD0gMTAgPyB3aWR0aCA6IHdpZHRoLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gT3BlcmEgPD0gNy41NHUyIGRpc2NhcmRzIHRoZSB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIGVtcHR5IHN0cmluZyBrZXlzXG4gICAgICAgICAgLy8gKGBcIlwiYCkgb25seSBpZiB0aGV5IGFyZSB1c2VkIGRpcmVjdGx5IHdpdGhpbiBhbiBvYmplY3QgbWVtYmVyIGxpc3RcbiAgICAgICAgICAvLyAoZS5nLiwgYCEoXCJcIiBpbiB7IFwiXCI6IDF9KWApLlxuICAgICAgICAgIHJldHVybiBzZXJpYWxpemUoXCJcIiwgKHZhbHVlID0ge30sIHZhbHVlW1wiXCJdID0gc291cmNlLCB2YWx1ZSksIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCB3aGl0ZXNwYWNlLCBcIlwiLCBbXSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFB1YmxpYzogUGFyc2VzIGEgSlNPTiBzb3VyY2Ugc3RyaW5nLlxuICAgICAgaWYgKCFoYXMoXCJqc29uLXBhcnNlXCIpKSB7XG4gICAgICAgIHZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXG4gICAgICAgIC8vIEludGVybmFsOiBBIG1hcCBvZiBlc2NhcGVkIGNvbnRyb2wgY2hhcmFjdGVycyBhbmQgdGhlaXIgdW5lc2NhcGVkXG4gICAgICAgIC8vIGVxdWl2YWxlbnRzLlxuICAgICAgICB2YXIgVW5lc2NhcGVzID0ge1xuICAgICAgICAgIDkyOiBcIlxcXFxcIixcbiAgICAgICAgICAzNDogJ1wiJyxcbiAgICAgICAgICA0NzogXCIvXCIsXG4gICAgICAgICAgOTg6IFwiXFxiXCIsXG4gICAgICAgICAgMTE2OiBcIlxcdFwiLFxuICAgICAgICAgIDExMDogXCJcXG5cIixcbiAgICAgICAgICAxMDI6IFwiXFxmXCIsXG4gICAgICAgICAgMTE0OiBcIlxcclwiXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW50ZXJuYWw6IFN0b3JlcyB0aGUgcGFyc2VyIHN0YXRlLlxuICAgICAgICB2YXIgSW5kZXgsIFNvdXJjZTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogUmVzZXRzIHRoZSBwYXJzZXIgc3RhdGUgYW5kIHRocm93cyBhIGBTeW50YXhFcnJvcmAuXG4gICAgICAgIHZhciBhYm9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBJbmRleCA9IFNvdXJjZSA9IG51bGw7XG4gICAgICAgICAgdGhyb3cgU3ludGF4RXJyb3IoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogUmV0dXJucyB0aGUgbmV4dCB0b2tlbiwgb3IgYFwiJFwiYCBpZiB0aGUgcGFyc2VyIGhhcyByZWFjaGVkXG4gICAgICAgIC8vIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzdHJpbmcuIEEgdG9rZW4gbWF5IGJlIGEgc3RyaW5nLCBudW1iZXIsIGBudWxsYFxuICAgICAgICAvLyBsaXRlcmFsLCBvciBCb29sZWFuIGxpdGVyYWwuXG4gICAgICAgIHZhciBsZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHNvdXJjZSA9IFNvdXJjZSwgbGVuZ3RoID0gc291cmNlLmxlbmd0aCwgdmFsdWUsIGJlZ2luLCBwb3NpdGlvbiwgaXNTaWduZWQsIGNoYXJDb2RlO1xuICAgICAgICAgIHdoaWxlIChJbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGNoYXJDb2RlKSB7XG4gICAgICAgICAgICAgIGNhc2UgOTogY2FzZSAxMDogY2FzZSAxMzogY2FzZSAzMjpcbiAgICAgICAgICAgICAgICAvLyBTa2lwIHdoaXRlc3BhY2UgdG9rZW5zLCBpbmNsdWRpbmcgdGFicywgY2FycmlhZ2UgcmV0dXJucywgbGluZVxuICAgICAgICAgICAgICAgIC8vIGZlZWRzLCBhbmQgc3BhY2UgY2hhcmFjdGVycy5cbiAgICAgICAgICAgICAgICBJbmRleCsrO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIDEyMzogY2FzZSAxMjU6IGNhc2UgOTE6IGNhc2UgOTM6IGNhc2UgNTg6IGNhc2UgNDQ6XG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgYSBwdW5jdHVhdG9yIHRva2VuIChge2AsIGB9YCwgYFtgLCBgXWAsIGA6YCwgb3IgYCxgKSBhdFxuICAgICAgICAgICAgICAgIC8vIHRoZSBjdXJyZW50IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIHZhbHVlID0gY2hhckluZGV4QnVnZ3kgPyBzb3VyY2UuY2hhckF0KEluZGV4KSA6IHNvdXJjZVtJbmRleF07XG4gICAgICAgICAgICAgICAgSW5kZXgrKztcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgIGNhc2UgMzQ6XG4gICAgICAgICAgICAgICAgLy8gYFwiYCBkZWxpbWl0cyBhIEpTT04gc3RyaW5nOyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNoYXJhY3RlciBhbmRcbiAgICAgICAgICAgICAgICAvLyBiZWdpbiBwYXJzaW5nIHRoZSBzdHJpbmcuIFN0cmluZyB0b2tlbnMgYXJlIHByZWZpeGVkIHdpdGggdGhlXG4gICAgICAgICAgICAgICAgLy8gc2VudGluZWwgYEBgIGNoYXJhY3RlciB0byBkaXN0aW5ndWlzaCB0aGVtIGZyb20gcHVuY3R1YXRvcnMgYW5kXG4gICAgICAgICAgICAgICAgLy8gZW5kLW9mLXN0cmluZyB0b2tlbnMuXG4gICAgICAgICAgICAgICAgZm9yICh2YWx1ZSA9IFwiQFwiLCBJbmRleCsrOyBJbmRleCA8IGxlbmd0aDspIHtcbiAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlIDwgMzIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVW5lc2NhcGVkIEFTQ0lJIGNvbnRyb2wgY2hhcmFjdGVycyAodGhvc2Ugd2l0aCBhIGNvZGUgdW5pdFxuICAgICAgICAgICAgICAgICAgICAvLyBsZXNzIHRoYW4gdGhlIHNwYWNlIGNoYXJhY3RlcikgYXJlIG5vdCBwZXJtaXR0ZWQuXG4gICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXJDb2RlID09IDkyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgcmV2ZXJzZSBzb2xpZHVzIChgXFxgKSBtYXJrcyB0aGUgYmVnaW5uaW5nIG9mIGFuIGVzY2FwZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udHJvbCBjaGFyYWN0ZXIgKGluY2x1ZGluZyBgXCJgLCBgXFxgLCBhbmQgYC9gKSBvciBVbmljb2RlXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzY2FwZSBzZXF1ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjaGFyQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTI6IGNhc2UgMzQ6IGNhc2UgNDc6IGNhc2UgOTg6IGNhc2UgMTE2OiBjYXNlIDExMDogY2FzZSAxMDI6IGNhc2UgMTE0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmV2aXZlIGVzY2FwZWQgY29udHJvbCBjaGFyYWN0ZXJzLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gVW5lc2NhcGVzW2NoYXJDb2RlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGBcXHVgIG1hcmtzIHRoZSBiZWdpbm5pbmcgb2YgYSBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdG8gdGhlIGZpcnN0IGNoYXJhY3RlciBhbmQgdmFsaWRhdGUgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3VyLWRpZ2l0IGNvZGUgcG9pbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWdpbiA9ICsrSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHBvc2l0aW9uID0gSW5kZXggKyA0OyBJbmRleCA8IHBvc2l0aW9uOyBJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBIHZhbGlkIHNlcXVlbmNlIGNvbXByaXNlcyBmb3VyIGhleGRpZ2l0cyAoY2FzZS1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5zZW5zaXRpdmUpIHRoYXQgZm9ybSBhIHNpbmdsZSBoZXhhZGVjaW1hbCB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcgfHwgY2hhckNvZGUgPj0gOTcgJiYgY2hhckNvZGUgPD0gMTAyIHx8IGNoYXJDb2RlID49IDY1ICYmIGNoYXJDb2RlIDw9IDcwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWQgVW5pY29kZSBlc2NhcGUgc2VxdWVuY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmV2aXZlIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IGZyb21DaGFyQ29kZShcIjB4XCIgKyBzb3VyY2Uuc2xpY2UoYmVnaW4sIEluZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZCBlc2NhcGUgc2VxdWVuY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPT0gMzQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBBbiB1bmVzY2FwZWQgZG91YmxlLXF1b3RlIGNoYXJhY3RlciBtYXJrcyB0aGUgZW5kIG9mIHRoZVxuICAgICAgICAgICAgICAgICAgICAgIC8vIHN0cmluZy5cbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYmVnaW4gPSBJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gT3B0aW1pemUgZm9yIHRoZSBjb21tb24gY2FzZSB3aGVyZSBhIHN0cmluZyBpcyB2YWxpZC5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNoYXJDb2RlID49IDMyICYmIGNoYXJDb2RlICE9IDkyICYmIGNoYXJDb2RlICE9IDM0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIHN0cmluZyBhcy1pcy5cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gc291cmNlLnNsaWNlKGJlZ2luLCBJbmRleCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuY2hhckNvZGVBdChJbmRleCkgPT0gMzQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdG8gdGhlIG5leHQgY2hhcmFjdGVyIGFuZCByZXR1cm4gdGhlIHJldml2ZWQgc3RyaW5nLlxuICAgICAgICAgICAgICAgICAgSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVW50ZXJtaW5hdGVkIHN0cmluZy5cbiAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFBhcnNlIG51bWJlcnMgYW5kIGxpdGVyYWxzLlxuICAgICAgICAgICAgICAgIGJlZ2luID0gSW5kZXg7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSBwYXN0IHRoZSBuZWdhdGl2ZSBzaWduLCBpZiBvbmUgaXMgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSA0NSkge1xuICAgICAgICAgICAgICAgICAgaXNTaWduZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgYW4gaW50ZWdlciBvciBmbG9hdGluZy1wb2ludCB2YWx1ZS5cbiAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpIHtcbiAgICAgICAgICAgICAgICAgIC8vIExlYWRpbmcgemVyb2VzIGFyZSBpbnRlcnByZXRlZCBhcyBvY3RhbCBsaXRlcmFscy5cbiAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSA0OCAmJiAoKGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXggKyAxKSksIGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbGxlZ2FsIG9jdGFsIGxpdGVyYWwuXG4gICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpc1NpZ25lZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgdGhlIGludGVnZXIgY29tcG9uZW50LlxuICAgICAgICAgICAgICAgICAgZm9yICg7IEluZGV4IDwgbGVuZ3RoICYmICgoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCkpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7IEluZGV4KyspO1xuICAgICAgICAgICAgICAgICAgLy8gRmxvYXRzIGNhbm5vdCBjb250YWluIGEgbGVhZGluZyBkZWNpbWFsIHBvaW50OyBob3dldmVyLCB0aGlzXG4gICAgICAgICAgICAgICAgICAvLyBjYXNlIGlzIGFscmVhZHkgYWNjb3VudGVkIGZvciBieSB0aGUgcGFyc2VyLlxuICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KSA9PSA0Nikge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICsrSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBkZWNpbWFsIGNvbXBvbmVudC5cbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IHBvc2l0aW9uIDwgbGVuZ3RoICYmICgoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbikpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7IHBvc2l0aW9uKyspO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT0gSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBJbGxlZ2FsIHRyYWlsaW5nIGRlY2ltYWwuXG4gICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBJbmRleCA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgZXhwb25lbnRzLiBUaGUgYGVgIGRlbm90aW5nIHRoZSBleHBvbmVudCBpc1xuICAgICAgICAgICAgICAgICAgLy8gY2FzZS1pbnNlbnNpdGl2ZS5cbiAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlID09IDEwMSB8fCBjaGFyQ29kZSA9PSA2OSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIHBhc3QgdGhlIHNpZ24gZm9sbG93aW5nIHRoZSBleHBvbmVudCwgaWYgb25lIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlID09IDQzIHx8IGNoYXJDb2RlID09IDQ1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgZXhwb25lbnRpYWwgY29tcG9uZW50LlxuICAgICAgICAgICAgICAgICAgICBmb3IgKHBvc2l0aW9uID0gSW5kZXg7IHBvc2l0aW9uIDwgbGVuZ3RoICYmICgoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbikpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7IHBvc2l0aW9uKyspO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT0gSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBJbGxlZ2FsIGVtcHR5IGV4cG9uZW50LlxuICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgSW5kZXggPSBwb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC8vIENvZXJjZSB0aGUgcGFyc2VkIHZhbHVlIHRvIGEgSmF2YVNjcmlwdCBudW1iZXIuXG4gICAgICAgICAgICAgICAgICByZXR1cm4gK3NvdXJjZS5zbGljZShiZWdpbiwgSW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBIG5lZ2F0aXZlIHNpZ24gbWF5IG9ubHkgcHJlY2VkZSBudW1iZXJzLlxuICAgICAgICAgICAgICAgIGlmIChpc1NpZ25lZCkge1xuICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYHRydWVgLCBgZmFsc2VgLCBhbmQgYG51bGxgIGxpdGVyYWxzLlxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2Uuc2xpY2UoSW5kZXgsIEluZGV4ICsgNCkgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICAgIEluZGV4ICs9IDQ7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZS5zbGljZShJbmRleCwgSW5kZXggKyA1KSA9PSBcImZhbHNlXCIpIHtcbiAgICAgICAgICAgICAgICAgIEluZGV4ICs9IDU7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2Uuc2xpY2UoSW5kZXgsIEluZGV4ICsgNCkgPT0gXCJudWxsXCIpIHtcbiAgICAgICAgICAgICAgICAgIEluZGV4ICs9IDQ7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVW5yZWNvZ25pemVkIHRva2VuLlxuICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFJldHVybiB0aGUgc2VudGluZWwgYCRgIGNoYXJhY3RlciBpZiB0aGUgcGFyc2VyIGhhcyByZWFjaGVkIHRoZSBlbmRcbiAgICAgICAgICAvLyBvZiB0aGUgc291cmNlIHN0cmluZy5cbiAgICAgICAgICByZXR1cm4gXCIkXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW50ZXJuYWw6IFBhcnNlcyBhIEpTT04gYHZhbHVlYCB0b2tlbi5cbiAgICAgICAgdmFyIGdldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhciByZXN1bHRzLCBoYXNNZW1iZXJzO1xuICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIiRcIikge1xuICAgICAgICAgICAgLy8gVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQuXG4gICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGlmICgoY2hhckluZGV4QnVnZ3kgPyB2YWx1ZS5jaGFyQXQoMCkgOiB2YWx1ZVswXSkgPT0gXCJAXCIpIHtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBzZW50aW5lbCBgQGAgY2hhcmFjdGVyLlxuICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQYXJzZSBvYmplY3QgYW5kIGFycmF5IGxpdGVyYWxzLlxuICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiW1wiKSB7XG4gICAgICAgICAgICAgIC8vIFBhcnNlcyBhIEpTT04gYXJyYXksIHJldHVybmluZyBhIG5ldyBKYXZhU2NyaXB0IGFycmF5LlxuICAgICAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAoOzsgaGFzTWVtYmVycyB8fCAoaGFzTWVtYmVycyA9IHRydWUpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtcbiAgICAgICAgICAgICAgICAvLyBBIGNsb3Npbmcgc3F1YXJlIGJyYWNrZXQgbWFya3MgdGhlIGVuZCBvZiB0aGUgYXJyYXkgbGl0ZXJhbC5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCJdXCIpIHtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgYXJyYXkgbGl0ZXJhbCBjb250YWlucyBlbGVtZW50cywgdGhlIGN1cnJlbnQgdG9rZW5cbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgYmUgYSBjb21tYSBzZXBhcmF0aW5nIHRoZSBwcmV2aW91cyBlbGVtZW50IGZyb20gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV4dC5cbiAgICAgICAgICAgICAgICBpZiAoaGFzTWVtYmVycykge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbGV4KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIl1cIikge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZXhwZWN0ZWQgdHJhaWxpbmcgYCxgIGluIGFycmF5IGxpdGVyYWwuXG4gICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBgLGAgbXVzdCBzZXBhcmF0ZSBlYWNoIGFycmF5IGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEVsaXNpb25zIGFuZCBsZWFkaW5nIGNvbW1hcyBhcmUgbm90IHBlcm1pdHRlZC5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCIsXCIpIHtcbiAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChnZXQodmFsdWUpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gXCJ7XCIpIHtcbiAgICAgICAgICAgICAgLy8gUGFyc2VzIGEgSlNPTiBvYmplY3QsIHJldHVybmluZyBhIG5ldyBKYXZhU2NyaXB0IG9iamVjdC5cbiAgICAgICAgICAgICAgcmVzdWx0cyA9IHt9O1xuICAgICAgICAgICAgICBmb3IgKDs7IGhhc01lbWJlcnMgfHwgKGhhc01lbWJlcnMgPSB0cnVlKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbGV4KCk7XG4gICAgICAgICAgICAgICAgLy8gQSBjbG9zaW5nIGN1cmx5IGJyYWNlIG1hcmtzIHRoZSBlbmQgb2YgdGhlIG9iamVjdCBsaXRlcmFsLlxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIn1cIikge1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBvYmplY3QgbGl0ZXJhbCBjb250YWlucyBtZW1iZXJzLCB0aGUgY3VycmVudCB0b2tlblxuICAgICAgICAgICAgICAgIC8vIHNob3VsZCBiZSBhIGNvbW1hIHNlcGFyYXRvci5cbiAgICAgICAgICAgICAgICBpZiAoaGFzTWVtYmVycykge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbGV4KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIn1cIikge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZXhwZWN0ZWQgdHJhaWxpbmcgYCxgIGluIG9iamVjdCBsaXRlcmFsLlxuICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgYCxgIG11c3Qgc2VwYXJhdGUgZWFjaCBvYmplY3QgbWVtYmVyLlxuICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBMZWFkaW5nIGNvbW1hcyBhcmUgbm90IHBlcm1pdHRlZCwgb2JqZWN0IHByb3BlcnR5IG5hbWVzIG11c3QgYmVcbiAgICAgICAgICAgICAgICAvLyBkb3VibGUtcXVvdGVkIHN0cmluZ3MsIGFuZCBhIGA6YCBtdXN0IHNlcGFyYXRlIGVhY2ggcHJvcGVydHlcbiAgICAgICAgICAgICAgICAvLyBuYW1lIGFuZCB2YWx1ZS5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCIsXCIgfHwgdHlwZW9mIHZhbHVlICE9IFwic3RyaW5nXCIgfHwgKGNoYXJJbmRleEJ1Z2d5ID8gdmFsdWUuY2hhckF0KDApIDogdmFsdWVbMF0pICE9IFwiQFwiIHx8IGxleCgpICE9IFwiOlwiKSB7XG4gICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRzW3ZhbHVlLnNsaWNlKDEpXSA9IGdldChsZXgoKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVbmV4cGVjdGVkIHRva2VuIGVuY291bnRlcmVkLlxuICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEludGVybmFsOiBVcGRhdGVzIGEgdHJhdmVyc2VkIG9iamVjdCBtZW1iZXIuXG4gICAgICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbiAoc291cmNlLCBwcm9wZXJ0eSwgY2FsbGJhY2spIHtcbiAgICAgICAgICB2YXIgZWxlbWVudCA9IHdhbGsoc291cmNlLCBwcm9wZXJ0eSwgY2FsbGJhY2spO1xuICAgICAgICAgIGlmIChlbGVtZW50ID09PSB1bmRlZikge1xuICAgICAgICAgICAgZGVsZXRlIHNvdXJjZVtwcm9wZXJ0eV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvdXJjZVtwcm9wZXJ0eV0gPSBlbGVtZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogUmVjdXJzaXZlbHkgdHJhdmVyc2VzIGEgcGFyc2VkIEpTT04gb2JqZWN0LCBpbnZva2luZyB0aGVcbiAgICAgICAgLy8gYGNhbGxiYWNrYCBmdW5jdGlvbiBmb3IgZWFjaCB2YWx1ZS4gVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAgICAgICAgLy8gYFdhbGsoaG9sZGVyLCBuYW1lKWAgb3BlcmF0aW9uIGRlZmluZWQgaW4gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMi5cbiAgICAgICAgdmFyIHdhbGsgPSBmdW5jdGlvbiAoc291cmNlLCBwcm9wZXJ0eSwgY2FsbGJhY2spIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBzb3VyY2VbcHJvcGVydHldLCBsZW5ndGg7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiICYmIHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBgZm9yRWFjaGAgY2FuJ3QgYmUgdXNlZCB0byB0cmF2ZXJzZSBhbiBhcnJheSBpbiBPcGVyYSA8PSA4LjU0XG4gICAgICAgICAgICAvLyBiZWNhdXNlIGl0cyBgT2JqZWN0I2hhc093blByb3BlcnR5YCBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIGBmYWxzZWBcbiAgICAgICAgICAgIC8vIGZvciBhcnJheSBpbmRpY2VzIChlLmcuLCBgIVsxLCAyLCAzXS5oYXNPd25Qcm9wZXJ0eShcIjBcIilgKS5cbiAgICAgICAgICAgIGlmIChnZXRDbGFzcy5jYWxsKHZhbHVlKSA9PSBhcnJheUNsYXNzKSB7XG4gICAgICAgICAgICAgIGZvciAobGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBsZW5ndGgtLTspIHtcbiAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUsIGxlbmd0aCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmb3JFYWNoKHZhbHVlLCBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUsIHByb3BlcnR5LCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbChzb3VyY2UsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUHVibGljOiBgSlNPTi5wYXJzZWAuIFNlZSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4yLlxuICAgICAgICBleHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHNvdXJjZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICB2YXIgcmVzdWx0LCB2YWx1ZTtcbiAgICAgICAgICBJbmRleCA9IDA7XG4gICAgICAgICAgU291cmNlID0gXCJcIiArIHNvdXJjZTtcbiAgICAgICAgICByZXN1bHQgPSBnZXQobGV4KCkpO1xuICAgICAgICAgIC8vIElmIGEgSlNPTiBzdHJpbmcgY29udGFpbnMgbXVsdGlwbGUgdG9rZW5zLCBpdCBpcyBpbnZhbGlkLlxuICAgICAgICAgIGlmIChsZXgoKSAhPSBcIiRcIikge1xuICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHBhcnNlciBzdGF0ZS5cbiAgICAgICAgICBJbmRleCA9IFNvdXJjZSA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrICYmIGdldENsYXNzLmNhbGwoY2FsbGJhY2spID09IGZ1bmN0aW9uQ2xhc3MgPyB3YWxrKCh2YWx1ZSA9IHt9LCB2YWx1ZVtcIlwiXSA9IHJlc3VsdCwgdmFsdWUpLCBcIlwiLCBjYWxsYmFjaykgOiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0c1tcInJ1bkluQ29udGV4dFwiXSA9IHJ1bkluQ29udGV4dDtcbiAgICByZXR1cm4gZXhwb3J0cztcbiAgfVxuXG4gIGlmIChmcmVlRXhwb3J0cyAmJiAhaXNMb2FkZXIpIHtcbiAgICAvLyBFeHBvcnQgZm9yIENvbW1vbkpTIGVudmlyb25tZW50cy5cbiAgICBydW5JbkNvbnRleHQocm9vdCwgZnJlZUV4cG9ydHMpO1xuICB9IGVsc2Uge1xuICAgIC8vIEV4cG9ydCBmb3Igd2ViIGJyb3dzZXJzIGFuZCBKYXZhU2NyaXB0IGVuZ2luZXMuXG4gICAgdmFyIG5hdGl2ZUpTT04gPSByb290LkpTT04sXG4gICAgICAgIHByZXZpb3VzSlNPTiA9IHJvb3RbXCJKU09OM1wiXSxcbiAgICAgICAgaXNSZXN0b3JlZCA9IGZhbHNlO1xuXG4gICAgdmFyIEpTT04zID0gcnVuSW5Db250ZXh0KHJvb3QsIChyb290W1wiSlNPTjNcIl0gPSB7XG4gICAgICAvLyBQdWJsaWM6IFJlc3RvcmVzIHRoZSBvcmlnaW5hbCB2YWx1ZSBvZiB0aGUgZ2xvYmFsIGBKU09OYCBvYmplY3QgYW5kXG4gICAgICAvLyByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBgSlNPTjNgIG9iamVjdC5cbiAgICAgIFwibm9Db25mbGljdFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNSZXN0b3JlZCkge1xuICAgICAgICAgIGlzUmVzdG9yZWQgPSB0cnVlO1xuICAgICAgICAgIHJvb3QuSlNPTiA9IG5hdGl2ZUpTT047XG4gICAgICAgICAgcm9vdFtcIkpTT04zXCJdID0gcHJldmlvdXNKU09OO1xuICAgICAgICAgIG5hdGl2ZUpTT04gPSBwcmV2aW91c0pTT04gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBKU09OMztcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICByb290LkpTT04gPSB7XG4gICAgICBcInBhcnNlXCI6IEpTT04zLnBhcnNlLFxuICAgICAgXCJzdHJpbmdpZnlcIjogSlNPTjMuc3RyaW5naWZ5XG4gICAgfTtcbiAgfVxuXG4gIC8vIEV4cG9ydCBmb3IgYXN5bmNocm9ub3VzIG1vZHVsZSBsb2FkZXJzLlxuICBpZiAoaXNMb2FkZXIpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIEpTT04zO1xuICAgIH0pO1xuICB9XG59KS5jYWxsKHRoaXMpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vanNvbjMvbGliL2pzb24zLmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmFuZG9tID0gcmVxdWlyZSgnLi9yYW5kb20nKTtcblxudmFyIG9uVW5sb2FkID0ge31cbiAgLCBhZnRlclVubG9hZCA9IGZhbHNlXG4gICAgLy8gZGV0ZWN0IGdvb2dsZSBjaHJvbWUgcGFja2FnZWQgYXBwcyBiZWNhdXNlIHRoZXkgZG9uJ3QgYWxsb3cgdGhlICd1bmxvYWQnIGV2ZW50XG4gICwgaXNDaHJvbWVQYWNrYWdlZEFwcCA9IGdsb2JhbC5jaHJvbWUgJiYgZ2xvYmFsLmNocm9tZS5hcHAgJiYgZ2xvYmFsLmNocm9tZS5hcHAucnVudGltZVxuICA7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhdHRhY2hFdmVudDogZnVuY3Rpb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgaWYgKHR5cGVvZiBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLmRvY3VtZW50ICYmIGdsb2JhbC5hdHRhY2hFdmVudCkge1xuICAgICAgLy8gSUUgcXVpcmtzLlxuICAgICAgLy8gQWNjb3JkaW5nIHRvOiBodHRwOi8vc3RldmVzb3VkZXJzLmNvbS9taXNjL3Rlc3QtcG9zdG1lc3NhZ2UucGhwXG4gICAgICAvLyB0aGUgbWVzc2FnZSBnZXRzIGRlbGl2ZXJlZCBvbmx5IHRvICdkb2N1bWVudCcsIG5vdCAnd2luZG93Jy5cbiAgICAgIGdsb2JhbC5kb2N1bWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgIC8vIEkgZ2V0ICd3aW5kb3cnIGZvciBpZTguXG4gICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiwgZGV0YWNoRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBnbG9iYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5kb2N1bWVudCAmJiBnbG9iYWwuZGV0YWNoRXZlbnQpIHtcbiAgICAgIGdsb2JhbC5kb2N1bWVudC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgIGdsb2JhbC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuLCB1bmxvYWRBZGQ6IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgaWYgKGlzQ2hyb21lUGFja2FnZWRBcHApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciByZWYgPSByYW5kb20uc3RyaW5nKDgpO1xuICAgIG9uVW5sb2FkW3JlZl0gPSBsaXN0ZW5lcjtcbiAgICBpZiAoYWZ0ZXJVbmxvYWQpIHtcbiAgICAgIHNldFRpbWVvdXQodGhpcy50cmlnZ2VyVW5sb2FkQ2FsbGJhY2tzLCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlZjtcbiAgfVxuXG4sIHVubG9hZERlbDogZnVuY3Rpb24ocmVmKSB7XG4gICAgaWYgKHJlZiBpbiBvblVubG9hZCkge1xuICAgICAgZGVsZXRlIG9uVW5sb2FkW3JlZl07XG4gICAgfVxuICB9XG5cbiwgdHJpZ2dlclVubG9hZENhbGxiYWNrczogZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgcmVmIGluIG9uVW5sb2FkKSB7XG4gICAgICBvblVubG9hZFtyZWZdKCk7XG4gICAgICBkZWxldGUgb25VbmxvYWRbcmVmXTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciB1bmxvYWRUcmlnZ2VyZWQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKGFmdGVyVW5sb2FkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGFmdGVyVW5sb2FkID0gdHJ1ZTtcbiAgbW9kdWxlLmV4cG9ydHMudHJpZ2dlclVubG9hZENhbGxiYWNrcygpO1xufTtcblxuLy8gJ3VubG9hZCcgYWxvbmUgaXMgbm90IHJlbGlhYmxlIGluIG9wZXJhIHdpdGhpbiBhbiBpZnJhbWUsIGJ1dCB3ZVxuLy8gY2FuJ3QgdXNlIGBiZWZvcmV1bmxvYWRgIGFzIElFIGZpcmVzIGl0IG9uIGphdmFzY3JpcHQ6IGxpbmtzLlxuaWYgKCFpc0Nocm9tZVBhY2thZ2VkQXBwKSB7XG4gIG1vZHVsZS5leHBvcnRzLmF0dGFjaEV2ZW50KCd1bmxvYWQnLCB1bmxvYWRUcmlnZ2VyZWQpO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdXRpbHMvZXZlbnQuanNcbiAqKiBtb2R1bGUgaWQgPSA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCB1cmxVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3VybCcpXG4gICwgU2VuZGVyUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3NlbmRlci1yZWNlaXZlcicpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDphamF4LWJhc2VkJyk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFqYXhTZW5kZXIoQWpheE9iamVjdCkge1xuICByZXR1cm4gZnVuY3Rpb24odXJsLCBwYXlsb2FkLCBjYWxsYmFjaykge1xuICAgIGRlYnVnKCdjcmVhdGUgYWpheCBzZW5kZXInLCB1cmwsIHBheWxvYWQpO1xuICAgIHZhciBvcHQgPSB7fTtcbiAgICBpZiAodHlwZW9mIHBheWxvYWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvcHQuaGVhZGVycyA9IHsnQ29udGVudC10eXBlJzogJ3RleHQvcGxhaW4nfTtcbiAgICB9XG4gICAgdmFyIGFqYXhVcmwgPSB1cmxVdGlscy5hZGRQYXRoKHVybCwgJy94aHJfc2VuZCcpO1xuICAgIHZhciB4byA9IG5ldyBBamF4T2JqZWN0KCdQT1NUJywgYWpheFVybCwgcGF5bG9hZCwgb3B0KTtcbiAgICB4by5vbmNlKCdmaW5pc2gnLCBmdW5jdGlvbihzdGF0dXMpIHtcbiAgICAgIGRlYnVnKCdmaW5pc2gnLCBzdGF0dXMpO1xuICAgICAgeG8gPSBudWxsO1xuXG4gICAgICBpZiAoc3RhdHVzICE9PSAyMDAgJiYgc3RhdHVzICE9PSAyMDQpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignaHR0cCBzdGF0dXMgJyArIHN0YXR1cykpO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBkZWJ1ZygnYWJvcnQnKTtcbiAgICAgIHhvLmNsb3NlKCk7XG4gICAgICB4byA9IG51bGw7XG5cbiAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ0Fib3J0ZWQnKTtcbiAgICAgIGVyci5jb2RlID0gMTAwMDtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgfTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gQWpheEJhc2VkVHJhbnNwb3J0KHRyYW5zVXJsLCB1cmxTdWZmaXgsIFJlY2VpdmVyLCBBamF4T2JqZWN0KSB7XG4gIFNlbmRlclJlY2VpdmVyLmNhbGwodGhpcywgdHJhbnNVcmwsIHVybFN1ZmZpeCwgY3JlYXRlQWpheFNlbmRlcihBamF4T2JqZWN0KSwgUmVjZWl2ZXIsIEFqYXhPYmplY3QpO1xufVxuXG5pbmhlcml0cyhBamF4QmFzZWRUcmFuc3BvcnQsIFNlbmRlclJlY2VpdmVyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBBamF4QmFzZWRUcmFuc3BvcnQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvbGliL2FqYXgtYmFzZWQuanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbi8qIGdsb2JhbCBjcnlwdG86dHJ1ZSAqL1xudmFyIGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xuXG4vLyBUaGlzIHN0cmluZyBoYXMgbGVuZ3RoIDMyLCBhIHBvd2VyIG9mIDIsIHNvIHRoZSBtb2R1bHVzIGRvZXNuJ3QgaW50cm9kdWNlIGFcbi8vIGJpYXMuXG52YXIgX3JhbmRvbVN0cmluZ0NoYXJzID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Jztcbm1vZHVsZS5leHBvcnRzID0ge1xuICBzdHJpbmc6IGZ1bmN0aW9uKGxlbmd0aCkge1xuICAgIHZhciBtYXggPSBfcmFuZG9tU3RyaW5nQ2hhcnMubGVuZ3RoO1xuICAgIHZhciBieXRlcyA9IGNyeXB0by5yYW5kb21CeXRlcyhsZW5ndGgpO1xuICAgIHZhciByZXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXQucHVzaChfcmFuZG9tU3RyaW5nQ2hhcnMuc3Vic3RyKGJ5dGVzW2ldICUgbWF4LCAxKSk7XG4gICAgfVxuICAgIHJldHVybiByZXQuam9pbignJyk7XG4gIH1cblxuLCBudW1iZXI6IGZ1bmN0aW9uKG1heCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpO1xuICB9XG5cbiwgbnVtYmVyU3RyaW5nOiBmdW5jdGlvbihtYXgpIHtcbiAgICB2YXIgdCA9ICgnJyArIChtYXggLSAxKSkubGVuZ3RoO1xuICAgIHZhciBwID0gbmV3IEFycmF5KHQgKyAxKS5qb2luKCcwJyk7XG4gICAgcmV0dXJuIChwICsgdGhpcy5udW1iZXIobWF4KSkuc2xpY2UoLXQpO1xuICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdXRpbHMvcmFuZG9tLmpzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgWGhyRHJpdmVyID0gcmVxdWlyZSgnLi4vZHJpdmVyL3hocicpXG4gIDtcblxuZnVuY3Rpb24gWEhSTG9jYWxPYmplY3QobWV0aG9kLCB1cmwsIHBheWxvYWQgLyosIG9wdHMgKi8pIHtcbiAgWGhyRHJpdmVyLmNhbGwodGhpcywgbWV0aG9kLCB1cmwsIHBheWxvYWQsIHtcbiAgICBub0NyZWRlbnRpYWxzOiB0cnVlXG4gIH0pO1xufVxuXG5pbmhlcml0cyhYSFJMb2NhbE9iamVjdCwgWGhyRHJpdmVyKTtcblxuWEhSTG9jYWxPYmplY3QuZW5hYmxlZCA9IFhockRyaXZlci5lbmFibGVkO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFhIUkxvY2FsT2JqZWN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L3NlbmRlci94aHItbG9jYWwuanNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc09wZXJhOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZ2xvYmFsLm5hdmlnYXRvciAmJlxuICAgICAgL29wZXJhL2kudGVzdChnbG9iYWwubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gIH1cblxuLCBpc0tvbnF1ZXJvcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5uYXZpZ2F0b3IgJiZcbiAgICAgIC9rb25xdWVyb3IvaS50ZXN0KGdsb2JhbC5uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgfVxuXG4gIC8vICMxODcgd3JhcCBkb2N1bWVudC5kb21haW4gaW4gdHJ5L2NhdGNoIGJlY2F1c2Ugb2YgV1A4IGZyb20gZmlsZTovLy9cbiwgaGFzRG9tYWluOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gbm9uLWJyb3dzZXIgY2xpZW50IGFsd2F5cyBoYXMgYSBkb21haW5cbiAgICBpZiAoIWdsb2JhbC5kb2N1bWVudCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAhIWdsb2JhbC5kb2N1bWVudC5kb21haW47XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3V0aWxzL2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXZlbnRVdGlscyA9IHJlcXVpcmUoJy4vZXZlbnQnKVxuICAsIEpTT04zID0gcmVxdWlyZSgnanNvbjMnKVxuICAsIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Jyb3dzZXInKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6dXRpbHM6aWZyYW1lJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBXUHJlZml4OiAnX2pwJ1xuLCBjdXJyZW50V2luZG93SWQ6IG51bGxcblxuLCBwb2xsdXRlR2xvYmFsTmFtZXNwYWNlOiBmdW5jdGlvbigpIHtcbiAgICBpZiAoIShtb2R1bGUuZXhwb3J0cy5XUHJlZml4IGluIGdsb2JhbCkpIHtcbiAgICAgIGdsb2JhbFttb2R1bGUuZXhwb3J0cy5XUHJlZml4XSA9IHt9O1xuICAgIH1cbiAgfVxuXG4sIHBvc3RNZXNzYWdlOiBmdW5jdGlvbih0eXBlLCBkYXRhKSB7XG4gICAgaWYgKGdsb2JhbC5wYXJlbnQgIT09IGdsb2JhbCkge1xuICAgICAgZ2xvYmFsLnBhcmVudC5wb3N0TWVzc2FnZShKU09OMy5zdHJpbmdpZnkoe1xuICAgICAgICB3aW5kb3dJZDogbW9kdWxlLmV4cG9ydHMuY3VycmVudFdpbmRvd0lkXG4gICAgICAsIHR5cGU6IHR5cGVcbiAgICAgICwgZGF0YTogZGF0YSB8fCAnJ1xuICAgICAgfSksICcqJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnKCdDYW5ub3QgcG9zdE1lc3NhZ2UsIG5vIHBhcmVudCB3aW5kb3cuJywgdHlwZSwgZGF0YSk7XG4gICAgfVxuICB9XG5cbiwgY3JlYXRlSWZyYW1lOiBmdW5jdGlvbihpZnJhbWVVcmwsIGVycm9yQ2FsbGJhY2spIHtcbiAgICB2YXIgaWZyYW1lID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIHZhciB0cmVmLCB1bmxvYWRSZWY7XG4gICAgdmFyIHVuYXR0YWNoID0gZnVuY3Rpb24oKSB7XG4gICAgICBkZWJ1ZygndW5hdHRhY2gnKTtcbiAgICAgIGNsZWFyVGltZW91dCh0cmVmKTtcbiAgICAgIC8vIEV4cGxvcmVyIGhhZCBwcm9ibGVtcyB3aXRoIHRoYXQuXG4gICAgICB0cnkge1xuICAgICAgICBpZnJhbWUub25sb2FkID0gbnVsbDtcbiAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICAgICAgfVxuICAgICAgaWZyYW1lLm9uZXJyb3IgPSBudWxsO1xuICAgIH07XG4gICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdjbGVhbnVwJyk7XG4gICAgICBpZiAoaWZyYW1lKSB7XG4gICAgICAgIHVuYXR0YWNoKCk7XG4gICAgICAgIC8vIFRoaXMgdGltZW91dCBtYWtlcyBjaHJvbWUgZmlyZSBvbmJlZm9yZXVubG9hZCBldmVudFxuICAgICAgICAvLyB3aXRoaW4gaWZyYW1lLiBXaXRob3V0IHRoZSB0aW1lb3V0IGl0IGdvZXMgc3RyYWlnaHQgdG9cbiAgICAgICAgLy8gb251bmxvYWQuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGlmcmFtZSkge1xuICAgICAgICAgICAgaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWZyYW1lID0gbnVsbDtcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIGV2ZW50VXRpbHMudW5sb2FkRGVsKHVubG9hZFJlZik7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgb25lcnJvciA9IGZ1bmN0aW9uKGVycikge1xuICAgICAgZGVidWcoJ29uZXJyb3InLCBlcnIpO1xuICAgICAgaWYgKGlmcmFtZSkge1xuICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIGVycm9yQ2FsbGJhY2soZXJyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBwb3N0ID0gZnVuY3Rpb24obXNnLCBvcmlnaW4pIHtcbiAgICAgIGRlYnVnKCdwb3N0JywgbXNnLCBvcmlnaW4pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gV2hlbiB0aGUgaWZyYW1lIGlzIG5vdCBsb2FkZWQsIElFIHJhaXNlcyBhbiBleGNlcHRpb25cbiAgICAgICAgLy8gb24gJ2NvbnRlbnRXaW5kb3cnLlxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChpZnJhbWUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKG1zZywgb3JpZ2luKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmcmFtZS5zcmMgPSBpZnJhbWVVcmw7XG4gICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgaWZyYW1lLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBpZnJhbWUub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgb25lcnJvcignb25lcnJvcicpO1xuICAgIH07XG4gICAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgZGVidWcoJ29ubG9hZCcpO1xuICAgICAgLy8gYG9ubG9hZGAgaXMgdHJpZ2dlcmVkIGJlZm9yZSBzY3JpcHRzIG9uIHRoZSBpZnJhbWUgYXJlXG4gICAgICAvLyBleGVjdXRlZC4gR2l2ZSBpdCBmZXcgc2Vjb25kcyB0byBhY3R1YWxseSBsb2FkIHN0dWZmLlxuICAgICAgY2xlYXJUaW1lb3V0KHRyZWYpO1xuICAgICAgdHJlZiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIG9uZXJyb3IoJ29ubG9hZCB0aW1lb3V0Jyk7XG4gICAgICB9LCAyMDAwKTtcbiAgICB9O1xuICAgIGdsb2JhbC5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgdHJlZiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBvbmVycm9yKCd0aW1lb3V0Jyk7XG4gICAgfSwgMTUwMDApO1xuICAgIHVubG9hZFJlZiA9IGV2ZW50VXRpbHMudW5sb2FkQWRkKGNsZWFudXApO1xuICAgIHJldHVybiB7XG4gICAgICBwb3N0OiBwb3N0XG4gICAgLCBjbGVhbnVwOiBjbGVhbnVwXG4gICAgLCBsb2FkZWQ6IHVuYXR0YWNoXG4gICAgfTtcbiAgfVxuXG4vKiBqc2hpbnQgdW5kZWY6IGZhbHNlLCBuZXdjYXA6IGZhbHNlICovXG4vKiBlc2xpbnQgbm8tdW5kZWY6IDAsIG5ldy1jYXA6IDAgKi9cbiwgY3JlYXRlSHRtbGZpbGU6IGZ1bmN0aW9uKGlmcmFtZVVybCwgZXJyb3JDYWxsYmFjaykge1xuICAgIHZhciBheG8gPSBbJ0FjdGl2ZSddLmNvbmNhdCgnT2JqZWN0Jykuam9pbignWCcpO1xuICAgIHZhciBkb2MgPSBuZXcgZ2xvYmFsW2F4b10oJ2h0bWxmaWxlJyk7XG4gICAgdmFyIHRyZWYsIHVubG9hZFJlZjtcbiAgICB2YXIgaWZyYW1lO1xuICAgIHZhciB1bmF0dGFjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRyZWYpO1xuICAgICAgaWZyYW1lLm9uZXJyb3IgPSBudWxsO1xuICAgIH07XG4gICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgdW5hdHRhY2goKTtcbiAgICAgICAgZXZlbnRVdGlscy51bmxvYWREZWwodW5sb2FkUmVmKTtcbiAgICAgICAgaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgaWZyYW1lID0gZG9jID0gbnVsbDtcbiAgICAgICAgQ29sbGVjdEdhcmJhZ2UoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBvbmVycm9yID0gZnVuY3Rpb24ocikge1xuICAgICAgZGVidWcoJ29uZXJyb3InLCByKTtcbiAgICAgIGlmIChkb2MpIHtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICBlcnJvckNhbGxiYWNrKHIpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHBvc3QgPSBmdW5jdGlvbihtc2csIG9yaWdpbikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gV2hlbiB0aGUgaWZyYW1lIGlzIG5vdCBsb2FkZWQsIElFIHJhaXNlcyBhbiBleGNlcHRpb25cbiAgICAgICAgLy8gb24gJ2NvbnRlbnRXaW5kb3cnLlxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChpZnJhbWUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UobXNnLCBvcmlnaW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG4gICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZG9jLm9wZW4oKTtcbiAgICBkb2Mud3JpdGUoJzxodG1sPjxzJyArICdjcmlwdD4nICtcbiAgICAgICAgICAgICAgJ2RvY3VtZW50LmRvbWFpbj1cIicgKyBnbG9iYWwuZG9jdW1lbnQuZG9tYWluICsgJ1wiOycgK1xuICAgICAgICAgICAgICAnPC9zJyArICdjcmlwdD48L2h0bWw+Jyk7XG4gICAgZG9jLmNsb3NlKCk7XG4gICAgZG9jLnBhcmVudFdpbmRvd1ttb2R1bGUuZXhwb3J0cy5XUHJlZml4XSA9IGdsb2JhbFttb2R1bGUuZXhwb3J0cy5XUHJlZml4XTtcbiAgICB2YXIgYyA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChjKTtcbiAgICBpZnJhbWUgPSBkb2MuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgYy5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgIGlmcmFtZS5zcmMgPSBpZnJhbWVVcmw7XG4gICAgaWZyYW1lLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIG9uZXJyb3IoJ29uZXJyb3InKTtcbiAgICB9O1xuICAgIHRyZWYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgb25lcnJvcigndGltZW91dCcpO1xuICAgIH0sIDE1MDAwKTtcbiAgICB1bmxvYWRSZWYgPSBldmVudFV0aWxzLnVubG9hZEFkZChjbGVhbnVwKTtcbiAgICByZXR1cm4ge1xuICAgICAgcG9zdDogcG9zdFxuICAgICwgY2xlYW51cDogY2xlYW51cFxuICAgICwgbG9hZGVkOiB1bmF0dGFjaFxuICAgIH07XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzLmlmcmFtZUVuYWJsZWQgPSBmYWxzZTtcbmlmIChnbG9iYWwuZG9jdW1lbnQpIHtcbiAgLy8gcG9zdE1lc3NhZ2UgbWlzYmVoYXZlcyBpbiBrb25xdWVyb3IgNC42LjUgLSB0aGUgbWVzc2FnZXMgYXJlIGRlbGl2ZXJlZCB3aXRoXG4gIC8vIGh1Z2UgZGVsYXksIG9yIG5vdCBhdCBhbGwuXG4gIG1vZHVsZS5leHBvcnRzLmlmcmFtZUVuYWJsZWQgPSAodHlwZW9mIGdsb2JhbC5wb3N0TWVzc2FnZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgIHR5cGVvZiBnbG9iYWwucG9zdE1lc3NhZ2UgPT09ICdvYmplY3QnKSAmJiAoIWJyb3dzZXIuaXNLb25xdWVyb3IoKSk7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi91dGlscy9pZnJhbWUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpyZWNlaXZlcjp4aHInKTtcbn1cblxuZnVuY3Rpb24gWGhyUmVjZWl2ZXIodXJsLCBBamF4T2JqZWN0KSB7XG4gIGRlYnVnKHVybCk7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgdGhpcy5idWZmZXJQb3NpdGlvbiA9IDA7XG5cbiAgdGhpcy54byA9IG5ldyBBamF4T2JqZWN0KCdQT1NUJywgdXJsLCBudWxsKTtcbiAgdGhpcy54by5vbignY2h1bmsnLCB0aGlzLl9jaHVua0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gIHRoaXMueG8ub25jZSgnZmluaXNoJywgZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XG4gICAgZGVidWcoJ2ZpbmlzaCcsIHN0YXR1cywgdGV4dCk7XG4gICAgc2VsZi5fY2h1bmtIYW5kbGVyKHN0YXR1cywgdGV4dCk7XG4gICAgc2VsZi54byA9IG51bGw7XG4gICAgdmFyIHJlYXNvbiA9IHN0YXR1cyA9PT0gMjAwID8gJ25ldHdvcmsnIDogJ3Blcm1hbmVudCc7XG4gICAgZGVidWcoJ2Nsb3NlJywgcmVhc29uKTtcbiAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgbnVsbCwgcmVhc29uKTtcbiAgICBzZWxmLl9jbGVhbnVwKCk7XG4gIH0pO1xufVxuXG5pbmhlcml0cyhYaHJSZWNlaXZlciwgRXZlbnRFbWl0dGVyKTtcblxuWGhyUmVjZWl2ZXIucHJvdG90eXBlLl9jaHVua0hhbmRsZXIgPSBmdW5jdGlvbihzdGF0dXMsIHRleHQpIHtcbiAgZGVidWcoJ19jaHVua0hhbmRsZXInLCBzdGF0dXMpO1xuICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgIXRleHQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKHZhciBpZHggPSAtMTsgOyB0aGlzLmJ1ZmZlclBvc2l0aW9uICs9IGlkeCArIDEpIHtcbiAgICB2YXIgYnVmID0gdGV4dC5zbGljZSh0aGlzLmJ1ZmZlclBvc2l0aW9uKTtcbiAgICBpZHggPSBidWYuaW5kZXhPZignXFxuJyk7XG4gICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB2YXIgbXNnID0gYnVmLnNsaWNlKDAsIGlkeCk7XG4gICAgaWYgKG1zZykge1xuICAgICAgZGVidWcoJ21lc3NhZ2UnLCBtc2cpO1xuICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgbXNnKTtcbiAgICB9XG4gIH1cbn07XG5cblhoclJlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX2NsZWFudXAnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cblhoclJlY2VpdmVyLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnYWJvcnQnKTtcbiAgaWYgKHRoaXMueG8pIHtcbiAgICB0aGlzLnhvLmNsb3NlKCk7XG4gICAgZGVidWcoJ2Nsb3NlJyk7XG4gICAgdGhpcy5lbWl0KCdjbG9zZScsIG51bGwsICd1c2VyJyk7XG4gICAgdGhpcy54byA9IG51bGw7XG4gIH1cbiAgdGhpcy5fY2xlYW51cCgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBYaHJSZWNlaXZlcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9yZWNlaXZlci94aHIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgWGhyRHJpdmVyID0gcmVxdWlyZSgnLi4vZHJpdmVyL3hocicpXG4gIDtcblxuZnVuY3Rpb24gWEhSQ29yc09iamVjdChtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cykge1xuICBYaHJEcml2ZXIuY2FsbCh0aGlzLCBtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cyk7XG59XG5cbmluaGVyaXRzKFhIUkNvcnNPYmplY3QsIFhockRyaXZlcik7XG5cblhIUkNvcnNPYmplY3QuZW5hYmxlZCA9IFhockRyaXZlci5lbmFibGVkICYmIFhockRyaXZlci5zdXBwb3J0c0NPUlM7XG5cbm1vZHVsZS5leHBvcnRzID0gWEhSQ29yc09iamVjdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9zZW5kZXIveGhyLWNvcnMuanNcbiAqKiBtb2R1bGUgaWQgPSAxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBFdmVudChldmVudFR5cGUpIHtcbiAgdGhpcy50eXBlID0gZXZlbnRUeXBlO1xufVxuXG5FdmVudC5wcm90b3R5cGUuaW5pdEV2ZW50ID0gZnVuY3Rpb24oZXZlbnRUeXBlLCBjYW5CdWJibGUsIGNhbmNlbGFibGUpIHtcbiAgdGhpcy50eXBlID0gZXZlbnRUeXBlO1xuICB0aGlzLmJ1YmJsZXMgPSBjYW5CdWJibGU7XG4gIHRoaXMuY2FuY2VsYWJsZSA9IGNhbmNlbGFibGU7XG4gIHRoaXMudGltZVN0YW1wID0gK25ldyBEYXRlKCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKCkge307XG5FdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHt9O1xuXG5FdmVudC5DQVBUVVJJTkdfUEhBU0UgPSAxO1xuRXZlbnQuQVRfVEFSR0VUID0gMjtcbkV2ZW50LkJVQkJMSU5HX1BIQVNFID0gMztcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL2V2ZW50L2V2ZW50LmpzXG4gKiogbW9kdWxlIGlkID0gMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIElmcmFtZVRyYW5zcG9ydCA9IHJlcXVpcmUoJy4uL2lmcmFtZScpXG4gICwgb2JqZWN0VXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy9vYmplY3QnKVxuICA7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odHJhbnNwb3J0KSB7XG5cbiAgZnVuY3Rpb24gSWZyYW1lV3JhcFRyYW5zcG9ydCh0cmFuc1VybCwgYmFzZVVybCkge1xuICAgIElmcmFtZVRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zcG9ydC50cmFuc3BvcnROYW1lLCB0cmFuc1VybCwgYmFzZVVybCk7XG4gIH1cblxuICBpbmhlcml0cyhJZnJhbWVXcmFwVHJhbnNwb3J0LCBJZnJhbWVUcmFuc3BvcnQpO1xuXG4gIElmcmFtZVdyYXBUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKHVybCwgaW5mbykge1xuICAgIGlmICghZ2xvYmFsLmRvY3VtZW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGlmcmFtZUluZm8gPSBvYmplY3RVdGlscy5leHRlbmQoe30sIGluZm8pO1xuICAgIGlmcmFtZUluZm8uc2FtZU9yaWdpbiA9IHRydWU7XG4gICAgcmV0dXJuIHRyYW5zcG9ydC5lbmFibGVkKGlmcmFtZUluZm8pICYmIElmcmFtZVRyYW5zcG9ydC5lbmFibGVkKCk7XG4gIH07XG5cbiAgSWZyYW1lV3JhcFRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ2lmcmFtZS0nICsgdHJhbnNwb3J0LnRyYW5zcG9ydE5hbWU7XG4gIElmcmFtZVdyYXBUcmFuc3BvcnQubmVlZEJvZHkgPSB0cnVlO1xuICBJZnJhbWVXcmFwVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSBJZnJhbWVUcmFuc3BvcnQucm91bmRUcmlwcyArIHRyYW5zcG9ydC5yb3VuZFRyaXBzIC0gMTsgLy8gaHRtbCwgamF2YXNjcmlwdCAoMikgKyB0cmFuc3BvcnQgLSBubyBDT1JTICgxKVxuXG4gIElmcmFtZVdyYXBUcmFuc3BvcnQuZmFjYWRlVHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuXG4gIHJldHVybiBJZnJhbWVXcmFwVHJhbnNwb3J0O1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9saWIvaWZyYW1lLXdyYXAuanNcbiAqKiBtb2R1bGUgaWQgPSAxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gICwgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgZXZlbnRVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2V2ZW50JylcbiAgLCBicm93c2VyID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvYnJvd3NlcicpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91cmwnKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6c2VuZGVyOnhkcicpO1xufVxuXG4vLyBSZWZlcmVuY2VzOlxuLy8gICBodHRwOi8vYWpheGlhbi5jb20vYXJjaGl2ZXMvMTAwLWxpbmUtYWpheC13cmFwcGVyXG4vLyAgIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9jYzI4ODA2MCh2PVZTLjg1KS5hc3B4XG5cbmZ1bmN0aW9uIFhEUk9iamVjdChtZXRob2QsIHVybCwgcGF5bG9hZCkge1xuICBkZWJ1ZyhtZXRob2QsIHVybCk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBzZWxmLl9zdGFydChtZXRob2QsIHVybCwgcGF5bG9hZCk7XG4gIH0sIDApO1xufVxuXG5pbmhlcml0cyhYRFJPYmplY3QsIEV2ZW50RW1pdHRlcik7XG5cblhEUk9iamVjdC5wcm90b3R5cGUuX3N0YXJ0ID0gZnVuY3Rpb24obWV0aG9kLCB1cmwsIHBheWxvYWQpIHtcbiAgZGVidWcoJ19zdGFydCcpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB4ZHIgPSBuZXcgZ2xvYmFsLlhEb21haW5SZXF1ZXN0KCk7XG4gIC8vIElFIGNhY2hlcyBldmVuIFBPU1RzXG4gIHVybCA9IHVybFV0aWxzLmFkZFF1ZXJ5KHVybCwgJ3Q9JyArICgrbmV3IERhdGUoKSkpO1xuXG4gIHhkci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ29uZXJyb3InKTtcbiAgICBzZWxmLl9lcnJvcigpO1xuICB9O1xuICB4ZHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ29udGltZW91dCcpO1xuICAgIHNlbGYuX2Vycm9yKCk7XG4gIH07XG4gIHhkci5vbnByb2dyZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3Byb2dyZXNzJywgeGRyLnJlc3BvbnNlVGV4dCk7XG4gICAgc2VsZi5lbWl0KCdjaHVuaycsIDIwMCwgeGRyLnJlc3BvbnNlVGV4dCk7XG4gIH07XG4gIHhkci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1ZygnbG9hZCcpO1xuICAgIHNlbGYuZW1pdCgnZmluaXNoJywgMjAwLCB4ZHIucmVzcG9uc2VUZXh0KTtcbiAgICBzZWxmLl9jbGVhbnVwKGZhbHNlKTtcbiAgfTtcbiAgdGhpcy54ZHIgPSB4ZHI7XG4gIHRoaXMudW5sb2FkUmVmID0gZXZlbnRVdGlscy51bmxvYWRBZGQoZnVuY3Rpb24oKSB7XG4gICAgc2VsZi5fY2xlYW51cCh0cnVlKTtcbiAgfSk7XG4gIHRyeSB7XG4gICAgLy8gRmFpbHMgd2l0aCBBY2Nlc3NEZW5pZWQgaWYgcG9ydCBudW1iZXIgaXMgYm9ndXNcbiAgICB0aGlzLnhkci5vcGVuKG1ldGhvZCwgdXJsKTtcbiAgICBpZiAodGhpcy50aW1lb3V0KSB7XG4gICAgICB0aGlzLnhkci50aW1lb3V0ID0gdGhpcy50aW1lb3V0O1xuICAgIH1cbiAgICB0aGlzLnhkci5zZW5kKHBheWxvYWQpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgdGhpcy5fZXJyb3IoKTtcbiAgfVxufTtcblxuWERST2JqZWN0LnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbWl0KCdmaW5pc2gnLCAwLCAnJyk7XG4gIHRoaXMuX2NsZWFudXAoZmFsc2UpO1xufTtcblxuWERST2JqZWN0LnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKGFib3J0KSB7XG4gIGRlYnVnKCdjbGVhbnVwJywgYWJvcnQpO1xuICBpZiAoIXRoaXMueGRyKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIGV2ZW50VXRpbHMudW5sb2FkRGVsKHRoaXMudW5sb2FkUmVmKTtcblxuICB0aGlzLnhkci5vbnRpbWVvdXQgPSB0aGlzLnhkci5vbmVycm9yID0gdGhpcy54ZHIub25wcm9ncmVzcyA9IHRoaXMueGRyLm9ubG9hZCA9IG51bGw7XG4gIGlmIChhYm9ydCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnhkci5hYm9ydCgpO1xuICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgICB9XG4gIH1cbiAgdGhpcy51bmxvYWRSZWYgPSB0aGlzLnhkciA9IG51bGw7XG59O1xuXG5YRFJPYmplY3QucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdjbG9zZScpO1xuICB0aGlzLl9jbGVhbnVwKHRydWUpO1xufTtcblxuLy8gSUUgOC85IGlmIHRoZSByZXF1ZXN0IHRhcmdldCB1c2VzIHRoZSBzYW1lIHNjaGVtZSAtICM3OVxuWERST2JqZWN0LmVuYWJsZWQgPSAhIShnbG9iYWwuWERvbWFpblJlcXVlc3QgJiYgYnJvd3Nlci5oYXNEb21haW4oKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gWERST2JqZWN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L3NlbmRlci94ZHIuanNcbiAqKiBtb2R1bGUgaWQgPSAxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNPYmplY3Q6IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIG9iajtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlID09PSAnb2JqZWN0JyAmJiAhIW9iajtcbiAgfVxuXG4sIGV4dGVuZDogZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCF0aGlzLmlzT2JqZWN0KG9iaikpIHtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIHZhciBzb3VyY2UsIHByb3A7XG4gICAgZm9yICh2YXIgaSA9IDEsIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgZm9yIChwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwgcHJvcCkpIHtcbiAgICAgICAgICBvYmpbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3V0aWxzL29iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciByZXF1aXJlZCA9IHJlcXVpcmUoJ3JlcXVpcmVzLXBvcnQnKVxuICAsIGxvbGNhdGlvbiA9IHJlcXVpcmUoJy4vbG9sY2F0aW9uJylcbiAgLCBxcyA9IHJlcXVpcmUoJ3F1ZXJ5c3RyaW5naWZ5JylcbiAgLCByZWxhdGl2ZXJlID0gL15cXC8oPyFcXC8pL1xuICAsIHByb3RvY29scmUgPSAvXihbYS16MC05ListXSs6KT8oXFwvXFwvKT8oLiopJC9pOyAvLyBhY3R1YWwgcHJvdG9jb2wgaXMgZmlyc3QgbWF0Y2hcblxuLyoqXG4gKiBUaGVzZSBhcmUgdGhlIHBhcnNlIGluc3RydWN0aW9ucyBmb3IgdGhlIFVSTCBwYXJzZXJzLCBpdCBpbmZvcm1zIHRoZSBwYXJzZXJcbiAqIGFib3V0OlxuICpcbiAqIDAuIFRoZSBjaGFyIGl0IE5lZWRzIHRvIHBhcnNlLCBpZiBpdCdzIGEgc3RyaW5nIGl0IHNob3VsZCBiZSBkb25lIHVzaW5nXG4gKiAgICBpbmRleE9mLCBSZWdFeHAgdXNpbmcgZXhlYyBhbmQgTmFOIG1lYW5zIHNldCBhcyBjdXJyZW50IHZhbHVlLlxuICogMS4gVGhlIHByb3BlcnR5IHdlIHNob3VsZCBzZXQgd2hlbiBwYXJzaW5nIHRoaXMgdmFsdWUuXG4gKiAyLiBJbmRpY2F0aW9uIGlmIGl0J3MgYmFja3dhcmRzIG9yIGZvcndhcmQgcGFyc2luZywgd2hlbiBzZXQgYXMgbnVtYmVyIGl0J3NcbiAqICAgIHRoZSB2YWx1ZSBvZiBleHRyYSBjaGFycyB0aGF0IHNob3VsZCBiZSBzcGxpdCBvZmYuXG4gKiAzLiBJbmhlcml0IGZyb20gbG9jYXRpb24gaWYgbm9uIGV4aXN0aW5nIGluIHRoZSBwYXJzZXIuXG4gKiA0LiBgdG9Mb3dlckNhc2VgIHRoZSByZXN1bHRpbmcgdmFsdWUuXG4gKi9cbnZhciBpbnN0cnVjdGlvbnMgPSBbXG4gIFsnIycsICdoYXNoJ10sICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9tIHRoZSBiYWNrLlxuICBbJz8nLCAncXVlcnknXSwgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgYmFjay5cbiAgWycvJywgJ3BhdGhuYW1lJ10sICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGZyb20gdGhlIGJhY2suXG4gIFsnQCcsICdhdXRoJywgMV0sICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9tIHRoZSBmcm9udC5cbiAgW05hTiwgJ2hvc3QnLCB1bmRlZmluZWQsIDEsIDFdLCAgICAgICAvLyBTZXQgbGVmdCBvdmVyIHZhbHVlLlxuICBbL1xcOihcXGQrKSQvLCAncG9ydCddLCAgICAgICAgICAgICAgICAgLy8gUmVnRXhwIHRoZSBiYWNrLlxuICBbTmFOLCAnaG9zdG5hbWUnLCB1bmRlZmluZWQsIDEsIDFdICAgIC8vIFNldCBsZWZ0IG92ZXIuXG5dO1xuXG4gLyoqXG4gKiBAdHlwZWRlZiBQcm90b2NvbEV4dHJhY3RcbiAqIEB0eXBlIE9iamVjdFxuICogQHByb3BlcnR5IHtTdHJpbmd9IHByb3RvY29sIFByb3RvY29sIG1hdGNoZWQgaW4gdGhlIFVSTCwgaW4gbG93ZXJjYXNlXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IHNsYXNoZXMgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHByb3RvY29sIGlzIGZvbGxvd2VkIGJ5IGRvdWJsZSBzbGFzaCAoXCIvL1wiKVxuICogQHByb3BlcnR5IHtTdHJpbmd9IHJlc3QgICAgIFJlc3Qgb2YgdGhlIFVSTCB0aGF0IGlzIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbFxuICovXG5cbiAvKipcbiAgKiBFeHRyYWN0IHByb3RvY29sIGluZm9ybWF0aW9uIGZyb20gYSBVUkwgd2l0aC93aXRob3V0IGRvdWJsZSBzbGFzaCAoXCIvL1wiKVxuICAqXG4gICogQHBhcmFtICB7U3RyaW5nfSBhZGRyZXNzICAgVVJMIHdlIHdhbnQgdG8gZXh0cmFjdCBmcm9tLlxuICAqIEByZXR1cm4ge1Byb3RvY29sRXh0cmFjdH0gIEV4dHJhY3RlZCBpbmZvcm1hdGlvblxuICAqIEBwcml2YXRlXG4gICovXG5mdW5jdGlvbiBleHRyYWN0UHJvdG9jb2woYWRkcmVzcykge1xuICB2YXIgbWF0Y2ggPSBwcm90b2NvbHJlLmV4ZWMoYWRkcmVzcyk7XG4gIHJldHVybiB7XG4gICAgcHJvdG9jb2w6IG1hdGNoWzFdID8gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKSA6ICcnLFxuICAgIHNsYXNoZXM6ICEhbWF0Y2hbMl0sXG4gICAgcmVzdDogbWF0Y2hbM10gPyBtYXRjaFszXSA6ICcnXG4gIH07XG59XG5cbi8qKlxuICogVGhlIGFjdHVhbCBVUkwgaW5zdGFuY2UuIEluc3RlYWQgb2YgcmV0dXJuaW5nIGFuIG9iamVjdCB3ZSd2ZSBvcHRlZC1pbiB0b1xuICogY3JlYXRlIGFuIGFjdHVhbCBjb25zdHJ1Y3RvciBhcyBpdCdzIG11Y2ggbW9yZSBtZW1vcnkgZWZmaWNpZW50IGFuZFxuICogZmFzdGVyIGFuZCBpdCBwbGVhc2VzIG15IENETy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSBhZGRyZXNzIFVSTCB3ZSB3YW50IHRvIHBhcnNlLlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBsb2NhdGlvbiBMb2NhdGlvbiBkZWZhdWx0cyBmb3IgcmVsYXRpdmUgcGF0aHMuXG4gKiBAcGFyYW0ge0Jvb2xlYW58RnVuY3Rpb259IHBhcnNlciBQYXJzZXIgZm9yIHRoZSBxdWVyeSBzdHJpbmcuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBVUkwoYWRkcmVzcywgbG9jYXRpb24sIHBhcnNlcikge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVVJMKSkge1xuICAgIHJldHVybiBuZXcgVVJMKGFkZHJlc3MsIGxvY2F0aW9uLCBwYXJzZXIpO1xuICB9XG5cbiAgdmFyIHJlbGF0aXZlID0gcmVsYXRpdmVyZS50ZXN0KGFkZHJlc3MpXG4gICAgLCBwYXJzZSwgaW5zdHJ1Y3Rpb24sIGluZGV4LCBrZXlcbiAgICAsIHR5cGUgPSB0eXBlb2YgbG9jYXRpb25cbiAgICAsIHVybCA9IHRoaXNcbiAgICAsIGkgPSAwO1xuXG4gIC8vXG4gIC8vIFRoZSBmb2xsb3dpbmcgaWYgc3RhdGVtZW50cyBhbGxvd3MgdGhpcyBtb2R1bGUgdHdvIGhhdmUgY29tcGF0aWJpbGl0eSB3aXRoXG4gIC8vIDIgZGlmZmVyZW50IEFQSTpcbiAgLy9cbiAgLy8gMS4gTm9kZS5qcydzIGB1cmwucGFyc2VgIGFwaSB3aGljaCBhY2NlcHRzIGEgVVJMLCBib29sZWFuIGFzIGFyZ3VtZW50c1xuICAvLyAgICB3aGVyZSB0aGUgYm9vbGVhbiBpbmRpY2F0ZXMgdGhhdCB0aGUgcXVlcnkgc3RyaW5nIHNob3VsZCBhbHNvIGJlIHBhcnNlZC5cbiAgLy9cbiAgLy8gMi4gVGhlIGBVUkxgIGludGVyZmFjZSBvZiB0aGUgYnJvd3NlciB3aGljaCBhY2NlcHRzIGEgVVJMLCBvYmplY3QgYXNcbiAgLy8gICAgYXJndW1lbnRzLiBUaGUgc3VwcGxpZWQgb2JqZWN0IHdpbGwgYmUgdXNlZCBhcyBkZWZhdWx0IHZhbHVlcyAvIGZhbGwtYmFja1xuICAvLyAgICBmb3IgcmVsYXRpdmUgcGF0aHMuXG4gIC8vXG4gIGlmICgnb2JqZWN0JyAhPT0gdHlwZSAmJiAnc3RyaW5nJyAhPT0gdHlwZSkge1xuICAgIHBhcnNlciA9IGxvY2F0aW9uO1xuICAgIGxvY2F0aW9uID0gbnVsbDtcbiAgfVxuXG4gIGlmIChwYXJzZXIgJiYgJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mIHBhcnNlcikge1xuICAgIHBhcnNlciA9IHFzLnBhcnNlO1xuICB9XG5cbiAgbG9jYXRpb24gPSBsb2xjYXRpb24obG9jYXRpb24pO1xuXG4gIC8vIGV4dHJhY3QgcHJvdG9jb2wgaW5mb3JtYXRpb24gYmVmb3JlIHJ1bm5pbmcgdGhlIGluc3RydWN0aW9uc1xuICB2YXIgZXh0cmFjdGVkID0gZXh0cmFjdFByb3RvY29sKGFkZHJlc3MpO1xuICB1cmwucHJvdG9jb2wgPSBleHRyYWN0ZWQucHJvdG9jb2wgfHwgbG9jYXRpb24ucHJvdG9jb2wgfHwgJyc7XG4gIHVybC5zbGFzaGVzID0gZXh0cmFjdGVkLnNsYXNoZXMgfHwgbG9jYXRpb24uc2xhc2hlcztcbiAgYWRkcmVzcyA9IGV4dHJhY3RlZC5yZXN0O1xuXG4gIGZvciAoOyBpIDwgaW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgaW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbnNbaV07XG4gICAgcGFyc2UgPSBpbnN0cnVjdGlvblswXTtcbiAgICBrZXkgPSBpbnN0cnVjdGlvblsxXTtcblxuICAgIGlmIChwYXJzZSAhPT0gcGFyc2UpIHtcbiAgICAgIHVybFtrZXldID0gYWRkcmVzcztcbiAgICB9IGVsc2UgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgcGFyc2UpIHtcbiAgICAgIGlmICh+KGluZGV4ID0gYWRkcmVzcy5pbmRleE9mKHBhcnNlKSkpIHtcbiAgICAgICAgaWYgKCdudW1iZXInID09PSB0eXBlb2YgaW5zdHJ1Y3Rpb25bMl0pIHtcbiAgICAgICAgICB1cmxba2V5XSA9IGFkZHJlc3Muc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICAgIGFkZHJlc3MgPSBhZGRyZXNzLnNsaWNlKGluZGV4ICsgaW5zdHJ1Y3Rpb25bMl0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVybFtrZXldID0gYWRkcmVzcy5zbGljZShpbmRleCk7XG4gICAgICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpbmRleCA9IHBhcnNlLmV4ZWMoYWRkcmVzcykpIHtcbiAgICAgIHVybFtrZXldID0gaW5kZXhbMV07XG4gICAgICBhZGRyZXNzID0gYWRkcmVzcy5zbGljZSgwLCBhZGRyZXNzLmxlbmd0aCAtIGluZGV4WzBdLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgdXJsW2tleV0gPSB1cmxba2V5XSB8fCAoaW5zdHJ1Y3Rpb25bM10gfHwgKCdwb3J0JyA9PT0ga2V5ICYmIHJlbGF0aXZlKSA/IGxvY2F0aW9uW2tleV0gfHwgJycgOiAnJyk7XG5cbiAgICAvL1xuICAgIC8vIEhvc3RuYW1lLCBob3N0IGFuZCBwcm90b2NvbCBzaG91bGQgYmUgbG93ZXJjYXNlZCBzbyB0aGV5IGNhbiBiZSB1c2VkIHRvXG4gICAgLy8gY3JlYXRlIGEgcHJvcGVyIGBvcmlnaW5gLlxuICAgIC8vXG4gICAgaWYgKGluc3RydWN0aW9uWzRdKSB7XG4gICAgICB1cmxba2V5XSA9IHVybFtrZXldLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICB9XG5cbiAgLy9cbiAgLy8gQWxzbyBwYXJzZSB0aGUgc3VwcGxpZWQgcXVlcnkgc3RyaW5nIGluIHRvIGFuIG9iamVjdC4gSWYgd2UncmUgc3VwcGxpZWRcbiAgLy8gd2l0aCBhIGN1c3RvbSBwYXJzZXIgYXMgZnVuY3Rpb24gdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBidWlsZC1pblxuICAvLyBwYXJzZXIuXG4gIC8vXG4gIGlmIChwYXJzZXIpIHVybC5xdWVyeSA9IHBhcnNlcih1cmwucXVlcnkpO1xuXG4gIC8vXG4gIC8vIFdlIHNob3VsZCBub3QgYWRkIHBvcnQgbnVtYmVycyBpZiB0aGV5IGFyZSBhbHJlYWR5IHRoZSBkZWZhdWx0IHBvcnQgbnVtYmVyXG4gIC8vIGZvciBhIGdpdmVuIHByb3RvY29sLiBBcyB0aGUgaG9zdCBhbHNvIGNvbnRhaW5zIHRoZSBwb3J0IG51bWJlciB3ZSdyZSBnb2luZ1xuICAvLyBvdmVycmlkZSBpdCB3aXRoIHRoZSBob3N0bmFtZSB3aGljaCBjb250YWlucyBubyBwb3J0IG51bWJlci5cbiAgLy9cbiAgaWYgKCFyZXF1aXJlZCh1cmwucG9ydCwgdXJsLnByb3RvY29sKSkge1xuICAgIHVybC5ob3N0ID0gdXJsLmhvc3RuYW1lO1xuICAgIHVybC5wb3J0ID0gJyc7XG4gIH1cblxuICAvL1xuICAvLyBQYXJzZSBkb3duIHRoZSBgYXV0aGAgZm9yIHRoZSB1c2VybmFtZSBhbmQgcGFzc3dvcmQuXG4gIC8vXG4gIHVybC51c2VybmFtZSA9IHVybC5wYXNzd29yZCA9ICcnO1xuICBpZiAodXJsLmF1dGgpIHtcbiAgICBpbnN0cnVjdGlvbiA9IHVybC5hdXRoLnNwbGl0KCc6Jyk7XG4gICAgdXJsLnVzZXJuYW1lID0gaW5zdHJ1Y3Rpb25bMF0gfHwgJyc7XG4gICAgdXJsLnBhc3N3b3JkID0gaW5zdHJ1Y3Rpb25bMV0gfHwgJyc7XG4gIH1cblxuICAvL1xuICAvLyBUaGUgaHJlZiBpcyBqdXN0IHRoZSBjb21waWxlZCByZXN1bHQuXG4gIC8vXG4gIHVybC5ocmVmID0gdXJsLnRvU3RyaW5nKCk7XG59XG5cbi8qKlxuICogVGhpcyBpcyBjb252ZW5pZW5jZSBtZXRob2QgZm9yIGNoYW5naW5nIHByb3BlcnRpZXMgaW4gdGhlIFVSTCBpbnN0YW5jZSB0b1xuICogaW5zdXJlIHRoYXQgdGhleSBhbGwgcHJvcGFnYXRlIGNvcnJlY3RseS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcCAgICAgICAgICBQcm9wZXJ0eSB3ZSBuZWVkIHRvIGFkanVzdC5cbiAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlICAgICAgICAgIFRoZSBuZXdseSBhc3NpZ25lZCB2YWx1ZS5cbiAqIEBwYXJhbSB7Qm9vbGVhbnxGdW5jdGlvbn0gZm4gIFdoZW4gc2V0dGluZyB0aGUgcXVlcnksIGl0IHdpbGwgYmUgdGhlIGZ1bmN0aW9uIHVzZWQgdG8gcGFyc2VcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBxdWVyeS5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdoZW4gc2V0dGluZyB0aGUgcHJvdG9jb2wsIGRvdWJsZSBzbGFzaCB3aWxsIGJlIHJlbW92ZWQgZnJvbVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGZpbmFsIHVybCBpZiBpdCBpcyB0cnVlLlxuICogQHJldHVybnMge1VSTH1cbiAqIEBhcGkgcHVibGljXG4gKi9cblVSTC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0KHBhcnQsIHZhbHVlLCBmbikge1xuICB2YXIgdXJsID0gdGhpcztcblxuICBpZiAoJ3F1ZXJ5JyA9PT0gcGFydCkge1xuICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHZhbHVlICYmIHZhbHVlLmxlbmd0aCkge1xuICAgICAgdmFsdWUgPSAoZm4gfHwgcXMucGFyc2UpKHZhbHVlKTtcbiAgICB9XG5cbiAgICB1cmxbcGFydF0gPSB2YWx1ZTtcbiAgfSBlbHNlIGlmICgncG9ydCcgPT09IHBhcnQpIHtcbiAgICB1cmxbcGFydF0gPSB2YWx1ZTtcblxuICAgIGlmICghcmVxdWlyZWQodmFsdWUsIHVybC5wcm90b2NvbCkpIHtcbiAgICAgIHVybC5ob3N0ID0gdXJsLmhvc3RuYW1lO1xuICAgICAgdXJsW3BhcnRdID0gJyc7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSkge1xuICAgICAgdXJsLmhvc3QgPSB1cmwuaG9zdG5hbWUgKyc6JysgdmFsdWU7XG4gICAgfVxuICB9IGVsc2UgaWYgKCdob3N0bmFtZScgPT09IHBhcnQpIHtcbiAgICB1cmxbcGFydF0gPSB2YWx1ZTtcblxuICAgIGlmICh1cmwucG9ydCkgdmFsdWUgKz0gJzonKyB1cmwucG9ydDtcbiAgICB1cmwuaG9zdCA9IHZhbHVlO1xuICB9IGVsc2UgaWYgKCdob3N0JyA9PT0gcGFydCkge1xuICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuXG4gICAgaWYgKC9cXDpcXGQrLy50ZXN0KHZhbHVlKSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS5zcGxpdCgnOicpO1xuICAgICAgdXJsLmhvc3RuYW1lID0gdmFsdWVbMF07XG4gICAgICB1cmwucG9ydCA9IHZhbHVlWzFdO1xuICAgIH1cbiAgfSBlbHNlIGlmICgncHJvdG9jb2wnID09PSBwYXJ0KSB7XG4gICAgdXJsLnByb3RvY29sID0gdmFsdWU7XG4gICAgdXJsLnNsYXNoZXMgPSAhZm47XG4gIH0gZWxzZSB7XG4gICAgdXJsW3BhcnRdID0gdmFsdWU7XG4gIH1cblxuICB1cmwuaHJlZiA9IHVybC50b1N0cmluZygpO1xuICByZXR1cm4gdXJsO1xufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIHByb3BlcnRpZXMgYmFjayBpbiB0byBhIHZhbGlkIGFuZCBmdWxsIFVSTCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc3RyaW5naWZ5IE9wdGlvbmFsIHF1ZXJ5IHN0cmluZ2lmeSBmdW5jdGlvbi5cbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5VUkwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoc3RyaW5naWZ5KSB7XG4gIGlmICghc3RyaW5naWZ5IHx8ICdmdW5jdGlvbicgIT09IHR5cGVvZiBzdHJpbmdpZnkpIHN0cmluZ2lmeSA9IHFzLnN0cmluZ2lmeTtcblxuICB2YXIgcXVlcnlcbiAgICAsIHVybCA9IHRoaXNcbiAgICAsIHByb3RvY29sID0gdXJsLnByb3RvY29sO1xuXG4gIGlmIChwcm90b2NvbCAmJiBwcm90b2NvbC5jaGFyQXQocHJvdG9jb2wubGVuZ3RoIC0gMSkgIT09ICc6JykgcHJvdG9jb2wgKz0gJzonO1xuXG4gIHZhciByZXN1bHQgPSBwcm90b2NvbCArICh1cmwuc2xhc2hlcyA/ICcvLycgOiAnJyk7XG5cbiAgaWYgKHVybC51c2VybmFtZSkge1xuICAgIHJlc3VsdCArPSB1cmwudXNlcm5hbWU7XG4gICAgaWYgKHVybC5wYXNzd29yZCkgcmVzdWx0ICs9ICc6JysgdXJsLnBhc3N3b3JkO1xuICAgIHJlc3VsdCArPSAnQCc7XG4gIH1cblxuICByZXN1bHQgKz0gdXJsLmhvc3RuYW1lO1xuICBpZiAodXJsLnBvcnQpIHJlc3VsdCArPSAnOicrIHVybC5wb3J0O1xuXG4gIHJlc3VsdCArPSB1cmwucGF0aG5hbWU7XG5cbiAgcXVlcnkgPSAnb2JqZWN0JyA9PT0gdHlwZW9mIHVybC5xdWVyeSA/IHN0cmluZ2lmeSh1cmwucXVlcnkpIDogdXJsLnF1ZXJ5O1xuICBpZiAocXVlcnkpIHJlc3VsdCArPSAnPycgIT09IHF1ZXJ5LmNoYXJBdCgwKSA/ICc/JysgcXVlcnkgOiBxdWVyeTtcblxuICBpZiAodXJsLmhhc2gpIHJlc3VsdCArPSB1cmwuaGFzaDtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy9cbi8vIEV4cG9zZSB0aGUgVVJMIHBhcnNlciBhbmQgc29tZSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdGhhdCBtaWdodCBiZSB1c2VmdWwgZm9yXG4vLyBvdGhlcnMuXG4vL1xuVVJMLnFzID0gcXM7XG5VUkwubG9jYXRpb24gPSBsb2xjYXRpb247XG5tb2R1bGUuZXhwb3J0cyA9IFVSTDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3VybC1wYXJzZS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbi8qIFNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24gb2YgRE9NMiBFdmVudFRhcmdldC5cbiAqICAgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItRXZlbnRzL2V2ZW50cy5odG1sI0V2ZW50cy1FdmVudFRhcmdldFxuICovXG5cbmZ1bmN0aW9uIEV2ZW50VGFyZ2V0KCkge1xuICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbn1cblxuRXZlbnRUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudFR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghKGV2ZW50VHlwZSBpbiB0aGlzLl9saXN0ZW5lcnMpKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV0gPSBbXTtcbiAgfVxuICB2YXIgYXJyID0gdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV07XG4gIC8vICM0XG4gIGlmIChhcnIuaW5kZXhPZihsaXN0ZW5lcikgPT09IC0xKSB7XG4gICAgLy8gTWFrZSBhIGNvcHkgc28gYXMgbm90IHRvIGludGVyZmVyZSB3aXRoIGEgY3VycmVudCBkaXNwYXRjaEV2ZW50LlxuICAgIGFyciA9IGFyci5jb25jYXQoW2xpc3RlbmVyXSk7XG4gIH1cbiAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV0gPSBhcnI7XG59O1xuXG5FdmVudFRhcmdldC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50VHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGFyciA9IHRoaXMuX2xpc3RlbmVyc1tldmVudFR5cGVdO1xuICBpZiAoIWFycikge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgaWR4ID0gYXJyLmluZGV4T2YobGlzdGVuZXIpO1xuICBpZiAoaWR4ICE9PSAtMSkge1xuICAgIGlmIChhcnIubGVuZ3RoID4gMSkge1xuICAgICAgLy8gTWFrZSBhIGNvcHkgc28gYXMgbm90IHRvIGludGVyZmVyZSB3aXRoIGEgY3VycmVudCBkaXNwYXRjaEV2ZW50LlxuICAgICAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV0gPSBhcnIuc2xpY2UoMCwgaWR4KS5jb25jYXQoYXJyLnNsaWNlKGlkeCArIDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tldmVudFR5cGVdO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbn07XG5cbkV2ZW50VGFyZ2V0LnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBldmVudCA9IGFyZ3VtZW50c1swXTtcbiAgdmFyIHQgPSBldmVudC50eXBlO1xuICAvLyBlcXVpdmFsZW50IG9mIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IFtldmVudF0gOiBBcnJheS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAvLyBUT0RPOiBUaGlzIGRvZXNuJ3QgbWF0Y2ggdGhlIHJlYWwgYmVoYXZpb3I7IHBlciBzcGVjLCBvbmZvbyBnZXRcbiAgLy8gdGhlaXIgcGxhY2UgaW4gbGluZSBmcm9tIHRoZSAvZmlyc3QvIHRpbWUgdGhleSdyZSBzZXQgZnJvbVxuICAvLyBub24tbnVsbC4gQWx0aG91Z2ggV2ViS2l0IGJ1bXBzIGl0IHRvIHRoZSBlbmQgZXZlcnkgdGltZSBpdCdzXG4gIC8vIHNldC5cbiAgaWYgKHRoaXNbJ29uJyArIHRdKSB7XG4gICAgdGhpc1snb24nICsgdF0uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cbiAgaWYgKHQgaW4gdGhpcy5fbGlzdGVuZXJzKSB7XG4gICAgLy8gR3JhYiBhIHJlZmVyZW5jZSB0byB0aGUgbGlzdGVuZXJzIGxpc3QuIHJlbW92ZUV2ZW50TGlzdGVuZXIgbWF5IGFsdGVyIHRoZSBsaXN0LlxuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnNbdF07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRUYXJnZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi9ldmVudC9ldmVudHRhcmdldC5qc1xuICoqIG1vZHVsZSBpZCA9IDE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJylcbiAgLCBvYmplY3RVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvb2JqZWN0JylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OmluZm8tYWpheCcpO1xufVxuXG5mdW5jdGlvbiBJbmZvQWpheCh1cmwsIEFqYXhPYmplY3QpIHtcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgdDAgPSArbmV3IERhdGUoKTtcbiAgdGhpcy54byA9IG5ldyBBamF4T2JqZWN0KCdHRVQnLCB1cmwpO1xuXG4gIHRoaXMueG8ub25jZSgnZmluaXNoJywgZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XG4gICAgdmFyIGluZm8sIHJ0dDtcbiAgICBpZiAoc3RhdHVzID09PSAyMDApIHtcbiAgICAgIHJ0dCA9ICgrbmV3IERhdGUoKSkgLSB0MDtcbiAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaW5mbyA9IEpTT04zLnBhcnNlKHRleHQpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgZGVidWcoJ2JhZCBqc29uJywgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFvYmplY3RVdGlscy5pc09iamVjdChpbmZvKSkge1xuICAgICAgICBpbmZvID0ge307XG4gICAgICB9XG4gICAgfVxuICAgIHNlbGYuZW1pdCgnZmluaXNoJywgaW5mbywgcnR0KTtcbiAgICBzZWxmLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9KTtcbn1cblxuaW5oZXJpdHMoSW5mb0FqYXgsIEV2ZW50RW1pdHRlcik7XG5cbkluZm9BamF4LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB0aGlzLnhvLmNsb3NlKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEluZm9BamF4O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvaW5mby1hamF4LmpzXG4gKiogbW9kdWxlIGlkID0gMjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIEpTT04zID0gcmVxdWlyZSgnanNvbjMnKVxuICAsIFhIUkxvY2FsT2JqZWN0ID0gcmVxdWlyZSgnLi90cmFuc3BvcnQvc2VuZGVyL3hoci1sb2NhbCcpXG4gICwgSW5mb0FqYXggPSByZXF1aXJlKCcuL2luZm8tYWpheCcpXG4gIDtcblxuZnVuY3Rpb24gSW5mb1JlY2VpdmVySWZyYW1lKHRyYW5zVXJsKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgdGhpcy5pciA9IG5ldyBJbmZvQWpheCh0cmFuc1VybCwgWEhSTG9jYWxPYmplY3QpO1xuICB0aGlzLmlyLm9uY2UoJ2ZpbmlzaCcsIGZ1bmN0aW9uKGluZm8sIHJ0dCkge1xuICAgIHNlbGYuaXIgPSBudWxsO1xuICAgIHNlbGYuZW1pdCgnbWVzc2FnZScsIEpTT04zLnN0cmluZ2lmeShbaW5mbywgcnR0XSkpO1xuICB9KTtcbn1cblxuaW5oZXJpdHMoSW5mb1JlY2VpdmVySWZyYW1lLCBFdmVudEVtaXR0ZXIpO1xuXG5JbmZvUmVjZWl2ZXJJZnJhbWUudHJhbnNwb3J0TmFtZSA9ICdpZnJhbWUtaW5mby1yZWNlaXZlcic7XG5cbkluZm9SZWNlaXZlcklmcmFtZS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuaXIpIHtcbiAgICB0aGlzLmlyLmNsb3NlKCk7XG4gICAgdGhpcy5pciA9IG51bGw7XG4gIH1cbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW5mb1JlY2VpdmVySWZyYW1lO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvaW5mby1pZnJhbWUtcmVjZWl2ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5sb2NhdGlvbiB8fCB7XG4gIG9yaWdpbjogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAnXG4sIHByb3RvY29sOiAnaHR0cCdcbiwgaG9zdDogJ2xvY2FsaG9zdCdcbiwgcG9ydDogODBcbiwgaHJlZjogJ2h0dHA6Ly9sb2NhbGhvc3QvJ1xuLCBoYXNoOiAnJ1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL2xvY2F0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIHV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvZXZlbnQnKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXJsJylcbiAgLCBYSFIgPSBnbG9iYWwuWE1MSHR0cFJlcXVlc3RcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OmJyb3dzZXI6eGhyJyk7XG59XG5cbmZ1bmN0aW9uIEFic3RyYWN0WEhST2JqZWN0KG1ldGhvZCwgdXJsLCBwYXlsb2FkLCBvcHRzKSB7XG4gIGRlYnVnKG1ldGhvZCwgdXJsKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLl9zdGFydChtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cyk7XG4gIH0sIDApO1xufVxuXG5pbmhlcml0cyhBYnN0cmFjdFhIUk9iamVjdCwgRXZlbnRFbWl0dGVyKTtcblxuQWJzdHJhY3RYSFJPYmplY3QucHJvdG90eXBlLl9zdGFydCA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBwYXlsb2FkLCBvcHRzKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICB0cnkge1xuICAgIHRoaXMueGhyID0gbmV3IFhIUigpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICB9XG5cbiAgaWYgKCF0aGlzLnhocikge1xuICAgIGRlYnVnKCdubyB4aHInKTtcbiAgICB0aGlzLmVtaXQoJ2ZpbmlzaCcsIDAsICdubyB4aHIgc3VwcG9ydCcpO1xuICAgIHRoaXMuX2NsZWFudXAoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBzZXZlcmFsIGJyb3dzZXJzIGNhY2hlIFBPU1RzXG4gIHVybCA9IHVybFV0aWxzLmFkZFF1ZXJ5KHVybCwgJ3Q9JyArICgrbmV3IERhdGUoKSkpO1xuXG4gIC8vIEV4cGxvcmVyIHRlbmRzIHRvIGtlZXAgY29ubmVjdGlvbiBvcGVuLCBldmVuIGFmdGVyIHRoZVxuICAvLyB0YWIgZ2V0cyBjbG9zZWQ6IGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzUyODBcbiAgdGhpcy51bmxvYWRSZWYgPSB1dGlscy51bmxvYWRBZGQoZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3VubG9hZCBjbGVhbnVwJyk7XG4gICAgc2VsZi5fY2xlYW51cCh0cnVlKTtcbiAgfSk7XG4gIHRyeSB7XG4gICAgdGhpcy54aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgaWYgKHRoaXMudGltZW91dCAmJiAndGltZW91dCcgaW4gdGhpcy54aHIpIHtcbiAgICAgIHRoaXMueGhyLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQ7XG4gICAgICB0aGlzLnhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGVidWcoJ3hociB0aW1lb3V0Jyk7XG4gICAgICAgIHNlbGYuZW1pdCgnZmluaXNoJywgMCwgJycpO1xuICAgICAgICBzZWxmLl9jbGVhbnVwKGZhbHNlKTtcbiAgICAgIH07XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgZGVidWcoJ2V4Y2VwdGlvbicsIGUpO1xuICAgIC8vIElFIHJhaXNlcyBhbiBleGNlcHRpb24gb24gd3JvbmcgcG9ydC5cbiAgICB0aGlzLmVtaXQoJ2ZpbmlzaCcsIDAsICcnKTtcbiAgICB0aGlzLl9jbGVhbnVwKGZhbHNlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoKCFvcHRzIHx8ICFvcHRzLm5vQ3JlZGVudGlhbHMpICYmIEFic3RyYWN0WEhST2JqZWN0LnN1cHBvcnRzQ09SUykge1xuICAgIGRlYnVnKCd3aXRoQ3JlZGVudGlhbHMnKTtcbiAgICAvLyBNb3ppbGxhIGRvY3Mgc2F5cyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9YTUxIdHRwUmVxdWVzdCA6XG4gICAgLy8gXCJUaGlzIG5ldmVyIGFmZmVjdHMgc2FtZS1zaXRlIHJlcXVlc3RzLlwiXG5cbiAgICB0aGlzLnhoci53aXRoQ3JlZGVudGlhbHMgPSAndHJ1ZSc7XG4gIH1cbiAgaWYgKG9wdHMgJiYgb3B0cy5oZWFkZXJzKSB7XG4gICAgZm9yICh2YXIga2V5IGluIG9wdHMuaGVhZGVycykge1xuICAgICAgdGhpcy54aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIG9wdHMuaGVhZGVyc1trZXldKTtcbiAgICB9XG4gIH1cblxuICB0aGlzLnhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2VsZi54aHIpIHtcbiAgICAgIHZhciB4ID0gc2VsZi54aHI7XG4gICAgICB2YXIgdGV4dCwgc3RhdHVzO1xuICAgICAgZGVidWcoJ3JlYWR5U3RhdGUnLCB4LnJlYWR5U3RhdGUpO1xuICAgICAgc3dpdGNoICh4LnJlYWR5U3RhdGUpIHtcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgLy8gSUUgZG9lc24ndCBsaWtlIHBlZWtpbmcgaW50byByZXNwb25zZVRleHQgb3Igc3RhdHVzXG4gICAgICAgIC8vIG9uIE1pY3Jvc29mdC5YTUxIVFRQIGFuZCByZWFkeXN0YXRlPTNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBzdGF0dXMgPSB4LnN0YXR1cztcbiAgICAgICAgICB0ZXh0ID0geC5yZXNwb25zZVRleHQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG4gICAgICAgIH1cbiAgICAgICAgZGVidWcoJ3N0YXR1cycsIHN0YXR1cyk7XG4gICAgICAgIC8vIElFIHJldHVybnMgMTIyMyBmb3IgMjA0OiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xNDUwXG4gICAgICAgIGlmIChzdGF0dXMgPT09IDEyMjMpIHtcbiAgICAgICAgICBzdGF0dXMgPSAyMDQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJRSBkb2VzIHJldHVybiByZWFkeXN0YXRlID09IDMgZm9yIDQwNCBhbnN3ZXJzLlxuICAgICAgICBpZiAoc3RhdHVzID09PSAyMDAgJiYgdGV4dCAmJiB0ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBkZWJ1ZygnY2h1bmsnKTtcbiAgICAgICAgICBzZWxmLmVtaXQoJ2NodW5rJywgc3RhdHVzLCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgc3RhdHVzID0geC5zdGF0dXM7XG4gICAgICAgIGRlYnVnKCdzdGF0dXMnLCBzdGF0dXMpO1xuICAgICAgICAvLyBJRSByZXR1cm5zIDEyMjMgZm9yIDIwNDogaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTQ1MFxuICAgICAgICBpZiAoc3RhdHVzID09PSAxMjIzKSB7XG4gICAgICAgICAgc3RhdHVzID0gMjA0O1xuICAgICAgICB9XG4gICAgICAgIC8vIElFIHJldHVybnMgdGhpcyBmb3IgYSBiYWQgcG9ydFxuICAgICAgICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvd2luZG93cy9kZXNrdG9wL2FhMzgzNzcwKHY9dnMuODUpLmFzcHhcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMTIwMDUgfHwgc3RhdHVzID09PSAxMjAyOSkge1xuICAgICAgICAgIHN0YXR1cyA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBkZWJ1ZygnZmluaXNoJywgc3RhdHVzLCB4LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIHNlbGYuZW1pdCgnZmluaXNoJywgc3RhdHVzLCB4LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIHNlbGYuX2NsZWFudXAoZmFsc2UpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdHJ5IHtcbiAgICBzZWxmLnhoci5zZW5kKHBheWxvYWQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgc2VsZi5lbWl0KCdmaW5pc2gnLCAwLCAnJyk7XG4gICAgc2VsZi5fY2xlYW51cChmYWxzZSk7XG4gIH1cbn07XG5cbkFic3RyYWN0WEhST2JqZWN0LnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKGFib3J0KSB7XG4gIGRlYnVnKCdjbGVhbnVwJyk7XG4gIGlmICghdGhpcy54aHIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgdXRpbHMudW5sb2FkRGVsKHRoaXMudW5sb2FkUmVmKTtcblxuICAvLyBJRSBuZWVkcyB0aGlzIGZpZWxkIHRvIGJlIGEgZnVuY3Rpb25cbiAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7fTtcbiAgaWYgKHRoaXMueGhyLm9udGltZW91dCkge1xuICAgIHRoaXMueGhyLm9udGltZW91dCA9IG51bGw7XG4gIH1cblxuICBpZiAoYWJvcnQpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy54aHIuYWJvcnQoKTtcbiAgICB9IGNhdGNoICh4KSB7XG4gICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG4gICAgfVxuICB9XG4gIHRoaXMudW5sb2FkUmVmID0gdGhpcy54aHIgPSBudWxsO1xufTtcblxuQWJzdHJhY3RYSFJPYmplY3QucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdjbG9zZScpO1xuICB0aGlzLl9jbGVhbnVwKHRydWUpO1xufTtcblxuQWJzdHJhY3RYSFJPYmplY3QuZW5hYmxlZCA9ICEhWEhSO1xuLy8gb3ZlcnJpZGUgWE1MSHR0cFJlcXVlc3QgZm9yIElFNi83XG4vLyBvYmZ1c2NhdGUgdG8gYXZvaWQgZmlyZXdhbGxzXG52YXIgYXhvID0gWydBY3RpdmUnXS5jb25jYXQoJ09iamVjdCcpLmpvaW4oJ1gnKTtcbmlmICghQWJzdHJhY3RYSFJPYmplY3QuZW5hYmxlZCAmJiAoYXhvIGluIGdsb2JhbCkpIHtcbiAgZGVidWcoJ292ZXJyaWRpbmcgeG1saHR0cHJlcXVlc3QnKTtcbiAgWEhSID0gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgZ2xvYmFsW2F4b10oJ01pY3Jvc29mdC5YTUxIVFRQJyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuICBBYnN0cmFjdFhIUk9iamVjdC5lbmFibGVkID0gISFuZXcgWEhSKCk7XG59XG5cbnZhciBjb3JzID0gZmFsc2U7XG50cnkge1xuICBjb3JzID0gJ3dpdGhDcmVkZW50aWFscycgaW4gbmV3IFhIUigpO1xufSBjYXRjaCAoaWdub3JlZCkge1xuICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG59XG5cbkFic3RyYWN0WEhST2JqZWN0LnN1cHBvcnRzQ09SUyA9IGNvcnM7XG5cbm1vZHVsZS5leHBvcnRzID0gQWJzdHJhY3RYSFJPYmplY3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvYnJvd3Nlci9hYnN0cmFjdC14aHIuanNcbiAqKiBtb2R1bGUgaWQgPSAyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuRXZlbnRTb3VyY2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvYnJvd3Nlci9ldmVudHNvdXJjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBBamF4QmFzZWRUcmFuc3BvcnQgPSByZXF1aXJlKCcuL2xpYi9hamF4LWJhc2VkJylcbiAgLCBFdmVudFNvdXJjZVJlY2VpdmVyID0gcmVxdWlyZSgnLi9yZWNlaXZlci9ldmVudHNvdXJjZScpXG4gICwgWEhSQ29yc09iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1jb3JzJylcbiAgLCBFdmVudFNvdXJjZURyaXZlciA9IHJlcXVpcmUoJ2V2ZW50c291cmNlJylcbiAgO1xuXG5mdW5jdGlvbiBFdmVudFNvdXJjZVRyYW5zcG9ydCh0cmFuc1VybCkge1xuICBpZiAoIUV2ZW50U291cmNlVHJhbnNwb3J0LmVuYWJsZWQoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG5cbiAgQWpheEJhc2VkVHJhbnNwb3J0LmNhbGwodGhpcywgdHJhbnNVcmwsICcvZXZlbnRzb3VyY2UnLCBFdmVudFNvdXJjZVJlY2VpdmVyLCBYSFJDb3JzT2JqZWN0KTtcbn1cblxuaW5oZXJpdHMoRXZlbnRTb3VyY2VUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cbkV2ZW50U291cmNlVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICEhRXZlbnRTb3VyY2VEcml2ZXI7XG59O1xuXG5FdmVudFNvdXJjZVRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ2V2ZW50c291cmNlJztcbkV2ZW50U291cmNlVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50U291cmNlVHJhbnNwb3J0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2V2ZW50c291cmNlLmpzXG4gKiogbW9kdWxlIGlkID0gMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEh0bWxmaWxlUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3JlY2VpdmVyL2h0bWxmaWxlJylcbiAgLCBYSFJMb2NhbE9iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1sb2NhbCcpXG4gICwgQWpheEJhc2VkVHJhbnNwb3J0ID0gcmVxdWlyZSgnLi9saWIvYWpheC1iYXNlZCcpXG4gIDtcblxuZnVuY3Rpb24gSHRtbEZpbGVUcmFuc3BvcnQodHJhbnNVcmwpIHtcbiAgaWYgKCFIdG1sZmlsZVJlY2VpdmVyLmVuYWJsZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBjcmVhdGVkIHdoZW4gZGlzYWJsZWQnKTtcbiAgfVxuICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy9odG1sZmlsZScsIEh0bWxmaWxlUmVjZWl2ZXIsIFhIUkxvY2FsT2JqZWN0KTtcbn1cblxuaW5oZXJpdHMoSHRtbEZpbGVUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cbkh0bWxGaWxlVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbihpbmZvKSB7XG4gIHJldHVybiBIdG1sZmlsZVJlY2VpdmVyLmVuYWJsZWQgJiYgaW5mby5zYW1lT3JpZ2luO1xufTtcblxuSHRtbEZpbGVUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICdodG1sZmlsZSc7XG5IdG1sRmlsZVRyYW5zcG9ydC5yb3VuZFRyaXBzID0gMjtcblxubW9kdWxlLmV4cG9ydHMgPSBIdG1sRmlsZVRyYW5zcG9ydDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9odG1sZmlsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbi8vIEZldyBjb29sIHRyYW5zcG9ydHMgZG8gd29yayBvbmx5IGZvciBzYW1lLW9yaWdpbi4gSW4gb3JkZXIgdG8gbWFrZVxuLy8gdGhlbSB3b3JrIGNyb3NzLWRvbWFpbiB3ZSBzaGFsbCB1c2UgaWZyYW1lLCBzZXJ2ZWQgZnJvbSB0aGVcbi8vIHJlbW90ZSBkb21haW4uIE5ldyBicm93c2VycyBoYXZlIGNhcGFiaWxpdGllcyB0byBjb21tdW5pY2F0ZSB3aXRoXG4vLyBjcm9zcyBkb21haW4gaWZyYW1lIHVzaW5nIHBvc3RNZXNzYWdlKCkuIEluIElFIGl0IHdhcyBpbXBsZW1lbnRlZFxuLy8gZnJvbSBJRSA4KywgYnV0IG9mIGNvdXJzZSwgSUUgZ290IHNvbWUgZGV0YWlscyB3cm9uZzpcbi8vICAgIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9jYzE5NzAxNSh2PVZTLjg1KS5hc3B4XG4vLyAgICBodHRwOi8vc3RldmVzb3VkZXJzLmNvbS9taXNjL3Rlc3QtcG9zdG1lc3NhZ2UucGhwXG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJylcbiAgLCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCB2ZXJzaW9uID0gcmVxdWlyZSgnLi4vdmVyc2lvbicpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91cmwnKVxuICAsIGlmcmFtZVV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvaWZyYW1lJylcbiAgLCBldmVudFV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvZXZlbnQnKVxuICAsIHJhbmRvbSA9IHJlcXVpcmUoJy4uL3V0aWxzL3JhbmRvbScpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDp0cmFuc3BvcnQ6aWZyYW1lJyk7XG59XG5cbmZ1bmN0aW9uIElmcmFtZVRyYW5zcG9ydCh0cmFuc3BvcnQsIHRyYW5zVXJsLCBiYXNlVXJsKSB7XG4gIGlmICghSWZyYW1lVHJhbnNwb3J0LmVuYWJsZWQoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5vcmlnaW4gPSB1cmxVdGlscy5nZXRPcmlnaW4oYmFzZVVybCk7XG4gIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gIHRoaXMudHJhbnNVcmwgPSB0cmFuc1VybDtcbiAgdGhpcy50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG4gIHRoaXMud2luZG93SWQgPSByYW5kb20uc3RyaW5nKDgpO1xuXG4gIHZhciBpZnJhbWVVcmwgPSB1cmxVdGlscy5hZGRQYXRoKGJhc2VVcmwsICcvaWZyYW1lLmh0bWwnKSArICcjJyArIHRoaXMud2luZG93SWQ7XG4gIGRlYnVnKHRyYW5zcG9ydCwgdHJhbnNVcmwsIGlmcmFtZVVybCk7XG5cbiAgdGhpcy5pZnJhbWVPYmogPSBpZnJhbWVVdGlscy5jcmVhdGVJZnJhbWUoaWZyYW1lVXJsLCBmdW5jdGlvbihyKSB7XG4gICAgZGVidWcoJ2VyciBjYWxsYmFjaycpO1xuICAgIHNlbGYuZW1pdCgnY2xvc2UnLCAxMDA2LCAnVW5hYmxlIHRvIGxvYWQgYW4gaWZyYW1lICgnICsgciArICcpJyk7XG4gICAgc2VsZi5jbG9zZSgpO1xuICB9KTtcblxuICB0aGlzLm9ubWVzc2FnZUNhbGxiYWNrID0gdGhpcy5fbWVzc2FnZS5iaW5kKHRoaXMpO1xuICBldmVudFV0aWxzLmF0dGFjaEV2ZW50KCdtZXNzYWdlJywgdGhpcy5vbm1lc3NhZ2VDYWxsYmFjayk7XG59XG5cbmluaGVyaXRzKElmcmFtZVRyYW5zcG9ydCwgRXZlbnRFbWl0dGVyKTtcblxuSWZyYW1lVHJhbnNwb3J0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgaWYgKHRoaXMuaWZyYW1lT2JqKSB7XG4gICAgZXZlbnRVdGlscy5kZXRhY2hFdmVudCgnbWVzc2FnZScsIHRoaXMub25tZXNzYWdlQ2FsbGJhY2spO1xuICAgIHRyeSB7XG4gICAgICAvLyBXaGVuIHRoZSBpZnJhbWUgaXMgbm90IGxvYWRlZCwgSUUgcmFpc2VzIGFuIGV4Y2VwdGlvblxuICAgICAgLy8gb24gJ2NvbnRlbnRXaW5kb3cnLlxuICAgICAgdGhpcy5wb3N0TWVzc2FnZSgnYycpO1xuICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgICB9XG4gICAgdGhpcy5pZnJhbWVPYmouY2xlYW51cCgpO1xuICAgIHRoaXMuaWZyYW1lT2JqID0gbnVsbDtcbiAgICB0aGlzLm9ubWVzc2FnZUNhbGxiYWNrID0gdGhpcy5pZnJhbWVPYmogPSBudWxsO1xuICB9XG59O1xuXG5JZnJhbWVUcmFuc3BvcnQucHJvdG90eXBlLl9tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuICBkZWJ1ZygnbWVzc2FnZScsIGUuZGF0YSk7XG4gIGlmICghdXJsVXRpbHMuaXNPcmlnaW5FcXVhbChlLm9yaWdpbiwgdGhpcy5vcmlnaW4pKSB7XG4gICAgZGVidWcoJ25vdCBzYW1lIG9yaWdpbicsIGUub3JpZ2luLCB0aGlzLm9yaWdpbik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGlmcmFtZU1lc3NhZ2U7XG4gIHRyeSB7XG4gICAgaWZyYW1lTWVzc2FnZSA9IEpTT04zLnBhcnNlKGUuZGF0YSk7XG4gIH0gY2F0Y2ggKGlnbm9yZWQpIHtcbiAgICBkZWJ1ZygnYmFkIGpzb24nLCBlLmRhdGEpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpZnJhbWVNZXNzYWdlLndpbmRvd0lkICE9PSB0aGlzLndpbmRvd0lkKSB7XG4gICAgZGVidWcoJ21pc21hdGNoZWQgd2luZG93IGlkJywgaWZyYW1lTWVzc2FnZS53aW5kb3dJZCwgdGhpcy53aW5kb3dJZCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3dpdGNoIChpZnJhbWVNZXNzYWdlLnR5cGUpIHtcbiAgY2FzZSAncyc6XG4gICAgdGhpcy5pZnJhbWVPYmoubG9hZGVkKCk7XG4gICAgLy8gd2luZG93IGdsb2JhbCBkZXBlbmRlbmN5XG4gICAgdGhpcy5wb3N0TWVzc2FnZSgncycsIEpTT04zLnN0cmluZ2lmeShbXG4gICAgICB2ZXJzaW9uXG4gICAgLCB0aGlzLnRyYW5zcG9ydFxuICAgICwgdGhpcy50cmFuc1VybFxuICAgICwgdGhpcy5iYXNlVXJsXG4gICAgXSkpO1xuICAgIGJyZWFrO1xuICBjYXNlICd0JzpcbiAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCBpZnJhbWVNZXNzYWdlLmRhdGEpO1xuICAgIGJyZWFrO1xuICBjYXNlICdjJzpcbiAgICB2YXIgY2RhdGE7XG4gICAgdHJ5IHtcbiAgICAgIGNkYXRhID0gSlNPTjMucGFyc2UoaWZyYW1lTWVzc2FnZS5kYXRhKTtcbiAgICB9IGNhdGNoIChpZ25vcmVkKSB7XG4gICAgICBkZWJ1ZygnYmFkIGpzb24nLCBpZnJhbWVNZXNzYWdlLmRhdGEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgY2RhdGFbMF0sIGNkYXRhWzFdKTtcbiAgICB0aGlzLmNsb3NlKCk7XG4gICAgYnJlYWs7XG4gIH1cbn07XG5cbklmcmFtZVRyYW5zcG9ydC5wcm90b3R5cGUucG9zdE1lc3NhZ2UgPSBmdW5jdGlvbih0eXBlLCBkYXRhKSB7XG4gIGRlYnVnKCdwb3N0TWVzc2FnZScsIHR5cGUsIGRhdGEpO1xuICB0aGlzLmlmcmFtZU9iai5wb3N0KEpTT04zLnN0cmluZ2lmeSh7XG4gICAgd2luZG93SWQ6IHRoaXMud2luZG93SWRcbiAgLCB0eXBlOiB0eXBlXG4gICwgZGF0YTogZGF0YSB8fCAnJ1xuICB9KSwgdGhpcy5vcmlnaW4pO1xufTtcblxuSWZyYW1lVHJhbnNwb3J0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICBkZWJ1Zygnc2VuZCcsIG1lc3NhZ2UpO1xuICB0aGlzLnBvc3RNZXNzYWdlKCdtJywgbWVzc2FnZSk7XG59O1xuXG5JZnJhbWVUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gaWZyYW1lVXRpbHMuaWZyYW1lRW5hYmxlZDtcbn07XG5cbklmcmFtZVRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ2lmcmFtZSc7XG5JZnJhbWVUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7XG5cbm1vZHVsZS5leHBvcnRzID0gSWZyYW1lVHJhbnNwb3J0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2lmcmFtZS5qc1xuICoqIG1vZHVsZSBpZCA9IDI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCB1cmxVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3VybCcpXG4gICwgQnVmZmVyZWRTZW5kZXIgPSByZXF1aXJlKCcuL2J1ZmZlcmVkLXNlbmRlcicpXG4gICwgUG9sbGluZyA9IHJlcXVpcmUoJy4vcG9sbGluZycpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpzZW5kZXItcmVjZWl2ZXInKTtcbn1cblxuZnVuY3Rpb24gU2VuZGVyUmVjZWl2ZXIodHJhbnNVcmwsIHVybFN1ZmZpeCwgc2VuZGVyRnVuYywgUmVjZWl2ZXIsIEFqYXhPYmplY3QpIHtcbiAgdmFyIHBvbGxVcmwgPSB1cmxVdGlscy5hZGRQYXRoKHRyYW5zVXJsLCB1cmxTdWZmaXgpO1xuICBkZWJ1Zyhwb2xsVXJsKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBCdWZmZXJlZFNlbmRlci5jYWxsKHRoaXMsIHRyYW5zVXJsLCBzZW5kZXJGdW5jKTtcblxuICB0aGlzLnBvbGwgPSBuZXcgUG9sbGluZyhSZWNlaXZlciwgcG9sbFVybCwgQWpheE9iamVjdCk7XG4gIHRoaXMucG9sbC5vbignbWVzc2FnZScsIGZ1bmN0aW9uKG1zZykge1xuICAgIGRlYnVnKCdwb2xsIG1lc3NhZ2UnLCBtc2cpO1xuICAgIHNlbGYuZW1pdCgnbWVzc2FnZScsIG1zZyk7XG4gIH0pO1xuICB0aGlzLnBvbGwub25jZSgnY2xvc2UnLCBmdW5jdGlvbihjb2RlLCByZWFzb24pIHtcbiAgICBkZWJ1ZygncG9sbCBjbG9zZScsIGNvZGUsIHJlYXNvbik7XG4gICAgc2VsZi5wb2xsID0gbnVsbDtcbiAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgY29kZSwgcmVhc29uKTtcbiAgICBzZWxmLmNsb3NlKCk7XG4gIH0pO1xufVxuXG5pbmhlcml0cyhTZW5kZXJSZWNlaXZlciwgQnVmZmVyZWRTZW5kZXIpO1xuXG5TZW5kZXJSZWNlaXZlci5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2Nsb3NlJyk7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIGlmICh0aGlzLnBvbGwpIHtcbiAgICB0aGlzLnBvbGwuYWJvcnQoKTtcbiAgICB0aGlzLnBvbGwgPSBudWxsO1xuICB9XG4gIHRoaXMuc3RvcCgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTZW5kZXJSZWNlaXZlcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9saWIvc2VuZGVyLXJlY2VpdmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEFqYXhCYXNlZFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vbGliL2FqYXgtYmFzZWQnKVxuICAsIFhoclJlY2VpdmVyID0gcmVxdWlyZSgnLi9yZWNlaXZlci94aHInKVxuICAsIFhEUk9iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hkcicpXG4gIDtcblxuLy8gQWNjb3JkaW5nIHRvOlxuLy8gICBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE2NDE1MDcvZGV0ZWN0LWJyb3dzZXItc3VwcG9ydC1mb3ItY3Jvc3MtZG9tYWluLXhtbGh0dHByZXF1ZXN0c1xuLy8gICBodHRwOi8vaGFja3MubW96aWxsYS5vcmcvMjAwOS8wNy9jcm9zcy1zaXRlLXhtbGh0dHByZXF1ZXN0LXdpdGgtY29ycy9cblxuZnVuY3Rpb24gWGRyU3RyZWFtaW5nVHJhbnNwb3J0KHRyYW5zVXJsKSB7XG4gIGlmICghWERST2JqZWN0LmVuYWJsZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBjcmVhdGVkIHdoZW4gZGlzYWJsZWQnKTtcbiAgfVxuICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy94aHJfc3RyZWFtaW5nJywgWGhyUmVjZWl2ZXIsIFhEUk9iamVjdCk7XG59XG5cbmluaGVyaXRzKFhkclN0cmVhbWluZ1RyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblxuWGRyU3RyZWFtaW5nVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbihpbmZvKSB7XG4gIGlmIChpbmZvLmNvb2tpZV9uZWVkZWQgfHwgaW5mby5udWxsT3JpZ2luKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBYRFJPYmplY3QuZW5hYmxlZCAmJiBpbmZvLnNhbWVTY2hlbWU7XG59O1xuXG5YZHJTdHJlYW1pbmdUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICd4ZHItc3RyZWFtaW5nJztcblhkclN0cmVhbWluZ1RyYW5zcG9ydC5yb3VuZFRyaXBzID0gMjsgLy8gcHJlZmxpZ2h0LCBhamF4XG5cbm1vZHVsZS5leHBvcnRzID0gWGRyU3RyZWFtaW5nVHJhbnNwb3J0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L3hkci1zdHJlYW1pbmcuanNcbiAqKiBtb2R1bGUgaWQgPSAyOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgQWpheEJhc2VkVHJhbnNwb3J0ID0gcmVxdWlyZSgnLi9saWIvYWpheC1iYXNlZCcpXG4gICwgWGhyUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3JlY2VpdmVyL3hocicpXG4gICwgWEhSQ29yc09iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1jb3JzJylcbiAgLCBYSFJMb2NhbE9iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1sb2NhbCcpXG4gIDtcblxuZnVuY3Rpb24gWGhyUG9sbGluZ1RyYW5zcG9ydCh0cmFuc1VybCkge1xuICBpZiAoIVhIUkxvY2FsT2JqZWN0LmVuYWJsZWQgJiYgIVhIUkNvcnNPYmplY3QuZW5hYmxlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG4gIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL3hocicsIFhoclJlY2VpdmVyLCBYSFJDb3JzT2JqZWN0KTtcbn1cblxuaW5oZXJpdHMoWGhyUG9sbGluZ1RyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblxuWGhyUG9sbGluZ1RyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oaW5mbykge1xuICBpZiAoaW5mby5udWxsT3JpZ2luKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKFhIUkxvY2FsT2JqZWN0LmVuYWJsZWQgJiYgaW5mby5zYW1lT3JpZ2luKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIFhIUkNvcnNPYmplY3QuZW5hYmxlZDtcbn07XG5cblhoclBvbGxpbmdUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICd4aHItcG9sbGluZyc7XG5YaHJQb2xsaW5nVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyOyAvLyBwcmVmbGlnaHQsIGFqYXhcblxubW9kdWxlLmV4cG9ydHMgPSBYaHJQb2xsaW5nVHJhbnNwb3J0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L3hoci1wb2xsaW5nLmpzXG4gKiogbW9kdWxlIGlkID0gMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gJzEuMS4wJztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3ZlcnNpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWJ1Zyhsb2cpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKGxvZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3YXJuKGxvZykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgY29uc29sZS53YXJuKGxvZyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlcnJvcihsb2cpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmVycm9yKGxvZyk7XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9icm93c2VyL3NjcmlwdHMvbG9nLmpzXG4gKiovIiwiXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDb25uZWN0ZWQoaXNTdWNjZXNzLCBlcnJNc2cpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGlmIChlcnJNc2cgIT09IFwiXCIpIHtcclxuICAgICAgICBhbGVydChlcnJNc2cpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29ubmVjdCcpLmRpc2FibGVkID0gaXNTdWNjZXNzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0RGlzY29ubmVjdGVkKGlzU3VjY2VzcywgZXJyTXNnKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBpZiAoZXJyTXNnICE9PSBcIlwiKSB7XHJcbiAgICAgICAgYWxlcnQoZXJyTXNnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc2Nvbm5lY3QnKS5kaXNhYmxlZCA9IGlzU3VjY2VzcztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldENvdW50cnlDaGF0IChjb250ZW50KSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIGxldCBjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZCcpO1xyXG4gICAgY29uc29sZS5sb2coXCJjb250ZW50OlwiICsgY29udGVudCk7XHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9icm93c2VyL3NjcmlwdHMvdmlldy5qc1xuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIHRyYW5zcG9ydExpc3QgPSByZXF1aXJlKCcuL3RyYW5zcG9ydC1saXN0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9tYWluJykodHJhbnNwb3J0TGlzdCk7XG5cbi8vIFRPRE8gY2FuJ3QgZ2V0IHJpZCBvZiB0aGlzIHVudGlsIGFsbCBzZXJ2ZXJzIGRvXG5pZiAoJ19zb2NranNfb25sb2FkJyBpbiBnbG9iYWwpIHtcbiAgc2V0VGltZW91dChnbG9iYWwuX3NvY2tqc19vbmxvYWQsIDEpO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvZW50cnkuanNcbiAqKiBtb2R1bGUgaWQgPSAzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wid2Vic3RvbXBcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wid2Vic3RvbXBcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuXG5cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cblx0dmFyIF9jbGllbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cdHZhciBfY2xpZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsaWVudCk7XG5cblx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuXHQvLyBUaGUgYHdlYnN0b21wYCBPYmplY3Rcblx0dmFyIHdlYnN0b21wID0ge1xuXHQgICAgVkVSU0lPTlM6IF91dGlscy5WRVJTSU9OUyxcblx0ICAgIC8vIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBXZWJTb2NrZXQgY2xpZW50IHRoYXQgaXMgY29ubmVjdGVkIHRvXG5cdCAgICAvLyB0aGUgU1RPTVAgc2VydmVyIGxvY2F0ZWQgYXQgdGhlIHVybC5cblx0ICAgIGNsaWVudDogZnVuY3Rpb24gY2xpZW50KHVybCkge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8geyBwcm90b2NvbHM6IF91dGlscy5WRVJTSU9OUy5zdXBwb3J0ZWRQcm90b2NvbHMoKSB9IDogYXJndW1lbnRzWzFdO1xuXG5cdCAgICAgICAgdmFyIHdzID0gbmV3IFdlYlNvY2tldCh1cmwsIG9wdGlvbnMucHJvdG9jb2xzKTtcblx0ICAgICAgICByZXR1cm4gbmV3IF9jbGllbnQyLmRlZmF1bHQod3MsIG9wdGlvbnMpO1xuXHQgICAgfSxcblx0ICAgIC8vIFRoaXMgbWV0aG9kIGlzIGFuIGFsdGVybmF0aXZlIHRvIGB3ZWJzdG9tcC5jbGllbnQoKWAgdG8gbGV0IHRoZSB1c2VyXG5cdCAgICAvLyBzcGVjaWZ5IHRoZSBXZWJTb2NrZXQgdG8gdXNlIChlaXRoZXIgYSBzdGFuZGFyZCBIVE1MNSBXZWJTb2NrZXQgb3Jcblx0ICAgIC8vIGEgc2ltaWxhciBvYmplY3QpLlxuXHQgICAgb3ZlcjogZnVuY3Rpb24gb3ZlcigpIHtcblx0ICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KF9jbGllbnQyLmRlZmF1bHQsIFtudWxsXS5jb25jYXQoYXJncykpKSgpO1xuXHQgICAgfVxuXHR9O1xuXG5cdGV4cG9ydHMuZGVmYXVsdCA9IHdlYnN0b21wO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXG5cdHZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfSByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07IH0oKTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5cdHZhciBfZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG5cdHZhciBfZnJhbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZnJhbWUpO1xuXG5cdHZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuXHQvLyBTVE9NUCBDbGllbnQgQ2xhc3Ncblx0Ly9cblx0Ly8gQWxsIFNUT01QIHByb3RvY29sIGlzIGV4cG9zZWQgYXMgbWV0aG9kcyBvZiB0aGlzIGNsYXNzIChgY29ubmVjdCgpYCxcblx0Ly8gYHNlbmQoKWAsIGV0Yy4pXG5cblx0dmFyIENsaWVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIENsaWVudCh3cykge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8geyBiaW5hcnk6IGZhbHNlLCBoZWFydGJlYXQ6IHsgb3V0Z29pbmc6IDEwMDAwLCBpbmNvbWluZzogMTAwMDAgfSwgZGVidWc6IHRydWUgfSA6IGFyZ3VtZW50c1sxXTtcblxuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGllbnQpO1xuXG5cdCAgICAgICAgdGhpcy53cyA9IHdzO1xuXHQgICAgICAgIHRoaXMud3MuYmluYXJ5VHlwZSA9ICdhcnJheWJ1ZmZlcic7XG5cdCAgICAgICAgdGhpcy5iaW5hcnkgPSBvcHRpb25zLmJpbmFyeTtcblx0ICAgICAgICB0aGlzLmhhc0RlYnVnID0gb3B0aW9ucy5kZWJ1Zztcblx0ICAgICAgICAvLyB1c2VkIHRvIGluZGV4IHN1YnNjcmliZXJzXG5cdCAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcblx0ICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuXHQgICAgICAgIC8vIEhlYXJ0YmVhdCBwcm9wZXJ0aWVzIG9mIHRoZSBjbGllbnRcblx0ICAgICAgICAvLyBvdXRnb2luZzogc2VuZCBoZWFydGJlYXQgZXZlcnkgMTBzIGJ5IGRlZmF1bHQgKHZhbHVlIGlzIGluIG1zKVxuXHQgICAgICAgIC8vIGluY29taW5nOiBleHBlY3QgdG8gcmVjZWl2ZSBzZXJ2ZXIgaGVhcnRiZWF0IGF0IGxlYXN0IGV2ZXJ5IDEwcyBieSBkZWZhdWx0XG5cdCAgICAgICAgLy8gZmFsc3kgdmFsdWUgbWVhbnMgbm8gaGVhcnRiZWF0IGhlbmNlIDAsMFxuXHQgICAgICAgIHRoaXMuaGVhcnRiZWF0ID0gb3B0aW9ucy5oZWFydGJlYXQgfHwgeyBvdXRnb2luZzogMCwgaW5jb21pbmc6IDAgfTtcblx0ICAgICAgICAvLyBtYXhpbXVtICpXZWJTb2NrZXQqIGZyYW1lIHNpemUgc2VudCBieSB0aGUgY2xpZW50LiBJZiB0aGUgU1RPTVAgZnJhbWVcblx0ICAgICAgICAvLyBpcyBiaWdnZXIgdGhhbiB0aGlzIHZhbHVlLCB0aGUgU1RPTVAgZnJhbWUgd2lsbCBiZSBzZW50IHVzaW5nIG11bHRpcGxlXG5cdCAgICAgICAgLy8gV2ViU29ja2V0IGZyYW1lcyAoZGVmYXVsdCBpcyAxNktpQilcblx0ICAgICAgICB0aGlzLm1heFdlYlNvY2tldEZyYW1lU2l6ZSA9IDE2ICogMTAyNDtcblx0ICAgICAgICAvLyBzdWJzY3JpcHRpb24gY2FsbGJhY2tzIGluZGV4ZWQgYnkgc3Vic2NyaWJlcidzIElEXG5cdCAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0ge307XG5cdCAgICAgICAgdGhpcy5wYXJ0aWFsRGF0YSA9ICcnO1xuXHQgICAgfVxuXG5cdCAgICAvLyAvLy8vIERlYnVnZ2luZ1xuXHQgICAgLy9cblx0ICAgIC8vIEJ5IGRlZmF1bHQsIGRlYnVnIG1lc3NhZ2VzIGFyZSBsb2dnZWQgaW4gdGhlIHdpbmRvdydzIGNvbnNvbGUgaWYgaXQgaXMgZGVmaW5lZC5cblx0ICAgIC8vIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmb3IgZXZlcnkgYWN0dWFsIHRyYW5zbWlzc2lvbiBvZiB0aGUgU1RPTVAgZnJhbWVzIG92ZXIgdGhlXG5cdCAgICAvLyBXZWJTb2NrZXQuXG5cdCAgICAvL1xuXHQgICAgLy8gSXQgaXMgcG9zc2libGUgdG8gc2V0IGEgYGRlYnVnKG1lc3NhZ2UpYCBtZXRob2Rcblx0ICAgIC8vIG9uIGEgY2xpZW50IGluc3RhbmNlIHRvIGhhbmRsZSBkaWZmZXJlbnRseSB0aGUgZGVidWcgbWVzc2FnZXM6XG5cdCAgICAvL1xuXHQgICAgLy8gICAgIGNsaWVudC5kZWJ1ZyA9IGZ1bmN0aW9uKHN0cikge1xuXHQgICAgLy8gICAgICAgICAvLyBhcHBlbmQgdGhlIGRlYnVnIGxvZyB0byBhICNkZWJ1ZyBkaXZcblx0ICAgIC8vICAgICAgICAgJChcIiNkZWJ1Z1wiKS5hcHBlbmQoc3RyICsgXCJcXG5cIik7XG5cdCAgICAvLyAgICAgfTtcblxuXG5cdCAgICBfY3JlYXRlQ2xhc3MoQ2xpZW50LCBbe1xuXHQgICAgICAgIGtleTogJ2RlYnVnJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVidWcoKSB7XG5cdCAgICAgICAgICAgIHZhciBfY29uc29sZTtcblxuXHQgICAgICAgICAgICBpZiAodGhpcy5oYXNEZWJ1ZykgKF9jb25zb2xlID0gY29uc29sZSkubG9nLmFwcGx5KF9jb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFtDT05ORUNUIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI0NPTk5FQ1Rfb3JfU1RPTVBfRnJhbWUpXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyBUaGUgYGNvbm5lY3RgIG1ldGhvZCBhY2NlcHRzIGRpZmZlcmVudCBudW1iZXIgb2YgYXJndW1lbnRzIGFuZCB0eXBlczpcblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vICogYGNvbm5lY3QoaGVhZGVycywgY29ubmVjdENhbGxiYWNrKWBcblx0ICAgICAgICAvLyAqIGBjb25uZWN0KGhlYWRlcnMsIGNvbm5lY3RDYWxsYmFjaywgZXJyb3JDYWxsYmFjaylgXG5cdCAgICAgICAgLy8gKiBgY29ubmVjdChsb2dpbiwgcGFzc2NvZGUsIGNvbm5lY3RDYWxsYmFjaylgXG5cdCAgICAgICAgLy8gKiBgY29ubmVjdChsb2dpbiwgcGFzc2NvZGUsIGNvbm5lY3RDYWxsYmFjaywgZXJyb3JDYWxsYmFjaylgXG5cdCAgICAgICAgLy8gKiBgY29ubmVjdChsb2dpbiwgcGFzc2NvZGUsIGNvbm5lY3RDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgaG9zdClgXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyBUaGUgZXJyb3JDYWxsYmFjayBpcyBvcHRpb25hbCBhbmQgdGhlIDIgZmlyc3QgZm9ybXMgYWxsb3cgdG8gcGFzcyBvdGhlclxuXHQgICAgICAgIC8vIGhlYWRlcnMgaW4gYWRkaXRpb24gdG8gYGNsaWVudGAsIGBwYXNzY29kZWAgYW5kIGBob3N0YC5cblxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2Nvbm5lY3QnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KCkge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgIHZhciBfcGFyc2VDb25uZWN0MiA9IHRoaXMuX3BhcnNlQ29ubmVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdCAgICAgICAgICAgIHZhciBfcGFyc2VDb25uZWN0MyA9IF9zbGljZWRUb0FycmF5KF9wYXJzZUNvbm5lY3QyLCAzKTtcblxuXHQgICAgICAgICAgICB2YXIgaGVhZGVycyA9IF9wYXJzZUNvbm5lY3QzWzBdO1xuXHQgICAgICAgICAgICB2YXIgY29ubmVjdENhbGxiYWNrID0gX3BhcnNlQ29ubmVjdDNbMV07XG5cdCAgICAgICAgICAgIHZhciBlcnJvckNhbGxiYWNrID0gX3BhcnNlQ29ubmVjdDNbMl07XG5cblx0ICAgICAgICAgICAgdGhpcy5jb25uZWN0Q2FsbGJhY2sgPSBjb25uZWN0Q2FsbGJhY2s7XG5cdCAgICAgICAgICAgIHRoaXMuZGVidWcoJ09wZW5pbmcgV2ViIFNvY2tldC4uLicpO1xuXHQgICAgICAgICAgICB0aGlzLndzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldnQpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZXZ0LmRhdGE7XG5cdCAgICAgICAgICAgICAgICBpZiAoZXZ0LmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuXHQgICAgICAgICAgICAgICAgICAgIGRhdGEgPSAoMCwgX3V0aWxzLnR5cGVkQXJyYXlUb1VuaWNvZGVTdHJpbmcpKG5ldyBVaW50OEFycmF5KGV2dC5kYXRhKSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBfdGhpcy5zZXJ2ZXJBY3Rpdml0eSA9IERhdGUubm93KCk7XG5cdCAgICAgICAgICAgICAgICAvLyBoZWFydGJlYXRcblx0ICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSBfdXRpbHMuQllURVMuTEYpIHtcblx0ICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygnPDw8IFBPTkcnKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBfdGhpcy5kZWJ1ZygnPDw8ICcgKyBkYXRhKTtcblx0ICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBTVE9NUCBmcmFtZXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyXG5cdCAgICAgICAgICAgICAgICAvLyBUaGUgdW5tYXJzaGFsbCBmdW5jdGlvbiByZXR1cm5zIHRoZSBmcmFtZXMgcGFyc2VkIGFuZCBhbnkgcmVtYWluaW5nXG5cdCAgICAgICAgICAgICAgICAvLyBkYXRhIGZyb20gcGFydGlhbCBmcmFtZXMuXG5cdCAgICAgICAgICAgICAgICB2YXIgdW5tYXJzaGFsbGVkRGF0YSA9IF9mcmFtZTIuZGVmYXVsdC51bm1hcnNoYWxsKF90aGlzLnBhcnRpYWxEYXRhICsgZGF0YSk7XG5cdCAgICAgICAgICAgICAgICBfdGhpcy5wYXJ0aWFsRGF0YSA9IHVubWFyc2hhbGxlZERhdGEucGFydGlhbDtcblx0ICAgICAgICAgICAgICAgIHVubWFyc2hhbGxlZERhdGEuZnJhbWVzLmZvckVhY2goZnVuY3Rpb24gKGZyYW1lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmcmFtZS5jb21tYW5kKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtDT05ORUNURUQgRnJhbWVdKGh0dHA6Ly9zdG9tcC5naXRodWIuY29tL3N0b21wLXNwZWNpZmljYXRpb24tMS4xLmh0bWwjQ09OTkVDVEVEX0ZyYW1lKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdDT05ORUNURUQnOlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVidWcoJ2Nvbm5lY3RlZCB0byBzZXJ2ZXIgJyArIGZyYW1lLmhlYWRlcnMuc2VydmVyKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbm5lY3RlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy52ZXJzaW9uID0gZnJhbWUuaGVhZGVycy52ZXJzaW9uO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3NldHVwSGVhcnRiZWF0KGZyYW1lLmhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3RDYWxsYmFjaykgY29ubmVjdENhbGxiYWNrKGZyYW1lKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBbTUVTU0FHRSBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNNRVNTQUdFKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdNRVNTQUdFJzpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBgb25yZWNlaXZlYCBjYWxsYmFjayBpcyByZWdpc3RlcmVkIHdoZW4gdGhlIGNsaWVudCBjYWxsc1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYHN1YnNjcmliZSgpYC5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIHJlZ2lzdGVyZWQgc3Vic2NyaXB0aW9uIGZvciB0aGUgcmVjZWl2ZWQgbWVzc2FnZSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHVzZWQgdGhlIGRlZmF1bHQgYG9ucmVjZWl2ZWAgbWV0aG9kIHRoYXQgdGhlIGNsaWVudCBjYW4gc2V0LlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB1c2VmdWwgZm9yIHN1YnNjcmlwdGlvbnMgdGhhdCBhcmUgYXV0b21hdGljYWxseSBjcmVhdGVkXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiB0aGUgYnJvd3NlciBzaWRlIChlLmcuIFtSYWJiaXRNUSdzIHRlbXBvcmFyeVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcXVldWVzXShodHRwOi8vd3d3LnJhYmJpdG1xLmNvbS9zdG9tcC5odG1sKSkuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gZnJhbWUuaGVhZGVycy5zdWJzY3JpcHRpb247XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25yZWNlaXZlID0gX3RoaXMuc3Vic2NyaXB0aW9uc1tzdWJzY3JpcHRpb25dIHx8IF90aGlzLm9ucmVjZWl2ZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbnJlY2VpdmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxLjIgZGVmaW5lIGFjayBoZWFkZXIgaWYgYWNrIGlzIHNldCB0byBjbGllbnRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhpcyBoZWFkZXIgbXVzdCBiZSB1c2VkIGZvciBhY2svbmFja1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlSUQgPSBfdGhpcy52ZXJzaW9uID09PSBfdXRpbHMuVkVSU0lPTlMuVjFfMiAmJiBmcmFtZS5oZWFkZXJzLmFjayB8fCBmcmFtZS5oZWFkZXJzWydtZXNzYWdlLWlkJ107XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGBhY2soKWAgYW5kIGBuYWNrKClgIG1ldGhvZHMgZGlyZWN0bHkgdG8gdGhlIHJldHVybmVkIGZyYW1lXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gdGhhdCBhIHNpbXBsZSBjYWxsIHRvIGBtZXNzYWdlLmFjaygpYCBjYW4gYWNrbm93bGVkZ2UgdGhlIG1lc3NhZ2UuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUuYWNrID0gX3RoaXMuYWNrLmJpbmQoX3RoaXMsIG1lc3NhZ2VJRCwgc3Vic2NyaXB0aW9uKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZS5uYWNrID0gX3RoaXMubmFjay5iaW5kKF90aGlzLCBtZXNzYWdlSUQsIHN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25yZWNlaXZlKGZyYW1lKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVidWcoJ1VuaGFuZGxlZCByZWNlaXZlZCBNRVNTQUdFOiAnICsgZnJhbWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtSRUNFSVBUIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI1JFQ0VJUFQpXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjbGllbnQgaW5zdGFuY2UgY2FuIHNldCBpdHMgYG9ucmVjZWlwdGAgZmllbGQgdG8gYSBmdW5jdGlvbiB0YWtpbmdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBmcmFtZSBhcmd1bWVudCB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gYSByZWNlaXB0IGlzIHJlY2VpdmVkIGZyb21cblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlcjpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy9cblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNsaWVudC5vbnJlY2VpcHQgPSBmdW5jdGlvbihmcmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICByZWNlaXB0SUQgPSBmcmFtZS5oZWFkZXJzWydyZWNlaXB0LWlkJ107XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgIC4uLlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdSRUNFSVBUJzpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vbnJlY2VpcHQpIF90aGlzLm9ucmVjZWlwdChmcmFtZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gW0VSUk9SIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI0VSUk9SKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdFUlJPUic6XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JDYWxsYmFjaykgZXJyb3JDYWxsYmFjayhmcmFtZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlYnVnKCdVbmhhbmRsZWQgZnJhbWU6ICcgKyBmcmFtZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHRoaXMud3Mub25jbG9zZSA9IGZ1bmN0aW9uIChldikge1xuXHQgICAgICAgICAgICAgICAgX3RoaXMuZGVidWcoJ1dob29wcyEgTG9zdCBjb25uZWN0aW9uIHRvICcgKyBfdGhpcy53cy51cmwgKyAnOicsIGV2KTtcblx0ICAgICAgICAgICAgICAgIF90aGlzLl9jbGVhblVwKCk7XG5cdCAgICAgICAgICAgICAgICBpZiAoZXJyb3JDYWxsYmFjaykgZXJyb3JDYWxsYmFjayhldik7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHRoaXMud3Mub25vcGVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgX3RoaXMuZGVidWcoJ1dlYiBTb2NrZXQgT3BlbmVkLi4uJyk7XG5cdCAgICAgICAgICAgICAgICBoZWFkZXJzWydhY2NlcHQtdmVyc2lvbiddID0gX3V0aWxzLlZFUlNJT05TLnN1cHBvcnRlZFZlcnNpb25zKCk7XG5cdCAgICAgICAgICAgICAgICBoZWFkZXJzWydoZWFydC1iZWF0J10gPSBbX3RoaXMuaGVhcnRiZWF0Lm91dGdvaW5nLCBfdGhpcy5oZWFydGJlYXQuaW5jb21pbmddLmpvaW4oJywnKTtcblx0ICAgICAgICAgICAgICAgIF90aGlzLl90cmFuc21pdCgnQ09OTkVDVCcsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFtESVNDT05ORUNUIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI0RJU0NPTk5FQ1QpXG5cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdkaXNjb25uZWN0Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdChkaXNjb25uZWN0Q2FsbGJhY2spIHtcblx0ICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuXHQgICAgICAgICAgICB0aGlzLl90cmFuc21pdCgnRElTQ09OTkVDVCcsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAvLyBEaXNjYXJkIHRoZSBvbmNsb3NlIGNhbGxiYWNrIHRvIGF2b2lkIGNhbGxpbmcgdGhlIGVycm9yQ2FsbGJhY2sgd2hlblxuXHQgICAgICAgICAgICAvLyB0aGUgY2xpZW50IGlzIHByb3Blcmx5IGRpc2Nvbm5lY3RlZC5cblx0ICAgICAgICAgICAgdGhpcy53cy5vbmNsb3NlID0gbnVsbDtcblx0ICAgICAgICAgICAgdGhpcy53cy5jbG9zZSgpO1xuXHQgICAgICAgICAgICB0aGlzLl9jbGVhblVwKCk7XG5cdCAgICAgICAgICAgIC8vIFRPRE86IHdoYXQncyB0aGUgcG9pbnQgb2YgdGhpcyBjYWxsYmFjayBkaXNjb25uZWN0IGlzIG5vdCBhc3luY1xuXHQgICAgICAgICAgICBpZiAoZGlzY29ubmVjdENhbGxiYWNrKSBkaXNjb25uZWN0Q2FsbGJhY2soKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBbU0VORCBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNTRU5EKVxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gKiBgZGVzdGluYXRpb25gIGlzIE1BTkRBVE9SWS5cblxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3NlbmQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kKGRlc3RpbmF0aW9uKSB7XG5cdCAgICAgICAgICAgIHZhciBib2R5ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gJycgOiBhcmd1bWVudHNbMV07XG5cdCAgICAgICAgICAgIHZhciBoZWFkZXJzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMl07XG5cblx0ICAgICAgICAgICAgaGVhZGVycy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuXHQgICAgICAgICAgICB0aGlzLl90cmFuc21pdCgnU0VORCcsIGhlYWRlcnMsIGJvZHkpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFtCRUdJTiBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNCRUdJTilcblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIElmIG5vIHRyYW5zYWN0aW9uIElEIGlzIHBhc3NlZCwgb25lIHdpbGwgYmUgY3JlYXRlZCBhdXRvbWF0aWNhbGx5XG5cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdiZWdpbicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJlZ2luKCkge1xuXHQgICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyAndHgtJyArIHRoaXMuY291bnRlcisrIDogYXJndW1lbnRzWzBdO1xuXG5cdCAgICAgICAgICAgIHRoaXMuX3RyYW5zbWl0KCdCRUdJTicsIHsgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uIH0pO1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgICAgaWQ6IHRyYW5zYWN0aW9uLFxuXHQgICAgICAgICAgICAgICAgY29tbWl0OiB0aGlzLmNvbW1pdC5iaW5kKHRoaXMsIHRyYW5zYWN0aW9uKSxcblx0ICAgICAgICAgICAgICAgIGFib3J0OiB0aGlzLmFib3J0LmJpbmQodGhpcywgdHJhbnNhY3Rpb24pXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgLy8gW0NPTU1JVCBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNDT01NSVQpXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyAqIGB0cmFuc2FjdGlvbmAgaXMgTUFOREFUT1JZLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gSXQgaXMgcHJlZmVyYWJsZSB0byBjb21taXQgYSB0cmFuc2FjdGlvbiBieSBjYWxsaW5nIGBjb21taXQoKWAgZGlyZWN0bHkgb25cblx0ICAgICAgICAvLyB0aGUgb2JqZWN0IHJldHVybmVkIGJ5IGBjbGllbnQuYmVnaW4oKWA6XG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyAgICAgdmFyIHR4ID0gY2xpZW50LmJlZ2luKHR4aWQpO1xuXHQgICAgICAgIC8vICAgICAuLi5cblx0ICAgICAgICAvLyAgICAgdHguY29tbWl0KCk7XG5cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdjb21taXQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21taXQodHJhbnNhY3Rpb24pIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJhbnNtaXQoJ0NPTU1JVCcsIHsgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uIH0pO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFtBQk9SVCBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNBQk9SVClcblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vICogYHRyYW5zYWN0aW9uYCBpcyBNQU5EQVRPUlkuXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyBJdCBpcyBwcmVmZXJhYmxlIHRvIGFib3J0IGEgdHJhbnNhY3Rpb24gYnkgY2FsbGluZyBgYWJvcnQoKWAgZGlyZWN0bHkgb25cblx0ICAgICAgICAvLyB0aGUgb2JqZWN0IHJldHVybmVkIGJ5IGBjbGllbnQuYmVnaW4oKWA6XG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyAgICAgdmFyIHR4ID0gY2xpZW50LmJlZ2luKHR4aWQpO1xuXHQgICAgICAgIC8vICAgICAuLi5cblx0ICAgICAgICAvLyAgICAgdHguYWJvcnQoKTtcblxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2Fib3J0Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWJvcnQodHJhbnNhY3Rpb24pIHtcblx0ICAgICAgICAgICAgdGhpcy5fdHJhbnNtaXQoJ0FCT1JUJywgeyB0cmFuc2FjdGlvbjogdHJhbnNhY3Rpb24gfSk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgLy8gW0FDSyBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNBQ0spXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyAqIGBtZXNzYWdlSURgICYgYHN1YnNjcmlwdGlvbmAgYXJlIE1BTkRBVE9SWS5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vIEl0IGlzIHByZWZlcmFibGUgdG8gYWNrbm93bGVkZ2UgYSBtZXNzYWdlIGJ5IGNhbGxpbmcgYGFjaygpYCBkaXJlY3RseVxuXHQgICAgICAgIC8vIG9uIHRoZSBtZXNzYWdlIGhhbmRsZWQgYnkgYSBzdWJzY3JpcHRpb24gY2FsbGJhY2s6XG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyAgICAgY2xpZW50LnN1YnNjcmliZShkZXN0aW5hdGlvbixcblx0ICAgICAgICAvLyAgICAgICBmdW5jdGlvbihtZXNzYWdlKSB7XG5cdCAgICAgICAgLy8gICAgICAgICAvLyBwcm9jZXNzIHRoZSBtZXNzYWdlXG5cdCAgICAgICAgLy8gICAgICAgICAvLyBhY2tub3dsZWRnZSBpdFxuXHQgICAgICAgIC8vICAgICAgICAgbWVzc2FnZS5hY2soKTtcblx0ICAgICAgICAvLyAgICAgICB9LFxuXHQgICAgICAgIC8vICAgICAgIHsnYWNrJzogJ2NsaWVudCd9XG5cdCAgICAgICAgLy8gICAgICk7XG5cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdhY2snLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhY2sobWVzc2FnZUlELCBzdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1syXTtcblxuXHQgICAgICAgICAgICAvLyAxLjIgY2hhbmdlIGlkIGhlYWRlciBuYW1lIGZyb20gbWVzc2FnZS1pZCB0byBpZFxuXHQgICAgICAgICAgICB2YXIgaWRBdHRyID0gdGhpcy52ZXJzaW9uID09PSBfdXRpbHMuVkVSU0lPTlMuVjFfMiA/ICdpZCcgOiAnbWVzc2FnZS1pZCc7XG5cdCAgICAgICAgICAgIGhlYWRlcnNbaWRBdHRyXSA9IG1lc3NhZ2VJRDtcblx0ICAgICAgICAgICAgaGVhZGVycy5zdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb247XG5cdCAgICAgICAgICAgIHRoaXMuX3RyYW5zbWl0KCdBQ0snLCBoZWFkZXJzKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBbTkFDSyBGcmFtZV0oaHR0cDovL3N0b21wLmdpdGh1Yi5jb20vc3RvbXAtc3BlY2lmaWNhdGlvbi0xLjEuaHRtbCNOQUNLKVxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gKiBgbWVzc2FnZUlEYCAmIGBzdWJzY3JpcHRpb25gIGFyZSBNQU5EQVRPUlkuXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyBJdCBpcyBwcmVmZXJhYmxlIHRvIG5hY2sgYSBtZXNzYWdlIGJ5IGNhbGxpbmcgYG5hY2soKWAgZGlyZWN0bHkgb24gdGhlXG5cdCAgICAgICAgLy8gbWVzc2FnZSBoYW5kbGVkIGJ5IGEgc3Vic2NyaXB0aW9uIGNhbGxiYWNrOlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gICAgIGNsaWVudC5zdWJzY3JpYmUoZGVzdGluYXRpb24sXG5cdCAgICAgICAgLy8gICAgICAgZnVuY3Rpb24obWVzc2FnZSkge1xuXHQgICAgICAgIC8vICAgICAgICAgLy8gcHJvY2VzcyB0aGUgbWVzc2FnZVxuXHQgICAgICAgIC8vICAgICAgICAgLy8gYW4gZXJyb3Igb2NjdXJzLCBuYWNrIGl0XG5cdCAgICAgICAgLy8gICAgICAgICBtZXNzYWdlLm5hY2soKTtcblx0ICAgICAgICAvLyAgICAgICB9LFxuXHQgICAgICAgIC8vICAgICAgIHsnYWNrJzogJ2NsaWVudCd9XG5cdCAgICAgICAgLy8gICAgICk7XG5cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICduYWNrJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbmFjayhtZXNzYWdlSUQsIHN1YnNjcmlwdGlvbikge1xuXHQgICAgICAgICAgICB2YXIgaGVhZGVycyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMiB8fCBhcmd1bWVudHNbMl0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzJdO1xuXG5cdCAgICAgICAgICAgIC8vIDEuMiBjaGFuZ2UgaWQgaGVhZGVyIG5hbWUgZnJvbSBtZXNzYWdlLWlkIHRvIGlkXG5cdCAgICAgICAgICAgIHZhciBpZEF0dHIgPSB0aGlzLnZlcnNpb24gPT09IF91dGlscy5WRVJTSU9OUy5WMV8yID8gJ2lkJyA6ICdtZXNzYWdlLWlkJztcblx0ICAgICAgICAgICAgaGVhZGVyc1tpZEF0dHJdID0gbWVzc2FnZUlEO1xuXHQgICAgICAgICAgICBoZWFkZXJzLnN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjtcblx0ICAgICAgICAgICAgdGhpcy5fdHJhbnNtaXQoJ05BQ0snLCBoZWFkZXJzKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBbU1VCU0NSSUJFIEZyYW1lXShodHRwOi8vc3RvbXAuZ2l0aHViLmNvbS9zdG9tcC1zcGVjaWZpY2F0aW9uLTEuMS5odG1sI1NVQlNDUklCRSlcblxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3N1YnNjcmliZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnNjcmliZShkZXN0aW5hdGlvbiwgY2FsbGJhY2spIHtcblx0ICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1syXTtcblxuXHQgICAgICAgICAgICAvLyBmb3IgY29udmVuaWVuY2UgaWYgdGhlIGBpZGAgaGVhZGVyIGlzIG5vdCBzZXQsIHdlIGNyZWF0ZSBhIG5ldyBvbmUgZm9yIHRoaXMgY2xpZW50XG5cdCAgICAgICAgICAgIC8vIHRoYXQgd2lsbCBiZSByZXR1cm5lZCB0byBiZSBhYmxlIHRvIHVuc3Vic2NyaWJlIHRoaXMgc3Vic2NyaXB0aW9uXG5cdCAgICAgICAgICAgIGlmICghaGVhZGVycy5pZCkgaGVhZGVycy5pZCA9ICdzdWItJyArIHRoaXMuY291bnRlcisrO1xuXHQgICAgICAgICAgICBoZWFkZXJzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG5cdCAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc1toZWFkZXJzLmlkXSA9IGNhbGxiYWNrO1xuXHQgICAgICAgICAgICB0aGlzLl90cmFuc21pdCgnU1VCU0NSSUJFJywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgICBpZDogaGVhZGVycy5pZCxcblx0ICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiB0aGlzLnVuc3Vic2NyaWJlLmJpbmQodGhpcywgaGVhZGVycy5pZClcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBbVU5TVUJTQ1JJQkUgRnJhbWVdKGh0dHA6Ly9zdG9tcC5naXRodWIuY29tL3N0b21wLXNwZWNpZmljYXRpb24tMS4xLmh0bWwjVU5TVUJTQ1JJQkUpXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyAqIGBpZGAgaXMgTUFOREFUT1JZLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gSXQgaXMgcHJlZmVyYWJsZSB0byB1bnN1YnNjcmliZSBmcm9tIGEgc3Vic2NyaXB0aW9uIGJ5IGNhbGxpbmdcblx0ICAgICAgICAvLyBgdW5zdWJzY3JpYmUoKWAgZGlyZWN0bHkgb24gdGhlIG9iamVjdCByZXR1cm5lZCBieSBgY2xpZW50LnN1YnNjcmliZSgpYDpcblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vICAgICB2YXIgc3Vic2NyaXB0aW9uID0gY2xpZW50LnN1YnNjcmliZShkZXN0aW5hdGlvbiwgb25tZXNzYWdlKTtcblx0ICAgICAgICAvLyAgICAgLi4uXG5cdCAgICAgICAgLy8gICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZShoZWFkZXJzKTtcblxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3Vuc3Vic2NyaWJlJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoaWQpIHtcblx0ICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuXHQgICAgICAgICAgICBkZWxldGUgdGhpcy5zdWJzY3JpcHRpb25zW2lkXTtcblx0ICAgICAgICAgICAgaGVhZGVycy5pZCA9IGlkO1xuXHQgICAgICAgICAgICB0aGlzLl90cmFuc21pdCgnVU5TVUJTQ1JJQkUnLCBoZWFkZXJzKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBDbGVhbiB1cCBjbGllbnQgcmVzb3VyY2VzIHdoZW4gaXQgaXMgZGlzY29ubmVjdGVkIG9yIHRoZSBzZXJ2ZXIgZGlkIG5vdFxuXHQgICAgICAgIC8vIHNlbmQgaGVhcnQgYmVhdHMgaW4gYSB0aW1lbHkgZmFzaGlvblxuXG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnX2NsZWFuVXAnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2xlYW5VcCgpIHtcblx0ICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBpbmdlcik7XG5cdCAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb25nZXIpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIEJhc2UgbWV0aG9kIHRvIHRyYW5zbWl0IGFueSBzdG9tcCBmcmFtZVxuXG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnX3RyYW5zbWl0Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3RyYW5zbWl0KGNvbW1hbmQsIGhlYWRlcnMsIGJvZHkpIHtcblx0ICAgICAgICAgICAgdmFyIG91dCA9IF9mcmFtZTIuZGVmYXVsdC5tYXJzaGFsbChjb21tYW5kLCBoZWFkZXJzLCBib2R5KTtcblx0ICAgICAgICAgICAgdGhpcy5kZWJ1ZygnPj4+ICcgKyBvdXQpO1xuXHQgICAgICAgICAgICB0aGlzLl93c1NlbmQob3V0KTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnX3dzU2VuZCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF93c1NlbmQoZGF0YSkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5iaW5hcnkpIGRhdGEgPSAoMCwgX3V0aWxzLnVuaWNvZGVTdHJpbmdUb1R5cGVkQXJyYXkpKGRhdGEpO1xuXHQgICAgICAgICAgICB0aGlzLmRlYnVnKCc+Pj4gbGVuZ3RoICcgKyBkYXRhLmxlbmd0aCk7XG5cdCAgICAgICAgICAgIC8vIGlmIG5lY2Vzc2FyeSwgc3BsaXQgdGhlICpTVE9NUCogZnJhbWUgdG8gc2VuZCBpdCBvbiBtYW55IHNtYWxsZXJcblx0ICAgICAgICAgICAgLy8gKldlYlNvY2tldCogZnJhbWVzXG5cdCAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiB0aGlzLm1heFdlYlNvY2tldEZyYW1lU2l6ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMud3Muc2VuZChkYXRhLnNsaWNlKDAsIHRoaXMubWF4V2ViU29ja2V0RnJhbWVTaXplKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEuc2xpY2UodGhpcy5tYXhXZWJTb2NrZXRGcmFtZVNpemUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWcoJ3JlbWFpbmluZyA9ICcgKyBkYXRhLmxlbmd0aCk7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndzLnNlbmQoZGF0YSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBIZWFydC1iZWF0IG5lZ290aWF0aW9uXG5cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdfc2V0dXBIZWFydGJlYXQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBIZWFydGJlYXQoaGVhZGVycykge1xuXHQgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuXHQgICAgICAgICAgICBpZiAodGhpcy52ZXJzaW9uICE9PSBfdXRpbHMuVkVSU0lPTlMuVjFfMSAmJiB0aGlzLnZlcnNpb24gIT09IF91dGlscy5WRVJTSU9OUy5WMV8yKSByZXR1cm47XG5cblx0ICAgICAgICAgICAgLy8gaGVhcnQtYmVhdCBoZWFkZXIgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGxvb2tzIGxpa2U6XG5cdCAgICAgICAgICAgIC8vXG5cdCAgICAgICAgICAgIC8vICAgICBoZWFydC1iZWF0OiBzeCwgc3lcblxuXHQgICAgICAgICAgICB2YXIgX3NwbGl0JG1hcCA9IChoZWFkZXJzWydoZWFydC1iZWF0J10gfHwgJzAsMCcpLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodiwgMTApO1xuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICB2YXIgX3NwbGl0JG1hcDIgPSBfc2xpY2VkVG9BcnJheShfc3BsaXQkbWFwLCAyKTtcblxuXHQgICAgICAgICAgICB2YXIgc2VydmVyT3V0Z29pbmcgPSBfc3BsaXQkbWFwMlswXTtcblx0ICAgICAgICAgICAgdmFyIHNlcnZlckluY29taW5nID0gX3NwbGl0JG1hcDJbMV07XG5cblxuXHQgICAgICAgICAgICBpZiAoISh0aGlzLmhlYXJ0YmVhdC5vdXRnb2luZyA9PT0gMCB8fCBzZXJ2ZXJJbmNvbWluZyA9PT0gMCkpIHtcblx0ICAgICAgICAgICAgICAgIHZhciB0dGwgPSBNYXRoLm1heCh0aGlzLmhlYXJ0YmVhdC5vdXRnb2luZywgc2VydmVySW5jb21pbmcpO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5kZWJ1Zygnc2VuZCBQSU5HIGV2ZXJ5ICcgKyB0dGwgKyAnbXMnKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMucGluZ2VyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIF90aGlzMi5fd3NTZW5kKF91dGlscy5CWVRFUy5MRik7XG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmRlYnVnKCc+Pj4gUElORycpO1xuXHQgICAgICAgICAgICAgICAgfSwgdHRsKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGlmICghKHRoaXMuaGVhcnRiZWF0LmluY29taW5nID09PSAwIHx8IHNlcnZlck91dGdvaW5nID09PSAwKSkge1xuXHQgICAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdHRsID0gTWF0aC5tYXgoX3RoaXMyLmhlYXJ0YmVhdC5pbmNvbWluZywgc2VydmVyT3V0Z29pbmcpO1xuXHQgICAgICAgICAgICAgICAgICAgIF90aGlzMi5kZWJ1ZygnY2hlY2sgUE9ORyBldmVyeSAnICsgdHRsICsgJ21zJyk7XG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnBvbmdlciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gRGF0ZS5ub3coKSAtIF90aGlzMi5zZXJ2ZXJBY3Rpdml0eTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugd2FpdCB0d2ljZSB0aGUgVFRMIHRvIGJlIGZsZXhpYmxlIG9uIHdpbmRvdydzIHNldEludGVydmFsIGNhbGxzXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSA+IHR0bCAqIDIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5kZWJ1ZygnZGlkIG5vdCByZWNlaXZlIHNlcnZlciBhY3Rpdml0eSBmb3IgdGhlIGxhc3QgJyArIGRlbHRhICsgJ21zJyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIud3MuY2xvc2UoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH0sIHR0bCk7XG5cdCAgICAgICAgICAgICAgICB9KSgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgLy8gcGFyc2UgdGhlIGFyZ3VtZW50cyBudW1iZXIgYW5kIHR5cGUgdG8gZmluZCB0aGUgaGVhZGVycywgY29ubmVjdENhbGxiYWNrIGFuZFxuXHQgICAgICAgIC8vIChldmVudHVhbGx5IHVuZGVmaW5lZCkgZXJyb3JDYWxsYmFja1xuXG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnX3BhcnNlQ29ubmVjdCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9wYXJzZUNvbm5lY3QoKSB7XG5cdCAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge30sXG5cdCAgICAgICAgICAgICAgICBjb25uZWN0Q2FsbGJhY2sgPSB2b2lkIDAsXG5cdCAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrID0gdm9pZCAwO1xuXG5cdCAgICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICAgICAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBhcmdzWzBdO1xuXHQgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RDYWxsYmFjayA9IGFyZ3NbMV07XG5cblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1sxXSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBhcmdzWzBdO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0Q2FsbGJhY2sgPSBhcmdzWzFdO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrID0gYXJnc1syXTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLmxvZ2luID0gYXJnc1swXTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5wYXNzY29kZSA9IGFyZ3NbMV07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RDYWxsYmFjayA9IGFyZ3NbMl07XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMubG9naW4gPSBhcmdzWzBdO1xuXHQgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMucGFzc2NvZGUgPSBhcmdzWzFdO1xuXHQgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RDYWxsYmFjayA9IGFyZ3NbMl07XG5cdCAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayA9IGFyZ3NbM107XG5cblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5sb2dpbiA9IGFyZ3NbMF07XG5cdCAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5wYXNzY29kZSA9IGFyZ3NbMV07XG5cdCAgICAgICAgICAgICAgICAgICAgY29ubmVjdENhbGxiYWNrID0gYXJnc1syXTtcblx0ICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrID0gYXJnc1szXTtcblx0ICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLmhvc3QgPSBhcmdzWzRdO1xuXG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICByZXR1cm4gW2hlYWRlcnMsIGNvbm5lY3RDYWxsYmFjaywgZXJyb3JDYWxsYmFja107XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXG5cdCAgICByZXR1cm4gQ2xpZW50O1xuXHR9KCk7XG5cblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ2xpZW50O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cblx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuXHQvLyBbU1RPTVAgRnJhbWVdKGh0dHA6Ly9zdG9tcC5naXRodWIuY29tL3N0b21wLXNwZWNpZmljYXRpb24tMS4xLmh0bWwjU1RPTVBfRnJhbWVzKSBDbGFzc1xuXG5cdHZhciBGcmFtZSA9IGZ1bmN0aW9uICgpIHtcblxuXHQgICAgLy8gRnJhbWUgY29uc3RydWN0b3JcblxuXHQgICAgZnVuY3Rpb24gRnJhbWUoY29tbWFuZCkge1xuXHQgICAgICAgIHZhciBoZWFkZXJzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG5cdCAgICAgICAgdmFyIGJvZHkgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyAnJyA6IGFyZ3VtZW50c1syXTtcblxuXHQgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGcmFtZSk7XG5cblx0ICAgICAgICB0aGlzLmNvbW1hbmQgPSBjb21tYW5kO1xuXHQgICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG5cdCAgICAgICAgdGhpcy5ib2R5ID0gYm9keTtcblx0ICAgIH1cblxuXHQgICAgLy8gUHJvdmlkZXMgYSB0ZXh0dWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmcmFtZVxuXHQgICAgLy8gc3VpdGFibGUgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXG5cblxuXHQgICAgX2NyZWF0ZUNsYXNzKEZyYW1lLCBbe1xuXHQgICAgICAgIGtleTogJ3RvU3RyaW5nJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICAgICAgdmFyIGxpbmVzID0gW3RoaXMuY29tbWFuZF0sXG5cdCAgICAgICAgICAgICAgICBza2lwQ29udGVudExlbmd0aCA9IHRoaXMuaGVhZGVyc1snY29udGVudC1sZW5ndGgnXSA9PT0gZmFsc2U7XG5cdCAgICAgICAgICAgIGlmIChza2lwQ29udGVudExlbmd0aCkgZGVsZXRlIHRoaXMuaGVhZGVyc1snY29udGVudC1sZW5ndGgnXTtcblxuXHQgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF90aGlzLmhlYWRlcnNbbmFtZV07XG5cdCAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKG5hbWUgKyAnOicgKyB2YWx1ZSk7XG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIGlmICh0aGlzLmJvZHkgJiYgIXNraXBDb250ZW50TGVuZ3RoKSB7XG5cdCAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKCdjb250ZW50LWxlbmd0aDonICsgKDAsIF91dGlscy5zaXplT2ZVVEY4KSh0aGlzLmJvZHkpKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGxpbmVzLnB1c2goX3V0aWxzLkJZVEVTLkxGICsgdGhpcy5ib2R5KTtcblxuXHQgICAgICAgICAgICByZXR1cm4gbGluZXMuam9pbihfdXRpbHMuQllURVMuTEYpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIFVubWFyc2hhbGwgYSBzaW5nbGUgU1RPTVAgZnJhbWUgZnJvbSBhIGBkYXRhYCBzdHJpbmdcblxuXHQgICAgfV0sIFt7XG5cdCAgICAgICAga2V5OiAndW5tYXJzaGFsbFNpbmdsZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVubWFyc2hhbGxTaW5nbGUoZGF0YSkge1xuXHQgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIDIgY29uc2VjdXRpdmVzIExGIGJ5dGUgdG8gc3BsaXQgdGhlIGNvbW1hbmRcblx0ICAgICAgICAgICAgLy8gYW5kIGhlYWRlcnMgZnJvbSB0aGUgYm9keVxuXHQgICAgICAgICAgICB2YXIgZGl2aWRlciA9IGRhdGEuc2VhcmNoKG5ldyBSZWdFeHAoX3V0aWxzLkJZVEVTLkxGICsgX3V0aWxzLkJZVEVTLkxGKSksXG5cdCAgICAgICAgICAgICAgICBoZWFkZXJMaW5lcyA9IGRhdGEuc3Vic3RyaW5nKDAsIGRpdmlkZXIpLnNwbGl0KF91dGlscy5CWVRFUy5MRiksXG5cdCAgICAgICAgICAgICAgICBjb21tYW5kID0gaGVhZGVyTGluZXMuc2hpZnQoKSxcblx0ICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB7fSxcblx0ICAgICAgICAgICAgICAgIGJvZHkgPSAnJyxcblxuXHQgICAgICAgICAgICAvLyBza2lwIHRoZSAyIExGIGJ5dGVzIHRoYXQgZGl2aWRlcyB0aGUgaGVhZGVycyBmcm9tIHRoZSBib2R5XG5cdCAgICAgICAgICAgIGJvZHlJbmRleCA9IGRpdmlkZXIgKyAyO1xuXHQgICAgICAgICAgICAvLyBQYXJzZSBoZWFkZXJzIGluIHJldmVyc2Ugb3JkZXIgc28gdGhhdCBmb3IgcmVwZWF0ZWQgaGVhZGVycywgdGhlIDFzdFxuXHQgICAgICAgICAgICAvLyB2YWx1ZSBpcyB1c2VkXG5cdCAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG5cdCAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gaGVhZGVyTGluZXMucmV2ZXJzZSgpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBsaW5lID0gX3N0ZXAudmFsdWU7XG5cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gbGluZS5pbmRleE9mKCc6Jyk7XG5cdCAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1soMCwgX3V0aWxzLnRyaW0pKGxpbmUuc3Vic3RyaW5nKDAsIGlkeCkpXSA9ICgwLCBfdXRpbHMudHJpbSkobGluZS5zdWJzdHJpbmcoaWR4ICsgMSkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgLy8gUGFyc2UgYm9keVxuXHQgICAgICAgICAgICAgICAgLy8gY2hlY2sgZm9yIGNvbnRlbnQtbGVuZ3RoIG9yIHRvcHBpbmcgYXQgdGhlIGZpcnN0IE5VTEwgYnl0ZSBmb3VuZC5cblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcblx0ICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGlmIChoZWFkZXJzWydjb250ZW50LWxlbmd0aCddKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgbGVuID0gcGFyc2VJbnQoaGVhZGVyc1snY29udGVudC1sZW5ndGgnXSwgMTApO1xuXHQgICAgICAgICAgICAgICAgYm9keSA9ICgnJyArIGRhdGEpLnN1YnN0cmluZyhib2R5SW5kZXgsIGJvZHlJbmRleCArIGxlbik7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY2hyID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBib2R5SW5kZXg7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2hyID0gZGF0YS5jaGFyQXQoaSk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGNociA9PT0gX3V0aWxzLkJZVEVTLk5VTEwpIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgICAgIGJvZHkgKz0gY2hyO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBGcmFtZShjb21tYW5kLCBoZWFkZXJzLCBib2R5KTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvLyBTcGxpdCB0aGUgZGF0YSBiZWZvcmUgdW5tYXJzaGFsbGluZyBldmVyeSBzaW5nbGUgU1RPTVAgZnJhbWUuXG5cdCAgICAgICAgLy8gV2ViIHNvY2tldCBzZXJ2ZXJzIGNhbiBzZW5kIG11bHRpcGxlIGZyYW1lcyBpbiBhIHNpbmdsZSB3ZWJzb2NrZXQgbWVzc2FnZS5cblx0ICAgICAgICAvLyBJZiB0aGUgbWVzc2FnZSBzaXplIGV4Y2VlZHMgdGhlIHdlYnNvY2tldCBtZXNzYWdlIHNpemUsIHRoZW4gYSBzaW5nbGVcblx0ICAgICAgICAvLyBmcmFtZSBjYW4gYmUgZnJhZ21lbnRlZCBhY3Jvc3MgbXVsdGlwbGUgbWVzc2FnZXMuXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyBgZGF0YXNgIGlzIGEgc3RyaW5nLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gcmV0dXJucyBhbiAqYXJyYXkqIG9mIEZyYW1lIG9iamVjdHNcblxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ3VubWFyc2hhbGwnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1bm1hcnNoYWxsKGRhdGFzKSB7XG5cdCAgICAgICAgICAgIC8vIHNwbGl0IGFuZCB1bm1hcnNoYWxsICptdWx0aXBsZSBTVE9NUCBmcmFtZXMqIGNvbnRhaW5lZCBpbiBhICpzaW5nbGUgV2ViU29ja2V0IGZyYW1lKi5cblx0ICAgICAgICAgICAgLy8gVGhlIGRhdGEgaXMgc3BsaXQgd2hlbiBhIE5VTEwgYnl0ZSAoZm9sbG93ZWQgYnkgemVybyBvciBtYW55IExGIGJ5dGVzKSBpcyBmb3VuZFxuXHQgICAgICAgICAgICB2YXIgZnJhbWVzID0gZGF0YXMuc3BsaXQobmV3IFJlZ0V4cChfdXRpbHMuQllURVMuTlVMTCArIF91dGlscy5CWVRFUy5MRiArICcqJykpLFxuXHQgICAgICAgICAgICAgICAgZmlyc3RGcmFtZXMgPSBmcmFtZXMuc2xpY2UoMCwgLTEpLFxuXHQgICAgICAgICAgICAgICAgbGFzdEZyYW1lID0gZnJhbWVzLnNsaWNlKC0xKVswXSxcblx0ICAgICAgICAgICAgICAgIHIgPSB7XG5cdCAgICAgICAgICAgICAgICBmcmFtZXM6IGZpcnN0RnJhbWVzLm1hcChmdW5jdGlvbiAoZikge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBGcmFtZS51bm1hcnNoYWxsU2luZ2xlKGYpO1xuXHQgICAgICAgICAgICAgICAgfSksXG5cdCAgICAgICAgICAgICAgICBwYXJ0aWFsOiAnJ1xuXHQgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgIC8vIElmIHRoaXMgY29udGFpbnMgYSBmaW5hbCBmdWxsIG1lc3NhZ2Ugb3IganVzdCBhIGFja25vd2xlZGdlbWVudCBvZiBhIFBJTkdcblx0ICAgICAgICAgICAgLy8gd2l0aG91dCBhbnkgb3RoZXIgY29udGVudCwgcHJvY2VzcyB0aGlzIGZyYW1lLCBvdGhlcndpc2UgcmV0dXJuIHRoZVxuXHQgICAgICAgICAgICAvLyBjb250ZW50cyBvZiB0aGUgYnVmZmVyIHRvIHRoZSBjYWxsZXIuXG5cdCAgICAgICAgICAgIGlmIChsYXN0RnJhbWUgPT09IF91dGlscy5CWVRFUy5MRiB8fCBsYXN0RnJhbWUuc2VhcmNoKFJlZ0V4cChfdXRpbHMuQllURVMuTlVMTCArIF91dGlscy5CWVRFUy5MRiArICcqJCcpKSAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgICAgIHIuZnJhbWVzLnB1c2goRnJhbWUudW5tYXJzaGFsbFNpbmdsZShsYXN0RnJhbWUpKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHIucGFydGlhbCA9IGxhc3RGcmFtZTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHJldHVybiByO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8vIE1hcnNoYWxsIGEgU3RvbXAgZnJhbWVcblxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ21hcnNoYWxsJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWFyc2hhbGwoY29tbWFuZCwgaGVhZGVycywgYm9keSkge1xuXHQgICAgICAgICAgICB2YXIgZnJhbWUgPSBuZXcgRnJhbWUoY29tbWFuZCwgaGVhZGVycywgYm9keSk7XG5cdCAgICAgICAgICAgIHJldHVybiBmcmFtZS50b1N0cmluZygpICsgX3V0aWxzLkJZVEVTLk5VTEw7XG5cdCAgICAgICAgfVxuXHQgICAgfV0pO1xuXG5cdCAgICByZXR1cm4gRnJhbWU7XG5cdH0oKTtcblxuXHRleHBvcnRzLmRlZmF1bHQgPSBGcmFtZTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy51bmljb2RlU3RyaW5nVG9UeXBlZEFycmF5ID0gdW5pY29kZVN0cmluZ1RvVHlwZWRBcnJheTtcblx0ZXhwb3J0cy50eXBlZEFycmF5VG9Vbmljb2RlU3RyaW5nID0gdHlwZWRBcnJheVRvVW5pY29kZVN0cmluZztcblx0ZXhwb3J0cy5zaXplT2ZVVEY4ID0gc2l6ZU9mVVRGODtcblxuXHRmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuXHR2YXIgVkVSU0lPTlMgPSBleHBvcnRzLlZFUlNJT05TID0ge1xuXHQgICAgVjFfMDogJzEuMCcsXG5cdCAgICBWMV8xOiAnMS4xJyxcblx0ICAgIFYxXzI6ICcxLjInLFxuXHQgICAgLy8gVmVyc2lvbnMgb2YgU1RPTVAgc3BlY2lmaWNhdGlvbnMgc3VwcG9ydGVkXG5cdCAgICBzdXBwb3J0ZWRWZXJzaW9uczogZnVuY3Rpb24gc3VwcG9ydGVkVmVyc2lvbnMoKSB7XG5cdCAgICAgICAgcmV0dXJuICcxLjIsMS4xLDEuMCc7XG5cdCAgICB9LFxuXHQgICAgc3VwcG9ydGVkUHJvdG9jb2xzOiBmdW5jdGlvbiBzdXBwb3J0ZWRQcm90b2NvbHMoKSB7XG5cdCAgICAgICAgcmV0dXJuIFsndjEwLnN0b21wJywgJ3YxMS5zdG9tcCcsICd2MTIuc3RvbXAnXTtcblx0ICAgIH1cblx0fTtcblxuXHQvLyBEZWZpbmUgY29uc3RhbnRzIGZvciBieXRlcyB1c2VkIHRocm91Z2hvdXQgdGhlIGNvZGUuXG5cdHZhciBCWVRFUyA9IGV4cG9ydHMuQllURVMgPSB7XG5cdCAgICAvLyBMSU5FRkVFRCBieXRlIChvY3RldCAxMClcblx0ICAgIExGOiAnXFx4MEEnLFxuXHQgICAgLy8gTlVMTCBieXRlIChvY3RldCAwKVxuXHQgICAgTlVMTDogJ1xceDAwJ1xuXHR9O1xuXG5cdC8vIHV0aWxpdHkgZnVuY3Rpb24gdG8gdHJpbSBhbnkgd2hpdGVzcGFjZSBiZWZvcmUgYW5kIGFmdGVyIGEgc3RyaW5nXG5cdHZhciB0cmltID0gZXhwb3J0cy50cmltID0gZnVuY3Rpb24gdHJpbShzdHIpIHtcblx0ICAgIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xuXHR9O1xuXG5cdC8vIGZyb20gaHR0cHM6Ly9jb29sYWo4Ni5jb20vYXJ0aWNsZXMvdW5pY29kZS1zdHJpbmctdG8tYS11dGYtOC10eXBlZC1hcnJheS1idWZmZXItaW4tamF2YXNjcmlwdC9cblx0ZnVuY3Rpb24gdW5pY29kZVN0cmluZ1RvVHlwZWRBcnJheShzKSB7XG5cdCAgICB2YXIgZXNjc3RyID0gZW5jb2RlVVJJQ29tcG9uZW50KHMpO1xuXHQgICAgdmFyIGJpbnN0ciA9IGVzY3N0ci5yZXBsYWNlKC8lKFswLTlBLUZdezJ9KS9nLCBmdW5jdGlvbiAobWF0Y2gsIHAxKSB7XG5cdCAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoJzB4JyArIHAxKTtcblx0ICAgIH0pO1xuXHQgICAgdmFyIGFyciA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChiaW5zdHIsIGZ1bmN0aW9uIChjKSB7XG5cdCAgICAgICAgcmV0dXJuIGMuY2hhckNvZGVBdCgwKTtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGFycik7XG5cdH1cblxuXHQvLyBmcm9tIGh0dHBzOi8vY29vbGFqODYuY29tL2FydGljbGVzL3VuaWNvZGUtc3RyaW5nLXRvLWEtdXRmLTgtdHlwZWQtYXJyYXktYnVmZmVyLWluLWphdmFzY3JpcHQvXG5cdGZ1bmN0aW9uIHR5cGVkQXJyYXlUb1VuaWNvZGVTdHJpbmcodWEpIHtcblx0ICAgIHZhciBiaW5zdHIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgX3RvQ29uc3VtYWJsZUFycmF5KHVhKSk7XG5cdCAgICB2YXIgZXNjc3RyID0gYmluc3RyLnJlcGxhY2UoLyguKS9nLCBmdW5jdGlvbiAobSwgcCkge1xuXHQgICAgICAgIHZhciBjb2RlID0gcC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHQgICAgICAgIGlmIChjb2RlLmxlbmd0aCA8IDIpIHtcblx0ICAgICAgICAgICAgY29kZSA9ICcwJyArIGNvZGU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAnJScgKyBjb2RlO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY3N0cik7XG5cdH1cblxuXHQvLyBDb21wdXRlIHRoZSBzaXplIG9mIGEgVVRGLTggc3RyaW5nIGJ5IGNvdW50aW5nIGl0cyBudW1iZXIgb2YgYnl0ZXNcblx0Ly8gKGFuZCBub3QgdGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIGNvbXBvc2luZyB0aGUgc3RyaW5nKVxuXHRmdW5jdGlvbiBzaXplT2ZVVEY4KHMpIHtcblx0ICAgIGlmICghcykgcmV0dXJuIDA7XG5cdCAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHMpLm1hdGNoKC8lLi58Li9nKS5sZW5ndGg7XG5cdH1cblxuLyoqKi8gfVxuLyoqKioqKi8gXSlcbn0pO1xuO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3dlYnN0b21wLWNsaWVudC9kaXN0L3dlYnN0b21wLmpzXG4gKiogbW9kdWxlIGlkID0gMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCBTb2NrSlMgZnJvbSAnc29ja2pzLWNsaWVudCc7XHJcbmltcG9ydCB3ZWJzdG9tcCBmcm9tICd3ZWJzdG9tcC1jbGllbnQnO1xyXG5pbXBvcnQgKiBhcyB2aWV3IGZyb20gJy4vdmlldy5qcyc7XHJcbmltcG9ydCAqIGFzIGxvZyBmcm9tICcuL2xvZy5qcyc7XHJcblxyXG5mdW5jdGlvbiBDaGF0ICgpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGNvbnN0IFNPQ0tFVF9ERVNUID0gJ2h0dHBzOi8vMTkyLjE2OC4xMS4xMDYvZGVtbyc7XHJcbiAgICBjb25zdCBDSEFOTkVMX0NPVU5UUlkgPSBcIi9jaGFubmVsL2NvdW50cnlcIjtcclxuICAgIGNvbnN0IFNFTkRfQ09VTlRSWSA9IFwiL2NoYXQvY291bnRyeVwiO1xyXG4gICAgY29uc3QgQ09VTlRSWV9JRCA9IDE7XHJcblxyXG4gICAgdGhpcy5jbGllbnQgPSBudWxsO1xyXG4gICAgdGhpcy5jb25uZWN0ID0gZnVuY3Rpb24gX2Nvbm5lY3QgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgbGV0IHNvY2tldCA9IG5ldyBTb2NrSlMoU09DS0VUX0RFU1QpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gd2Vic3RvbXAub3Zlcihzb2NrZXQpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50LmNvbm5lY3Qoe30sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIF9jb25uZWN0Q2FsbGJhY2sgKGZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2aWV3LnNldENvbm5lY3RlZCh0cnVlLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZyhcIkNvbm5lY3RlZCBPSy5cIiArIGZyYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gX2Vycm9yQ2FsbGJhY2sgKGV2KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXJyID0gSlNPTi5zdHJpbmdpZnkoZXYpO1xyXG4gICAgICAgICAgICAgICAgdmlldy5zZXRDb25uZWN0ZWQoZmFsc2UsIGVycik7XHJcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCJDb25uZWN0ZWQgRXJyb3IuXCIgKyBlcnIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZGlzY29ubmVjdCA9IGZ1bmN0aW9uIF9kaXNjb25uZWN0ICgpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2xpZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgICAgIHZpZXcuc2V0RGlzY29ubmVjdGVkKHRydWUsIFwiXCIpO1xyXG4gICAgICAgICAgICBsb2cuZGVidWcoXCJEaXNjb25uZWN0ZWQuXCIpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2aWV3LnNldERpc2Nvbm5lY3RlZChmYWxzZSwgXCJOdWxsIGNsaWVudC5cIik7XHJcbiAgICAgICAgICAgIGxvZy5lcnJvcihcIk51bGwgY2xpZW50LlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy5jb3VudHJ5Q2hhdCA9IGZ1bmN0aW9uIF9jb3VudHJ5Q2hhdCAoe3RpbWUgPSAobmV3IERhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygpLCB1c2VyID0gXCJBbm95bW91c1wiLCBjb250ZW50ID0gXCJcIn0gPSB7fSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNsaWVudCA9PT0gbnVsbCB8fCAhdGhpcy5jbGllbnQuY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgIGxvZy53YXJuKFwiTm90IGNvbm5lY3RlZC5cIik7XHJcbiAgICAgICAgICAgIHZpZXcuc2V0Q291bnRyeUNoYXQoXCIhISFFUlJPUiEhIU5vdCBjb25uZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY2xpZW50LnN1YnNjcmlwdGlvbnNbQ09VTlRSWV9JRF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsb2cuZGVidWcoXCJOb3Qgc3Vic2NyaWJlIGNvdW50cnkgY2hhbm5lbCB5ZXQuXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmNsaWVudC5zdWJzY3JpYmUoQ0hBTk5FTF9DT1VOVFJZLCBmdW5jdGlvbiBfY291bnRyeVN1YnNjcmliZShmcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnKFwic3Vic2NyaWJlOlwiICsgSlNPTi5zdHJpbmdpZnkoZnJhbWUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwge2lkIDogQ09VTlRSWV9JRH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29udGVudCAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWVudC5zZW5kKFNFTkRfQ09VTlRSWSwgY29udGVudCwge30pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuY29uc3QgY2hhdCA9IG5ldyBDaGF0KCk7XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgbGV0IGVudGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudGVyJyk7XHJcbiAgICBpZiAoZW50ZXIpIHtcclxuICAgICAgICBlbnRlci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gX29uRW50ZXIoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgY2hhdC5jb3VudHJ5Q2hhdCh7Y29udGVudCA6IGUudGFyZ2V0LnZhbHVlfSk7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY29ubmVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25uZWN0Jyk7XHJcbiAgICBpZiAoY29ubmVjdCkge1xyXG4gICAgICAgIGNvbm5lY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBfb25DbGlja0Nvbm5lY3QoZSkge1xyXG4gICAgICAgICAgICBpZiAoIWUudGFyZ2V0LmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjaGF0LmNvbm5lY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBkaXNjb25uZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc2Nvbm5lY3QnKTtcclxuICAgIGlmIChkaXNjb25uZWN0KSB7XHJcbiAgICAgICAgZGlzY29ubmVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIF9vbkNsaWNrRGlzY29ubmVjdChlKSB7XHJcbiAgICAgICAgICAgIGlmICghZS50YXJnZXQuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGNoYXQuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGluaXQpO1xyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2Jyb3dzZXIvc2NyaXB0cy9jaGF0LmpzXG4gKiovIiwiXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbW1vbiBsb2dpYyBmb3IgYm90aCB0aGUgTm9kZS5qcyBhbmQgd2ViIGJyb3dzZXJcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gKlxuICogRXhwb3NlIGBkZWJ1ZygpYCBhcyB0aGUgbW9kdWxlLlxuICovXG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGRlYnVnO1xuZXhwb3J0cy5jb2VyY2UgPSBjb2VyY2U7XG5leHBvcnRzLmRpc2FibGUgPSBkaXNhYmxlO1xuZXhwb3J0cy5lbmFibGUgPSBlbmFibGU7XG5leHBvcnRzLmVuYWJsZWQgPSBlbmFibGVkO1xuZXhwb3J0cy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cbi8qKlxuICogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG4gKi9cblxuZXhwb3J0cy5uYW1lcyA9IFtdO1xuZXhwb3J0cy5za2lwcyA9IFtdO1xuXG4vKipcbiAqIE1hcCBvZiBzcGVjaWFsIFwiJW5cIiBoYW5kbGluZyBmdW5jdGlvbnMsIGZvciB0aGUgZGVidWcgXCJmb3JtYXRcIiBhcmd1bWVudC5cbiAqXG4gKiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlcmNhc2VkIGxldHRlciwgaS5lLiBcIm5cIi5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdHRlcnMgPSB7fTtcblxuLyoqXG4gKiBQcmV2aW91c2x5IGFzc2lnbmVkIGNvbG9yLlxuICovXG5cbnZhciBwcmV2Q29sb3IgPSAwO1xuXG4vKipcbiAqIFByZXZpb3VzIGxvZyB0aW1lc3RhbXAuXG4gKi9cblxudmFyIHByZXZUaW1lO1xuXG4vKipcbiAqIFNlbGVjdCBhIGNvbG9yLlxuICpcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNlbGVjdENvbG9yKCkge1xuICByZXR1cm4gZXhwb3J0cy5jb2xvcnNbcHJldkNvbG9yKysgJSBleHBvcnRzLmNvbG9ycy5sZW5ndGhdO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBkZWJ1ZyhuYW1lc3BhY2UpIHtcblxuICAvLyBkZWZpbmUgdGhlIGBkaXNhYmxlZGAgdmVyc2lvblxuICBmdW5jdGlvbiBkaXNhYmxlZCgpIHtcbiAgfVxuICBkaXNhYmxlZC5lbmFibGVkID0gZmFsc2U7XG5cbiAgLy8gZGVmaW5lIHRoZSBgZW5hYmxlZGAgdmVyc2lvblxuICBmdW5jdGlvbiBlbmFibGVkKCkge1xuXG4gICAgdmFyIHNlbGYgPSBlbmFibGVkO1xuXG4gICAgLy8gc2V0IGBkaWZmYCB0aW1lc3RhbXBcbiAgICB2YXIgY3VyciA9ICtuZXcgRGF0ZSgpO1xuICAgIHZhciBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG4gICAgc2VsZi5kaWZmID0gbXM7XG4gICAgc2VsZi5wcmV2ID0gcHJldlRpbWU7XG4gICAgc2VsZi5jdXJyID0gY3VycjtcbiAgICBwcmV2VGltZSA9IGN1cnI7XG5cbiAgICAvLyBhZGQgdGhlIGBjb2xvcmAgaWYgbm90IHNldFxuICAgIGlmIChudWxsID09IHNlbGYudXNlQ29sb3JzKSBzZWxmLnVzZUNvbG9ycyA9IGV4cG9ydHMudXNlQ29sb3JzKCk7XG4gICAgaWYgKG51bGwgPT0gc2VsZi5jb2xvciAmJiBzZWxmLnVzZUNvbG9ycykgc2VsZi5jb2xvciA9IHNlbGVjdENvbG9yKCk7XG5cbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgICBhcmdzWzBdID0gZXhwb3J0cy5jb2VyY2UoYXJnc1swXSk7XG5cbiAgICBpZiAoJ3N0cmluZycgIT09IHR5cGVvZiBhcmdzWzBdKSB7XG4gICAgICAvLyBhbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlb1xuICAgICAgYXJncyA9IFsnJW8nXS5jb25jYXQoYXJncyk7XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EteiVdKS9nLCBmdW5jdGlvbihtYXRjaCwgZm9ybWF0KSB7XG4gICAgICAvLyBpZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG4gICAgICBpZiAobWF0Y2ggPT09ICclJScpIHJldHVybiBtYXRjaDtcbiAgICAgIGluZGV4Kys7XG4gICAgICB2YXIgZm9ybWF0dGVyID0gZXhwb3J0cy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG4gICAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGZvcm1hdHRlcikge1xuICAgICAgICB2YXIgdmFsID0gYXJnc1tpbmRleF07XG4gICAgICAgIG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuICAgICAgICAvLyBub3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG4gICAgICAgIGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgaW5kZXgtLTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcblxuICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZXhwb3J0cy5mb3JtYXRBcmdzKSB7XG4gICAgICBhcmdzID0gZXhwb3J0cy5mb3JtYXRBcmdzLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIH1cbiAgICB2YXIgbG9nRm4gPSBlbmFibGVkLmxvZyB8fCBleHBvcnRzLmxvZyB8fCBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuICAgIGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICB9XG4gIGVuYWJsZWQuZW5hYmxlZCA9IHRydWU7XG5cbiAgdmFyIGZuID0gZXhwb3J0cy5lbmFibGVkKG5hbWVzcGFjZSkgPyBlbmFibGVkIDogZGlzYWJsZWQ7XG5cbiAgZm4ubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuXG4gIHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lc3BhY2VzLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG4gKiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGVuYWJsZShuYW1lc3BhY2VzKSB7XG4gIGV4cG9ydHMuc2F2ZShuYW1lc3BhY2VzKTtcblxuICB2YXIgc3BsaXQgPSAobmFtZXNwYWNlcyB8fCAnJykuc3BsaXQoL1tcXHMsXSsvKTtcbiAgdmFyIGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKCFzcGxpdFtpXSkgY29udGludWU7IC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG4gICAgbmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCAnLio/Jyk7XG4gICAgaWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuICAgICAgZXhwb3J0cy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwb3J0cy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcyArICckJykpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgZXhwb3J0cy5lbmFibGUoJycpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG4gIHZhciBpLCBsZW47XG4gIGZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMuc2tpcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoZXhwb3J0cy5za2lwc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoZXhwb3J0cy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENvZXJjZSBgdmFsYC5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSB2YWxcbiAqIEByZXR1cm4ge01peGVkfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuICBpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG4gIHJldHVybiB2YWw7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9kZWJ1Zy9kZWJ1Zy5qc1xuICoqIG1vZHVsZSBpZCA9IDM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge1N0cmluZ3xOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmFsLCBvcHRpb25zKXtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgdmFsKSByZXR1cm4gcGFyc2UodmFsKTtcbiAgcmV0dXJuIG9wdGlvbnMubG9uZ1xuICAgID8gbG9uZyh2YWwpXG4gICAgOiBzaG9ydCh2YWwpO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9ICcnICsgc3RyO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMDAwKSByZXR1cm47XG4gIHZhciBtYXRjaCA9IC9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoc3RyKTtcbiAgaWYgKCFtYXRjaCkgcmV0dXJuO1xuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaHJzJzpcbiAgICBjYXNlICdocic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtaW5zJzpcbiAgICBjYXNlICdtaW4nOlxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIG4gKiBtO1xuICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgY2FzZSAnc2Vjcyc6XG4gICAgY2FzZSAnc2VjJzpcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICBjYXNlICdtc2Vjcyc6XG4gICAgY2FzZSAnbXNlYyc6XG4gICAgY2FzZSAnbXMnOlxuICAgICAgcmV0dXJuIG47XG4gIH1cbn1cblxuLyoqXG4gKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBzaG9ydChtcykge1xuICBpZiAobXMgPj0gZCkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcbiAgaWYgKG1zID49IGgpIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAnaCc7XG4gIGlmIChtcyA+PSBtKSByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgJ20nO1xuICBpZiAobXMgPj0gcykgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGxvbmcobXMpIHtcbiAgcmV0dXJuIHBsdXJhbChtcywgZCwgJ2RheScpXG4gICAgfHwgcGx1cmFsKG1zLCBoLCAnaG91cicpXG4gICAgfHwgcGx1cmFsKG1zLCBtLCAnbWludXRlJylcbiAgICB8fCBwbHVyYWwobXMsIHMsICdzZWNvbmQnKVxuICAgIHx8IG1zICsgJyBtcyc7XG59XG5cbi8qKlxuICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG4gKi9cblxuZnVuY3Rpb24gcGx1cmFsKG1zLCBuLCBuYW1lKSB7XG4gIGlmIChtcyA8IG4pIHJldHVybjtcbiAgaWYgKG1zIDwgbiAqIDEuNSkgcmV0dXJuIE1hdGguZmxvb3IobXMgLyBuKSArICcgJyArIG5hbWU7XG4gIHJldHVybiBNYXRoLmNlaWwobXMgLyBuKSArICcgJyArIG5hbWUgKyAncyc7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9tcy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFNpbXBsZSBxdWVyeSBzdHJpbmcgcGFyc2VyLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBxdWVyeSBUaGUgcXVlcnkgc3RyaW5nIHRoYXQgbmVlZHMgdG8gYmUgcGFyc2VkLlxuICogQHJldHVybnMge09iamVjdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5KSB7XG4gIHZhciBwYXJzZXIgPSAvKFtePT8mXSspPShbXiZdKikvZ1xuICAgICwgcmVzdWx0ID0ge31cbiAgICAsIHBhcnQ7XG5cbiAgLy9cbiAgLy8gTGl0dGxlIG5pZnR5IHBhcnNpbmcgaGFjaywgbGV2ZXJhZ2UgdGhlIGZhY3QgdGhhdCBSZWdFeHAuZXhlYyBpbmNyZW1lbnRzXG4gIC8vIHRoZSBsYXN0SW5kZXggcHJvcGVydHkgc28gd2UgY2FuIGNvbnRpbnVlIGV4ZWN1dGluZyB0aGlzIGxvb3AgdW50aWwgd2UndmVcbiAgLy8gcGFyc2VkIGFsbCByZXN1bHRzLlxuICAvL1xuICBmb3IgKDtcbiAgICBwYXJ0ID0gcGFyc2VyLmV4ZWMocXVlcnkpO1xuICAgIHJlc3VsdFtkZWNvZGVVUklDb21wb25lbnQocGFydFsxXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRbMl0pXG4gICk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm0gYSBxdWVyeSBzdHJpbmcgdG8gYW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogT2JqZWN0IHRoYXQgc2hvdWxkIGJlIHRyYW5zZm9ybWVkLlxuICogQHBhcmFtIHtTdHJpbmd9IHByZWZpeCBPcHRpb25hbCBwcmVmaXguXG4gKiBAcmV0dXJucyB7U3RyaW5nfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gcXVlcnlzdHJpbmdpZnkob2JqLCBwcmVmaXgpIHtcbiAgcHJlZml4ID0gcHJlZml4IHx8ICcnO1xuXG4gIHZhciBwYWlycyA9IFtdO1xuXG4gIC8vXG4gIC8vIE9wdGlvbmFsbHkgcHJlZml4IHdpdGggYSAnPycgaWYgbmVlZGVkXG4gIC8vXG4gIGlmICgnc3RyaW5nJyAhPT0gdHlwZW9mIHByZWZpeCkgcHJlZml4ID0gJz8nO1xuXG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoaGFzLmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICBwYWlycy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsnPScrIGVuY29kZVVSSUNvbXBvbmVudChvYmpba2V5XSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYWlycy5sZW5ndGggPyBwcmVmaXggKyBwYWlycy5qb2luKCcmJykgOiAnJztcbn1cblxuLy9cbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuLy9cbmV4cG9ydHMuc3RyaW5naWZ5ID0gcXVlcnlzdHJpbmdpZnk7XG5leHBvcnRzLnBhcnNlID0gcXVlcnlzdHJpbmc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9xdWVyeXN0cmluZ2lmeS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ2hlY2sgaWYgd2UncmUgcmVxdWlyZWQgdG8gYWRkIGEgcG9ydCBudW1iZXIuXG4gKlxuICogQHNlZSBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RlZmF1bHQtcG9ydFxuICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBwb3J0IFBvcnQgbnVtYmVyIHdlIG5lZWQgdG8gY2hlY2tcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm90b2NvbCBQcm90b2NvbCB3ZSBuZWVkIHRvIGNoZWNrIGFnYWluc3QuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gSXMgaXQgYSBkZWZhdWx0IHBvcnQgZm9yIHRoZSBnaXZlbiBwcm90b2NvbFxuICogQGFwaSBwcml2YXRlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVxdWlyZWQocG9ydCwgcHJvdG9jb2wpIHtcbiAgcHJvdG9jb2wgPSBwcm90b2NvbC5zcGxpdCgnOicpWzBdO1xuICBwb3J0ID0gK3BvcnQ7XG5cbiAgaWYgKCFwb3J0KSByZXR1cm4gZmFsc2U7XG5cbiAgc3dpdGNoIChwcm90b2NvbCkge1xuICAgIGNhc2UgJ2h0dHAnOlxuICAgIGNhc2UgJ3dzJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gODA7XG5cbiAgICBjYXNlICdodHRwcyc6XG4gICAgY2FzZSAnd3NzJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gNDQzO1xuXG4gICAgY2FzZSAnZnRwJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gMjE7XG5cbiAgICBjYXNlICdnb3BoZXInOlxuICAgIHJldHVybiBwb3J0ICE9PSA3MDtcblxuICAgIGNhc2UgJ2ZpbGUnOlxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBwb3J0ICE9PSAwO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JlcXVpcmVzLXBvcnQvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50JylcbiAgO1xuXG5mdW5jdGlvbiBDbG9zZUV2ZW50KCkge1xuICBFdmVudC5jYWxsKHRoaXMpO1xuICB0aGlzLmluaXRFdmVudCgnY2xvc2UnLCBmYWxzZSwgZmFsc2UpO1xuICB0aGlzLndhc0NsZWFuID0gZmFsc2U7XG4gIHRoaXMuY29kZSA9IDA7XG4gIHRoaXMucmVhc29uID0gJyc7XG59XG5cbmluaGVyaXRzKENsb3NlRXZlbnQsIEV2ZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBDbG9zZUV2ZW50O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvZXZlbnQvY2xvc2UuanNcbiAqKiBtb2R1bGUgaWQgPSA0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50JylcbiAgO1xuXG5mdW5jdGlvbiBUcmFuc3BvcnRNZXNzYWdlRXZlbnQoZGF0YSkge1xuICBFdmVudC5jYWxsKHRoaXMpO1xuICB0aGlzLmluaXRFdmVudCgnbWVzc2FnZScsIGZhbHNlLCBmYWxzZSk7XG4gIHRoaXMuZGF0YSA9IGRhdGE7XG59XG5cbmluaGVyaXRzKFRyYW5zcG9ydE1lc3NhZ2VFdmVudCwgRXZlbnQpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zcG9ydE1lc3NhZ2VFdmVudDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL2V2ZW50L3RyYW5zLW1lc3NhZ2UuanNcbiAqKiBtb2R1bGUgaWQgPSA0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgSlNPTjMgPSByZXF1aXJlKCdqc29uMycpXG4gICwgaWZyYW1lVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL2lmcmFtZScpXG4gIDtcblxuZnVuY3Rpb24gRmFjYWRlSlModHJhbnNwb3J0KSB7XG4gIHRoaXMuX3RyYW5zcG9ydCA9IHRyYW5zcG9ydDtcbiAgdHJhbnNwb3J0Lm9uKCdtZXNzYWdlJywgdGhpcy5fdHJhbnNwb3J0TWVzc2FnZS5iaW5kKHRoaXMpKTtcbiAgdHJhbnNwb3J0Lm9uKCdjbG9zZScsIHRoaXMuX3RyYW5zcG9ydENsb3NlLmJpbmQodGhpcykpO1xufVxuXG5GYWNhZGVKUy5wcm90b3R5cGUuX3RyYW5zcG9ydENsb3NlID0gZnVuY3Rpb24oY29kZSwgcmVhc29uKSB7XG4gIGlmcmFtZVV0aWxzLnBvc3RNZXNzYWdlKCdjJywgSlNPTjMuc3RyaW5naWZ5KFtjb2RlLCByZWFzb25dKSk7XG59O1xuRmFjYWRlSlMucHJvdG90eXBlLl90cmFuc3BvcnRNZXNzYWdlID0gZnVuY3Rpb24oZnJhbWUpIHtcbiAgaWZyYW1lVXRpbHMucG9zdE1lc3NhZ2UoJ3QnLCBmcmFtZSk7XG59O1xuRmFjYWRlSlMucHJvdG90eXBlLl9zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuICB0aGlzLl90cmFuc3BvcnQuc2VuZChkYXRhKTtcbn07XG5GYWNhZGVKUy5wcm90b3R5cGUuX2Nsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX3RyYW5zcG9ydC5jbG9zZSgpO1xuICB0aGlzLl90cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZhY2FkZUpTO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvZmFjYWRlLmpzXG4gKiogbW9kdWxlIGlkID0gNDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIHVybFV0aWxzID0gcmVxdWlyZSgnLi91dGlscy91cmwnKVxuICAsIGV2ZW50VXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL2V2ZW50JylcbiAgLCBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJylcbiAgLCBGYWNhZGVKUyA9IHJlcXVpcmUoJy4vZmFjYWRlJylcbiAgLCBJbmZvSWZyYW1lUmVjZWl2ZXIgPSByZXF1aXJlKCcuL2luZm8taWZyYW1lLXJlY2VpdmVyJylcbiAgLCBpZnJhbWVVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvaWZyYW1lJylcbiAgLCBsb2MgPSByZXF1aXJlKCcuL2xvY2F0aW9uJylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OmlmcmFtZS1ib290c3RyYXAnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihTb2NrSlMsIGF2YWlsYWJsZVRyYW5zcG9ydHMpIHtcbiAgdmFyIHRyYW5zcG9ydE1hcCA9IHt9O1xuICBhdmFpbGFibGVUcmFuc3BvcnRzLmZvckVhY2goZnVuY3Rpb24oYXQpIHtcbiAgICBpZiAoYXQuZmFjYWRlVHJhbnNwb3J0KSB7XG4gICAgICB0cmFuc3BvcnRNYXBbYXQuZmFjYWRlVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWVdID0gYXQuZmFjYWRlVHJhbnNwb3J0O1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gaGFyZC1jb2RlZCBmb3IgdGhlIGluZm8gaWZyYW1lXG4gIC8vIFRPRE8gc2VlIGlmIHdlIGNhbiBtYWtlIHRoaXMgbW9yZSBkeW5hbWljXG4gIHRyYW5zcG9ydE1hcFtJbmZvSWZyYW1lUmVjZWl2ZXIudHJhbnNwb3J0TmFtZV0gPSBJbmZvSWZyYW1lUmVjZWl2ZXI7XG4gIHZhciBwYXJlbnRPcmlnaW47XG5cbiAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4gIFNvY2tKUy5ib290c3RyYXBfaWZyYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cbiAgICB2YXIgZmFjYWRlO1xuICAgIGlmcmFtZVV0aWxzLmN1cnJlbnRXaW5kb3dJZCA9IGxvYy5oYXNoLnNsaWNlKDEpO1xuICAgIHZhciBvbk1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoZS5zb3VyY2UgIT09IHBhcmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHBhcmVudE9yaWdpbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcGFyZW50T3JpZ2luID0gZS5vcmlnaW47XG4gICAgICB9XG4gICAgICBpZiAoZS5vcmlnaW4gIT09IHBhcmVudE9yaWdpbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBpZnJhbWVNZXNzYWdlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWZyYW1lTWVzc2FnZSA9IEpTT04zLnBhcnNlKGUuZGF0YSk7XG4gICAgICB9IGNhdGNoIChpZ25vcmVkKSB7XG4gICAgICAgIGRlYnVnKCdiYWQganNvbicsIGUuZGF0YSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlmcmFtZU1lc3NhZ2Uud2luZG93SWQgIT09IGlmcmFtZVV0aWxzLmN1cnJlbnRXaW5kb3dJZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKGlmcmFtZU1lc3NhZ2UudHlwZSkge1xuICAgICAgY2FzZSAncyc6XG4gICAgICAgIHZhciBwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHAgPSBKU09OMy5wYXJzZShpZnJhbWVNZXNzYWdlLmRhdGEpO1xuICAgICAgICB9IGNhdGNoIChpZ25vcmVkKSB7XG4gICAgICAgICAgZGVidWcoJ2JhZCBqc29uJywgaWZyYW1lTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmVyc2lvbiA9IHBbMF07XG4gICAgICAgIHZhciB0cmFuc3BvcnQgPSBwWzFdO1xuICAgICAgICB2YXIgdHJhbnNVcmwgPSBwWzJdO1xuICAgICAgICB2YXIgYmFzZVVybCA9IHBbM107XG4gICAgICAgIGRlYnVnKHZlcnNpb24sIHRyYW5zcG9ydCwgdHJhbnNVcmwsIGJhc2VVcmwpO1xuICAgICAgICAvLyBjaGFuZ2UgdGhpcyB0byBzZW12ZXIgbG9naWNcbiAgICAgICAgaWYgKHZlcnNpb24gIT09IFNvY2tKUy52ZXJzaW9uKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmNvbXBhdGlibGUgU29ja0pTISBNYWluIHNpdGUgdXNlczonICtcbiAgICAgICAgICAgICAgICAgICAgJyBcIicgKyB2ZXJzaW9uICsgJ1wiLCB0aGUgaWZyYW1lOicgK1xuICAgICAgICAgICAgICAgICAgICAnIFwiJyArIFNvY2tKUy52ZXJzaW9uICsgJ1wiLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF1cmxVdGlscy5pc09yaWdpbkVxdWFsKHRyYW5zVXJsLCBsb2MuaHJlZikgfHxcbiAgICAgICAgICAgICF1cmxVdGlscy5pc09yaWdpbkVxdWFsKGJhc2VVcmwsIGxvYy5ocmVmKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuXFwndCBjb25uZWN0IHRvIGRpZmZlcmVudCBkb21haW4gZnJvbSB3aXRoaW4gYW4gJyArXG4gICAgICAgICAgICAgICAgICAgICdpZnJhbWUuICgnICsgbG9jLmhyZWYgKyAnLCAnICsgdHJhbnNVcmwgKyAnLCAnICsgYmFzZVVybCArICcpJyk7XG4gICAgICAgIH1cbiAgICAgICAgZmFjYWRlID0gbmV3IEZhY2FkZUpTKG5ldyB0cmFuc3BvcnRNYXBbdHJhbnNwb3J0XSh0cmFuc1VybCwgYmFzZVVybCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ20nOlxuICAgICAgICBmYWNhZGUuX3NlbmQoaWZyYW1lTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjJzpcbiAgICAgICAgaWYgKGZhY2FkZSkge1xuICAgICAgICAgIGZhY2FkZS5fY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBmYWNhZGUgPSBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZXZlbnRVdGlscy5hdHRhY2hFdmVudCgnbWVzc2FnZScsIG9uTWVzc2FnZSk7XG5cbiAgICAvLyBTdGFydFxuICAgIGlmcmFtZVV0aWxzLnBvc3RNZXNzYWdlKCdzJyk7XG4gIH07XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvaWZyYW1lLWJvb3RzdHJhcC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJylcbiAgLCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvZXZlbnQnKVxuICAsIElmcmFtZVRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0L2lmcmFtZScpXG4gICwgSW5mb1JlY2VpdmVySWZyYW1lID0gcmVxdWlyZSgnLi9pbmZvLWlmcmFtZS1yZWNlaXZlcicpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDppbmZvLWlmcmFtZScpO1xufVxuXG5mdW5jdGlvbiBJbmZvSWZyYW1lKGJhc2VVcmwsIHVybCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHZhciBnbyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZnIgPSBzZWxmLmlmciA9IG5ldyBJZnJhbWVUcmFuc3BvcnQoSW5mb1JlY2VpdmVySWZyYW1lLnRyYW5zcG9ydE5hbWUsIHVybCwgYmFzZVVybCk7XG5cbiAgICBpZnIub25jZSgnbWVzc2FnZScsIGZ1bmN0aW9uKG1zZykge1xuICAgICAgaWYgKG1zZykge1xuICAgICAgICB2YXIgZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkID0gSlNPTjMucGFyc2UobXNnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGRlYnVnKCdiYWQganNvbicsIG1zZyk7XG4gICAgICAgICAgc2VsZi5lbWl0KCdmaW5pc2gnKTtcbiAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZm8gPSBkWzBdLCBydHQgPSBkWzFdO1xuICAgICAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIGluZm8sIHJ0dCk7XG4gICAgICB9XG4gICAgICBzZWxmLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBpZnIub25jZSgnY2xvc2UnLCBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuZW1pdCgnZmluaXNoJyk7XG4gICAgICBzZWxmLmNsb3NlKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gVE9ETyB0aGlzIHNlZW1zIHRoZSBzYW1lIGFzIHRoZSAnbmVlZEJvZHknIGZyb20gdHJhbnNwb3J0c1xuICBpZiAoIWdsb2JhbC5kb2N1bWVudC5ib2R5KSB7XG4gICAgdXRpbHMuYXR0YWNoRXZlbnQoJ2xvYWQnLCBnbyk7XG4gIH0gZWxzZSB7XG4gICAgZ28oKTtcbiAgfVxufVxuXG5pbmhlcml0cyhJbmZvSWZyYW1lLCBFdmVudEVtaXR0ZXIpO1xuXG5JbmZvSWZyYW1lLmVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIElmcmFtZVRyYW5zcG9ydC5lbmFibGVkKCk7XG59O1xuXG5JbmZvSWZyYW1lLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5pZnIpIHtcbiAgICB0aGlzLmlmci5jbG9zZSgpO1xuICB9XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIHRoaXMuaWZyID0gbnVsbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW5mb0lmcmFtZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL2luZm8taWZyYW1lLmpzXG4gKiogbW9kdWxlIGlkID0gNDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi91dGlscy91cmwnKVxuICAsIFhEUiA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0L3NlbmRlci94ZHInKVxuICAsIFhIUkNvcnMgPSByZXF1aXJlKCcuL3RyYW5zcG9ydC9zZW5kZXIveGhyLWNvcnMnKVxuICAsIFhIUkxvY2FsID0gcmVxdWlyZSgnLi90cmFuc3BvcnQvc2VuZGVyL3hoci1sb2NhbCcpXG4gICwgWEhSRmFrZSA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0L3NlbmRlci94aHItZmFrZScpXG4gICwgSW5mb0lmcmFtZSA9IHJlcXVpcmUoJy4vaW5mby1pZnJhbWUnKVxuICAsIEluZm9BamF4ID0gcmVxdWlyZSgnLi9pbmZvLWFqYXgnKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6aW5mby1yZWNlaXZlcicpO1xufVxuXG5mdW5jdGlvbiBJbmZvUmVjZWl2ZXIoYmFzZVVybCwgdXJsSW5mbykge1xuICBkZWJ1ZyhiYXNlVXJsKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuZG9YaHIoYmFzZVVybCwgdXJsSW5mbyk7XG4gIH0sIDApO1xufVxuXG5pbmhlcml0cyhJbmZvUmVjZWl2ZXIsIEV2ZW50RW1pdHRlcik7XG5cbi8vIFRPRE8gdGhpcyBpcyBjdXJyZW50bHkgaWdub3JpbmcgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIHRyYW5zcG9ydHMgYW5kIHRoZSB3aGl0ZWxpc3RcblxuSW5mb1JlY2VpdmVyLl9nZXRSZWNlaXZlciA9IGZ1bmN0aW9uKGJhc2VVcmwsIHVybCwgdXJsSW5mbykge1xuICAvLyBkZXRlcm1pbmUgbWV0aG9kIG9mIENPUlMgc3VwcG9ydCAoaWYgbmVlZGVkKVxuICBpZiAodXJsSW5mby5zYW1lT3JpZ2luKSB7XG4gICAgcmV0dXJuIG5ldyBJbmZvQWpheCh1cmwsIFhIUkxvY2FsKTtcbiAgfVxuICBpZiAoWEhSQ29ycy5lbmFibGVkKSB7XG4gICAgcmV0dXJuIG5ldyBJbmZvQWpheCh1cmwsIFhIUkNvcnMpO1xuICB9XG4gIGlmIChYRFIuZW5hYmxlZCAmJiB1cmxJbmZvLnNhbWVTY2hlbWUpIHtcbiAgICByZXR1cm4gbmV3IEluZm9BamF4KHVybCwgWERSKTtcbiAgfVxuICBpZiAoSW5mb0lmcmFtZS5lbmFibGVkKCkpIHtcbiAgICByZXR1cm4gbmV3IEluZm9JZnJhbWUoYmFzZVVybCwgdXJsKTtcbiAgfVxuICByZXR1cm4gbmV3IEluZm9BamF4KHVybCwgWEhSRmFrZSk7XG59O1xuXG5JbmZvUmVjZWl2ZXIucHJvdG90eXBlLmRvWGhyID0gZnVuY3Rpb24oYmFzZVVybCwgdXJsSW5mbykge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgICAsIHVybCA9IHVybFV0aWxzLmFkZFBhdGgoYmFzZVVybCwgJy9pbmZvJylcbiAgICA7XG4gIGRlYnVnKCdkb1hocicsIHVybCk7XG5cbiAgdGhpcy54byA9IEluZm9SZWNlaXZlci5fZ2V0UmVjZWl2ZXIoYmFzZVVybCwgdXJsLCB1cmxJbmZvKTtcblxuICB0aGlzLnRpbWVvdXRSZWYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCd0aW1lb3V0Jyk7XG4gICAgc2VsZi5fY2xlYW51cChmYWxzZSk7XG4gICAgc2VsZi5lbWl0KCdmaW5pc2gnKTtcbiAgfSwgSW5mb1JlY2VpdmVyLnRpbWVvdXQpO1xuXG4gIHRoaXMueG8ub25jZSgnZmluaXNoJywgZnVuY3Rpb24oaW5mbywgcnR0KSB7XG4gICAgZGVidWcoJ2ZpbmlzaCcsIGluZm8sIHJ0dCk7XG4gICAgc2VsZi5fY2xlYW51cCh0cnVlKTtcbiAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIGluZm8sIHJ0dCk7XG4gIH0pO1xufTtcblxuSW5mb1JlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKHdhc0NsZWFuKSB7XG4gIGRlYnVnKCdfY2xlYW51cCcpO1xuICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0UmVmKTtcbiAgdGhpcy50aW1lb3V0UmVmID0gbnVsbDtcbiAgaWYgKCF3YXNDbGVhbiAmJiB0aGlzLnhvKSB7XG4gICAgdGhpcy54by5jbG9zZSgpO1xuICB9XG4gIHRoaXMueG8gPSBudWxsO1xufTtcblxuSW5mb1JlY2VpdmVyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgdGhpcy5fY2xlYW51cChmYWxzZSk7XG59O1xuXG5JbmZvUmVjZWl2ZXIudGltZW91dCA9IDgwMDA7XG5cbm1vZHVsZS5leHBvcnRzID0gSW5mb1JlY2VpdmVyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvaW5mby1yZWNlaXZlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vc2hpbXMnKTtcblxudmFyIFVSTCA9IHJlcXVpcmUoJ3VybC1wYXJzZScpXG4gICwgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgSlNPTjMgPSByZXF1aXJlKCdqc29uMycpXG4gICwgcmFuZG9tID0gcmVxdWlyZSgnLi91dGlscy9yYW5kb20nKVxuICAsIGVzY2FwZSA9IHJlcXVpcmUoJy4vdXRpbHMvZXNjYXBlJylcbiAgLCB1cmxVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvdXJsJylcbiAgLCBldmVudFV0aWxzID0gcmVxdWlyZSgnLi91dGlscy9ldmVudCcpXG4gICwgdHJhbnNwb3J0ID0gcmVxdWlyZSgnLi91dGlscy90cmFuc3BvcnQnKVxuICAsIG9iamVjdFV0aWxzID0gcmVxdWlyZSgnLi91dGlscy9vYmplY3QnKVxuICAsIGJyb3dzZXIgPSByZXF1aXJlKCcuL3V0aWxzL2Jyb3dzZXInKVxuICAsIGxvZyA9IHJlcXVpcmUoJy4vdXRpbHMvbG9nJylcbiAgLCBFdmVudCA9IHJlcXVpcmUoJy4vZXZlbnQvZXZlbnQnKVxuICAsIEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9ldmVudC9ldmVudHRhcmdldCcpXG4gICwgbG9jID0gcmVxdWlyZSgnLi9sb2NhdGlvbicpXG4gICwgQ2xvc2VFdmVudCA9IHJlcXVpcmUoJy4vZXZlbnQvY2xvc2UnKVxuICAsIFRyYW5zcG9ydE1lc3NhZ2VFdmVudCA9IHJlcXVpcmUoJy4vZXZlbnQvdHJhbnMtbWVzc2FnZScpXG4gICwgSW5mb1JlY2VpdmVyID0gcmVxdWlyZSgnLi9pbmZvLXJlY2VpdmVyJylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50Om1haW4nKTtcbn1cblxudmFyIHRyYW5zcG9ydHM7XG5cbi8vIGZvbGxvdyBjb25zdHJ1Y3RvciBzdGVwcyBkZWZpbmVkIGF0IGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3dlYnNvY2tldHMvI3RoZS13ZWJzb2NrZXQtaW50ZXJmYWNlXG5mdW5jdGlvbiBTb2NrSlModXJsLCBwcm90b2NvbHMsIG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNvY2tKUykpIHtcbiAgICByZXR1cm4gbmV3IFNvY2tKUyh1cmwsIHByb3RvY29scywgb3B0aW9ucyk7XG4gIH1cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1NvY2tKUzogMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50XCIpO1xuICB9XG4gIEV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cbiAgdGhpcy5yZWFkeVN0YXRlID0gU29ja0pTLkNPTk5FQ1RJTkc7XG4gIHRoaXMuZXh0ZW5zaW9ucyA9ICcnO1xuICB0aGlzLnByb3RvY29sID0gJyc7XG5cbiAgLy8gbm9uLXN0YW5kYXJkIGV4dGVuc2lvblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKG9wdGlvbnMucHJvdG9jb2xzX3doaXRlbGlzdCkge1xuICAgIGxvZy53YXJuKFwiJ3Byb3RvY29sc193aGl0ZWxpc3QnIGlzIERFUFJFQ0FURUQuIFVzZSAndHJhbnNwb3J0cycgaW5zdGVhZC5cIik7XG4gIH1cbiAgdGhpcy5fdHJhbnNwb3J0c1doaXRlbGlzdCA9IG9wdGlvbnMudHJhbnNwb3J0cztcbiAgdGhpcy5fdHJhbnNwb3J0T3B0aW9ucyA9IG9wdGlvbnMudHJhbnNwb3J0T3B0aW9ucyB8fCB7fTtcblxuICB2YXIgc2Vzc2lvbklkID0gb3B0aW9ucy5zZXNzaW9uSWQgfHwgODtcbiAgaWYgKHR5cGVvZiBzZXNzaW9uSWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLl9nZW5lcmF0ZVNlc3Npb25JZCA9IHNlc3Npb25JZDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygc2Vzc2lvbklkID09PSAnbnVtYmVyJykge1xuICAgIHRoaXMuX2dlbmVyYXRlU2Vzc2lvbklkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcmFuZG9tLnN0cmluZyhzZXNzaW9uSWQpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSWYgc2Vzc2lvbklkIGlzIHVzZWQgaW4gdGhlIG9wdGlvbnMsIGl0IG5lZWRzIHRvIGJlIGEgbnVtYmVyIG9yIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB0aGlzLl9zZXJ2ZXIgPSBvcHRpb25zLnNlcnZlciB8fCByYW5kb20ubnVtYmVyU3RyaW5nKDEwMDApO1xuXG4gIC8vIFN0ZXAgMSBvZiBXUyBzcGVjIC0gcGFyc2UgYW5kIHZhbGlkYXRlIHRoZSB1cmwuIElzc3VlICM4XG4gIHZhciBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybCk7XG4gIGlmICghcGFyc2VkVXJsLmhvc3QgfHwgIXBhcnNlZFVybC5wcm90b2NvbCkge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIlRoZSBVUkwgJ1wiICsgdXJsICsgXCInIGlzIGludmFsaWRcIik7XG4gIH0gZWxzZSBpZiAocGFyc2VkVXJsLmhhc2gpIHtcbiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1RoZSBVUkwgbXVzdCBub3QgY29udGFpbiBhIGZyYWdtZW50Jyk7XG4gIH0gZWxzZSBpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSAnaHR0cDonICYmIHBhcnNlZFVybC5wcm90b2NvbCAhPT0gJ2h0dHBzOicpIHtcbiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUaGUgVVJMJ3Mgc2NoZW1lIG11c3QgYmUgZWl0aGVyICdodHRwOicgb3IgJ2h0dHBzOicuICdcIiArIHBhcnNlZFVybC5wcm90b2NvbCArIFwiJyBpcyBub3QgYWxsb3dlZC5cIik7XG4gIH1cblxuICB2YXIgc2VjdXJlID0gcGFyc2VkVXJsLnByb3RvY29sID09PSAnaHR0cHM6JztcbiAgLy8gU3RlcCAyIC0gZG9uJ3QgYWxsb3cgc2VjdXJlIG9yaWdpbiB3aXRoIGFuIGluc2VjdXJlIHByb3RvY29sXG4gIGlmIChsb2MucHJvdG9jb2wgPT09ICdodHRwcycgJiYgIXNlY3VyZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU2VjdXJpdHlFcnJvcjogQW4gaW5zZWN1cmUgU29ja0pTIGNvbm5lY3Rpb24gbWF5IG5vdCBiZSBpbml0aWF0ZWQgZnJvbSBhIHBhZ2UgbG9hZGVkIG92ZXIgSFRUUFMnKTtcbiAgfVxuXG4gIC8vIFN0ZXAgMyAtIGNoZWNrIHBvcnQgYWNjZXNzIC0gbm8gbmVlZCBoZXJlXG4gIC8vIFN0ZXAgNCAtIHBhcnNlIHByb3RvY29scyBhcmd1bWVudFxuICBpZiAoIXByb3RvY29scykge1xuICAgIHByb3RvY29scyA9IFtdO1xuICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHByb3RvY29scykpIHtcbiAgICBwcm90b2NvbHMgPSBbcHJvdG9jb2xzXTtcbiAgfVxuXG4gIC8vIFN0ZXAgNSAtIGNoZWNrIHByb3RvY29scyBhcmd1bWVudFxuICB2YXIgc29ydGVkUHJvdG9jb2xzID0gcHJvdG9jb2xzLnNvcnQoKTtcbiAgc29ydGVkUHJvdG9jb2xzLmZvckVhY2goZnVuY3Rpb24ocHJvdG8sIGkpIHtcbiAgICBpZiAoIXByb3RvKSB7XG4gICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUaGUgcHJvdG9jb2xzIGVudHJ5ICdcIiArIHByb3RvICsgXCInIGlzIGludmFsaWQuXCIpO1xuICAgIH1cbiAgICBpZiAoaSA8IChzb3J0ZWRQcm90b2NvbHMubGVuZ3RoIC0gMSkgJiYgcHJvdG8gPT09IHNvcnRlZFByb3RvY29sc1tpICsgMV0pIHtcbiAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIlRoZSBwcm90b2NvbHMgZW50cnkgJ1wiICsgcHJvdG8gKyBcIicgaXMgZHVwbGljYXRlZC5cIik7XG4gICAgfVxuICB9KTtcblxuICAvLyBTdGVwIDYgLSBjb252ZXJ0IG9yaWdpblxuICB2YXIgbyA9IHVybFV0aWxzLmdldE9yaWdpbihsb2MuaHJlZik7XG4gIHRoaXMuX29yaWdpbiA9IG8gPyBvLnRvTG93ZXJDYXNlKCkgOiBudWxsO1xuXG4gIC8vIHJlbW92ZSB0aGUgdHJhaWxpbmcgc2xhc2hcbiAgcGFyc2VkVXJsLnNldCgncGF0aG5hbWUnLCBwYXJzZWRVcmwucGF0aG5hbWUucmVwbGFjZSgvXFwvKyQvLCAnJykpO1xuXG4gIC8vIHN0b3JlIHRoZSBzYW5pdGl6ZWQgdXJsXG4gIHRoaXMudXJsID0gcGFyc2VkVXJsLmhyZWY7XG4gIGRlYnVnKCd1c2luZyB1cmwnLCB0aGlzLnVybCk7XG5cbiAgLy8gU3RlcCA3IC0gc3RhcnQgY29ubmVjdGlvbiBpbiBiYWNrZ3JvdW5kXG4gIC8vIG9idGFpbiBzZXJ2ZXIgaW5mb1xuICAvLyBodHRwOi8vc29ja2pzLmdpdGh1Yi5pby9zb2NranMtcHJvdG9jb2wvc29ja2pzLXByb3RvY29sLTAuMy4zLmh0bWwjc2VjdGlvbi0yNlxuICB0aGlzLl91cmxJbmZvID0ge1xuICAgIG51bGxPcmlnaW46ICFicm93c2VyLmhhc0RvbWFpbigpXG4gICwgc2FtZU9yaWdpbjogdXJsVXRpbHMuaXNPcmlnaW5FcXVhbCh0aGlzLnVybCwgbG9jLmhyZWYpXG4gICwgc2FtZVNjaGVtZTogdXJsVXRpbHMuaXNTY2hlbWVFcXVhbCh0aGlzLnVybCwgbG9jLmhyZWYpXG4gIH07XG5cbiAgdGhpcy5faXIgPSBuZXcgSW5mb1JlY2VpdmVyKHRoaXMudXJsLCB0aGlzLl91cmxJbmZvKTtcbiAgdGhpcy5faXIub25jZSgnZmluaXNoJywgdGhpcy5fcmVjZWl2ZUluZm8uYmluZCh0aGlzKSk7XG59XG5cbmluaGVyaXRzKFNvY2tKUywgRXZlbnRUYXJnZXQpO1xuXG5mdW5jdGlvbiB1c2VyU2V0Q29kZShjb2RlKSB7XG4gIHJldHVybiBjb2RlID09PSAxMDAwIHx8IChjb2RlID49IDMwMDAgJiYgY29kZSA8PSA0OTk5KTtcbn1cblxuU29ja0pTLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKGNvZGUsIHJlYXNvbikge1xuICAvLyBTdGVwIDFcbiAgaWYgKGNvZGUgJiYgIXVzZXJTZXRDb2RlKGNvZGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkQWNjZXNzRXJyb3I6IEludmFsaWQgY29kZScpO1xuICB9XG4gIC8vIFN0ZXAgMi40IHN0YXRlcyB0aGUgbWF4IGlzIDEyMyBieXRlcywgYnV0IHdlIGFyZSBqdXN0IGNoZWNraW5nIGxlbmd0aFxuICBpZiAocmVhc29uICYmIHJlYXNvbi5sZW5ndGggPiAxMjMpIHtcbiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ3JlYXNvbiBhcmd1bWVudCBoYXMgYW4gaW52YWxpZCBsZW5ndGgnKTtcbiAgfVxuXG4gIC8vIFN0ZXAgMy4xXG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DTE9TSU5HIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gU29ja0pTLkNMT1NFRCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFRPRE8gbG9vayBhdCBkb2NzIHRvIGRldGVybWluZSBob3cgdG8gc2V0IHRoaXNcbiAgdmFyIHdhc0NsZWFuID0gdHJ1ZTtcbiAgdGhpcy5fY2xvc2UoY29kZSB8fCAxMDAwLCByZWFzb24gfHwgJ05vcm1hbCBjbG9zdXJlJywgd2FzQ2xlYW4pO1xufTtcblxuU29ja0pTLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuICAvLyAjMTMgLSBjb252ZXJ0IGFueXRoaW5nIG5vbi1zdHJpbmcgdG8gc3RyaW5nXG4gIC8vIFRPRE8gdGhpcyBjdXJyZW50bHkgdHVybnMgb2JqZWN0cyBpbnRvIFtvYmplY3QgT2JqZWN0XVxuICBpZiAodHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnKSB7XG4gICAgZGF0YSA9ICcnICsgZGF0YTtcbiAgfVxuICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBTb2NrSlMuQ09OTkVDVElORykge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZFN0YXRlRXJyb3I6IFRoZSBjb25uZWN0aW9uIGhhcyBub3QgYmVlbiBlc3RhYmxpc2hlZCB5ZXQnKTtcbiAgfVxuICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBTb2NrSlMuT1BFTikge1xuICAgIHJldHVybjtcbiAgfVxuICB0aGlzLl90cmFuc3BvcnQuc2VuZChlc2NhcGUucXVvdGUoZGF0YSkpO1xufTtcblxuU29ja0pTLnZlcnNpb24gPSByZXF1aXJlKCcuL3ZlcnNpb24nKTtcblxuU29ja0pTLkNPTk5FQ1RJTkcgPSAwO1xuU29ja0pTLk9QRU4gPSAxO1xuU29ja0pTLkNMT1NJTkcgPSAyO1xuU29ja0pTLkNMT1NFRCA9IDM7XG5cblNvY2tKUy5wcm90b3R5cGUuX3JlY2VpdmVJbmZvID0gZnVuY3Rpb24oaW5mbywgcnR0KSB7XG4gIGRlYnVnKCdfcmVjZWl2ZUluZm8nLCBydHQpO1xuICB0aGlzLl9pciA9IG51bGw7XG4gIGlmICghaW5mbykge1xuICAgIHRoaXMuX2Nsb3NlKDEwMDIsICdDYW5ub3QgY29ubmVjdCB0byBzZXJ2ZXInKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBlc3RhYmxpc2ggYSByb3VuZC10cmlwIHRpbWVvdXQgKFJUTykgYmFzZWQgb24gdGhlXG4gIC8vIHJvdW5kLXRyaXAgdGltZSAoUlRUKVxuICB0aGlzLl9ydG8gPSB0aGlzLmNvdW50UlRPKHJ0dCk7XG4gIC8vIGFsbG93IHNlcnZlciB0byBvdmVycmlkZSB1cmwgdXNlZCBmb3IgdGhlIGFjdHVhbCB0cmFuc3BvcnRcbiAgdGhpcy5fdHJhbnNVcmwgPSBpbmZvLmJhc2VfdXJsID8gaW5mby5iYXNlX3VybCA6IHRoaXMudXJsO1xuICBpbmZvID0gb2JqZWN0VXRpbHMuZXh0ZW5kKGluZm8sIHRoaXMuX3VybEluZm8pO1xuICBkZWJ1ZygnaW5mbycsIGluZm8pO1xuICAvLyBkZXRlcm1pbmUgbGlzdCBvZiBkZXNpcmVkIGFuZCBzdXBwb3J0ZWQgdHJhbnNwb3J0c1xuICB2YXIgZW5hYmxlZFRyYW5zcG9ydHMgPSB0cmFuc3BvcnRzLmZpbHRlclRvRW5hYmxlZCh0aGlzLl90cmFuc3BvcnRzV2hpdGVsaXN0LCBpbmZvKTtcbiAgdGhpcy5fdHJhbnNwb3J0cyA9IGVuYWJsZWRUcmFuc3BvcnRzLm1haW47XG4gIGRlYnVnKHRoaXMuX3RyYW5zcG9ydHMubGVuZ3RoICsgJyBlbmFibGVkIHRyYW5zcG9ydHMnKTtcblxuICB0aGlzLl9jb25uZWN0KCk7XG59O1xuXG5Tb2NrSlMucHJvdG90eXBlLl9jb25uZWN0ID0gZnVuY3Rpb24oKSB7XG4gIGZvciAodmFyIFRyYW5zcG9ydCA9IHRoaXMuX3RyYW5zcG9ydHMuc2hpZnQoKTsgVHJhbnNwb3J0OyBUcmFuc3BvcnQgPSB0aGlzLl90cmFuc3BvcnRzLnNoaWZ0KCkpIHtcbiAgICBkZWJ1ZygnYXR0ZW1wdCcsIFRyYW5zcG9ydC50cmFuc3BvcnROYW1lKTtcbiAgICBpZiAoVHJhbnNwb3J0Lm5lZWRCb2R5KSB7XG4gICAgICBpZiAoIWdsb2JhbC5kb2N1bWVudC5ib2R5IHx8XG4gICAgICAgICAgKHR5cGVvZiBnbG9iYWwuZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIGdsb2JhbC5kb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnY29tcGxldGUnICYmXG4gICAgICAgICAgICBnbG9iYWwuZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ2ludGVyYWN0aXZlJykpIHtcbiAgICAgICAgZGVidWcoJ3dhaXRpbmcgZm9yIGJvZHknKTtcbiAgICAgICAgdGhpcy5fdHJhbnNwb3J0cy51bnNoaWZ0KFRyYW5zcG9ydCk7XG4gICAgICAgIGV2ZW50VXRpbHMuYXR0YWNoRXZlbnQoJ2xvYWQnLCB0aGlzLl9jb25uZWN0LmJpbmQodGhpcykpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY2FsY3VsYXRlIHRpbWVvdXQgYmFzZWQgb24gUlRPIGFuZCByb3VuZCB0cmlwcy4gRGVmYXVsdCB0byA1c1xuICAgIHZhciB0aW1lb3V0TXMgPSAodGhpcy5fcnRvICogVHJhbnNwb3J0LnJvdW5kVHJpcHMpIHx8IDUwMDA7XG4gICAgdGhpcy5fdHJhbnNwb3J0VGltZW91dElkID0gc2V0VGltZW91dCh0aGlzLl90cmFuc3BvcnRUaW1lb3V0LmJpbmQodGhpcyksIHRpbWVvdXRNcyk7XG4gICAgZGVidWcoJ3VzaW5nIHRpbWVvdXQnLCB0aW1lb3V0TXMpO1xuXG4gICAgdmFyIHRyYW5zcG9ydFVybCA9IHVybFV0aWxzLmFkZFBhdGgodGhpcy5fdHJhbnNVcmwsICcvJyArIHRoaXMuX3NlcnZlciArICcvJyArIHRoaXMuX2dlbmVyYXRlU2Vzc2lvbklkKCkpO1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5fdHJhbnNwb3J0T3B0aW9uc1tUcmFuc3BvcnQudHJhbnNwb3J0TmFtZV07XG4gICAgZGVidWcoJ3RyYW5zcG9ydCB1cmwnLCB0cmFuc3BvcnRVcmwpO1xuICAgIHZhciB0cmFuc3BvcnRPYmogPSBuZXcgVHJhbnNwb3J0KHRyYW5zcG9ydFVybCwgdGhpcy5fdHJhbnNVcmwsIG9wdGlvbnMpO1xuICAgIHRyYW5zcG9ydE9iai5vbignbWVzc2FnZScsIHRoaXMuX3RyYW5zcG9ydE1lc3NhZ2UuYmluZCh0aGlzKSk7XG4gICAgdHJhbnNwb3J0T2JqLm9uY2UoJ2Nsb3NlJywgdGhpcy5fdHJhbnNwb3J0Q2xvc2UuYmluZCh0aGlzKSk7XG4gICAgdHJhbnNwb3J0T2JqLnRyYW5zcG9ydE5hbWUgPSBUcmFuc3BvcnQudHJhbnNwb3J0TmFtZTtcbiAgICB0aGlzLl90cmFuc3BvcnQgPSB0cmFuc3BvcnRPYmo7XG5cbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5fY2xvc2UoMjAwMCwgJ0FsbCB0cmFuc3BvcnRzIGZhaWxlZCcsIGZhbHNlKTtcbn07XG5cblNvY2tKUy5wcm90b3R5cGUuX3RyYW5zcG9ydFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ190cmFuc3BvcnRUaW1lb3V0Jyk7XG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DT05ORUNUSU5HKSB7XG4gICAgdGhpcy5fdHJhbnNwb3J0Q2xvc2UoMjAwNywgJ1RyYW5zcG9ydCB0aW1lZCBvdXQnKTtcbiAgfVxufTtcblxuU29ja0pTLnByb3RvdHlwZS5fdHJhbnNwb3J0TWVzc2FnZSA9IGZ1bmN0aW9uKG1zZykge1xuICBkZWJ1ZygnX3RyYW5zcG9ydE1lc3NhZ2UnLCBtc2cpO1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgICAsIHR5cGUgPSBtc2cuc2xpY2UoMCwgMSlcbiAgICAsIGNvbnRlbnQgPSBtc2cuc2xpY2UoMSlcbiAgICAsIHBheWxvYWRcbiAgICA7XG5cbiAgLy8gZmlyc3QgY2hlY2sgZm9yIG1lc3NhZ2VzIHRoYXQgZG9uJ3QgbmVlZCBhIHBheWxvYWRcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnbyc6XG4gICAgICB0aGlzLl9vcGVuKCk7XG4gICAgICByZXR1cm47XG4gICAgY2FzZSAnaCc6XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdoZWFydGJlYXQnKSk7XG4gICAgICBkZWJ1ZygnaGVhcnRiZWF0JywgdGhpcy50cmFuc3BvcnQpO1xuICAgICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNvbnRlbnQpIHtcbiAgICB0cnkge1xuICAgICAgcGF5bG9hZCA9IEpTT04zLnBhcnNlKGNvbnRlbnQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGRlYnVnKCdiYWQganNvbicsIGNvbnRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBkZWJ1ZygnZW1wdHkgcGF5bG9hZCcsIGNvbnRlbnQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ2EnOlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGF5bG9hZCkpIHtcbiAgICAgICAgcGF5bG9hZC5mb3JFYWNoKGZ1bmN0aW9uKHApIHtcbiAgICAgICAgICBkZWJ1ZygnbWVzc2FnZScsIHNlbGYudHJhbnNwb3J0LCBwKTtcbiAgICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQobmV3IFRyYW5zcG9ydE1lc3NhZ2VFdmVudChwKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnbSc6XG4gICAgICBkZWJ1ZygnbWVzc2FnZScsIHRoaXMudHJhbnNwb3J0LCBwYXlsb2FkKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVHJhbnNwb3J0TWVzc2FnZUV2ZW50KHBheWxvYWQpKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2MnOlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGF5bG9hZCkgJiYgcGF5bG9hZC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdGhpcy5fY2xvc2UocGF5bG9hZFswXSwgcGF5bG9hZFsxXSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxufTtcblxuU29ja0pTLnByb3RvdHlwZS5fdHJhbnNwb3J0Q2xvc2UgPSBmdW5jdGlvbihjb2RlLCByZWFzb24pIHtcbiAgZGVidWcoJ190cmFuc3BvcnRDbG9zZScsIHRoaXMudHJhbnNwb3J0LCBjb2RlLCByZWFzb24pO1xuICBpZiAodGhpcy5fdHJhbnNwb3J0KSB7XG4gICAgdGhpcy5fdHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IG51bGw7XG4gICAgdGhpcy50cmFuc3BvcnQgPSBudWxsO1xuICB9XG5cbiAgaWYgKCF1c2VyU2V0Q29kZShjb2RlKSAmJiBjb2RlICE9PSAyMDAwICYmIHRoaXMucmVhZHlTdGF0ZSA9PT0gU29ja0pTLkNPTk5FQ1RJTkcpIHtcbiAgICB0aGlzLl9jb25uZWN0KCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5fY2xvc2UoY29kZSwgcmVhc29uKTtcbn07XG5cblNvY2tKUy5wcm90b3R5cGUuX29wZW4gPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ19vcGVuJywgdGhpcy5fdHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUsIHRoaXMucmVhZHlTdGF0ZSk7XG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DT05ORUNUSU5HKSB7XG4gICAgaWYgKHRoaXMuX3RyYW5zcG9ydFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RyYW5zcG9ydFRpbWVvdXRJZCk7XG4gICAgICB0aGlzLl90cmFuc3BvcnRUaW1lb3V0SWQgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTb2NrSlMuT1BFTjtcbiAgICB0aGlzLnRyYW5zcG9ydCA9IHRoaXMuX3RyYW5zcG9ydC50cmFuc3BvcnROYW1lO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ29wZW4nKSk7XG4gICAgZGVidWcoJ2Nvbm5lY3RlZCcsIHRoaXMudHJhbnNwb3J0KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBUaGUgc2VydmVyIG1pZ2h0IGhhdmUgYmVlbiByZXN0YXJ0ZWQsIGFuZCBsb3N0IHRyYWNrIG9mIG91clxuICAgIC8vIGNvbm5lY3Rpb24uXG4gICAgdGhpcy5fY2xvc2UoMTAwNiwgJ1NlcnZlciBsb3N0IHNlc3Npb24nKTtcbiAgfVxufTtcblxuU29ja0pTLnByb3RvdHlwZS5fY2xvc2UgPSBmdW5jdGlvbihjb2RlLCByZWFzb24sIHdhc0NsZWFuKSB7XG4gIGRlYnVnKCdfY2xvc2UnLCB0aGlzLnRyYW5zcG9ydCwgY29kZSwgcmVhc29uLCB3YXNDbGVhbiwgdGhpcy5yZWFkeVN0YXRlKTtcbiAgdmFyIGZvcmNlRmFpbCA9IGZhbHNlO1xuXG4gIGlmICh0aGlzLl9pcikge1xuICAgIGZvcmNlRmFpbCA9IHRydWU7XG4gICAgdGhpcy5faXIuY2xvc2UoKTtcbiAgICB0aGlzLl9pciA9IG51bGw7XG4gIH1cbiAgaWYgKHRoaXMuX3RyYW5zcG9ydCkge1xuICAgIHRoaXMuX3RyYW5zcG9ydC5jbG9zZSgpO1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IG51bGw7XG4gICAgdGhpcy50cmFuc3BvcnQgPSBudWxsO1xuICB9XG5cbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gU29ja0pTLkNMT1NFRCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZFN0YXRlRXJyb3I6IFNvY2tKUyBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZCcpO1xuICB9XG5cbiAgdGhpcy5yZWFkeVN0YXRlID0gU29ja0pTLkNMT1NJTkc7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gU29ja0pTLkNMT1NFRDtcblxuICAgIGlmIChmb3JjZUZhaWwpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2Vycm9yJykpO1xuICAgIH1cblxuICAgIHZhciBlID0gbmV3IENsb3NlRXZlbnQoJ2Nsb3NlJyk7XG4gICAgZS53YXNDbGVhbiA9IHdhc0NsZWFuIHx8IGZhbHNlO1xuICAgIGUuY29kZSA9IGNvZGUgfHwgMTAwMDtcbiAgICBlLnJlYXNvbiA9IHJlYXNvbjtcblxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlKTtcbiAgICB0aGlzLm9ubWVzc2FnZSA9IHRoaXMub25jbG9zZSA9IHRoaXMub25lcnJvciA9IG51bGw7XG4gICAgZGVidWcoJ2Rpc2Nvbm5lY3RlZCcpO1xuICB9LmJpbmQodGhpcyksIDApO1xufTtcblxuLy8gU2VlOiBodHRwOi8vd3d3LmVyZy5hYmRuLmFjLnVrL35nZXJyaXQvZGNjcC9ub3Rlcy9jY2lkMi9ydG9fZXN0aW1hdG9yL1xuLy8gYW5kIFJGQyAyOTg4LlxuU29ja0pTLnByb3RvdHlwZS5jb3VudFJUTyA9IGZ1bmN0aW9uKHJ0dCkge1xuICAvLyBJbiBhIGxvY2FsIGVudmlyb25tZW50LCB3aGVuIHVzaW5nIElFOC85IGFuZCB0aGUgYGpzb25wLXBvbGxpbmdgXG4gIC8vIHRyYW5zcG9ydCB0aGUgdGltZSBuZWVkZWQgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiAodGhlIHRpbWUgdGhhdCBwYXNzXG4gIC8vIGZyb20gdGhlIG9wZW5pbmcgb2YgdGhlIHRyYW5zcG9ydCB0byB0aGUgY2FsbCBvZiBgX2Rpc3BhdGNoT3BlbmApIGlzXG4gIC8vIGFyb3VuZCAyMDBtc2VjICh0aGUgbG93ZXIgYm91bmQgdXNlZCBpbiB0aGUgYXJ0aWNsZSBhYm92ZSkgYW5kIHRoaXNcbiAgLy8gY2F1c2VzIHNwdXJpb3VzIHRpbWVvdXRzLiBGb3IgdGhpcyByZWFzb24gd2UgY2FsY3VsYXRlIGEgdmFsdWUgc2xpZ2h0bHlcbiAgLy8gbGFyZ2VyIHRoYW4gdGhhdCB1c2VkIGluIHRoZSBhcnRpY2xlLlxuICBpZiAocnR0ID4gMTAwKSB7XG4gICAgcmV0dXJuIDQgKiBydHQ7IC8vIHJ0byA+IDQwMG1zZWNcbiAgfVxuICByZXR1cm4gMzAwICsgcnR0OyAvLyAzMDBtc2VjIDwgcnRvIDw9IDQwMG1zZWNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXZhaWxhYmxlVHJhbnNwb3J0cykge1xuICB0cmFuc3BvcnRzID0gdHJhbnNwb3J0KGF2YWlsYWJsZVRyYW5zcG9ydHMpO1xuICByZXF1aXJlKCcuL2lmcmFtZS1ib290c3RyYXAnKShTb2NrSlMsIGF2YWlsYWJsZVRyYW5zcG9ydHMpO1xuICByZXR1cm4gU29ja0pTO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL21haW4uanNcbiAqKiBtb2R1bGUgaWQgPSA0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbi8qIGpzY3M6IGRpc2FibGUgKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gcHVsbGVkIHNwZWNpZmljIHNoaW1zIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltXG5cbnZhciBBcnJheVByb3RvdHlwZSA9IEFycmF5LnByb3RvdHlwZTtcbnZhciBPYmplY3RQcm90b3R5cGUgPSBPYmplY3QucHJvdG90eXBlO1xudmFyIEZ1bmN0aW9uUHJvdG90eXBlID0gRnVuY3Rpb24ucHJvdG90eXBlO1xudmFyIFN0cmluZ1Byb3RvdHlwZSA9IFN0cmluZy5wcm90b3R5cGU7XG52YXIgYXJyYXlfc2xpY2UgPSBBcnJheVByb3RvdHlwZS5zbGljZTtcblxudmFyIF90b1N0cmluZyA9IE9iamVjdFByb3RvdHlwZS50b1N0cmluZztcbnZhciBpc0Z1bmN0aW9uID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIHJldHVybiBPYmplY3RQcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufTtcbnZhciBpc0FycmF5ID0gZnVuY3Rpb24gaXNBcnJheShvYmopIHtcbiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG52YXIgaXNTdHJpbmcgPSBmdW5jdGlvbiBpc1N0cmluZyhvYmopIHtcbiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7XG59O1xuXG52YXIgc3VwcG9ydHNEZXNjcmlwdG9ycyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiAoZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3gnLCB7fSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHsgLyogdGhpcyBpcyBFUzMgKi9cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0oKSk7XG5cbi8vIERlZmluZSBjb25maWd1cmFibGUsIHdyaXRhYmxlIGFuZCBub24tZW51bWVyYWJsZSBwcm9wc1xuLy8gaWYgdGhleSBkb24ndCBleGlzdC5cbnZhciBkZWZpbmVQcm9wZXJ0eTtcbmlmIChzdXBwb3J0c0Rlc2NyaXB0b3JzKSB7XG4gICAgZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lLCBtZXRob2QsIGZvcmNlQXNzaWduKSB7XG4gICAgICAgIGlmICghZm9yY2VBc3NpZ24gJiYgKG5hbWUgaW4gb2JqZWN0KSkgeyByZXR1cm47IH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgbmFtZSwge1xuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBtZXRob2RcbiAgICAgICAgfSk7XG4gICAgfTtcbn0gZWxzZSB7XG4gICAgZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lLCBtZXRob2QsIGZvcmNlQXNzaWduKSB7XG4gICAgICAgIGlmICghZm9yY2VBc3NpZ24gJiYgKG5hbWUgaW4gb2JqZWN0KSkgeyByZXR1cm47IH1cbiAgICAgICAgb2JqZWN0W25hbWVdID0gbWV0aG9kO1xuICAgIH07XG59XG52YXIgZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmplY3QsIG1hcCwgZm9yY2VBc3NpZ24pIHtcbiAgICBmb3IgKHZhciBuYW1lIGluIG1hcCkge1xuICAgICAgICBpZiAoT2JqZWN0UHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobWFwLCBuYW1lKSkge1xuICAgICAgICAgIGRlZmluZVByb3BlcnR5KG9iamVjdCwgbmFtZSwgbWFwW25hbWVdLCBmb3JjZUFzc2lnbik7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG52YXIgdG9PYmplY3QgPSBmdW5jdGlvbiAobykge1xuICAgIGlmIChvID09IG51bGwpIHsgLy8gdGhpcyBtYXRjaGVzIGJvdGggbnVsbCBhbmQgdW5kZWZpbmVkXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW4ndCBjb252ZXJ0IFwiICsgbyArICcgdG8gb2JqZWN0Jyk7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3Qobyk7XG59O1xuXG4vL1xuLy8gVXRpbFxuLy8gPT09PT09XG4vL1xuXG4vLyBFUzUgOS40XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3g5LjRcbi8vIGh0dHA6Ly9qc3BlcmYuY29tL3RvLWludGVnZXJcblxuZnVuY3Rpb24gdG9JbnRlZ2VyKG51bSkge1xuICAgIHZhciBuID0gK251bTtcbiAgICBpZiAobiAhPT0gbikgeyAvLyBpc05hTlxuICAgICAgICBuID0gMDtcbiAgICB9IGVsc2UgaWYgKG4gIT09IDAgJiYgbiAhPT0gKDEgLyAwKSAmJiBuICE9PSAtKDEgLyAwKSkge1xuICAgICAgICBuID0gKG4gPiAwIHx8IC0xKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobikpO1xuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gVG9VaW50MzIoeCkge1xuICAgIHJldHVybiB4ID4+PiAwO1xufVxuXG4vL1xuLy8gRnVuY3Rpb25cbi8vID09PT09PT09XG4vL1xuXG4vLyBFUy01IDE1LjMuNC41XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS4zLjQuNVxuXG5mdW5jdGlvbiBFbXB0eSgpIHt9XG5cbmRlZmluZVByb3BlcnRpZXMoRnVuY3Rpb25Qcm90b3R5cGUsIHtcbiAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKHRoYXQpIHsgLy8gLmxlbmd0aCBpcyAxXG4gICAgICAgIC8vIDEuIExldCBUYXJnZXQgYmUgdGhlIHRoaXMgdmFsdWUuXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzO1xuICAgICAgICAvLyAyLiBJZiBJc0NhbGxhYmxlKFRhcmdldCkgaXMgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKHRhcmdldCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgJyArIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMy4gTGV0IEEgYmUgYSBuZXcgKHBvc3NpYmx5IGVtcHR5KSBpbnRlcm5hbCBsaXN0IG9mIGFsbCBvZiB0aGVcbiAgICAgICAgLy8gICBhcmd1bWVudCB2YWx1ZXMgcHJvdmlkZWQgYWZ0ZXIgdGhpc0FyZyAoYXJnMSwgYXJnMiBldGMpLCBpbiBvcmRlci5cbiAgICAgICAgLy8gWFhYIHNsaWNlZEFyZ3Mgd2lsbCBzdGFuZCBpbiBmb3IgXCJBXCIgaWYgdXNlZFxuICAgICAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsgLy8gZm9yIG5vcm1hbCBjYWxsXG4gICAgICAgIC8vIDQuIExldCBGIGJlIGEgbmV3IG5hdGl2ZSBFQ01BU2NyaXB0IG9iamVjdC5cbiAgICAgICAgLy8gMTEuIFNldCB0aGUgW1tQcm90b3R5cGVdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIHRvIHRoZSBzdGFuZGFyZFxuICAgICAgICAvLyAgIGJ1aWx0LWluIEZ1bmN0aW9uIHByb3RvdHlwZSBvYmplY3QgYXMgc3BlY2lmaWVkIGluIDE1LjMuMy4xLlxuICAgICAgICAvLyAxMi4gU2V0IHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIGFzIGRlc2NyaWJlZCBpblxuICAgICAgICAvLyAgIDE1LjMuNC41LjEuXG4gICAgICAgIC8vIDEzLiBTZXQgdGhlIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cbiAgICAgICAgLy8gICAxNS4zLjQuNS4yLlxuICAgICAgICAvLyAxNC4gU2V0IHRoZSBbW0hhc0luc3RhbmNlXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cbiAgICAgICAgLy8gICAxNS4zLjQuNS4zLlxuICAgICAgICB2YXIgYmluZGVyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIGJvdW5kKSB7XG4gICAgICAgICAgICAgICAgLy8gMTUuMy40LjUuMiBbW0NvbnN0cnVjdF1dXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBtZXRob2Qgb2YgYSBmdW5jdGlvbiBvYmplY3QsXG4gICAgICAgICAgICAgICAgLy8gRiB0aGF0IHdhcyBjcmVhdGVkIHVzaW5nIHRoZSBiaW5kIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBsaXN0IG9mIGFyZ3VtZW50cyBFeHRyYUFyZ3MsIHRoZSBmb2xsb3dpbmcgc3RlcHMgYXJlIHRha2VuOlxuICAgICAgICAgICAgICAgIC8vIDEuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV1cbiAgICAgICAgICAgICAgICAvLyAgIGludGVybmFsIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDIuIElmIHRhcmdldCBoYXMgbm8gW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBtZXRob2QsIGFcbiAgICAgICAgICAgICAgICAvLyAgIFR5cGVFcnJvciBleGNlcHRpb24gaXMgdGhyb3duLlxuICAgICAgICAgICAgICAgIC8vIDMuIExldCBib3VuZEFyZ3MgYmUgdGhlIHZhbHVlIG9mIEYncyBbW0JvdW5kQXJnc11dIGludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gICBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAvLyA0LiBMZXQgYXJncyBiZSBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZVxuICAgICAgICAgICAgICAgIC8vICAgbGlzdCBib3VuZEFyZ3MgaW4gdGhlIHNhbWUgb3JkZXIgZm9sbG93ZWQgYnkgdGhlIHNhbWVcbiAgICAgICAgICAgICAgICAvLyAgIHZhbHVlcyBhcyB0aGUgbGlzdCBFeHRyYUFyZ3MgaW4gdGhlIHNhbWUgb3JkZXIuXG4gICAgICAgICAgICAgICAgLy8gNS4gUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgbWV0aG9kIG9mIHRhcmdldCBwcm92aWRpbmcgYXJncyBhcyB0aGUgYXJndW1lbnRzLlxuXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRhcmdldC5hcHBseShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jb25jYXQoYXJyYXlfc2xpY2UuY2FsbChhcmd1bWVudHMpKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdChyZXN1bHQpID09PSByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gMTUuMy40LjUuMSBbW0NhbGxdXVxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZCBvZiBhIGZ1bmN0aW9uIG9iamVjdCwgRixcbiAgICAgICAgICAgICAgICAvLyB3aGljaCB3YXMgY3JlYXRlZCB1c2luZyB0aGUgYmluZCBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhXG4gICAgICAgICAgICAgICAgLy8gdGhpcyB2YWx1ZSBhbmQgYSBsaXN0IG9mIGFyZ3VtZW50cyBFeHRyYUFyZ3MsIHRoZSBmb2xsb3dpbmdcbiAgICAgICAgICAgICAgICAvLyBzdGVwcyBhcmUgdGFrZW46XG4gICAgICAgICAgICAgICAgLy8gMS4gTGV0IGJvdW5kQXJncyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRBcmdzXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDIuIExldCBib3VuZFRoaXMgYmUgdGhlIHZhbHVlIG9mIEYncyBbW0JvdW5kVGhpc11dIGludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gICBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAvLyAzLiBMZXQgdGFyZ2V0IGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tUYXJnZXRGdW5jdGlvbl1dIGludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gICBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAvLyA0LiBMZXQgYXJncyBiZSBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZVxuICAgICAgICAgICAgICAgIC8vICAgbGlzdCBib3VuZEFyZ3MgaW4gdGhlIHNhbWUgb3JkZXIgZm9sbG93ZWQgYnkgdGhlIHNhbWVcbiAgICAgICAgICAgICAgICAvLyAgIHZhbHVlcyBhcyB0aGUgbGlzdCBFeHRyYUFyZ3MgaW4gdGhlIHNhbWUgb3JkZXIuXG4gICAgICAgICAgICAgICAgLy8gNS4gUmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgbWV0aG9kXG4gICAgICAgICAgICAgICAgLy8gICBvZiB0YXJnZXQgcHJvdmlkaW5nIGJvdW5kVGhpcyBhcyB0aGUgdGhpcyB2YWx1ZSBhbmRcbiAgICAgICAgICAgICAgICAvLyAgIHByb3ZpZGluZyBhcmdzIGFzIHRoZSBhcmd1bWVudHMuXG5cbiAgICAgICAgICAgICAgICAvLyBlcXVpdjogdGFyZ2V0LmNhbGwodGhpcywgLi4uYm91bmRBcmdzLCAuLi5hcmdzKVxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuYXBwbHkoXG4gICAgICAgICAgICAgICAgICAgIHRoYXQsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuY29uY2F0KGFycmF5X3NsaWNlLmNhbGwoYXJndW1lbnRzKSlcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICAvLyAxNS4gSWYgdGhlIFtbQ2xhc3NdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBUYXJnZXQgaXMgXCJGdW5jdGlvblwiLCB0aGVuXG4gICAgICAgIC8vICAgICBhLiBMZXQgTCBiZSB0aGUgbGVuZ3RoIHByb3BlcnR5IG9mIFRhcmdldCBtaW51cyB0aGUgbGVuZ3RoIG9mIEEuXG4gICAgICAgIC8vICAgICBiLiBTZXQgdGhlIGxlbmd0aCBvd24gcHJvcGVydHkgb2YgRiB0byBlaXRoZXIgMCBvciBMLCB3aGljaGV2ZXIgaXNcbiAgICAgICAgLy8gICAgICAgbGFyZ2VyLlxuICAgICAgICAvLyAxNi4gRWxzZSBzZXQgdGhlIGxlbmd0aCBvd24gcHJvcGVydHkgb2YgRiB0byAwLlxuXG4gICAgICAgIHZhciBib3VuZExlbmd0aCA9IE1hdGgubWF4KDAsIHRhcmdldC5sZW5ndGggLSBhcmdzLmxlbmd0aCk7XG5cbiAgICAgICAgLy8gMTcuIFNldCB0aGUgYXR0cmlidXRlcyBvZiB0aGUgbGVuZ3RoIG93biBwcm9wZXJ0eSBvZiBGIHRvIHRoZSB2YWx1ZXNcbiAgICAgICAgLy8gICBzcGVjaWZpZWQgaW4gMTUuMy41LjEuXG4gICAgICAgIHZhciBib3VuZEFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib3VuZExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBib3VuZEFyZ3MucHVzaCgnJCcgKyBpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFhYWCBCdWlsZCBhIGR5bmFtaWMgZnVuY3Rpb24gd2l0aCBkZXNpcmVkIGFtb3VudCBvZiBhcmd1bWVudHMgaXMgdGhlIG9ubHlcbiAgICAgICAgLy8gd2F5IHRvIHNldCB0aGUgbGVuZ3RoIHByb3BlcnR5IG9mIGEgZnVuY3Rpb24uXG4gICAgICAgIC8vIEluIGVudmlyb25tZW50cyB3aGVyZSBDb250ZW50IFNlY3VyaXR5IFBvbGljaWVzIGVuYWJsZWQgKENocm9tZSBleHRlbnNpb25zLFxuICAgICAgICAvLyBmb3IgZXguKSBhbGwgdXNlIG9mIGV2YWwgb3IgRnVuY3Rpb24gY29zdHJ1Y3RvciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICAvLyBIb3dldmVyIGluIGFsbCBvZiB0aGVzZSBlbnZpcm9ubWVudHMgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgZXhpc3RzXG4gICAgICAgIC8vIGFuZCBzbyB0aGlzIGNvZGUgd2lsbCBuZXZlciBiZSBleGVjdXRlZC5cbiAgICAgICAgdmFyIGJvdW5kID0gRnVuY3Rpb24oJ2JpbmRlcicsICdyZXR1cm4gZnVuY3Rpb24gKCcgKyBib3VuZEFyZ3Muam9pbignLCcpICsgJyl7IHJldHVybiBiaW5kZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfScpKGJpbmRlcik7XG5cbiAgICAgICAgaWYgKHRhcmdldC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIEVtcHR5LnByb3RvdHlwZSA9IHRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgICAgICBib3VuZC5wcm90b3R5cGUgPSBuZXcgRW1wdHkoKTtcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIGRhbmdsaW5nIHJlZmVyZW5jZXMuXG4gICAgICAgICAgICBFbXB0eS5wcm90b3R5cGUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ET1xuICAgICAgICAvLyAxOC4gU2V0IHRoZSBbW0V4dGVuc2libGVdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIHRvIHRydWUuXG5cbiAgICAgICAgLy8gVE9ET1xuICAgICAgICAvLyAxOS4gTGV0IHRocm93ZXIgYmUgdGhlIFtbVGhyb3dUeXBlRXJyb3JdXSBmdW5jdGlvbiBPYmplY3QgKDEzLjIuMykuXG4gICAgICAgIC8vIDIwLiBDYWxsIHRoZSBbW0RlZmluZU93blByb3BlcnR5XV0gaW50ZXJuYWwgbWV0aG9kIG9mIEYgd2l0aFxuICAgICAgICAvLyAgIGFyZ3VtZW50cyBcImNhbGxlclwiLCBQcm9wZXJ0eURlc2NyaXB0b3Ige1tbR2V0XV06IHRocm93ZXIsIFtbU2V0XV06XG4gICAgICAgIC8vICAgdGhyb3dlciwgW1tFbnVtZXJhYmxlXV06IGZhbHNlLCBbW0NvbmZpZ3VyYWJsZV1dOiBmYWxzZX0sIGFuZFxuICAgICAgICAvLyAgIGZhbHNlLlxuICAgICAgICAvLyAyMS4gQ2FsbCB0aGUgW1tEZWZpbmVPd25Qcm9wZXJ0eV1dIGludGVybmFsIG1ldGhvZCBvZiBGIHdpdGhcbiAgICAgICAgLy8gICBhcmd1bWVudHMgXCJhcmd1bWVudHNcIiwgUHJvcGVydHlEZXNjcmlwdG9yIHtbW0dldF1dOiB0aHJvd2VyLFxuICAgICAgICAvLyAgIFtbU2V0XV06IHRocm93ZXIsIFtbRW51bWVyYWJsZV1dOiBmYWxzZSwgW1tDb25maWd1cmFibGVdXTogZmFsc2V9LFxuICAgICAgICAvLyAgIGFuZCBmYWxzZS5cblxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIE5PVEUgRnVuY3Rpb24gb2JqZWN0cyBjcmVhdGVkIHVzaW5nIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGRvIG5vdFxuICAgICAgICAvLyBoYXZlIGEgcHJvdG90eXBlIHByb3BlcnR5IG9yIHRoZSBbW0NvZGVdXSwgW1tGb3JtYWxQYXJhbWV0ZXJzXV0sIGFuZFxuICAgICAgICAvLyBbW1Njb3BlXV0gaW50ZXJuYWwgcHJvcGVydGllcy5cbiAgICAgICAgLy8gWFhYIGNhbid0IGRlbGV0ZSBwcm90b3R5cGUgaW4gcHVyZS1qcy5cblxuICAgICAgICAvLyAyMi4gUmV0dXJuIEYuXG4gICAgICAgIHJldHVybiBib3VuZDtcbiAgICB9XG59KTtcblxuLy9cbi8vIEFycmF5XG4vLyA9PT09PVxuLy9cblxuLy8gRVM1IDE1LjQuMy4yXG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjMuMlxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaXNBcnJheVxuZGVmaW5lUHJvcGVydGllcyhBcnJheSwgeyBpc0FycmF5OiBpc0FycmF5IH0pO1xuXG5cbnZhciBib3hlZFN0cmluZyA9IE9iamVjdCgnYScpO1xudmFyIHNwbGl0U3RyaW5nID0gYm94ZWRTdHJpbmdbMF0gIT09ICdhJyB8fCAhKDAgaW4gYm94ZWRTdHJpbmcpO1xuXG52YXIgcHJvcGVybHlCb3hlc0NvbnRleHQgPSBmdW5jdGlvbiBwcm9wZXJseUJveGVkKG1ldGhvZCkge1xuICAgIC8vIENoZWNrIG5vZGUgMC42LjIxIGJ1ZyB3aGVyZSB0aGlyZCBwYXJhbWV0ZXIgaXMgbm90IGJveGVkXG4gICAgdmFyIHByb3Blcmx5Qm94ZXNOb25TdHJpY3QgPSB0cnVlO1xuICAgIHZhciBwcm9wZXJseUJveGVzU3RyaWN0ID0gdHJ1ZTtcbiAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgIG1ldGhvZC5jYWxsKCdmb28nLCBmdW5jdGlvbiAoXywgX18sIGNvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcpIHsgcHJvcGVybHlCb3hlc05vblN0cmljdCA9IGZhbHNlOyB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1ldGhvZC5jYWxsKFsxXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICAgICAgcHJvcGVybHlCb3hlc1N0cmljdCA9IHR5cGVvZiB0aGlzID09PSAnc3RyaW5nJztcbiAgICAgICAgfSwgJ3gnKTtcbiAgICB9XG4gICAgcmV0dXJuICEhbWV0aG9kICYmIHByb3Blcmx5Qm94ZXNOb25TdHJpY3QgJiYgcHJvcGVybHlCb3hlc1N0cmljdDtcbn07XG5cbmRlZmluZVByb3BlcnRpZXMoQXJyYXlQcm90b3R5cGUsIHtcbiAgICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGZ1biAvKiwgdGhpc3AqLykge1xuICAgICAgICB2YXIgb2JqZWN0ID0gdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBzZWxmID0gc3BsaXRTdHJpbmcgJiYgaXNTdHJpbmcodGhpcykgPyB0aGlzLnNwbGl0KCcnKSA6IG9iamVjdCxcbiAgICAgICAgICAgIHRoaXNwID0gYXJndW1lbnRzWzFdLFxuICAgICAgICAgICAgaSA9IC0xLFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgLy8gSWYgbm8gY2FsbGJhY2sgZnVuY3Rpb24gb3IgaWYgY2FsbGJhY2sgaXMgbm90IGEgY2FsbGFibGUgZnVuY3Rpb25cbiAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZ1bikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTsgLy8gVE9ETyBtZXNzYWdlXG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoKytpIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiBzZWxmKSB7XG4gICAgICAgICAgICAgICAgLy8gSW52b2tlIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aXRoIGNhbGwsIHBhc3NpbmcgYXJndW1lbnRzOlxuICAgICAgICAgICAgICAgIC8vIGNvbnRleHQsIHByb3BlcnR5IHZhbHVlLCBwcm9wZXJ0eSBrZXksIHRoaXNBcmcgb2JqZWN0XG4gICAgICAgICAgICAgICAgLy8gY29udGV4dFxuICAgICAgICAgICAgICAgIGZ1bi5jYWxsKHRoaXNwLCBzZWxmW2ldLCBpLCBvYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSwgIXByb3Blcmx5Qm94ZXNDb250ZXh0KEFycmF5UHJvdG90eXBlLmZvckVhY2gpKTtcblxuLy8gRVM1IDE1LjQuNC4xNFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC40LjE0XG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pbmRleE9mXG52YXIgaGFzRmlyZWZveDJJbmRleE9mQnVnID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YgJiYgWzAsIDFdLmluZGV4T2YoMSwgMikgIT09IC0xO1xuZGVmaW5lUHJvcGVydGllcyhBcnJheVByb3RvdHlwZSwge1xuICAgIGluZGV4T2Y6IGZ1bmN0aW9uIGluZGV4T2Yoc291Z2h0IC8qLCBmcm9tSW5kZXggKi8gKSB7XG4gICAgICAgIHZhciBzZWxmID0gc3BsaXRTdHJpbmcgJiYgaXNTdHJpbmcodGhpcykgPyB0aGlzLnNwbGl0KCcnKSA6IHRvT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgbGVuZ3RoID0gc2VsZi5sZW5ndGggPj4+IDA7XG5cbiAgICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBpID0gdG9JbnRlZ2VyKGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBoYW5kbGUgbmVnYXRpdmUgaW5kaWNlc1xuICAgICAgICBpID0gaSA+PSAwID8gaSA6IE1hdGgubWF4KDAsIGxlbmd0aCArIGkpO1xuICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSBpbiBzZWxmICYmIHNlbGZbaV0gPT09IHNvdWdodCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG59LCBoYXNGaXJlZm94MkluZGV4T2ZCdWcpO1xuXG4vL1xuLy8gU3RyaW5nXG4vLyA9PT09PT1cbi8vXG5cbi8vIEVTNSAxNS41LjQuMTRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjUuNC4xNFxuXG4vLyBbYnVnZml4LCBJRSBsdCA5LCBmaXJlZm94IDQsIEtvbnF1ZXJvciwgT3BlcmEsIG9ic2N1cmUgYnJvd3NlcnNdXG4vLyBNYW55IGJyb3dzZXJzIGRvIG5vdCBzcGxpdCBwcm9wZXJseSB3aXRoIHJlZ3VsYXIgZXhwcmVzc2lvbnMgb3IgdGhleVxuLy8gZG8gbm90IHBlcmZvcm0gdGhlIHNwbGl0IGNvcnJlY3RseSB1bmRlciBvYnNjdXJlIGNvbmRpdGlvbnMuXG4vLyBTZWUgaHR0cDovL2Jsb2cuc3RldmVubGV2aXRoYW4uY29tL2FyY2hpdmVzL2Nyb3NzLWJyb3dzZXItc3BsaXRcbi8vIEkndmUgdGVzdGVkIGluIG1hbnkgYnJvd3NlcnMgYW5kIHRoaXMgc2VlbXMgdG8gY292ZXIgdGhlIGRldmlhbnQgb25lczpcbi8vICAgICdhYicuc3BsaXQoLyg/OmFiKSovKSBzaG91bGQgYmUgW1wiXCIsIFwiXCJdLCBub3QgW1wiXCJdXG4vLyAgICAnLicuc3BsaXQoLyguPykoLj8pLykgc2hvdWxkIGJlIFtcIlwiLCBcIi5cIiwgXCJcIiwgXCJcIl0sIG5vdCBbXCJcIiwgXCJcIl1cbi8vICAgICd0ZXNzdCcuc3BsaXQoLyhzKSovKSBzaG91bGQgYmUgW1widFwiLCB1bmRlZmluZWQsIFwiZVwiLCBcInNcIiwgXCJ0XCJdLCBub3Rcbi8vICAgICAgIFt1bmRlZmluZWQsIFwidFwiLCB1bmRlZmluZWQsIFwiZVwiLCAuLi5dXG4vLyAgICAnJy5zcGxpdCgvLj8vKSBzaG91bGQgYmUgW10sIG5vdCBbXCJcIl1cbi8vICAgICcuJy5zcGxpdCgvKCkoKS8pIHNob3VsZCBiZSBbXCIuXCJdLCBub3QgW1wiXCIsIFwiXCIsIFwiLlwiXVxuXG52YXIgc3RyaW5nX3NwbGl0ID0gU3RyaW5nUHJvdG90eXBlLnNwbGl0O1xuaWYgKFxuICAgICdhYicuc3BsaXQoLyg/OmFiKSovKS5sZW5ndGggIT09IDIgfHxcbiAgICAnLicuc3BsaXQoLyguPykoLj8pLykubGVuZ3RoICE9PSA0IHx8XG4gICAgJ3Rlc3N0Jy5zcGxpdCgvKHMpKi8pWzFdID09PSAndCcgfHxcbiAgICAndGVzdCcuc3BsaXQoLyg/OikvLCAtMSkubGVuZ3RoICE9PSA0IHx8XG4gICAgJycuc3BsaXQoLy4/LykubGVuZ3RoIHx8XG4gICAgJy4nLnNwbGl0KC8oKSgpLykubGVuZ3RoID4gMVxuKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbXBsaWFudEV4ZWNOcGNnID0gLygpPz8vLmV4ZWMoJycpWzFdID09PSB2b2lkIDA7IC8vIE5QQ0c6IG5vbnBhcnRpY2lwYXRpbmcgY2FwdHVyaW5nIGdyb3VwXG5cbiAgICAgICAgU3RyaW5nUHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gKHNlcGFyYXRvciwgbGltaXQpIHtcbiAgICAgICAgICAgIHZhciBzdHJpbmcgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHNlcGFyYXRvciA9PT0gdm9pZCAwICYmIGxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiBgc2VwYXJhdG9yYCBpcyBub3QgYSByZWdleCwgdXNlIG5hdGl2ZSBzcGxpdFxuICAgICAgICAgICAgaWYgKF90b1N0cmluZy5jYWxsKHNlcGFyYXRvcikgIT09ICdbb2JqZWN0IFJlZ0V4cF0nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZ19zcGxpdC5jYWxsKHRoaXMsIHNlcGFyYXRvciwgbGltaXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gW10sXG4gICAgICAgICAgICAgICAgZmxhZ3MgPSAoc2VwYXJhdG9yLmlnbm9yZUNhc2UgPyAnaScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5tdWx0aWxpbmUgID8gJ20nIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXBhcmF0b3IuZXh0ZW5kZWQgICA/ICd4JyA6ICcnKSArIC8vIFByb3Bvc2VkIGZvciBFUzZcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXBhcmF0b3Iuc3RpY2t5ICAgICA/ICd5JyA6ICcnKSwgLy8gRmlyZWZveCAzK1xuICAgICAgICAgICAgICAgIGxhc3RMYXN0SW5kZXggPSAwLFxuICAgICAgICAgICAgICAgIC8vIE1ha2UgYGdsb2JhbGAgYW5kIGF2b2lkIGBsYXN0SW5kZXhgIGlzc3VlcyBieSB3b3JraW5nIHdpdGggYSBjb3B5XG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yMiwgbWF0Y2gsIGxhc3RJbmRleCwgbGFzdExlbmd0aDtcbiAgICAgICAgICAgIHNlcGFyYXRvciA9IG5ldyBSZWdFeHAoc2VwYXJhdG9yLnNvdXJjZSwgZmxhZ3MgKyAnZycpO1xuICAgICAgICAgICAgc3RyaW5nICs9ICcnOyAvLyBUeXBlLWNvbnZlcnRcbiAgICAgICAgICAgIGlmICghY29tcGxpYW50RXhlY05wY2cpIHtcbiAgICAgICAgICAgICAgICAvLyBEb2Vzbid0IG5lZWQgZmxhZ3MgZ3ksIGJ1dCB0aGV5IGRvbid0IGh1cnRcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3IyID0gbmV3IFJlZ0V4cCgnXicgKyBzZXBhcmF0b3Iuc291cmNlICsgJyQoPyFcXFxccyknLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBWYWx1ZXMgZm9yIGBsaW1pdGAsIHBlciB0aGUgc3BlYzpcbiAgICAgICAgICAgICAqIElmIHVuZGVmaW5lZDogNDI5NDk2NzI5NSAvLyBNYXRoLnBvdygyLCAzMikgLSAxXG4gICAgICAgICAgICAgKiBJZiAwLCBJbmZpbml0eSwgb3IgTmFOOiAwXG4gICAgICAgICAgICAgKiBJZiBwb3NpdGl2ZSBudW1iZXI6IGxpbWl0ID0gTWF0aC5mbG9vcihsaW1pdCk7IGlmIChsaW1pdCA+IDQyOTQ5NjcyOTUpIGxpbWl0IC09IDQyOTQ5NjcyOTY7XG4gICAgICAgICAgICAgKiBJZiBuZWdhdGl2ZSBudW1iZXI6IDQyOTQ5NjcyOTYgLSBNYXRoLmZsb29yKE1hdGguYWJzKGxpbWl0KSlcbiAgICAgICAgICAgICAqIElmIG90aGVyOiBUeXBlLWNvbnZlcnQsIHRoZW4gdXNlIHRoZSBhYm92ZSBydWxlc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsaW1pdCA9IGxpbWl0ID09PSB2b2lkIDAgP1xuICAgICAgICAgICAgICAgIC0xID4+PiAwIDogLy8gTWF0aC5wb3coMiwgMzIpIC0gMVxuICAgICAgICAgICAgICAgIFRvVWludDMyKGxpbWl0KTtcbiAgICAgICAgICAgIHdoaWxlIChtYXRjaCA9IHNlcGFyYXRvci5leGVjKHN0cmluZykpIHtcbiAgICAgICAgICAgICAgICAvLyBgc2VwYXJhdG9yLmxhc3RJbmRleGAgaXMgbm90IHJlbGlhYmxlIGNyb3NzLWJyb3dzZXJcbiAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdEluZGV4ID4gbGFzdExhc3RJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChzdHJpbmcuc2xpY2UobGFzdExhc3RJbmRleCwgbWF0Y2guaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRml4IGJyb3dzZXJzIHdob3NlIGBleGVjYCBtZXRob2RzIGRvbid0IGNvbnNpc3RlbnRseSByZXR1cm4gYHVuZGVmaW5lZGAgZm9yXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vbnBhcnRpY2lwYXRpbmcgY2FwdHVyaW5nIGdyb3Vwc1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbXBsaWFudEV4ZWNOcGNnICYmIG1hdGNoLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzBdLnJlcGxhY2Uoc2VwYXJhdG9yMiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAtIDI7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzW2ldID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoW2ldID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoLmxlbmd0aCA+IDEgJiYgbWF0Y2guaW5kZXggPCBzdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheVByb3RvdHlwZS5wdXNoLmFwcGx5KG91dHB1dCwgbWF0Y2guc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxhc3RMZW5ndGggPSBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RMYXN0SW5kZXggPSBsYXN0SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXQubGVuZ3RoID49IGxpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VwYXJhdG9yLmxhc3RJbmRleCA9PT0gbWF0Y2guaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VwYXJhdG9yLmxhc3RJbmRleCsrOyAvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxhc3RMYXN0SW5kZXggPT09IHN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFzdExlbmd0aCB8fCAhc2VwYXJhdG9yLnRlc3QoJycpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKHN0cmluZy5zbGljZShsYXN0TGFzdEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0Lmxlbmd0aCA+IGxpbWl0ID8gb3V0cHV0LnNsaWNlKDAsIGxpbWl0KSA6IG91dHB1dDtcbiAgICAgICAgfTtcbiAgICB9KCkpO1xuXG4vLyBbYnVnZml4LCBjaHJvbWVdXG4vLyBJZiBzZXBhcmF0b3IgaXMgdW5kZWZpbmVkLCB0aGVuIHRoZSByZXN1bHQgYXJyYXkgY29udGFpbnMganVzdCBvbmUgU3RyaW5nLFxuLy8gd2hpY2ggaXMgdGhlIHRoaXMgdmFsdWUgKGNvbnZlcnRlZCB0byBhIFN0cmluZykuIElmIGxpbWl0IGlzIG5vdCB1bmRlZmluZWQsXG4vLyB0aGVuIHRoZSBvdXRwdXQgYXJyYXkgaXMgdHJ1bmNhdGVkIHNvIHRoYXQgaXQgY29udGFpbnMgbm8gbW9yZSB0aGFuIGxpbWl0XG4vLyBlbGVtZW50cy5cbi8vIFwiMFwiLnNwbGl0KHVuZGVmaW5lZCwgMCkgLT4gW11cbn0gZWxzZSBpZiAoJzAnLnNwbGl0KHZvaWQgMCwgMCkubGVuZ3RoKSB7XG4gICAgU3RyaW5nUHJvdG90eXBlLnNwbGl0ID0gZnVuY3Rpb24gc3BsaXQoc2VwYXJhdG9yLCBsaW1pdCkge1xuICAgICAgICBpZiAoc2VwYXJhdG9yID09PSB2b2lkIDAgJiYgbGltaXQgPT09IDApIHsgcmV0dXJuIFtdOyB9XG4gICAgICAgIHJldHVybiBzdHJpbmdfc3BsaXQuY2FsbCh0aGlzLCBzZXBhcmF0b3IsIGxpbWl0KTtcbiAgICB9O1xufVxuXG4vLyBFUzUgMTUuNS40LjIwXG4vLyB3aGl0ZXNwYWNlIGZyb206IGh0dHA6Ly9lczUuZ2l0aHViLmlvLyN4MTUuNS40LjIwXG52YXIgd3MgPSAnXFx4MDlcXHgwQVxceDBCXFx4MENcXHgwRFxceDIwXFx4QTBcXHUxNjgwXFx1MTgwRVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDMnICtcbiAgICAnXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwQVxcdTIwMkZcXHUyMDVGXFx1MzAwMFxcdTIwMjgnICtcbiAgICAnXFx1MjAyOVxcdUZFRkYnO1xudmFyIHplcm9XaWR0aCA9ICdcXHUyMDBiJztcbnZhciB3c1JlZ2V4Q2hhcnMgPSAnWycgKyB3cyArICddJztcbnZhciB0cmltQmVnaW5SZWdleHAgPSBuZXcgUmVnRXhwKCdeJyArIHdzUmVnZXhDaGFycyArIHdzUmVnZXhDaGFycyArICcqJyk7XG52YXIgdHJpbUVuZFJlZ2V4cCA9IG5ldyBSZWdFeHAod3NSZWdleENoYXJzICsgd3NSZWdleENoYXJzICsgJyokJyk7XG52YXIgaGFzVHJpbVdoaXRlc3BhY2VCdWcgPSBTdHJpbmdQcm90b3R5cGUudHJpbSAmJiAod3MudHJpbSgpIHx8ICF6ZXJvV2lkdGgudHJpbSgpKTtcbmRlZmluZVByb3BlcnRpZXMoU3RyaW5nUHJvdG90eXBlLCB7XG4gICAgLy8gaHR0cDovL2Jsb2cuc3RldmVubGV2aXRoYW4uY29tL2FyY2hpdmVzL2Zhc3Rlci10cmltLWphdmFzY3JpcHRcbiAgICAvLyBodHRwOi8vcGVyZmVjdGlvbmtpbGxzLmNvbS93aGl0ZXNwYWNlLWRldmlhdGlvbnMvXG4gICAgdHJpbTogZnVuY3Rpb24gdHJpbSgpIHtcbiAgICAgICAgaWYgKHRoaXMgPT09IHZvaWQgMCB8fCB0aGlzID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FuJ3QgY29udmVydCBcIiArIHRoaXMgKyAnIHRvIG9iamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTdHJpbmcodGhpcykucmVwbGFjZSh0cmltQmVnaW5SZWdleHAsICcnKS5yZXBsYWNlKHRyaW1FbmRSZWdleHAsICcnKTtcbiAgICB9XG59LCBoYXNUcmltV2hpdGVzcGFjZUJ1Zyk7XG5cbi8vIEVDTUEtMjYyLCAzcmQgQi4yLjNcbi8vIE5vdCBhbiBFQ01BU2NyaXB0IHN0YW5kYXJkLCBhbHRob3VnaCBFQ01BU2NyaXB0IDNyZCBFZGl0aW9uIGhhcyBhXG4vLyBub24tbm9ybWF0aXZlIHNlY3Rpb24gc3VnZ2VzdGluZyB1bmlmb3JtIHNlbWFudGljcyBhbmQgaXQgc2hvdWxkIGJlXG4vLyBub3JtYWxpemVkIGFjcm9zcyBhbGwgYnJvd3NlcnNcbi8vIFtidWdmaXgsIElFIGx0IDldIElFIDwgOSBzdWJzdHIoKSB3aXRoIG5lZ2F0aXZlIHZhbHVlIG5vdCB3b3JraW5nIGluIElFXG52YXIgc3RyaW5nX3N1YnN0ciA9IFN0cmluZ1Byb3RvdHlwZS5zdWJzdHI7XG52YXIgaGFzTmVnYXRpdmVTdWJzdHJCdWcgPSAnJy5zdWJzdHIgJiYgJzBiJy5zdWJzdHIoLTEpICE9PSAnYic7XG5kZWZpbmVQcm9wZXJ0aWVzKFN0cmluZ1Byb3RvdHlwZSwge1xuICAgIHN1YnN0cjogZnVuY3Rpb24gc3Vic3RyKHN0YXJ0LCBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ19zdWJzdHIuY2FsbChcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBzdGFydCA8IDAgPyAoKHN0YXJ0ID0gdGhpcy5sZW5ndGggKyBzdGFydCkgPCAwID8gMCA6IHN0YXJ0KSA6IHN0YXJ0LFxuICAgICAgICAgICAgbGVuZ3RoXG4gICAgICAgICk7XG4gICAgfVxufSwgaGFzTmVnYXRpdmVTdWJzdHJCdWcpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvc2hpbXMuanNcbiAqKiBtb2R1bGUgaWQgPSA0OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFtcbiAgLy8gc3RyZWFtaW5nIHRyYW5zcG9ydHNcbiAgcmVxdWlyZSgnLi90cmFuc3BvcnQvd2Vic29ja2V0JylcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQveGhyLXN0cmVhbWluZycpXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L3hkci1zdHJlYW1pbmcnKVxuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC9ldmVudHNvdXJjZScpXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L2xpYi9pZnJhbWUtd3JhcCcpKHJlcXVpcmUoJy4vdHJhbnNwb3J0L2V2ZW50c291cmNlJykpXG5cbiAgLy8gcG9sbGluZyB0cmFuc3BvcnRzXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L2h0bWxmaWxlJylcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQvbGliL2lmcmFtZS13cmFwJykocmVxdWlyZSgnLi90cmFuc3BvcnQvaHRtbGZpbGUnKSlcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQveGhyLXBvbGxpbmcnKVxuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC94ZHItcG9sbGluZycpXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L2xpYi9pZnJhbWUtd3JhcCcpKHJlcXVpcmUoJy4vdHJhbnNwb3J0L3hoci1wb2xsaW5nJykpXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L2pzb25wLXBvbGxpbmcnKVxuXTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC1saXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLldlYlNvY2tldCB8fCBnbG9iYWwuTW96V2ViU29ja2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2Jyb3dzZXIvd2Vic29ja2V0LmpzXG4gKiogbW9kdWxlIGlkID0gNTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuLy8gVGhlIHNpbXBsZXN0IGFuZCBtb3N0IHJvYnVzdCB0cmFuc3BvcnQsIHVzaW5nIHRoZSB3ZWxsLWtub3cgY3Jvc3Ncbi8vIGRvbWFpbiBoYWNrIC0gSlNPTlAuIFRoaXMgdHJhbnNwb3J0IGlzIHF1aXRlIGluZWZmaWNpZW50IC0gb25lXG4vLyBtZXNzYWdlIGNvdWxkIHVzZSB1cCB0byBvbmUgaHR0cCByZXF1ZXN0LiBCdXQgYXQgbGVhc3QgaXQgd29ya3MgYWxtb3N0XG4vLyBldmVyeXdoZXJlLlxuLy8gS25vd24gbGltaXRhdGlvbnM6XG4vLyAgIG8geW91IHdpbGwgZ2V0IGEgc3Bpbm5pbmcgY3Vyc29yXG4vLyAgIG8gZm9yIEtvbnF1ZXJvciBhIGR1bWIgdGltZXIgaXMgbmVlZGVkIHRvIGRldGVjdCBlcnJvcnNcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIFNlbmRlclJlY2VpdmVyID0gcmVxdWlyZSgnLi9saWIvc2VuZGVyLXJlY2VpdmVyJylcbiAgLCBKc29ucFJlY2VpdmVyID0gcmVxdWlyZSgnLi9yZWNlaXZlci9qc29ucCcpXG4gICwganNvbnBTZW5kZXIgPSByZXF1aXJlKCcuL3NlbmRlci9qc29ucCcpXG4gIDtcblxuZnVuY3Rpb24gSnNvblBUcmFuc3BvcnQodHJhbnNVcmwpIHtcbiAgaWYgKCFKc29uUFRyYW5zcG9ydC5lbmFibGVkKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBjcmVhdGVkIHdoZW4gZGlzYWJsZWQnKTtcbiAgfVxuICBTZW5kZXJSZWNlaXZlci5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL2pzb25wJywganNvbnBTZW5kZXIsIEpzb25wUmVjZWl2ZXIpO1xufVxuXG5pbmhlcml0cyhKc29uUFRyYW5zcG9ydCwgU2VuZGVyUmVjZWl2ZXIpO1xuXG5Kc29uUFRyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAhIWdsb2JhbC5kb2N1bWVudDtcbn07XG5cbkpzb25QVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUgPSAnanNvbnAtcG9sbGluZyc7XG5Kc29uUFRyYW5zcG9ydC5yb3VuZFRyaXBzID0gMTtcbkpzb25QVHJhbnNwb3J0Lm5lZWRCb2R5ID0gdHJ1ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBKc29uUFRyYW5zcG9ydDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9qc29ucC1wb2xsaW5nLmpzXG4gKiogbW9kdWxlIGlkID0gNTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6YnVmZmVyZWQtc2VuZGVyJyk7XG59XG5cbmZ1bmN0aW9uIEJ1ZmZlcmVkU2VuZGVyKHVybCwgc2VuZGVyKSB7XG4gIGRlYnVnKHVybCk7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuICB0aGlzLnNlbmRCdWZmZXIgPSBbXTtcbiAgdGhpcy5zZW5kZXIgPSBzZW5kZXI7XG4gIHRoaXMudXJsID0gdXJsO1xufVxuXG5pbmhlcml0cyhCdWZmZXJlZFNlbmRlciwgRXZlbnRFbWl0dGVyKTtcblxuQnVmZmVyZWRTZW5kZXIucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gIGRlYnVnKCdzZW5kJywgbWVzc2FnZSk7XG4gIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKG1lc3NhZ2UpO1xuICBpZiAoIXRoaXMuc2VuZFN0b3ApIHtcbiAgICB0aGlzLnNlbmRTY2hlZHVsZSgpO1xuICB9XG59O1xuXG4vLyBGb3IgcG9sbGluZyB0cmFuc3BvcnRzIGluIGEgc2l0dWF0aW9uIHdoZW4gaW4gdGhlIG1lc3NhZ2UgY2FsbGJhY2ssXG4vLyBuZXcgbWVzc2FnZSBpcyBiZWluZyBzZW5kLiBJZiB0aGUgc2VuZGluZyBjb25uZWN0aW9uIHdhcyBzdGFydGVkXG4vLyBiZWZvcmUgcmVjZWl2aW5nIG9uZSwgaXQgaXMgcG9zc2libGUgdG8gc2F0dXJhdGUgdGhlIG5ldHdvcmsgYW5kXG4vLyB0aW1lb3V0IGR1ZSB0byB0aGUgbGFjayBvZiByZWNlaXZpbmcgc29ja2V0LiBUbyBhdm9pZCB0aGF0IHdlIGRlbGF5XG4vLyBzZW5kaW5nIG1lc3NhZ2VzIGJ5IHNvbWUgc21hbGwgdGltZSwgaW4gb3JkZXIgdG8gbGV0IHJlY2VpdmluZ1xuLy8gY29ubmVjdGlvbiBiZSBzdGFydGVkIGJlZm9yZWhhbmQuIFRoaXMgaXMgb25seSBhIGhhbGZtZWFzdXJlIGFuZFxuLy8gZG9lcyBub3QgZml4IHRoZSBiaWcgcHJvYmxlbSwgYnV0IGl0IGRvZXMgbWFrZSB0aGUgdGVzdHMgZ28gbW9yZVxuLy8gc3RhYmxlIG9uIHNsb3cgbmV0d29ya3MuXG5CdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuc2VuZFNjaGVkdWxlV2FpdCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1Zygnc2VuZFNjaGVkdWxlV2FpdCcpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB0cmVmO1xuICB0aGlzLnNlbmRTdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3NlbmRTdG9wJyk7XG4gICAgc2VsZi5zZW5kU3RvcCA9IG51bGw7XG4gICAgY2xlYXJUaW1lb3V0KHRyZWYpO1xuICB9O1xuICB0cmVmID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBkZWJ1ZygndGltZW91dCcpO1xuICAgIHNlbGYuc2VuZFN0b3AgPSBudWxsO1xuICAgIHNlbGYuc2VuZFNjaGVkdWxlKCk7XG4gIH0sIDI1KTtcbn07XG5cbkJ1ZmZlcmVkU2VuZGVyLnByb3RvdHlwZS5zZW5kU2NoZWR1bGUgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ3NlbmRTY2hlZHVsZScsIHRoaXMuc2VuZEJ1ZmZlci5sZW5ndGgpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGlmICh0aGlzLnNlbmRCdWZmZXIubGVuZ3RoID4gMCkge1xuICAgIHZhciBwYXlsb2FkID0gJ1snICsgdGhpcy5zZW5kQnVmZmVyLmpvaW4oJywnKSArICddJztcbiAgICB0aGlzLnNlbmRTdG9wID0gdGhpcy5zZW5kZXIodGhpcy51cmwsIHBheWxvYWQsIGZ1bmN0aW9uKGVycikge1xuICAgICAgc2VsZi5zZW5kU3RvcCA9IG51bGw7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGRlYnVnKCdlcnJvcicsIGVycik7XG4gICAgICAgIHNlbGYuZW1pdCgnY2xvc2UnLCBlcnIuY29kZSB8fCAxMDA2LCAnU2VuZGluZyBlcnJvcjogJyArIGVycik7XG4gICAgICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuc2VuZFNjaGVkdWxlV2FpdCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICB9XG59O1xuXG5CdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ19jbGVhbnVwJyk7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5CdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1Zygnc3RvcCcpO1xuICB0aGlzLl9jbGVhbnVwKCk7XG4gIGlmICh0aGlzLnNlbmRTdG9wKSB7XG4gICAgdGhpcy5zZW5kU3RvcCgpO1xuICAgIHRoaXMuc2VuZFN0b3AgPSBudWxsO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1ZmZlcmVkU2VuZGVyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L2xpYi9idWZmZXJlZC1zZW5kZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpwb2xsaW5nJyk7XG59XG5cbmZ1bmN0aW9uIFBvbGxpbmcoUmVjZWl2ZXIsIHJlY2VpdmVVcmwsIEFqYXhPYmplY3QpIHtcbiAgZGVidWcocmVjZWl2ZVVybCk7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuICB0aGlzLlJlY2VpdmVyID0gUmVjZWl2ZXI7XG4gIHRoaXMucmVjZWl2ZVVybCA9IHJlY2VpdmVVcmw7XG4gIHRoaXMuQWpheE9iamVjdCA9IEFqYXhPYmplY3Q7XG4gIHRoaXMuX3NjaGVkdWxlUmVjZWl2ZXIoKTtcbn1cblxuaW5oZXJpdHMoUG9sbGluZywgRXZlbnRFbWl0dGVyKTtcblxuUG9sbGluZy5wcm90b3R5cGUuX3NjaGVkdWxlUmVjZWl2ZXIgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ19zY2hlZHVsZVJlY2VpdmVyJyk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHBvbGwgPSB0aGlzLnBvbGwgPSBuZXcgdGhpcy5SZWNlaXZlcih0aGlzLnJlY2VpdmVVcmwsIHRoaXMuQWpheE9iamVjdCk7XG5cbiAgcG9sbC5vbignbWVzc2FnZScsIGZ1bmN0aW9uKG1zZykge1xuICAgIGRlYnVnKCdtZXNzYWdlJywgbXNnKTtcbiAgICBzZWxmLmVtaXQoJ21lc3NhZ2UnLCBtc2cpO1xuICB9KTtcblxuICBwb2xsLm9uY2UoJ2Nsb3NlJywgZnVuY3Rpb24oY29kZSwgcmVhc29uKSB7XG4gICAgZGVidWcoJ2Nsb3NlJywgY29kZSwgcmVhc29uLCBzZWxmLnBvbGxJc0Nsb3NpbmcpO1xuICAgIHNlbGYucG9sbCA9IHBvbGwgPSBudWxsO1xuXG4gICAgaWYgKCFzZWxmLnBvbGxJc0Nsb3NpbmcpIHtcbiAgICAgIGlmIChyZWFzb24gPT09ICduZXR3b3JrJykge1xuICAgICAgICBzZWxmLl9zY2hlZHVsZVJlY2VpdmVyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgY29kZSB8fCAxMDA2LCByZWFzb24pO1xuICAgICAgICBzZWxmLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG5Qb2xsaW5nLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnYWJvcnQnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgdGhpcy5wb2xsSXNDbG9zaW5nID0gdHJ1ZTtcbiAgaWYgKHRoaXMucG9sbCkge1xuICAgIHRoaXMucG9sbC5hYm9ydCgpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvbGxpbmc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvbGliL3BvbGxpbmcuanNcbiAqKiBtb2R1bGUgaWQgPSA1M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gICwgRXZlbnRTb3VyY2VEcml2ZXIgPSByZXF1aXJlKCdldmVudHNvdXJjZScpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpyZWNlaXZlcjpldmVudHNvdXJjZScpO1xufVxuXG5mdW5jdGlvbiBFdmVudFNvdXJjZVJlY2VpdmVyKHVybCkge1xuICBkZWJ1Zyh1cmwpO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBlcyA9IHRoaXMuZXMgPSBuZXcgRXZlbnRTb3VyY2VEcml2ZXIodXJsKTtcbiAgZXMub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuICAgIGRlYnVnKCdtZXNzYWdlJywgZS5kYXRhKTtcbiAgICBzZWxmLmVtaXQoJ21lc3NhZ2UnLCBkZWNvZGVVUkkoZS5kYXRhKSk7XG4gIH07XG4gIGVzLm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XG4gICAgZGVidWcoJ2Vycm9yJywgZXMucmVhZHlTdGF0ZSwgZSk7XG4gICAgLy8gRVMgb24gcmVjb25uZWN0aW9uIGhhcyByZWFkeVN0YXRlID0gMCBvciAxLlxuICAgIC8vIG9uIG5ldHdvcmsgZXJyb3IgaXQncyBDTE9TRUQgPSAyXG4gICAgdmFyIHJlYXNvbiA9IChlcy5yZWFkeVN0YXRlICE9PSAyID8gJ25ldHdvcmsnIDogJ3Blcm1hbmVudCcpO1xuICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgICBzZWxmLl9jbG9zZShyZWFzb24pO1xuICB9O1xufVxuXG5pbmhlcml0cyhFdmVudFNvdXJjZVJlY2VpdmVyLCBFdmVudEVtaXR0ZXIpO1xuXG5FdmVudFNvdXJjZVJlY2VpdmVyLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnYWJvcnQnKTtcbiAgdGhpcy5fY2xlYW51cCgpO1xuICB0aGlzLl9jbG9zZSgndXNlcicpO1xufTtcblxuRXZlbnRTb3VyY2VSZWNlaXZlci5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2NsZWFudXAnKTtcbiAgdmFyIGVzID0gdGhpcy5lcztcbiAgaWYgKGVzKSB7XG4gICAgZXMub25tZXNzYWdlID0gZXMub25lcnJvciA9IG51bGw7XG4gICAgZXMuY2xvc2UoKTtcbiAgICB0aGlzLmVzID0gbnVsbDtcbiAgfVxufTtcblxuRXZlbnRTb3VyY2VSZWNlaXZlci5wcm90b3R5cGUuX2Nsb3NlID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gIGRlYnVnKCdjbG9zZScsIHJlYXNvbik7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgLy8gU2FmYXJpIGFuZCBjaHJvbWUgPCAxNSBjcmFzaCBpZiB3ZSBjbG9zZSB3aW5kb3cgYmVmb3JlXG4gIC8vIHdhaXRpbmcgZm9yIEVTIGNsZWFudXAuIFNlZTpcbiAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTg5MTU1XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgc2VsZi5lbWl0KCdjbG9zZScsIG51bGwsIHJlYXNvbik7XG4gICAgc2VsZi5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfSwgMjAwKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRTb3VyY2VSZWNlaXZlcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9yZWNlaXZlci9ldmVudHNvdXJjZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBpZnJhbWVVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2lmcmFtZScpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91cmwnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIHJhbmRvbSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3JhbmRvbScpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpyZWNlaXZlcjpodG1sZmlsZScpO1xufVxuXG5mdW5jdGlvbiBIdG1sZmlsZVJlY2VpdmVyKHVybCkge1xuICBkZWJ1Zyh1cmwpO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZnJhbWVVdGlscy5wb2xsdXRlR2xvYmFsTmFtZXNwYWNlKCk7XG5cbiAgdGhpcy5pZCA9ICdhJyArIHJhbmRvbS5zdHJpbmcoNik7XG4gIHVybCA9IHVybFV0aWxzLmFkZFF1ZXJ5KHVybCwgJ2M9JyArIGRlY29kZVVSSUNvbXBvbmVudChpZnJhbWVVdGlscy5XUHJlZml4ICsgJy4nICsgdGhpcy5pZCkpO1xuXG4gIGRlYnVnKCd1c2luZyBodG1sZmlsZScsIEh0bWxmaWxlUmVjZWl2ZXIuaHRtbGZpbGVFbmFibGVkKTtcbiAgdmFyIGNvbnN0cnVjdEZ1bmMgPSBIdG1sZmlsZVJlY2VpdmVyLmh0bWxmaWxlRW5hYmxlZCA/XG4gICAgICBpZnJhbWVVdGlscy5jcmVhdGVIdG1sZmlsZSA6IGlmcmFtZVV0aWxzLmNyZWF0ZUlmcmFtZTtcblxuICBnbG9iYWxbaWZyYW1lVXRpbHMuV1ByZWZpeF1bdGhpcy5pZF0gPSB7XG4gICAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgZGVidWcoJ3N0YXJ0Jyk7XG4gICAgICBzZWxmLmlmcmFtZU9iai5sb2FkZWQoKTtcbiAgICB9XG4gICwgbWVzc2FnZTogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgZGVidWcoJ21lc3NhZ2UnLCBkYXRhKTtcbiAgICAgIHNlbGYuZW1pdCgnbWVzc2FnZScsIGRhdGEpO1xuICAgIH1cbiAgLCBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdzdG9wJyk7XG4gICAgICBzZWxmLl9jbGVhbnVwKCk7XG4gICAgICBzZWxmLl9jbG9zZSgnbmV0d29yaycpO1xuICAgIH1cbiAgfTtcbiAgdGhpcy5pZnJhbWVPYmogPSBjb25zdHJ1Y3RGdW5jKHVybCwgZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ2NhbGxiYWNrJyk7XG4gICAgc2VsZi5fY2xlYW51cCgpO1xuICAgIHNlbGYuX2Nsb3NlKCdwZXJtYW5lbnQnKTtcbiAgfSk7XG59XG5cbmluaGVyaXRzKEh0bWxmaWxlUmVjZWl2ZXIsIEV2ZW50RW1pdHRlcik7XG5cbkh0bWxmaWxlUmVjZWl2ZXIucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdhYm9ydCcpO1xuICB0aGlzLl9jbGVhbnVwKCk7XG4gIHRoaXMuX2Nsb3NlKCd1c2VyJyk7XG59O1xuXG5IdG1sZmlsZVJlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX2NsZWFudXAnKTtcbiAgaWYgKHRoaXMuaWZyYW1lT2JqKSB7XG4gICAgdGhpcy5pZnJhbWVPYmouY2xlYW51cCgpO1xuICAgIHRoaXMuaWZyYW1lT2JqID0gbnVsbDtcbiAgfVxuICBkZWxldGUgZ2xvYmFsW2lmcmFtZVV0aWxzLldQcmVmaXhdW3RoaXMuaWRdO1xufTtcblxuSHRtbGZpbGVSZWNlaXZlci5wcm90b3R5cGUuX2Nsb3NlID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gIGRlYnVnKCdfY2xvc2UnLCByZWFzb24pO1xuICB0aGlzLmVtaXQoJ2Nsb3NlJywgbnVsbCwgcmVhc29uKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cbkh0bWxmaWxlUmVjZWl2ZXIuaHRtbGZpbGVFbmFibGVkID0gZmFsc2U7XG5cbi8vIG9iZnVzY2F0ZSB0byBhdm9pZCBmaXJld2FsbHNcbnZhciBheG8gPSBbJ0FjdGl2ZSddLmNvbmNhdCgnT2JqZWN0Jykuam9pbignWCcpO1xuaWYgKGF4byBpbiBnbG9iYWwpIHtcbiAgdHJ5IHtcbiAgICBIdG1sZmlsZVJlY2VpdmVyLmh0bWxmaWxlRW5hYmxlZCA9ICEhbmV3IGdsb2JhbFtheG9dKCdodG1sZmlsZScpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICB9XG59XG5cbkh0bWxmaWxlUmVjZWl2ZXIuZW5hYmxlZCA9IEh0bWxmaWxlUmVjZWl2ZXIuaHRtbGZpbGVFbmFibGVkIHx8IGlmcmFtZVV0aWxzLmlmcmFtZUVuYWJsZWQ7XG5cbm1vZHVsZS5leHBvcnRzID0gSHRtbGZpbGVSZWNlaXZlcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9yZWNlaXZlci9odG1sZmlsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDU1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2lmcmFtZScpXG4gICwgcmFuZG9tID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvcmFuZG9tJylcbiAgLCBicm93c2VyID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvYnJvd3NlcicpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91cmwnKVxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6cmVjZWl2ZXI6anNvbnAnKTtcbn1cblxuZnVuY3Rpb24gSnNvbnBSZWNlaXZlcih1cmwpIHtcbiAgZGVidWcodXJsKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICB1dGlscy5wb2xsdXRlR2xvYmFsTmFtZXNwYWNlKCk7XG5cbiAgdGhpcy5pZCA9ICdhJyArIHJhbmRvbS5zdHJpbmcoNik7XG4gIHZhciB1cmxXaXRoSWQgPSB1cmxVdGlscy5hZGRRdWVyeSh1cmwsICdjPScgKyBlbmNvZGVVUklDb21wb25lbnQodXRpbHMuV1ByZWZpeCArICcuJyArIHRoaXMuaWQpKTtcblxuICBnbG9iYWxbdXRpbHMuV1ByZWZpeF1bdGhpcy5pZF0gPSB0aGlzLl9jYWxsYmFjay5iaW5kKHRoaXMpO1xuICB0aGlzLl9jcmVhdGVTY3JpcHQodXJsV2l0aElkKTtcblxuICAvLyBGYWxsYmFjayBtb3N0bHkgZm9yIEtvbnF1ZXJvciAtIHN0dXBpZCB0aW1lciwgMzUgc2Vjb25kcyBzaGFsbCBiZSBwbGVudHkuXG4gIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBkZWJ1ZygndGltZW91dCcpO1xuICAgIHNlbGYuX2Fib3J0KG5ldyBFcnJvcignSlNPTlAgc2NyaXB0IGxvYWRlZCBhYm5vcm1hbGx5ICh0aW1lb3V0KScpKTtcbiAgfSwgSnNvbnBSZWNlaXZlci50aW1lb3V0KTtcbn1cblxuaW5oZXJpdHMoSnNvbnBSZWNlaXZlciwgRXZlbnRFbWl0dGVyKTtcblxuSnNvbnBSZWNlaXZlci5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2Fib3J0Jyk7XG4gIGlmIChnbG9iYWxbdXRpbHMuV1ByZWZpeF1bdGhpcy5pZF0pIHtcbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdKU09OUCB1c2VyIGFib3J0ZWQgcmVhZCcpO1xuICAgIGVyci5jb2RlID0gMTAwMDtcbiAgICB0aGlzLl9hYm9ydChlcnIpO1xuICB9XG59O1xuXG5Kc29ucFJlY2VpdmVyLnRpbWVvdXQgPSAzNTAwMDtcbkpzb25wUmVjZWl2ZXIuc2NyaXB0RXJyb3JUaW1lb3V0ID0gMTAwMDtcblxuSnNvbnBSZWNlaXZlci5wcm90b3R5cGUuX2NhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSkge1xuICBkZWJ1ZygnX2NhbGxiYWNrJywgZGF0YSk7XG4gIHRoaXMuX2NsZWFudXAoKTtcblxuICBpZiAodGhpcy5hYm9ydGluZykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChkYXRhKSB7XG4gICAgZGVidWcoJ21lc3NhZ2UnLCBkYXRhKTtcbiAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCBkYXRhKTtcbiAgfVxuICB0aGlzLmVtaXQoJ2Nsb3NlJywgbnVsbCwgJ25ldHdvcmsnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cbkpzb25wUmVjZWl2ZXIucHJvdG90eXBlLl9hYm9ydCA9IGZ1bmN0aW9uKGVycikge1xuICBkZWJ1ZygnX2Fib3J0JywgZXJyKTtcbiAgdGhpcy5fY2xlYW51cCgpO1xuICB0aGlzLmFib3J0aW5nID0gdHJ1ZTtcbiAgdGhpcy5lbWl0KCdjbG9zZScsIGVyci5jb2RlLCBlcnIubWVzc2FnZSk7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5Kc29ucFJlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX2NsZWFudXAnKTtcbiAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKTtcbiAgaWYgKHRoaXMuc2NyaXB0Mikge1xuICAgIHRoaXMuc2NyaXB0Mi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2NyaXB0Mik7XG4gICAgdGhpcy5zY3JpcHQyID0gbnVsbDtcbiAgfVxuICBpZiAodGhpcy5zY3JpcHQpIHtcbiAgICB2YXIgc2NyaXB0ID0gdGhpcy5zY3JpcHQ7XG4gICAgLy8gVW5mb3J0dW5hdGVseSwgeW91IGNhbid0IHJlYWxseSBhYm9ydCBzY3JpcHQgbG9hZGluZyBvZlxuICAgIC8vIHRoZSBzY3JpcHQuXG4gICAgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gc2NyaXB0Lm9uZXJyb3IgPVxuICAgICAgICBzY3JpcHQub25sb2FkID0gc2NyaXB0Lm9uY2xpY2sgPSBudWxsO1xuICAgIHRoaXMuc2NyaXB0ID0gbnVsbDtcbiAgfVxuICBkZWxldGUgZ2xvYmFsW3V0aWxzLldQcmVmaXhdW3RoaXMuaWRdO1xufTtcblxuSnNvbnBSZWNlaXZlci5wcm90b3R5cGUuX3NjcmlwdEVycm9yID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdfc2NyaXB0RXJyb3InKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZiAodGhpcy5lcnJvclRpbWVyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5lcnJvclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBpZiAoIXNlbGYubG9hZGVkT2theSkge1xuICAgICAgc2VsZi5fYWJvcnQobmV3IEVycm9yKCdKU09OUCBzY3JpcHQgbG9hZGVkIGFibm9ybWFsbHkgKG9uZXJyb3IpJykpO1xuICAgIH1cbiAgfSwgSnNvbnBSZWNlaXZlci5zY3JpcHRFcnJvclRpbWVvdXQpO1xufTtcblxuSnNvbnBSZWNlaXZlci5wcm90b3R5cGUuX2NyZWF0ZVNjcmlwdCA9IGZ1bmN0aW9uKHVybCkge1xuICBkZWJ1ZygnX2NyZWF0ZVNjcmlwdCcsIHVybCk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHNjcmlwdCA9IHRoaXMuc2NyaXB0ID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICB2YXIgc2NyaXB0MjsgIC8vIE9wZXJhIHN5bmNocm9ub3VzIGxvYWQgdHJpY2suXG5cbiAgc2NyaXB0LmlkID0gJ2EnICsgcmFuZG9tLnN0cmluZyg4KTtcbiAgc2NyaXB0LnNyYyA9IHVybDtcbiAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgc2NyaXB0LmNoYXJzZXQgPSAnVVRGLTgnO1xuICBzY3JpcHQub25lcnJvciA9IHRoaXMuX3NjcmlwdEVycm9yLmJpbmQodGhpcyk7XG4gIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zygnb25sb2FkJyk7XG4gICAgc2VsZi5fYWJvcnQobmV3IEVycm9yKCdKU09OUCBzY3JpcHQgbG9hZGVkIGFibm9ybWFsbHkgKG9ubG9hZCknKSk7XG4gIH07XG5cbiAgLy8gSUU5IGZpcmVzICdlcnJvcicgZXZlbnQgYWZ0ZXIgb25yZWFkeXN0YXRlY2hhbmdlIG9yIGJlZm9yZSwgaW4gcmFuZG9tIG9yZGVyLlxuICAvLyBVc2UgbG9hZGVkT2theSB0byBkZXRlcm1pbmUgaWYgYWN0dWFsbHkgZXJyb3JlZFxuICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIHNjcmlwdC5yZWFkeVN0YXRlKTtcbiAgICBpZiAoL2xvYWRlZHxjbG9zZWQvLnRlc3Qoc2NyaXB0LnJlYWR5U3RhdGUpKSB7XG4gICAgICBpZiAoc2NyaXB0ICYmIHNjcmlwdC5odG1sRm9yICYmIHNjcmlwdC5vbmNsaWNrKSB7XG4gICAgICAgIHNlbGYubG9hZGVkT2theSA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gSW4gSUUsIGFjdHVhbGx5IGV4ZWN1dGUgdGhlIHNjcmlwdC5cbiAgICAgICAgICBzY3JpcHQub25jbGljaygpO1xuICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2NyaXB0KSB7XG4gICAgICAgIHNlbGYuX2Fib3J0KG5ldyBFcnJvcignSlNPTlAgc2NyaXB0IGxvYWRlZCBhYm5vcm1hbGx5IChvbnJlYWR5c3RhdGVjaGFuZ2UpJykpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgLy8gSUU6IGV2ZW50L2h0bWxGb3Ivb25jbGljayB0cmljay5cbiAgLy8gT25lIGNhbid0IHJlbHkgb24gcHJvcGVyIG9yZGVyIGZvciBvbnJlYWR5c3RhdGVjaGFuZ2UuIEluIG9yZGVyIHRvXG4gIC8vIG1ha2Ugc3VyZSwgc2V0IGEgJ2h0bWxGb3InIGFuZCAnZXZlbnQnIHByb3BlcnRpZXMsIHNvIHRoYXRcbiAgLy8gc2NyaXB0IGNvZGUgd2lsbCBiZSBpbnN0YWxsZWQgYXMgJ29uY2xpY2snIGhhbmRsZXIgZm9yIHRoZVxuICAvLyBzY3JpcHQgb2JqZWN0LiBMYXRlciwgb25yZWFkeXN0YXRlY2hhbmdlLCBtYW51YWxseSBleGVjdXRlIHRoaXNcbiAgLy8gY29kZS4gRkYgYW5kIENocm9tZSBkb2Vzbid0IHdvcmsgd2l0aCAnZXZlbnQnIGFuZCAnaHRtbEZvcidcbiAgLy8gc2V0LiBGb3IgcmVmZXJlbmNlIHNlZTpcbiAgLy8gICBodHRwOi8vamF1Ym91cmcubmV0LzIwMTAvMDcvbG9hZGluZy1zY3JpcHQtYXMtb25jbGljay1oYW5kbGVyLW9mLmh0bWxcbiAgLy8gQWxzbywgcmVhZCBvbiB0aGF0IGFib3V0IHNjcmlwdCBvcmRlcmluZzpcbiAgLy8gICBodHRwOi8vd2lraS53aGF0d2cub3JnL3dpa2kvRHluYW1pY19TY3JpcHRfRXhlY3V0aW9uX09yZGVyXG4gIGlmICh0eXBlb2Ygc2NyaXB0LmFzeW5jID09PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwuZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHtcbiAgICAvLyBBY2NvcmRpbmcgdG8gbW96aWxsYSBkb2NzLCBpbiByZWNlbnQgYnJvd3NlcnMgc2NyaXB0LmFzeW5jIGRlZmF1bHRzXG4gICAgLy8gdG8gJ3RydWUnLCBzbyB3ZSBtYXkgdXNlIGl0IHRvIGRldGVjdCBhIGdvb2QgYnJvd3NlcjpcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9IVE1ML0VsZW1lbnQvc2NyaXB0XG4gICAgaWYgKCFicm93c2VyLmlzT3BlcmEoKSkge1xuICAgICAgLy8gTmFpdmVseSBhc3N1bWUgd2UncmUgaW4gSUVcbiAgICAgIHRyeSB7XG4gICAgICAgIHNjcmlwdC5odG1sRm9yID0gc2NyaXB0LmlkO1xuICAgICAgICBzY3JpcHQuZXZlbnQgPSAnb25jbGljayc7XG4gICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgICAgIH1cbiAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9wZXJhLCBzZWNvbmQgc3luYyBzY3JpcHQgaGFja1xuICAgICAgc2NyaXB0MiA9IHRoaXMuc2NyaXB0MiA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIHNjcmlwdDIudGV4dCA9IFwidHJ5e3ZhciBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1wiICsgc2NyaXB0LmlkICsgXCInKTsgaWYoYSlhLm9uZXJyb3IoKTt9Y2F0Y2goeCl7fTtcIjtcbiAgICAgIHNjcmlwdC5hc3luYyA9IHNjcmlwdDIuYXN5bmMgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGVvZiBzY3JpcHQuYXN5bmMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgfVxuXG4gIHZhciBoZWFkID0gZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gIGhlYWQuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgaGVhZC5maXJzdENoaWxkKTtcbiAgaWYgKHNjcmlwdDIpIHtcbiAgICBoZWFkLmluc2VydEJlZm9yZShzY3JpcHQyLCBoZWFkLmZpcnN0Q2hpbGQpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEpzb25wUmVjZWl2ZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvcmVjZWl2ZXIvanNvbnAuanNcbiAqKiBtb2R1bGUgaWQgPSA1NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmFuZG9tID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvcmFuZG9tJylcbiAgLCB1cmxVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3VybCcpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpzZW5kZXI6anNvbnAnKTtcbn1cblxudmFyIGZvcm0sIGFyZWE7XG5cbmZ1bmN0aW9uIGNyZWF0ZUlmcmFtZShpZCkge1xuICBkZWJ1ZygnY3JlYXRlSWZyYW1lJywgaWQpO1xuICB0cnkge1xuICAgIC8vIGllNiBkeW5hbWljIGlmcmFtZXMgd2l0aCB0YXJnZXQ9XCJcIiBzdXBwb3J0ICh0aGFua3MgQ2hyaXMgTGFtYmFjaGVyKVxuICAgIHJldHVybiBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnPGlmcmFtZSBuYW1lPVwiJyArIGlkICsgJ1wiPicpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgdmFyIGlmcmFtZSA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUubmFtZSA9IGlkO1xuICAgIHJldHVybiBpZnJhbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRm9ybSgpIHtcbiAgZGVidWcoJ2NyZWF0ZUZvcm0nKTtcbiAgZm9ybSA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gIGZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgZm9ybS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gIGZvcm0ubWV0aG9kID0gJ1BPU1QnO1xuICBmb3JtLmVuY3R5cGUgPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcbiAgZm9ybS5hY2NlcHRDaGFyc2V0ID0gJ1VURi04JztcblxuICBhcmVhID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gIGFyZWEubmFtZSA9ICdkJztcbiAgZm9ybS5hcHBlbmRDaGlsZChhcmVhKTtcblxuICBnbG9iYWwuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih1cmwsIHBheWxvYWQsIGNhbGxiYWNrKSB7XG4gIGRlYnVnKHVybCwgcGF5bG9hZCk7XG4gIGlmICghZm9ybSkge1xuICAgIGNyZWF0ZUZvcm0oKTtcbiAgfVxuICB2YXIgaWQgPSAnYScgKyByYW5kb20uc3RyaW5nKDgpO1xuICBmb3JtLnRhcmdldCA9IGlkO1xuICBmb3JtLmFjdGlvbiA9IHVybFV0aWxzLmFkZFF1ZXJ5KHVybFV0aWxzLmFkZFBhdGgodXJsLCAnL2pzb25wX3NlbmQnKSwgJ2k9JyArIGlkKTtcblxuICB2YXIgaWZyYW1lID0gY3JlYXRlSWZyYW1lKGlkKTtcbiAgaWZyYW1lLmlkID0gaWQ7XG4gIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBmb3JtLmFwcGVuZENoaWxkKGlmcmFtZSk7XG5cbiAgdHJ5IHtcbiAgICBhcmVhLnZhbHVlID0gcGF5bG9hZDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIHNlcmlvdXNseSBicm9rZW4gYnJvd3NlcnMgZ2V0IGhlcmVcbiAgfVxuICBmb3JtLnN1Ym1pdCgpO1xuXG4gIHZhciBjb21wbGV0ZWQgPSBmdW5jdGlvbihlcnIpIHtcbiAgICBkZWJ1ZygnY29tcGxldGVkJywgaWQsIGVycik7XG4gICAgaWYgKCFpZnJhbWUub25lcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlID0gaWZyYW1lLm9uZXJyb3IgPSBpZnJhbWUub25sb2FkID0gbnVsbDtcbiAgICAvLyBPcGVyYSBtaW5pIGRvZXNuJ3QgbGlrZSBpZiB3ZSBHQyBpZnJhbWVcbiAgICAvLyBpbW1lZGlhdGVseSwgdGh1cyB0aGlzIHRpbWVvdXQuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdjbGVhbmluZyB1cCcsIGlkKTtcbiAgICAgIGlmcmFtZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gICAgICBpZnJhbWUgPSBudWxsO1xuICAgIH0sIDUwMCk7XG4gICAgYXJlYS52YWx1ZSA9ICcnO1xuICAgIC8vIEl0IGlzIG5vdCBwb3NzaWJsZSB0byBkZXRlY3QgaWYgdGhlIGlmcmFtZSBzdWNjZWVkZWQgb3JcbiAgICAvLyBmYWlsZWQgdG8gc3VibWl0IG91ciBmb3JtLlxuICAgIGNhbGxiYWNrKGVycik7XG4gIH07XG4gIGlmcmFtZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ29uZXJyb3InLCBpZCk7XG4gICAgY29tcGxldGVkKCk7XG4gIH07XG4gIGlmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zygnb25sb2FkJywgaWQpO1xuICAgIGNvbXBsZXRlZCgpO1xuICB9O1xuICBpZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oZSkge1xuICAgIGRlYnVnKCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBpZCwgaWZyYW1lLnJlYWR5U3RhdGUsIGUpO1xuICAgIGlmIChpZnJhbWUucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgY29tcGxldGVkKCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ2Fib3J0ZWQnLCBpZCk7XG4gICAgY29tcGxldGVkKG5ldyBFcnJvcignQWJvcnRlZCcpKTtcbiAgfTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi90cmFuc3BvcnQvc2VuZGVyL2pzb25wLmpzXG4gKiogbW9kdWxlIGlkID0gNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICA7XG5cbmZ1bmN0aW9uIFhIUkZha2UoLyogbWV0aG9kLCB1cmwsIHBheWxvYWQsIG9wdHMgKi8pIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICB0aGlzLnRvID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIDIwMCwgJ3t9Jyk7XG4gIH0sIFhIUkZha2UudGltZW91dCk7XG59XG5cbmluaGVyaXRzKFhIUkZha2UsIEV2ZW50RW1pdHRlcik7XG5cblhIUkZha2UucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGNsZWFyVGltZW91dCh0aGlzLnRvKTtcbn07XG5cblhIUkZha2UudGltZW91dCA9IDIwMDA7XG5cbm1vZHVsZS5leHBvcnRzID0gWEhSRmFrZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC9zZW5kZXIveGhyLWZha2UuanNcbiAqKiBtb2R1bGUgaWQgPSA1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy9ldmVudCcpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91cmwnKVxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIFdlYnNvY2tldERyaXZlciA9IHJlcXVpcmUoJy4vZHJpdmVyL3dlYnNvY2tldCcpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDp3ZWJzb2NrZXQnKTtcbn1cblxuZnVuY3Rpb24gV2ViU29ja2V0VHJhbnNwb3J0KHRyYW5zVXJsLCBpZ25vcmUsIG9wdGlvbnMpIHtcbiAgaWYgKCFXZWJTb2NrZXRUcmFuc3BvcnQuZW5hYmxlZCgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG4gIH1cblxuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcbiAgZGVidWcoJ2NvbnN0cnVjdG9yJywgdHJhbnNVcmwpO1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHVybCA9IHVybFV0aWxzLmFkZFBhdGgodHJhbnNVcmwsICcvd2Vic29ja2V0Jyk7XG4gIGlmICh1cmwuc2xpY2UoMCwgNSkgPT09ICdodHRwcycpIHtcbiAgICB1cmwgPSAnd3NzJyArIHVybC5zbGljZSg1KTtcbiAgfSBlbHNlIHtcbiAgICB1cmwgPSAnd3MnICsgdXJsLnNsaWNlKDQpO1xuICB9XG4gIHRoaXMudXJsID0gdXJsO1xuXG4gIHRoaXMud3MgPSBuZXcgV2Vic29ja2V0RHJpdmVyKHRoaXMudXJsLCB1bmRlZmluZWQsIG9wdGlvbnMpO1xuICB0aGlzLndzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICBkZWJ1ZygnbWVzc2FnZSBldmVudCcsIGUuZGF0YSk7XG4gICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgZS5kYXRhKTtcbiAgfTtcbiAgLy8gRmlyZWZveCBoYXMgYW4gaW50ZXJlc3RpbmcgYnVnLiBJZiBhIHdlYnNvY2tldCBjb25uZWN0aW9uIGlzXG4gIC8vIGNyZWF0ZWQgYWZ0ZXIgb251bmxvYWQsIGl0IHN0YXlzIGFsaXZlIGV2ZW4gd2hlbiB1c2VyXG4gIC8vIG5hdmlnYXRlcyBhd2F5IGZyb20gdGhlIHBhZ2UuIEluIHN1Y2ggc2l0dWF0aW9uIGxldCdzIGxpZSAtXG4gIC8vIGxldCdzIG5vdCBvcGVuIHRoZSB3cyBjb25uZWN0aW9uIGF0IGFsbC4gU2VlOlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vc29ja2pzL3NvY2tqcy1jbGllbnQvaXNzdWVzLzI4XG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NjA4NVxuICB0aGlzLnVubG9hZFJlZiA9IHV0aWxzLnVubG9hZEFkZChmdW5jdGlvbigpIHtcbiAgICBkZWJ1ZygndW5sb2FkJyk7XG4gICAgc2VsZi53cy5jbG9zZSgpO1xuICB9KTtcbiAgdGhpcy53cy5vbmNsb3NlID0gZnVuY3Rpb24oZSkge1xuICAgIGRlYnVnKCdjbG9zZSBldmVudCcsIGUuY29kZSwgZS5yZWFzb24pO1xuICAgIHNlbGYuZW1pdCgnY2xvc2UnLCBlLmNvZGUsIGUucmVhc29uKTtcbiAgICBzZWxmLl9jbGVhbnVwKCk7XG4gIH07XG4gIHRoaXMud3Mub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcbiAgICBkZWJ1ZygnZXJyb3IgZXZlbnQnLCBlKTtcbiAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgMTAwNiwgJ1dlYlNvY2tldCBjb25uZWN0aW9uIGJyb2tlbicpO1xuICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgfTtcbn1cblxuaW5oZXJpdHMoV2ViU29ja2V0VHJhbnNwb3J0LCBFdmVudEVtaXR0ZXIpO1xuXG5XZWJTb2NrZXRUcmFuc3BvcnQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihkYXRhKSB7XG4gIHZhciBtc2cgPSAnWycgKyBkYXRhICsgJ10nO1xuICBkZWJ1Zygnc2VuZCcsIG1zZyk7XG4gIHRoaXMud3Muc2VuZChtc2cpO1xufTtcblxuV2ViU29ja2V0VHJhbnNwb3J0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgaWYgKHRoaXMud3MpIHtcbiAgICB0aGlzLndzLmNsb3NlKCk7XG4gIH1cbiAgdGhpcy5fY2xlYW51cCgpO1xufTtcblxuV2ViU29ja2V0VHJhbnNwb3J0LnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX2NsZWFudXAnKTtcbiAgdmFyIHdzID0gdGhpcy53cztcbiAgaWYgKHdzKSB7XG4gICAgd3Mub25tZXNzYWdlID0gd3Mub25jbG9zZSA9IHdzLm9uZXJyb3IgPSBudWxsO1xuICB9XG4gIHV0aWxzLnVubG9hZERlbCh0aGlzLnVubG9hZFJlZik7XG4gIHRoaXMudW5sb2FkUmVmID0gdGhpcy53cyA9IG51bGw7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5XZWJTb2NrZXRUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnZW5hYmxlZCcpO1xuICByZXR1cm4gISFXZWJzb2NrZXREcml2ZXI7XG59O1xuV2ViU29ja2V0VHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUgPSAnd2Vic29ja2V0JztcblxuLy8gSW4gdGhlb3J5LCB3cyBzaG91bGQgcmVxdWlyZSAxIHJvdW5kIHRyaXAuIEJ1dCBpbiBjaHJvbWUsIHRoaXMgaXNcbi8vIG5vdCB2ZXJ5IHN0YWJsZSBvdmVyIFNTTC4gTW9zdCBsaWtlbHkgYSB3cyBjb25uZWN0aW9uIHJlcXVpcmVzIGFcbi8vIHNlcGFyYXRlIFNTTCBjb25uZWN0aW9uLCBpbiB3aGljaCBjYXNlIDIgcm91bmQgdHJpcHMgYXJlIGFuXG4vLyBhYnNvbHV0ZSBtaW51bXVtLlxuV2ViU29ja2V0VHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlNvY2tldFRyYW5zcG9ydDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3RyYW5zcG9ydC93ZWJzb2NrZXQuanNcbiAqKiBtb2R1bGUgaWQgPSA1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgQWpheEJhc2VkVHJhbnNwb3J0ID0gcmVxdWlyZSgnLi9saWIvYWpheC1iYXNlZCcpXG4gICwgWGRyU3RyZWFtaW5nVHJhbnNwb3J0ID0gcmVxdWlyZSgnLi94ZHItc3RyZWFtaW5nJylcbiAgLCBYaHJSZWNlaXZlciA9IHJlcXVpcmUoJy4vcmVjZWl2ZXIveGhyJylcbiAgLCBYRFJPYmplY3QgPSByZXF1aXJlKCcuL3NlbmRlci94ZHInKVxuICA7XG5cbmZ1bmN0aW9uIFhkclBvbGxpbmdUcmFuc3BvcnQodHJhbnNVcmwpIHtcbiAgaWYgKCFYRFJPYmplY3QuZW5hYmxlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG4gIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL3hocicsIFhoclJlY2VpdmVyLCBYRFJPYmplY3QpO1xufVxuXG5pbmhlcml0cyhYZHJQb2xsaW5nVHJhbnNwb3J0LCBBamF4QmFzZWRUcmFuc3BvcnQpO1xuXG5YZHJQb2xsaW5nVHJhbnNwb3J0LmVuYWJsZWQgPSBYZHJTdHJlYW1pbmdUcmFuc3BvcnQuZW5hYmxlZDtcblhkclBvbGxpbmdUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICd4ZHItcG9sbGluZyc7XG5YZHJQb2xsaW5nVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyOyAvLyBwcmVmbGlnaHQsIGFqYXhcblxubW9kdWxlLmV4cG9ydHMgPSBYZHJQb2xsaW5nVHJhbnNwb3J0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L3hkci1wb2xsaW5nLmpzXG4gKiogbW9kdWxlIGlkID0gNjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEFqYXhCYXNlZFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vbGliL2FqYXgtYmFzZWQnKVxuICAsIFhoclJlY2VpdmVyID0gcmVxdWlyZSgnLi9yZWNlaXZlci94aHInKVxuICAsIFhIUkNvcnNPYmplY3QgPSByZXF1aXJlKCcuL3NlbmRlci94aHItY29ycycpXG4gICwgWEhSTG9jYWxPYmplY3QgPSByZXF1aXJlKCcuL3NlbmRlci94aHItbG9jYWwnKVxuICAsIGJyb3dzZXIgPSByZXF1aXJlKCcuLi91dGlscy9icm93c2VyJylcbiAgO1xuXG5mdW5jdGlvbiBYaHJTdHJlYW1pbmdUcmFuc3BvcnQodHJhbnNVcmwpIHtcbiAgaWYgKCFYSFJMb2NhbE9iamVjdC5lbmFibGVkICYmICFYSFJDb3JzT2JqZWN0LmVuYWJsZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBjcmVhdGVkIHdoZW4gZGlzYWJsZWQnKTtcbiAgfVxuICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy94aHJfc3RyZWFtaW5nJywgWGhyUmVjZWl2ZXIsIFhIUkNvcnNPYmplY3QpO1xufVxuXG5pbmhlcml0cyhYaHJTdHJlYW1pbmdUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cblhoclN0cmVhbWluZ1RyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oaW5mbykge1xuICBpZiAoaW5mby5udWxsT3JpZ2luKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIE9wZXJhIGRvZXNuJ3Qgc3VwcG9ydCB4aHItc3RyZWFtaW5nICM2MFxuICAvLyBCdXQgaXQgbWlnaHQgYmUgYWJsZSB0byAjOTJcbiAgaWYgKGJyb3dzZXIuaXNPcGVyYSgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIFhIUkNvcnNPYmplY3QuZW5hYmxlZDtcbn07XG5cblhoclN0cmVhbWluZ1RyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ3hoci1zdHJlYW1pbmcnO1xuWGhyU3RyZWFtaW5nVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyOyAvLyBwcmVmbGlnaHQsIGFqYXhcblxuLy8gU2FmYXJpIGdldHMgY29uZnVzZWQgd2hlbiBhIHN0cmVhbWluZyBhamF4IHJlcXVlc3QgaXMgc3RhcnRlZFxuLy8gYmVmb3JlIG9ubG9hZC4gVGhpcyBjYXVzZXMgdGhlIGxvYWQgaW5kaWNhdG9yIHRvIHNwaW4gaW5kZWZpbmV0ZWx5LlxuLy8gT25seSByZXF1aXJlIGJvZHkgd2hlbiB1c2VkIGluIGEgYnJvd3NlclxuWGhyU3RyZWFtaW5nVHJhbnNwb3J0Lm5lZWRCb2R5ID0gISFnbG9iYWwuZG9jdW1lbnQ7XG5cbm1vZHVsZS5leHBvcnRzID0gWGhyU3RyZWFtaW5nVHJhbnNwb3J0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdHJhbnNwb3J0L3hoci1zdHJlYW1pbmcuanNcbiAqKiBtb2R1bGUgaWQgPSA2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5pZiAoZ2xvYmFsLmNyeXB0byAmJiBnbG9iYWwuY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICBtb2R1bGUuZXhwb3J0cy5yYW5kb21CeXRlcyA9IGZ1bmN0aW9uKGxlbmd0aCkge1xuICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgZ2xvYmFsLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYnl0ZXMpO1xuICAgIHJldHVybiBieXRlcztcbiAgfTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzLnJhbmRvbUJ5dGVzID0gZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgdmFyIGJ5dGVzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgYnl0ZXNbaV0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXM7XG4gIH07XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi91dGlscy9icm93c2VyLWNyeXB0by5qc1xuICoqIG1vZHVsZSBpZCA9IDYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJyk7XG5cbi8vIFNvbWUgZXh0cmEgY2hhcmFjdGVycyB0aGF0IENocm9tZSBnZXRzIHdyb25nLCBhbmQgc3Vic3RpdHV0ZXMgd2l0aFxuLy8gc29tZXRoaW5nIGVsc2Ugb24gdGhlIHdpcmUuXG52YXIgZXh0cmFFc2NhcGFibGUgPSAvW1xceDAwLVxceDFmXFx1ZDgwMC1cXHVkZmZmXFx1ZmZmZVxcdWZmZmZcXHUwMzAwLVxcdTAzMzNcXHUwMzNkLVxcdTAzNDZcXHUwMzRhLVxcdTAzNGNcXHUwMzUwLVxcdTAzNTJcXHUwMzU3LVxcdTAzNThcXHUwMzVjLVxcdTAzNjJcXHUwMzc0XFx1MDM3ZVxcdTAzODdcXHUwNTkxLVxcdTA1YWZcXHUwNWM0XFx1MDYxMC1cXHUwNjE3XFx1MDY1My1cXHUwNjU0XFx1MDY1Ny1cXHUwNjViXFx1MDY1ZC1cXHUwNjVlXFx1MDZkZi1cXHUwNmUyXFx1MDZlYi1cXHUwNmVjXFx1MDczMFxcdTA3MzItXFx1MDczM1xcdTA3MzUtXFx1MDczNlxcdTA3M2FcXHUwNzNkXFx1MDczZi1cXHUwNzQxXFx1MDc0M1xcdTA3NDVcXHUwNzQ3XFx1MDdlYi1cXHUwN2YxXFx1MDk1MVxcdTA5NTgtXFx1MDk1ZlxcdTA5ZGMtXFx1MDlkZFxcdTA5ZGZcXHUwYTMzXFx1MGEzNlxcdTBhNTktXFx1MGE1YlxcdTBhNWVcXHUwYjVjLVxcdTBiNWRcXHUwZTM4LVxcdTBlMzlcXHUwZjQzXFx1MGY0ZFxcdTBmNTJcXHUwZjU3XFx1MGY1Y1xcdTBmNjlcXHUwZjcyLVxcdTBmNzZcXHUwZjc4XFx1MGY4MC1cXHUwZjgzXFx1MGY5M1xcdTBmOWRcXHUwZmEyXFx1MGZhN1xcdTBmYWNcXHUwZmI5XFx1MTkzOS1cXHUxOTNhXFx1MWExN1xcdTFiNmJcXHUxY2RhLVxcdTFjZGJcXHUxZGMwLVxcdTFkY2ZcXHUxZGZjXFx1MWRmZVxcdTFmNzFcXHUxZjczXFx1MWY3NVxcdTFmNzdcXHUxZjc5XFx1MWY3YlxcdTFmN2RcXHUxZmJiXFx1MWZiZVxcdTFmYzlcXHUxZmNiXFx1MWZkM1xcdTFmZGJcXHUxZmUzXFx1MWZlYlxcdTFmZWUtXFx1MWZlZlxcdTFmZjlcXHUxZmZiXFx1MWZmZFxcdTIwMDAtXFx1MjAwMVxcdTIwZDAtXFx1MjBkMVxcdTIwZDQtXFx1MjBkN1xcdTIwZTctXFx1MjBlOVxcdTIxMjZcXHUyMTJhLVxcdTIxMmJcXHUyMzI5LVxcdTIzMmFcXHUyYWRjXFx1MzAyYi1cXHUzMDJjXFx1YWFiMi1cXHVhYWIzXFx1ZjkwMC1cXHVmYTBkXFx1ZmExMFxcdWZhMTJcXHVmYTE1LVxcdWZhMWVcXHVmYTIwXFx1ZmEyMlxcdWZhMjUtXFx1ZmEyNlxcdWZhMmEtXFx1ZmEyZFxcdWZhMzAtXFx1ZmE2ZFxcdWZhNzAtXFx1ZmFkOVxcdWZiMWRcXHVmYjFmXFx1ZmIyYS1cXHVmYjM2XFx1ZmIzOC1cXHVmYjNjXFx1ZmIzZVxcdWZiNDAtXFx1ZmI0MVxcdWZiNDMtXFx1ZmI0NFxcdWZiNDYtXFx1ZmI0ZVxcdWZmZjAtXFx1ZmZmZl0vZ1xuICAsIGV4dHJhTG9va3VwO1xuXG4vLyBUaGlzIG1heSBiZSBxdWl0ZSBzbG93LCBzbyBsZXQncyBkZWxheSB1bnRpbCB1c2VyIGFjdHVhbGx5IHVzZXMgYmFkXG4vLyBjaGFyYWN0ZXJzLlxudmFyIHVucm9sbExvb2t1cCA9IGZ1bmN0aW9uKGVzY2FwYWJsZSkge1xuICB2YXIgaTtcbiAgdmFyIHVucm9sbGVkID0ge307XG4gIHZhciBjID0gW107XG4gIGZvciAoaSA9IDA7IGkgPCA2NTUzNjsgaSsrKSB7XG4gICAgYy5wdXNoKCBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpICk7XG4gIH1cbiAgZXNjYXBhYmxlLmxhc3RJbmRleCA9IDA7XG4gIGMuam9pbignJykucmVwbGFjZShlc2NhcGFibGUsIGZ1bmN0aW9uKGEpIHtcbiAgICB1bnJvbGxlZFsgYSBdID0gJ1xcXFx1JyArICgnMDAwMCcgKyBhLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7XG4gICAgcmV0dXJuICcnO1xuICB9KTtcbiAgZXNjYXBhYmxlLmxhc3RJbmRleCA9IDA7XG4gIHJldHVybiB1bnJvbGxlZDtcbn07XG5cbi8vIFF1b3RlIHN0cmluZywgYWxzbyB0YWtpbmcgY2FyZSBvZiB1bmljb2RlIGNoYXJhY3RlcnMgdGhhdCBicm93c2Vyc1xuLy8gb2Z0ZW4gYnJlYWsuIEVzcGVjaWFsbHksIHRha2UgY2FyZSBvZiB1bmljb2RlIHN1cnJvZ2F0ZXM6XG4vLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01hcHBpbmdfb2ZfVW5pY29kZV9jaGFyYWN0ZXJzI1N1cnJvZ2F0ZXNcbm1vZHVsZS5leHBvcnRzID0ge1xuICBxdW90ZTogZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgdmFyIHF1b3RlZCA9IEpTT04zLnN0cmluZ2lmeShzdHJpbmcpO1xuXG4gICAgLy8gSW4gbW9zdCBjYXNlcyB0aGlzIHNob3VsZCBiZSB2ZXJ5IGZhc3QgYW5kIGdvb2QgZW5vdWdoLlxuICAgIGV4dHJhRXNjYXBhYmxlLmxhc3RJbmRleCA9IDA7XG4gICAgaWYgKCFleHRyYUVzY2FwYWJsZS50ZXN0KHF1b3RlZCkpIHtcbiAgICAgIHJldHVybiBxdW90ZWQ7XG4gICAgfVxuXG4gICAgaWYgKCFleHRyYUxvb2t1cCkge1xuICAgICAgZXh0cmFMb29rdXAgPSB1bnJvbGxMb29rdXAoZXh0cmFFc2NhcGFibGUpO1xuICAgIH1cblxuICAgIHJldHVybiBxdW90ZWQucmVwbGFjZShleHRyYUVzY2FwYWJsZSwgZnVuY3Rpb24oYSkge1xuICAgICAgcmV0dXJuIGV4dHJhTG9va3VwW2FdO1xuICAgIH0pO1xuICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vc29ja2pzLWNsaWVudC9saWIvdXRpbHMvZXNjYXBlLmpzXG4gKiogbW9kdWxlIGlkID0gNjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGxvZ09iamVjdCA9IHt9O1xuWydsb2cnLCAnZGVidWcnLCAnd2FybiddLmZvckVhY2goZnVuY3Rpb24gKGxldmVsKSB7XG4gIHZhciBsZXZlbEV4aXN0cztcblxuICB0cnkge1xuICAgIGxldmVsRXhpc3RzID0gZ2xvYmFsLmNvbnNvbGUgJiYgZ2xvYmFsLmNvbnNvbGVbbGV2ZWxdICYmIGdsb2JhbC5jb25zb2xlW2xldmVsXS5hcHBseTtcbiAgfSBjYXRjaChlKSB7XG4gICAgLy8gZG8gbm90aGluZ1xuICB9XG5cbiAgbG9nT2JqZWN0W2xldmVsXSA9IGxldmVsRXhpc3RzID8gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWwuY29uc29sZVtsZXZlbF0uYXBwbHkoZ2xvYmFsLmNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gIH0gOiAobGV2ZWwgPT09ICdsb2cnID8gZnVuY3Rpb24gKCkge30gOiBsb2dPYmplY3QubG9nKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGxvZ09iamVjdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NvY2tqcy1jbGllbnQvbGliL3V0aWxzL2xvZy5qc1xuICoqIG1vZHVsZSBpZCA9IDY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6dXRpbHM6dHJhbnNwb3J0Jyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXZhaWxhYmxlVHJhbnNwb3J0cykge1xuICByZXR1cm4ge1xuICAgIGZpbHRlclRvRW5hYmxlZDogZnVuY3Rpb24odHJhbnNwb3J0c1doaXRlbGlzdCwgaW5mbykge1xuICAgICAgdmFyIHRyYW5zcG9ydHMgPSB7XG4gICAgICAgIG1haW46IFtdXG4gICAgICAsIGZhY2FkZTogW11cbiAgICAgIH07XG4gICAgICBpZiAoIXRyYW5zcG9ydHNXaGl0ZWxpc3QpIHtcbiAgICAgICAgdHJhbnNwb3J0c1doaXRlbGlzdCA9IFtdO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdHJhbnNwb3J0c1doaXRlbGlzdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdHJhbnNwb3J0c1doaXRlbGlzdCA9IFt0cmFuc3BvcnRzV2hpdGVsaXN0XTtcbiAgICAgIH1cblxuICAgICAgYXZhaWxhYmxlVHJhbnNwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zKSB7XG4gICAgICAgIGlmICghdHJhbnMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnMudHJhbnNwb3J0TmFtZSA9PT0gJ3dlYnNvY2tldCcgJiYgaW5mby53ZWJzb2NrZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgZGVidWcoJ2Rpc2FibGVkIGZyb20gc2VydmVyJywgJ3dlYnNvY2tldCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmFuc3BvcnRzV2hpdGVsaXN0Lmxlbmd0aCAmJlxuICAgICAgICAgICAgdHJhbnNwb3J0c1doaXRlbGlzdC5pbmRleE9mKHRyYW5zLnRyYW5zcG9ydE5hbWUpID09PSAtMSkge1xuICAgICAgICAgIGRlYnVnKCdub3QgaW4gd2hpdGVsaXN0JywgdHJhbnMudHJhbnNwb3J0TmFtZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyYW5zLmVuYWJsZWQoaW5mbykpIHtcbiAgICAgICAgICBkZWJ1ZygnZW5hYmxlZCcsIHRyYW5zLnRyYW5zcG9ydE5hbWUpO1xuICAgICAgICAgIHRyYW5zcG9ydHMubWFpbi5wdXNoKHRyYW5zKTtcbiAgICAgICAgICBpZiAodHJhbnMuZmFjYWRlVHJhbnNwb3J0KSB7XG4gICAgICAgICAgICB0cmFuc3BvcnRzLmZhY2FkZS5wdXNoKHRyYW5zLmZhY2FkZVRyYW5zcG9ydCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlYnVnKCdkaXNhYmxlZCcsIHRyYW5zLnRyYW5zcG9ydE5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0cmFuc3BvcnRzO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zb2NranMtY2xpZW50L2xpYi91dGlscy90cmFuc3BvcnQuanNcbiAqKiBtb2R1bGUgaWQgPSA2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgc2xhc2hlcyA9IC9eW0EtWmEtel1bQS1aYS16MC05Ky0uXSo6XFwvXFwvLztcblxuLyoqXG4gKiBUaGVzZSBwcm9wZXJ0aWVzIHNob3VsZCBub3QgYmUgY29waWVkIG9yIGluaGVyaXRlZCBmcm9tLiBUaGlzIGlzIG9ubHkgbmVlZGVkXG4gKiBmb3IgYWxsIG5vbiBibG9iIFVSTCdzIGFzIGEgYmxvYiBVUkwgZG9lcyBub3QgaW5jbHVkZSBhIGhhc2gsIG9ubHkgdGhlXG4gKiBvcmlnaW4uXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBpZ25vcmUgPSB7IGhhc2g6IDEsIHF1ZXJ5OiAxIH1cbiAgLCBVUkw7XG5cbi8qKlxuICogVGhlIGxvY2F0aW9uIG9iamVjdCBkaWZmZXJzIHdoZW4geW91ciBjb2RlIGlzIGxvYWRlZCB0aHJvdWdoIGEgbm9ybWFsIHBhZ2UsXG4gKiBXb3JrZXIgb3IgdGhyb3VnaCBhIHdvcmtlciB1c2luZyBhIGJsb2IuIEFuZCB3aXRoIHRoZSBibG9iYmxlIGJlZ2lucyB0aGVcbiAqIHRyb3VibGUgYXMgdGhlIGxvY2F0aW9uIG9iamVjdCB3aWxsIGNvbnRhaW4gdGhlIFVSTCBvZiB0aGUgYmxvYiwgbm90IHRoZVxuICogbG9jYXRpb24gb2YgdGhlIHBhZ2Ugd2hlcmUgb3VyIGNvZGUgaXMgbG9hZGVkIGluLiBUaGUgYWN0dWFsIG9yaWdpbiBpc1xuICogZW5jb2RlZCBpbiB0aGUgYHBhdGhuYW1lYCBzbyB3ZSBjYW4gdGhhbmtmdWxseSBnZW5lcmF0ZSBhIGdvb2QgXCJkZWZhdWx0XCJcbiAqIGxvY2F0aW9uIGZyb20gaXQgc28gd2UgY2FuIGdlbmVyYXRlIHByb3BlciByZWxhdGl2ZSBVUkwncyBhZ2Fpbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGxvYyBPcHRpb25hbCBkZWZhdWx0IGxvY2F0aW9uIG9iamVjdC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IGxvbGNhdGlvbiBvYmplY3QuXG4gKiBAYXBpIHB1YmxpY1xuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGxvbGNhdGlvbihsb2MpIHtcbiAgbG9jID0gbG9jIHx8IGdsb2JhbC5sb2NhdGlvbiB8fCB7fTtcbiAgVVJMID0gVVJMIHx8IHJlcXVpcmUoJy4vJyk7XG5cbiAgdmFyIGZpbmFsZGVzdGluYXRpb24gPSB7fVxuICAgICwgdHlwZSA9IHR5cGVvZiBsb2NcbiAgICAsIGtleTtcblxuICBpZiAoJ2Jsb2I6JyA9PT0gbG9jLnByb3RvY29sKSB7XG4gICAgZmluYWxkZXN0aW5hdGlvbiA9IG5ldyBVUkwodW5lc2NhcGUobG9jLnBhdGhuYW1lKSwge30pO1xuICB9IGVsc2UgaWYgKCdzdHJpbmcnID09PSB0eXBlKSB7XG4gICAgZmluYWxkZXN0aW5hdGlvbiA9IG5ldyBVUkwobG9jLCB7fSk7XG4gICAgZm9yIChrZXkgaW4gaWdub3JlKSBkZWxldGUgZmluYWxkZXN0aW5hdGlvbltrZXldO1xuICB9IGVsc2UgaWYgKCdvYmplY3QnID09PSB0eXBlKSB7XG4gICAgZm9yIChrZXkgaW4gbG9jKSB7XG4gICAgICBpZiAoa2V5IGluIGlnbm9yZSkgY29udGludWU7XG4gICAgICBmaW5hbGRlc3RpbmF0aW9uW2tleV0gPSBsb2Nba2V5XTtcbiAgICB9XG5cbiAgICBpZiAoZmluYWxkZXN0aW5hdGlvbi5zbGFzaGVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpbmFsZGVzdGluYXRpb24uc2xhc2hlcyA9IHNsYXNoZXMudGVzdChsb2MuaHJlZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZpbmFsZGVzdGluYXRpb247XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdXJsLXBhcnNlL2xvbGNhdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19hbWRfb3B0aW9uc19fO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9idWlsZGluL2FtZC1vcHRpb25zLmpzXG4gKiogbW9kdWxlIGlkID0gNjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJsb2FkZWRcIiwge1xyXG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlLmw7IH1cclxuXHRcdH0pO1xyXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XHJcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcblx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXHJcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGUuaTsgfVxyXG5cdFx0fSk7XHJcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHR9XHJcblx0cmV0dXJuIG1vZHVsZTtcclxufVxyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9